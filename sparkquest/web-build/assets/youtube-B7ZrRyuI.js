const g=i=>{const t=i.match(/PT(\d+H)?(\d+M)?(\d+S)?/);if(!t)return 0;const s=parseInt(t[1]||"0")||0,r=parseInt(t[2]||"0")||0,o=parseInt(t[3]||"0")||0;return s*60+r+(o>30?1:0)},I=async(i,t)=>{try{const s=`https://www.googleapis.com/youtube/v3/playlists?part=snippet&id=${i}&key=${t}`,o=await(await fetch(s)).json();if(o.error)throw new Error(`YouTube API Error: ${o.error.message} (Code: ${o.error.code})`);if(!o.items||o.items.length===0)throw new Error("Playlist not found (or Private)");const u=o.items[0].snippet.title,h=`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${i}&maxResults=50&key=${t}`,n=await(await fetch(h)).json();if(!n.items)throw new Error("Failed to fetch playlist items");const m=`https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&id=${n.items.map(e=>e.snippet.resourceId.videoId).join(",")}&key=${t}`,a=await(await fetch(m)).json();if(!a.items)throw new Error("Failed to fetch video details");const w=a.items.map(e=>{var l,p,c,d;return{id:e.id,title:e.snippet.title,description:e.snippet.description,thumbnail:((p=(l=e.snippet.thumbnails)==null?void 0:l.high)==null?void 0:p.url)||((d=(c=e.snippet.thumbnails)==null?void 0:c.medium)==null?void 0:d.url)||"",channelTitle:e.snippet.channelTitle,duration:e.contentDetails.duration,categoryId:e.snippet.categoryId}});return{playlistTitle:u,videos:w}}catch(s){throw console.error("YouTube Import Error:",s),s}},$=i=>{if(!i)return null;const t=i.trim();if(/^PL[a-zA-Z0-9_-]+$/.test(t)||/^[a-zA-Z0-9_-]+$/.test(t)&&t.length>10)return t;const s=/[?&]list=([^&]+)/i,r=t.match(s);return r?r[1]:null};export{$ as extractPlaylistId,I as fetchYouTubePlaylist,g as parseDuration};
