(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function nu(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var em={exports:{}},hc={},tm={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Av;function wT(){if(Av)return Be;Av=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.iterator;function v(z){return z===null||typeof z!="object"?null:(z=y&&z[y]||z["@@iterator"],typeof z=="function"?z:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,E={};function T(z,Y,Ne){this.props=z,this.context=Y,this.refs=E,this.updater=Ne||_}T.prototype.isReactComponent={},T.prototype.setState=function(z,Y){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,Y,"setState")},T.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function M(){}M.prototype=T.prototype;function O(z,Y,Ne){this.props=z,this.context=Y,this.refs=E,this.updater=Ne||_}var q=O.prototype=new M;q.constructor=O,k(q,T.prototype),q.isPureReactComponent=!0;var $=Array.isArray,Q=Object.prototype.hasOwnProperty,K={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function j(z,Y,Ne){var re,ae={},xe=null,Ce=null;if(Y!=null)for(re in Y.ref!==void 0&&(Ce=Y.ref),Y.key!==void 0&&(xe=""+Y.key),Y)Q.call(Y,re)&&!P.hasOwnProperty(re)&&(ae[re]=Y[re]);var De=arguments.length-2;if(De===1)ae.children=Ne;else if(1<De){for(var He=Array(De),ve=0;ve<De;ve++)He[ve]=arguments[ve+2];ae.children=He}if(z&&z.defaultProps)for(re in De=z.defaultProps,De)ae[re]===void 0&&(ae[re]=De[re]);return{$$typeof:n,type:z,key:xe,ref:Ce,props:ae,_owner:K.current}}function V(z,Y){return{$$typeof:n,type:z.type,key:Y,ref:z.ref,props:z.props,_owner:z._owner}}function I(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function L(z){var Y={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(Ne){return Y[Ne]})}var D=/\/+/g;function A(z,Y){return typeof z=="object"&&z!==null&&z.key!=null?L(""+z.key):Y.toString(36)}function he(z,Y,Ne,re,ae){var xe=typeof z;(xe==="undefined"||xe==="boolean")&&(z=null);var Ce=!1;if(z===null)Ce=!0;else switch(xe){case"string":case"number":Ce=!0;break;case"object":switch(z.$$typeof){case n:case e:Ce=!0}}if(Ce)return Ce=z,ae=ae(Ce),z=re===""?"."+A(Ce,0):re,$(ae)?(Ne="",z!=null&&(Ne=z.replace(D,"$&/")+"/"),he(ae,Y,Ne,"",function(ve){return ve})):ae!=null&&(I(ae)&&(ae=V(ae,Ne+(!ae.key||Ce&&Ce.key===ae.key?"":(""+ae.key).replace(D,"$&/")+"/")+z)),Y.push(ae)),1;if(Ce=0,re=re===""?".":re+":",$(z))for(var De=0;De<z.length;De++){xe=z[De];var He=re+A(xe,De);Ce+=he(xe,Y,Ne,He,ae)}else if(He=v(z),typeof He=="function")for(z=He.call(z),De=0;!(xe=z.next()).done;)xe=xe.value,He=re+A(xe,De++),Ce+=he(xe,Y,Ne,He,ae);else if(xe==="object")throw Y=String(z),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Ce}function ie(z,Y,Ne){if(z==null)return z;var re=[],ae=0;return he(z,re,"","",function(xe){return Y.call(Ne,xe,ae++)}),re}function le(z){if(z._status===-1){var Y=z._result;Y=Y(),Y.then(function(Ne){(z._status===0||z._status===-1)&&(z._status=1,z._result=Ne)},function(Ne){(z._status===0||z._status===-1)&&(z._status=2,z._result=Ne)}),z._status===-1&&(z._status=0,z._result=Y)}if(z._status===1)return z._result.default;throw z._result}var G={current:null},F={transition:null},U={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:F,ReactCurrentOwner:K};function X(){throw Error("act(...) is not supported in production builds of React.")}return Be.Children={map:ie,forEach:function(z,Y,Ne){ie(z,function(){Y.apply(this,arguments)},Ne)},count:function(z){var Y=0;return ie(z,function(){Y++}),Y},toArray:function(z){return ie(z,function(Y){return Y})||[]},only:function(z){if(!I(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Be.Component=T,Be.Fragment=t,Be.Profiler=i,Be.PureComponent=O,Be.StrictMode=s,Be.Suspense=f,Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,Be.act=X,Be.cloneElement=function(z,Y,Ne){if(z==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+z+".");var re=k({},z.props),ae=z.key,xe=z.ref,Ce=z._owner;if(Y!=null){if(Y.ref!==void 0&&(xe=Y.ref,Ce=K.current),Y.key!==void 0&&(ae=""+Y.key),z.type&&z.type.defaultProps)var De=z.type.defaultProps;for(He in Y)Q.call(Y,He)&&!P.hasOwnProperty(He)&&(re[He]=Y[He]===void 0&&De!==void 0?De[He]:Y[He])}var He=arguments.length-2;if(He===1)re.children=Ne;else if(1<He){De=Array(He);for(var ve=0;ve<He;ve++)De[ve]=arguments[ve+2];re.children=De}return{$$typeof:n,type:z.type,key:ae,ref:xe,props:re,_owner:Ce}},Be.createContext=function(z){return z={$$typeof:c,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},z.Provider={$$typeof:l,_context:z},z.Consumer=z},Be.createElement=j,Be.createFactory=function(z){var Y=j.bind(null,z);return Y.type=z,Y},Be.createRef=function(){return{current:null}},Be.forwardRef=function(z){return{$$typeof:d,render:z}},Be.isValidElement=I,Be.lazy=function(z){return{$$typeof:g,_payload:{_status:-1,_result:z},_init:le}},Be.memo=function(z,Y){return{$$typeof:m,type:z,compare:Y===void 0?null:Y}},Be.startTransition=function(z){var Y=F.transition;F.transition={};try{z()}finally{F.transition=Y}},Be.unstable_act=X,Be.useCallback=function(z,Y){return G.current.useCallback(z,Y)},Be.useContext=function(z){return G.current.useContext(z)},Be.useDebugValue=function(){},Be.useDeferredValue=function(z){return G.current.useDeferredValue(z)},Be.useEffect=function(z,Y){return G.current.useEffect(z,Y)},Be.useId=function(){return G.current.useId()},Be.useImperativeHandle=function(z,Y,Ne){return G.current.useImperativeHandle(z,Y,Ne)},Be.useInsertionEffect=function(z,Y){return G.current.useInsertionEffect(z,Y)},Be.useLayoutEffect=function(z,Y){return G.current.useLayoutEffect(z,Y)},Be.useMemo=function(z,Y){return G.current.useMemo(z,Y)},Be.useReducer=function(z,Y,Ne){return G.current.useReducer(z,Y,Ne)},Be.useRef=function(z){return G.current.useRef(z)},Be.useState=function(z){return G.current.useState(z)},Be.useSyncExternalStore=function(z,Y,Ne){return G.current.useSyncExternalStore(z,Y,Ne)},Be.useTransition=function(){return G.current.useTransition()},Be.version="18.3.1",Be}var Pv;function zg(){return Pv||(Pv=1,tm.exports=wT()),tm.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function _T(){if(Rv)return hc;Rv=1;var n=zg(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(d,f,m){var g,y={},v=null,_=null;m!==void 0&&(v=""+m),f.key!==void 0&&(v=""+f.key),f.ref!==void 0&&(_=f.ref);for(g in f)s.call(f,g)&&!l.hasOwnProperty(g)&&(y[g]=f[g]);if(d&&d.defaultProps)for(g in f=d.defaultProps,f)y[g]===void 0&&(y[g]=f[g]);return{$$typeof:e,type:d,key:v,ref:_,props:y,_owner:i.current}}return hc.Fragment=t,hc.jsx=c,hc.jsxs=c,hc}var Dv;function NT(){return Dv||(Dv=1,em.exports=_T()),em.exports}var o=NT(),C=zg();const ds=nu(C);var Vd={},nm={exports:{}},Dn={},sm={exports:{}},rm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mv;function ET(){return Mv||(Mv=1,(function(n){function e(F,U){var X=F.length;F.push(U);e:for(;0<X;){var z=X-1>>>1,Y=F[z];if(0<i(Y,U))F[z]=U,F[X]=Y,X=z;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var U=F[0],X=F.pop();if(X!==U){F[0]=X;e:for(var z=0,Y=F.length,Ne=Y>>>1;z<Ne;){var re=2*(z+1)-1,ae=F[re],xe=re+1,Ce=F[xe];if(0>i(ae,X))xe<Y&&0>i(Ce,ae)?(F[z]=Ce,F[xe]=X,z=xe):(F[z]=ae,F[re]=X,z=re);else if(xe<Y&&0>i(Ce,X))F[z]=Ce,F[xe]=X,z=xe;else break e}}return U}function i(F,U){var X=F.sortIndex-U.sortIndex;return X!==0?X:F.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();n.unstable_now=function(){return c.now()-d}}var f=[],m=[],g=1,y=null,v=3,_=!1,k=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function q(F){for(var U=t(m);U!==null;){if(U.callback===null)s(m);else if(U.startTime<=F)s(m),U.sortIndex=U.expirationTime,e(f,U);else break;U=t(m)}}function $(F){if(E=!1,q(F),!k)if(t(f)!==null)k=!0,le(Q);else{var U=t(m);U!==null&&G($,U.startTime-F)}}function Q(F,U){k=!1,E&&(E=!1,M(j),j=-1),_=!0;var X=v;try{for(q(U),y=t(f);y!==null&&(!(y.expirationTime>U)||F&&!L());){var z=y.callback;if(typeof z=="function"){y.callback=null,v=y.priorityLevel;var Y=z(y.expirationTime<=U);U=n.unstable_now(),typeof Y=="function"?y.callback=Y:y===t(f)&&s(f),q(U)}else s(f);y=t(f)}if(y!==null)var Ne=!0;else{var re=t(m);re!==null&&G($,re.startTime-U),Ne=!1}return Ne}finally{y=null,v=X,_=!1}}var K=!1,P=null,j=-1,V=5,I=-1;function L(){return!(n.unstable_now()-I<V)}function D(){if(P!==null){var F=n.unstable_now();I=F;var U=!0;try{U=P(!0,F)}finally{U?A():(K=!1,P=null)}}else K=!1}var A;if(typeof O=="function")A=function(){O(D)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,ie=he.port2;he.port1.onmessage=D,A=function(){ie.postMessage(null)}}else A=function(){T(D,0)};function le(F){P=F,K||(K=!0,A())}function G(F,U){j=T(function(){F(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){k||_||(k=!0,le(Q))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(f)},n.unstable_next=function(F){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var X=v;v=U;try{return F()}finally{v=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,U){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var X=v;v=F;try{return U()}finally{v=X}},n.unstable_scheduleCallback=function(F,U,X){var z=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?z+X:z):X=z,F){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=X+Y,F={id:g++,callback:U,priorityLevel:F,startTime:X,expirationTime:Y,sortIndex:-1},X>z?(F.sortIndex=X,e(m,F),t(f)===null&&F===t(m)&&(E?(M(j),j=-1):E=!0,G($,X-z))):(F.sortIndex=Y,e(f,F),k||_||(k=!0,le(Q))),F},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(F){var U=v;return function(){var X=v;v=U;try{return F.apply(this,arguments)}finally{v=X}}}})(rm)),rm}var Vv;function kT(){return Vv||(Vv=1,sm.exports=ET()),sm.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function ST(){if(Lv)return Dn;Lv=1;var n=zg(),e=kT();function t(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,i={};function l(r,a){c(r,a),c(r+"Capture",a)}function c(r,a){for(i[r]=a,r=0;r<a.length;r++)s.add(a[r])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},y={};function v(r){return f.call(y,r)?!0:f.call(g,r)?!1:m.test(r)?y[r]=!0:(g[r]=!0,!1)}function _(r,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function k(r,a,u,p){if(a===null||typeof a>"u"||_(r,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function E(r,a,u,p,x,b,S){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=x,this.mustUseProperty=u,this.propertyName=r,this.type=a,this.sanitizeURL=b,this.removeEmptyString=S}var T={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){T[r]=new E(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];T[a]=new E(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){T[r]=new E(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){T[r]=new E(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){T[r]=new E(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){T[r]=new E(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){T[r]=new E(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){T[r]=new E(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){T[r]=new E(r,5,!1,r.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function O(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(M,O);T[a]=new E(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(M,O);T[a]=new E(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(M,O);T[a]=new E(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){T[r]=new E(r,1,!1,r.toLowerCase(),null,!1,!1)}),T.xlinkHref=new E("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){T[r]=new E(r,1,!1,r.toLowerCase(),null,!0,!0)});function q(r,a,u,p){var x=T.hasOwnProperty(a)?T[a]:null;(x!==null?x.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,u,x,p)&&(u=null),p||x===null?v(a)&&(u===null?r.removeAttribute(a):r.setAttribute(a,""+u)):x.mustUseProperty?r[x.propertyName]=u===null?x.type===3?!1:"":u:(a=x.attributeName,p=x.attributeNamespace,u===null?r.removeAttribute(a):(x=x.type,u=x===3||x===4&&u===!0?"":""+u,p?r.setAttributeNS(p,a,u):r.setAttribute(a,u))))}var $=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),K=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),L=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),le=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),F=Symbol.iterator;function U(r){return r===null||typeof r!="object"?null:(r=F&&r[F]||r["@@iterator"],typeof r=="function"?r:null)}var X=Object.assign,z;function Y(r){if(z===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);z=a&&a[1]||""}return`
`+z+r}var Ne=!1;function re(r,a){if(!r||Ne)return"";Ne=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ne){var p=ne}Reflect.construct(r,[],a)}else{try{a.call()}catch(ne){p=ne}r.call(a.prototype)}else{try{throw Error()}catch(ne){p=ne}r()}}catch(ne){if(ne&&p&&typeof ne.stack=="string"){for(var x=ne.stack.split(`
`),b=p.stack.split(`
`),S=x.length-1,B=b.length-1;1<=S&&0<=B&&x[S]!==b[B];)B--;for(;1<=S&&0<=B;S--,B--)if(x[S]!==b[B]){if(S!==1||B!==1)do if(S--,B--,0>B||x[S]!==b[B]){var W=`
`+x[S].replace(" at new "," at ");return r.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",r.displayName)),W}while(1<=S&&0<=B);break}}}finally{Ne=!1,Error.prepareStackTrace=u}return(r=r?r.displayName||r.name:"")?Y(r):""}function ae(r){switch(r.tag){case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return r=re(r.type,!1),r;case 11:return r=re(r.type.render,!1),r;case 1:return r=re(r.type,!0),r;default:return""}}function xe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case K:return"Portal";case V:return"Profiler";case j:return"StrictMode";case A:return"Suspense";case he:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case L:return(r.displayName||"Context")+".Consumer";case I:return(r._context.displayName||"Context")+".Provider";case D:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ie:return a=r.displayName||null,a!==null?a:xe(r.type)||"Memo";case le:a=r._payload,r=r._init;try{return xe(r(a))}catch{}}return null}function Ce(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(a);case 8:return a===j?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function De(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function He(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ve(r){var a=He(r)?"checked":"value",u=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),p=""+r[a];if(!r.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,b=u.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return x.call(this)},set:function(S){p=""+S,b.call(this,S)}}),Object.defineProperty(r,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(S){p=""+S},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function et(r){r._valueTracker||(r._valueTracker=ve(r))}function ft(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return r&&(p=He(r)?r.checked?"true":"false":r.value),r=p,r!==u?(a.setValue(r),!0):!1}function xt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function pt(r,a){var u=a.checked;return X({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??r._wrapperState.initialChecked})}function en(r,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=De(a.value!=null?a.value:u),r._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Ht(r,a){a=a.checked,a!=null&&q(r,"checked",a,!1)}function Ls(r,a){Ht(r,a);var u=De(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&r.value===""||r.value!=u)&&(r.value=""+u):r.value!==""+u&&(r.value=""+u);else if(p==="submit"||p==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?St(r,a.type,u):a.hasOwnProperty("defaultValue")&&St(r,a.type,De(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Os(r,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,u||a===r.value||(r.value=a),r.defaultValue=a}u=r.name,u!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,u!==""&&(r.name=u)}function St(r,a,u){(a!=="number"||xt(r.ownerDocument)!==r)&&(u==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+u&&(r.defaultValue=""+u))}var ct=Array.isArray;function un(r,a,u,p){if(r=r.options,a){a={};for(var x=0;x<u.length;x++)a["$"+u[x]]=!0;for(u=0;u<r.length;u++)x=a.hasOwnProperty("$"+r[u].value),r[u].selected!==x&&(r[u].selected=x),x&&p&&(r[u].defaultSelected=!0)}else{for(u=""+De(u),a=null,x=0;x<r.length;x++){if(r[x].value===u){r[x].selected=!0,p&&(r[x].defaultSelected=!0);return}a!==null||r[x].disabled||(a=r[x])}a!==null&&(a.selected=!0)}}function to(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function no(r,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(t(92));if(ct(u)){if(1<u.length)throw Error(t(93));u=u[0]}a=u}a==null&&(a=""),u=a}r._wrapperState={initialValue:De(u)}}function Xo(r,a){var u=De(a.value),p=De(a.defaultValue);u!=null&&(u=""+u,u!==r.value&&(r.value=u),a.defaultValue==null&&r.defaultValue!==u&&(r.defaultValue=u)),p!=null&&(r.defaultValue=""+p)}function yr(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function so(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zr(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?so(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Fs,ke=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,x){MSApp.execUnsafeLocalFunction(function(){return r(a,u,p,x)})}:r})(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(Fs=Fs||document.createElement("div"),Fs.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Fs.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function $e(r,a){if(a){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=a;return}}r.textContent=a}var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},At=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function(r){At.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),Je[a]=Je[r]})});function yt(r,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||Je.hasOwnProperty(r)&&Je[r]?(""+a).trim():a+"px"}function Xn(r,a){r=r.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,x=yt(u,a[u],p);u==="float"&&(u="cssFloat"),p?r.setProperty(u,x):r[u]=x}}var ei=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jn(r,a){if(a){if(ei[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(t(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(t(61))}if(a.style!=null&&typeof a.style!="object")throw Error(t(62))}}function vr(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gs=null;function br(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Jn=null,Tt=null,jt=null;function El(r){if(r=Xl(r)){if(typeof Jn!="function")throw Error(t(280));var a=r.stateNode;a&&(a=Xu(a),Jn(r.stateNode,r.type,a))}}function ti(r){Tt?jt?jt.push(r):jt=[r]:Tt=r}function ni(){if(Tt){var r=Tt,a=jt;if(jt=Tt=null,El(r),a)for(r=0;r<a.length;r++)El(a[r])}}function ku(r,a){return r(a)}function Su(){}var Us=!1;function Tu(r,a,u){if(Us)return r(a,u);Us=!0;try{return ku(r,a,u)}finally{Us=!1,(Tt!==null||jt!==null)&&(Su(),ni())}}function ro(r,a){var u=r.stateNode;if(u===null)return null;var p=Xu(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(r=r.type,p=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!p;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(t(231,a,typeof u));return u}var si=!1;if(d)try{var ri={};Object.defineProperty(ri,"passive",{get:function(){si=!0}}),window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch{si=!1}function ju(r,a,u,p,x,b,S,B,W){var ne=Array.prototype.slice.call(arguments,3);try{a.apply(u,ne)}catch(de){this.onError(de)}}var wr=!1,zs=null,Jo=!1,Zn=null,Cu={onError:function(r){wr=!0,zs=r}};function Iu(r,a,u,p,x,b,S,B,W){wr=!1,zs=null,ju.apply(Cu,arguments)}function kl(r,a,u,p,x,b,S,B,W){if(Iu.apply(this,arguments),wr){if(wr){var ne=zs;wr=!1,zs=null}else throw Error(t(198));Jo||(Jo=!0,Zn=ne)}}function xs(r){var a=r,u=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,(a.flags&4098)!==0&&(u=a.return),r=a.return;while(r)}return a.tag===3?u:null}function Sl(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function Au(r){if(xs(r)!==r)throw Error(t(188))}function Pu(r){var a=r.alternate;if(!a){if(a=xs(r),a===null)throw Error(t(188));return a!==r?null:r}for(var u=r,p=a;;){var x=u.return;if(x===null)break;var b=x.alternate;if(b===null){if(p=x.return,p!==null){u=p;continue}break}if(x.child===b.child){for(b=x.child;b;){if(b===u)return Au(x),r;if(b===p)return Au(x),a;b=b.sibling}throw Error(t(188))}if(u.return!==p.return)u=x,p=b;else{for(var S=!1,B=x.child;B;){if(B===u){S=!0,u=x,p=b;break}if(B===p){S=!0,p=x,u=b;break}B=B.sibling}if(!S){for(B=b.child;B;){if(B===u){S=!0,u=b,p=x;break}if(B===p){S=!0,p=b,u=x;break}B=B.sibling}if(!S)throw Error(t(189))}}if(u.alternate!==p)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?r:a}function Ru(r){return r=Pu(r),r!==null?io(r):null}function io(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=io(r);if(a!==null)return a;r=r.sibling}return null}var Tl=e.unstable_scheduleCallback,Zo=e.unstable_cancelCallback,oo=e.unstable_shouldYield,_r=e.unstable_requestPaint,ut=e.unstable_now,Af=e.unstable_getCurrentPriorityLevel,ea=e.unstable_ImmediatePriority,jl=e.unstable_UserBlockingPriority,ao=e.unstable_NormalPriority,Cl=e.unstable_LowPriority,ta=e.unstable_IdlePriority,lo=null,Un=null;function Du(r){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(lo,r,void 0,(r.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:co,Bs=Math.log,es=Math.LN2;function co(r){return r>>>=0,r===0?32:31-(Bs(r)/es|0)|0}var $s=64,ii=4194304;function Ze(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Nr(r,a){var u=r.pendingLanes;if(u===0)return 0;var p=0,x=r.suspendedLanes,b=r.pingedLanes,S=u&268435455;if(S!==0){var B=S&~x;B!==0?p=Ze(B):(b&=S,b!==0&&(p=Ze(b)))}else S=u&~x,S!==0?p=Ze(S):b!==0&&(p=Ze(b));if(p===0)return 0;if(a!==0&&a!==p&&(a&x)===0&&(x=p&-p,b=a&-a,x>=b||x===16&&(b&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=p;0<a;)u=31-zn(a),x=1<<u,p|=r[u],a&=~x;return p}function uo(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ho(r,a){for(var u=r.suspendedLanes,p=r.pingedLanes,x=r.expirationTimes,b=r.pendingLanes;0<b;){var S=31-zn(b),B=1<<S,W=x[S];W===-1?((B&u)===0||(B&p)!==0)&&(x[S]=uo(B,a)):W<=a&&(r.expiredLanes|=B),b&=~B}}function Il(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Al(){var r=$s;return $s<<=1,($s&4194240)===0&&($s=64),r}function Pl(r){for(var a=[],u=0;31>u;u++)a.push(r);return a}function fo(r,a,u){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-zn(a),r[a]=u}function Pf(r,a){var u=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var p=r.eventTimes;for(r=r.expirationTimes;0<u;){var x=31-zn(u),b=1<<x;a[x]=0,p[x]=-1,r[x]=-1,u&=~b}}function Rl(r,a){var u=r.entangledLanes|=a;for(r=r.entanglements;u;){var p=31-zn(u),x=1<<p;x&a|r[p]&a&&(r[p]|=a),u&=~x}}var Ke=0;function qs(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Dl,na,Ml,Vl,Ll,Gs=!1,sa=[],Ws=null,Hs=null,tn=null,po=new Map,Er=new Map,Bn=[],Mu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oi(r,a){switch(r){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":tn=null;break;case"pointerover":case"pointerout":po.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Er.delete(a.pointerId)}}function ys(r,a,u,p,x,b){return r===null||r.nativeEvent!==b?(r={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:b,targetContainers:[x]},a!==null&&(a=Xl(a),a!==null&&na(a)),r):(r.eventSystemFlags|=p,a=r.targetContainers,x!==null&&a.indexOf(x)===-1&&a.push(x),r)}function Vu(r,a,u,p,x){switch(a){case"focusin":return Ws=ys(Ws,r,a,u,p,x),!0;case"dragenter":return Hs=ys(Hs,r,a,u,p,x),!0;case"mouseover":return tn=ys(tn,r,a,u,p,x),!0;case"pointerover":var b=x.pointerId;return po.set(b,ys(po.get(b)||null,r,a,u,p,x)),!0;case"gotpointercapture":return b=x.pointerId,Er.set(b,ys(Er.get(b)||null,r,a,u,p,x)),!0}return!1}function ra(r){var a=yo(r.target);if(a!==null){var u=xs(a);if(u!==null){if(a=u.tag,a===13){if(a=Sl(u),a!==null){r.blockedOn=a,Ll(r.priority,function(){Ml(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function rt(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var u=ia(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(u===null){u=r.nativeEvent;var p=new u.constructor(u.type,u);gs=p,u.target.dispatchEvent(p),gs=null}else return a=Xl(u),a!==null&&na(a),r.blockedOn=u,!1;a.shift()}return!0}function Lu(r,a,u){rt(r)&&u.delete(a)}function Rf(){Gs=!1,Ws!==null&&rt(Ws)&&(Ws=null),Hs!==null&&rt(Hs)&&(Hs=null),tn!==null&&rt(tn)&&(tn=null),po.forEach(Lu),Er.forEach(Lu)}function ai(r,a){r.blockedOn===a&&(r.blockedOn=null,Gs||(Gs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Rf)))}function li(r){function a(x){return ai(x,r)}if(0<sa.length){ai(sa[0],r);for(var u=1;u<sa.length;u++){var p=sa[u];p.blockedOn===r&&(p.blockedOn=null)}}for(Ws!==null&&ai(Ws,r),Hs!==null&&ai(Hs,r),tn!==null&&ai(tn,r),po.forEach(a),Er.forEach(a),u=0;u<Bn.length;u++)p=Bn[u],p.blockedOn===r&&(p.blockedOn=null);for(;0<Bn.length&&(u=Bn[0],u.blockedOn===null);)ra(u),u.blockedOn===null&&Bn.shift()}var kr=$.ReactCurrentBatchConfig,Sr=!0;function Ks(r,a,u,p){var x=Ke,b=kr.transition;kr.transition=null;try{Ke=1,Ol(r,a,u,p)}finally{Ke=x,kr.transition=b}}function Ou(r,a,u,p){var x=Ke,b=kr.transition;kr.transition=null;try{Ke=4,Ol(r,a,u,p)}finally{Ke=x,kr.transition=b}}function Ol(r,a,u,p){if(Sr){var x=ia(r,a,u,p);if(x===null)qf(r,a,p,Qs,u),oi(r,p);else if(Vu(x,r,a,u,p))p.stopPropagation();else if(oi(r,p),a&4&&-1<Mu.indexOf(r)){for(;x!==null;){var b=Xl(x);if(b!==null&&Dl(b),b=ia(r,a,u,p),b===null&&qf(r,a,p,Qs,u),b===x)break;x=b}x!==null&&p.stopPropagation()}else qf(r,a,p,null,u)}}var Qs=null;function ia(r,a,u,p){if(Qs=null,r=br(p),r=yo(r),r!==null)if(a=xs(r),a===null)r=null;else if(u=a.tag,u===13){if(r=Sl(a),r!==null)return r;r=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return Qs=r,null}function oa(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Af()){case ea:return 1;case jl:return 4;case ao:case Cl:return 16;case ta:return 536870912;default:return 16}default:return 16}}var $n=null,aa=null,Tr=null;function Fu(){if(Tr)return Tr;var r,a=aa,u=a.length,p,x="value"in $n?$n.value:$n.textContent,b=x.length;for(r=0;r<u&&a[r]===x[r];r++);var S=u-r;for(p=1;p<=S&&a[u-p]===x[b-p];p++);return Tr=x.slice(r,1<p?1-p:void 0)}function mo(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function Ys(){return!0}function Fl(){return!1}function dn(r){function a(u,p,x,b,S){this._reactName=u,this._targetInst=x,this.type=p,this.nativeEvent=b,this.target=S,this.currentTarget=null;for(var B in r)r.hasOwnProperty(B)&&(u=r[B],this[B]=u?u(b):b[B]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Ys:Fl,this.isPropagationStopped=Fl,this}return X(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),a}var Xs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},go=dn(Xs),ci=X({},Xs,{view:0,detail:0}),la=dn(ci),ca,ua,qn,xo=X({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ue,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==qn&&(qn&&r.type==="mousemove"?(ca=r.screenX-qn.screenX,ua=r.screenY-qn.screenY):ua=ca=0,qn=r),ca)},movementY:function(r){return"movementY"in r?r.movementY:ua}}),Ul=dn(xo),Uu=X({},xo,{dataTransfer:0}),zu=dn(Uu),da=X({},ci,{relatedTarget:0}),nn=dn(da),Bu=X({},Xs,{animationName:0,elapsedTime:0,pseudoElement:0}),$u=dn(Bu),ui=X({},Xs,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),h=dn(ui),w=X({},Xs,{data:0}),N=dn(w),R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ee={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},se={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=se[r])?!!a[r]:!1}function Ue(){return ge}var Pt=X({},ci,{key:function(r){if(r.key){var a=R[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=mo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?ee[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ue,charCode:function(r){return r.type==="keypress"?mo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?mo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),nt=dn(Pt),Vt=X({},xo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gn=dn(Vt),jr=X({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ue}),Js=dn(jr),Zs=X({},Xs,{propertyName:0,elapsedTime:0,pseudoElement:0}),ha=dn(Zs),zl=X({},xo,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),mS=dn(zl),gS=[9,13,27,32],Df=d&&"CompositionEvent"in window,Bl=null;d&&"documentMode"in document&&(Bl=document.documentMode);var xS=d&&"TextEvent"in window&&!Bl,Nx=d&&(!Df||Bl&&8<Bl&&11>=Bl),Ex=" ",kx=!1;function Sx(r,a){switch(r){case"keyup":return gS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tx(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var fa=!1;function yS(r,a){switch(r){case"compositionend":return Tx(a);case"keypress":return a.which!==32?null:(kx=!0,Ex);case"textInput":return r=a.data,r===Ex&&kx?null:r;default:return null}}function vS(r,a){if(fa)return r==="compositionend"||!Df&&Sx(r,a)?(r=Fu(),Tr=aa=$n=null,fa=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Nx&&a.locale!=="ko"?null:a.data;default:return null}}var bS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jx(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!bS[r.type]:a==="textarea"}function Cx(r,a,u,p){ti(p),a=Ku(a,"onChange"),0<a.length&&(u=new go("onChange","change",null,u,p),r.push({event:u,listeners:a}))}var $l=null,ql=null;function wS(r){Hx(r,0)}function qu(r){var a=ya(r);if(ft(a))return r}function _S(r,a){if(r==="change")return a}var Ix=!1;if(d){var Mf;if(d){var Vf="oninput"in document;if(!Vf){var Ax=document.createElement("div");Ax.setAttribute("oninput","return;"),Vf=typeof Ax.oninput=="function"}Mf=Vf}else Mf=!1;Ix=Mf&&(!document.documentMode||9<document.documentMode)}function Px(){$l&&($l.detachEvent("onpropertychange",Rx),ql=$l=null)}function Rx(r){if(r.propertyName==="value"&&qu(ql)){var a=[];Cx(a,ql,r,br(r)),Tu(wS,a)}}function NS(r,a,u){r==="focusin"?(Px(),$l=a,ql=u,$l.attachEvent("onpropertychange",Rx)):r==="focusout"&&Px()}function ES(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return qu(ql)}function kS(r,a){if(r==="click")return qu(a)}function SS(r,a){if(r==="input"||r==="change")return qu(a)}function TS(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var vs=typeof Object.is=="function"?Object.is:TS;function Gl(r,a){if(vs(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var u=Object.keys(r),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var x=u[p];if(!f.call(a,x)||!vs(r[x],a[x]))return!1}return!0}function Dx(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Mx(r,a){var u=Dx(r);r=0;for(var p;u;){if(u.nodeType===3){if(p=r+u.textContent.length,r<=a&&p>=a)return{node:u,offset:a-r};r=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Dx(u)}}function Vx(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?Vx(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function Lx(){for(var r=window,a=xt();a instanceof r.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)r=a.contentWindow;else break;a=xt(r.document)}return a}function Lf(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function jS(r){var a=Lx(),u=r.focusedElem,p=r.selectionRange;if(a!==u&&u&&u.ownerDocument&&Vx(u.ownerDocument.documentElement,u)){if(p!==null&&Lf(u)){if(a=p.start,r=p.end,r===void 0&&(r=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(r,u.value.length);else if(r=(a=u.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var x=u.textContent.length,b=Math.min(p.start,x);p=p.end===void 0?b:Math.min(p.end,x),!r.extend&&b>p&&(x=p,p=b,b=x),x=Mx(u,b);var S=Mx(u,p);x&&S&&(r.rangeCount!==1||r.anchorNode!==x.node||r.anchorOffset!==x.offset||r.focusNode!==S.node||r.focusOffset!==S.offset)&&(a=a.createRange(),a.setStart(x.node,x.offset),r.removeAllRanges(),b>p?(r.addRange(a),r.extend(S.node,S.offset)):(a.setEnd(S.node,S.offset),r.addRange(a)))}}for(a=[],r=u;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)r=a[u],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var CS=d&&"documentMode"in document&&11>=document.documentMode,pa=null,Of=null,Wl=null,Ff=!1;function Ox(r,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Ff||pa==null||pa!==xt(p)||(p=pa,"selectionStart"in p&&Lf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Wl&&Gl(Wl,p)||(Wl=p,p=Ku(Of,"onSelect"),0<p.length&&(a=new go("onSelect","select",null,a,u),r.push({event:a,listeners:p}),a.target=pa)))}function Gu(r,a){var u={};return u[r.toLowerCase()]=a.toLowerCase(),u["Webkit"+r]="webkit"+a,u["Moz"+r]="moz"+a,u}var ma={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},Uf={},Fx={};d&&(Fx=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function Wu(r){if(Uf[r])return Uf[r];if(!ma[r])return r;var a=ma[r],u;for(u in a)if(a.hasOwnProperty(u)&&u in Fx)return Uf[r]=a[u];return r}var Ux=Wu("animationend"),zx=Wu("animationiteration"),Bx=Wu("animationstart"),$x=Wu("transitionend"),qx=new Map,Gx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(r,a){qx.set(r,a),l(a,[r])}for(var zf=0;zf<Gx.length;zf++){var Bf=Gx[zf],IS=Bf.toLowerCase(),AS=Bf[0].toUpperCase()+Bf.slice(1);di(IS,"on"+AS)}di(Ux,"onAnimationEnd"),di(zx,"onAnimationIteration"),di(Bx,"onAnimationStart"),di("dblclick","onDoubleClick"),di("focusin","onFocus"),di("focusout","onBlur"),di($x,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hl));function Wx(r,a,u){var p=r.type||"unknown-event";r.currentTarget=u,kl(p,a,void 0,r),r.currentTarget=null}function Hx(r,a){a=(a&4)!==0;for(var u=0;u<r.length;u++){var p=r[u],x=p.event;p=p.listeners;e:{var b=void 0;if(a)for(var S=p.length-1;0<=S;S--){var B=p[S],W=B.instance,ne=B.currentTarget;if(B=B.listener,W!==b&&x.isPropagationStopped())break e;Wx(x,B,ne),b=W}else for(S=0;S<p.length;S++){if(B=p[S],W=B.instance,ne=B.currentTarget,B=B.listener,W!==b&&x.isPropagationStopped())break e;Wx(x,B,ne),b=W}}}if(Jo)throw r=Zn,Jo=!1,Zn=null,r}function dt(r,a){var u=a[Yf];u===void 0&&(u=a[Yf]=new Set);var p=r+"__bubble";u.has(p)||(Kx(a,r,2,!1),u.add(p))}function $f(r,a,u){var p=0;a&&(p|=4),Kx(u,r,p,a)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function Kl(r){if(!r[Hu]){r[Hu]=!0,s.forEach(function(u){u!=="selectionchange"&&(PS.has(u)||$f(u,!1,r),$f(u,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[Hu]||(a[Hu]=!0,$f("selectionchange",!1,a))}}function Kx(r,a,u,p){switch(oa(a)){case 1:var x=Ks;break;case 4:x=Ou;break;default:x=Ol}u=x.bind(null,a,u,r),x=void 0,!si||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(x=!0),p?x!==void 0?r.addEventListener(a,u,{capture:!0,passive:x}):r.addEventListener(a,u,!0):x!==void 0?r.addEventListener(a,u,{passive:x}):r.addEventListener(a,u,!1)}function qf(r,a,u,p,x){var b=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var S=p.tag;if(S===3||S===4){var B=p.stateNode.containerInfo;if(B===x||B.nodeType===8&&B.parentNode===x)break;if(S===4)for(S=p.return;S!==null;){var W=S.tag;if((W===3||W===4)&&(W=S.stateNode.containerInfo,W===x||W.nodeType===8&&W.parentNode===x))return;S=S.return}for(;B!==null;){if(S=yo(B),S===null)return;if(W=S.tag,W===5||W===6){p=b=S;continue e}B=B.parentNode}}p=p.return}Tu(function(){var ne=b,de=br(u),fe=[];e:{var ue=qx.get(r);if(ue!==void 0){var be=go,Ee=r;switch(r){case"keypress":if(mo(u)===0)break e;case"keydown":case"keyup":be=nt;break;case"focusin":Ee="focus",be=nn;break;case"focusout":Ee="blur",be=nn;break;case"beforeblur":case"afterblur":be=nn;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Ul;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=zu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=Js;break;case Ux:case zx:case Bx:be=$u;break;case $x:be=ha;break;case"scroll":be=la;break;case"wheel":be=mS;break;case"copy":case"cut":case"paste":be=h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=Gn}var Se=(a&4)!==0,Rt=!Se&&r==="scroll",Z=Se?ue!==null?ue+"Capture":null:ue;Se=[];for(var H=ne,te;H!==null;){te=H;var pe=te.stateNode;if(te.tag===5&&pe!==null&&(te=pe,Z!==null&&(pe=ro(H,Z),pe!=null&&Se.push(Ql(H,pe,te)))),Rt)break;H=H.return}0<Se.length&&(ue=new be(ue,Ee,null,u,de),fe.push({event:ue,listeners:Se}))}}if((a&7)===0){e:{if(ue=r==="mouseover"||r==="pointerover",be=r==="mouseout"||r==="pointerout",ue&&u!==gs&&(Ee=u.relatedTarget||u.fromElement)&&(yo(Ee)||Ee[Cr]))break e;if((be||ue)&&(ue=de.window===de?de:(ue=de.ownerDocument)?ue.defaultView||ue.parentWindow:window,be?(Ee=u.relatedTarget||u.toElement,be=ne,Ee=Ee?yo(Ee):null,Ee!==null&&(Rt=xs(Ee),Ee!==Rt||Ee.tag!==5&&Ee.tag!==6)&&(Ee=null)):(be=null,Ee=ne),be!==Ee)){if(Se=Ul,pe="onMouseLeave",Z="onMouseEnter",H="mouse",(r==="pointerout"||r==="pointerover")&&(Se=Gn,pe="onPointerLeave",Z="onPointerEnter",H="pointer"),Rt=be==null?ue:ya(be),te=Ee==null?ue:ya(Ee),ue=new Se(pe,H+"leave",be,u,de),ue.target=Rt,ue.relatedTarget=te,pe=null,yo(de)===ne&&(Se=new Se(Z,H+"enter",Ee,u,de),Se.target=te,Se.relatedTarget=Rt,pe=Se),Rt=pe,be&&Ee)t:{for(Se=be,Z=Ee,H=0,te=Se;te;te=ga(te))H++;for(te=0,pe=Z;pe;pe=ga(pe))te++;for(;0<H-te;)Se=ga(Se),H--;for(;0<te-H;)Z=ga(Z),te--;for(;H--;){if(Se===Z||Z!==null&&Se===Z.alternate)break t;Se=ga(Se),Z=ga(Z)}Se=null}else Se=null;be!==null&&Qx(fe,ue,be,Se,!1),Ee!==null&&Rt!==null&&Qx(fe,Rt,Ee,Se,!0)}}e:{if(ue=ne?ya(ne):window,be=ue.nodeName&&ue.nodeName.toLowerCase(),be==="select"||be==="input"&&ue.type==="file")var Te=_S;else if(jx(ue))if(Ix)Te=SS;else{Te=ES;var Ae=NS}else(be=ue.nodeName)&&be.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(Te=kS);if(Te&&(Te=Te(r,ne))){Cx(fe,Te,u,de);break e}Ae&&Ae(r,ue,ne),r==="focusout"&&(Ae=ue._wrapperState)&&Ae.controlled&&ue.type==="number"&&St(ue,"number",ue.value)}switch(Ae=ne?ya(ne):window,r){case"focusin":(jx(Ae)||Ae.contentEditable==="true")&&(pa=Ae,Of=ne,Wl=null);break;case"focusout":Wl=Of=pa=null;break;case"mousedown":Ff=!0;break;case"contextmenu":case"mouseup":case"dragend":Ff=!1,Ox(fe,u,de);break;case"selectionchange":if(CS)break;case"keydown":case"keyup":Ox(fe,u,de)}var Pe;if(Df)e:{switch(r){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else fa?Sx(r,u)&&(Oe="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&(Oe="onCompositionStart");Oe&&(Nx&&u.locale!=="ko"&&(fa||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&fa&&(Pe=Fu()):($n=de,aa="value"in $n?$n.value:$n.textContent,fa=!0)),Ae=Ku(ne,Oe),0<Ae.length&&(Oe=new N(Oe,r,null,u,de),fe.push({event:Oe,listeners:Ae}),Pe?Oe.data=Pe:(Pe=Tx(u),Pe!==null&&(Oe.data=Pe)))),(Pe=xS?yS(r,u):vS(r,u))&&(ne=Ku(ne,"onBeforeInput"),0<ne.length&&(de=new N("onBeforeInput","beforeinput",null,u,de),fe.push({event:de,listeners:ne}),de.data=Pe))}Hx(fe,a)})}function Ql(r,a,u){return{instance:r,listener:a,currentTarget:u}}function Ku(r,a){for(var u=a+"Capture",p=[];r!==null;){var x=r,b=x.stateNode;x.tag===5&&b!==null&&(x=b,b=ro(r,u),b!=null&&p.unshift(Ql(r,b,x)),b=ro(r,a),b!=null&&p.push(Ql(r,b,x))),r=r.return}return p}function ga(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Qx(r,a,u,p,x){for(var b=a._reactName,S=[];u!==null&&u!==p;){var B=u,W=B.alternate,ne=B.stateNode;if(W!==null&&W===p)break;B.tag===5&&ne!==null&&(B=ne,x?(W=ro(u,b),W!=null&&S.unshift(Ql(u,W,B))):x||(W=ro(u,b),W!=null&&S.push(Ql(u,W,B)))),u=u.return}S.length!==0&&r.push({event:a,listeners:S})}var RS=/\r\n?/g,DS=/\u0000|\uFFFD/g;function Yx(r){return(typeof r=="string"?r:""+r).replace(RS,`
`).replace(DS,"")}function Qu(r,a,u){if(a=Yx(a),Yx(r)!==a&&u)throw Error(t(425))}function Yu(){}var Gf=null,Wf=null;function Hf(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Kf=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,Xx=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof Xx<"u"?function(r){return Xx.resolve(null).then(r).catch(LS)}:Kf;function LS(r){setTimeout(function(){throw r})}function Qf(r,a){var u=a,p=0;do{var x=u.nextSibling;if(r.removeChild(u),x&&x.nodeType===8)if(u=x.data,u==="/$"){if(p===0){r.removeChild(x),li(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=x}while(u);li(a)}function hi(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function Jx(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return r;a--}else u==="/$"&&a++}r=r.previousSibling}return null}var xa=Math.random().toString(36).slice(2),er="__reactFiber$"+xa,Yl="__reactProps$"+xa,Cr="__reactContainer$"+xa,Yf="__reactEvents$"+xa,OS="__reactListeners$"+xa,FS="__reactHandles$"+xa;function yo(r){var a=r[er];if(a)return a;for(var u=r.parentNode;u;){if(a=u[Cr]||u[er]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(r=Jx(r);r!==null;){if(u=r[er])return u;r=Jx(r)}return a}r=u,u=r.parentNode}return null}function Xl(r){return r=r[er]||r[Cr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ya(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Xu(r){return r[Yl]||null}var Xf=[],va=-1;function fi(r){return{current:r}}function ht(r){0>va||(r.current=Xf[va],Xf[va]=null,va--)}function it(r,a){va++,Xf[va]=r.current,r.current=a}var pi={},hn=fi(pi),Cn=fi(!1),vo=pi;function ba(r,a){var u=r.type.contextTypes;if(!u)return pi;var p=r.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var x={},b;for(b in u)x[b]=a[b];return p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=x),x}function In(r){return r=r.childContextTypes,r!=null}function Ju(){ht(Cn),ht(hn)}function Zx(r,a,u){if(hn.current!==pi)throw Error(t(168));it(hn,a),it(Cn,u)}function ey(r,a,u){var p=r.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var x in p)if(!(x in a))throw Error(t(108,Ce(r)||"Unknown",x));return X({},u,p)}function Zu(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||pi,vo=hn.current,it(hn,r),it(Cn,Cn.current),!0}function ty(r,a,u){var p=r.stateNode;if(!p)throw Error(t(169));u?(r=ey(r,a,vo),p.__reactInternalMemoizedMergedChildContext=r,ht(Cn),ht(hn),it(hn,r)):ht(Cn),it(Cn,u)}var Ir=null,ed=!1,Jf=!1;function ny(r){Ir===null?Ir=[r]:Ir.push(r)}function US(r){ed=!0,ny(r)}function mi(){if(!Jf&&Ir!==null){Jf=!0;var r=0,a=Ke;try{var u=Ir;for(Ke=1;r<u.length;r++){var p=u[r];do p=p(!0);while(p!==null)}Ir=null,ed=!1}catch(x){throw Ir!==null&&(Ir=Ir.slice(r+1)),Tl(ea,mi),x}finally{Ke=a,Jf=!1}}return null}var wa=[],_a=0,td=null,nd=0,ts=[],ns=0,bo=null,Ar=1,Pr="";function wo(r,a){wa[_a++]=nd,wa[_a++]=td,td=r,nd=a}function sy(r,a,u){ts[ns++]=Ar,ts[ns++]=Pr,ts[ns++]=bo,bo=r;var p=Ar;r=Pr;var x=32-zn(p)-1;p&=~(1<<x),u+=1;var b=32-zn(a)+x;if(30<b){var S=x-x%5;b=(p&(1<<S)-1).toString(32),p>>=S,x-=S,Ar=1<<32-zn(a)+x|u<<x|p,Pr=b+r}else Ar=1<<b|u<<x|p,Pr=r}function Zf(r){r.return!==null&&(wo(r,1),sy(r,1,0))}function ep(r){for(;r===td;)td=wa[--_a],wa[_a]=null,nd=wa[--_a],wa[_a]=null;for(;r===bo;)bo=ts[--ns],ts[ns]=null,Pr=ts[--ns],ts[ns]=null,Ar=ts[--ns],ts[ns]=null}var Wn=null,Hn=null,mt=!1,bs=null;function ry(r,a){var u=os(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=r,a=r.deletions,a===null?(r.deletions=[u],r.flags|=16):a.push(u)}function iy(r,a){switch(r.tag){case 5:var u=r.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,Wn=r,Hn=hi(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,Wn=r,Hn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=bo!==null?{id:Ar,overflow:Pr}:null,r.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=os(18,null,null,0),u.stateNode=a,u.return=r,r.child=u,Wn=r,Hn=null,!0):!1;default:return!1}}function tp(r){return(r.mode&1)!==0&&(r.flags&128)===0}function np(r){if(mt){var a=Hn;if(a){var u=a;if(!iy(r,a)){if(tp(r))throw Error(t(418));a=hi(u.nextSibling);var p=Wn;a&&iy(r,a)?ry(p,u):(r.flags=r.flags&-4097|2,mt=!1,Wn=r)}}else{if(tp(r))throw Error(t(418));r.flags=r.flags&-4097|2,mt=!1,Wn=r}}}function oy(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Wn=r}function sd(r){if(r!==Wn)return!1;if(!mt)return oy(r),mt=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!Hf(r.type,r.memoizedProps)),a&&(a=Hn)){if(tp(r))throw ay(),Error(t(418));for(;a;)ry(r,a),a=hi(a.nextSibling)}if(oy(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"){if(a===0){Hn=hi(r.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}r=r.nextSibling}Hn=null}}else Hn=Wn?hi(r.stateNode.nextSibling):null;return!0}function ay(){for(var r=Hn;r;)r=hi(r.nextSibling)}function Na(){Hn=Wn=null,mt=!1}function sp(r){bs===null?bs=[r]:bs.push(r)}var zS=$.ReactCurrentBatchConfig;function Jl(r,a,u){if(r=u.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var p=u.stateNode}if(!p)throw Error(t(147,r));var x=p,b=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===b?a.ref:(a=function(S){var B=x.refs;S===null?delete B[b]:B[b]=S},a._stringRef=b,a)}if(typeof r!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,r))}return r}function rd(r,a){throw r=Object.prototype.toString.call(a),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function ly(r){var a=r._init;return a(r._payload)}function cy(r){function a(Z,H){if(r){var te=Z.deletions;te===null?(Z.deletions=[H],Z.flags|=16):te.push(H)}}function u(Z,H){if(!r)return null;for(;H!==null;)a(Z,H),H=H.sibling;return null}function p(Z,H){for(Z=new Map;H!==null;)H.key!==null?Z.set(H.key,H):Z.set(H.index,H),H=H.sibling;return Z}function x(Z,H){return Z=Ni(Z,H),Z.index=0,Z.sibling=null,Z}function b(Z,H,te){return Z.index=te,r?(te=Z.alternate,te!==null?(te=te.index,te<H?(Z.flags|=2,H):te):(Z.flags|=2,H)):(Z.flags|=1048576,H)}function S(Z){return r&&Z.alternate===null&&(Z.flags|=2),Z}function B(Z,H,te,pe){return H===null||H.tag!==6?(H=Kp(te,Z.mode,pe),H.return=Z,H):(H=x(H,te),H.return=Z,H)}function W(Z,H,te,pe){var Te=te.type;return Te===P?de(Z,H,te.props.children,pe,te.key):H!==null&&(H.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===le&&ly(Te)===H.type)?(pe=x(H,te.props),pe.ref=Jl(Z,H,te),pe.return=Z,pe):(pe=jd(te.type,te.key,te.props,null,Z.mode,pe),pe.ref=Jl(Z,H,te),pe.return=Z,pe)}function ne(Z,H,te,pe){return H===null||H.tag!==4||H.stateNode.containerInfo!==te.containerInfo||H.stateNode.implementation!==te.implementation?(H=Qp(te,Z.mode,pe),H.return=Z,H):(H=x(H,te.children||[]),H.return=Z,H)}function de(Z,H,te,pe,Te){return H===null||H.tag!==7?(H=Co(te,Z.mode,pe,Te),H.return=Z,H):(H=x(H,te),H.return=Z,H)}function fe(Z,H,te){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Kp(""+H,Z.mode,te),H.return=Z,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Q:return te=jd(H.type,H.key,H.props,null,Z.mode,te),te.ref=Jl(Z,null,H),te.return=Z,te;case K:return H=Qp(H,Z.mode,te),H.return=Z,H;case le:var pe=H._init;return fe(Z,pe(H._payload),te)}if(ct(H)||U(H))return H=Co(H,Z.mode,te,null),H.return=Z,H;rd(Z,H)}return null}function ue(Z,H,te,pe){var Te=H!==null?H.key:null;if(typeof te=="string"&&te!==""||typeof te=="number")return Te!==null?null:B(Z,H,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case Q:return te.key===Te?W(Z,H,te,pe):null;case K:return te.key===Te?ne(Z,H,te,pe):null;case le:return Te=te._init,ue(Z,H,Te(te._payload),pe)}if(ct(te)||U(te))return Te!==null?null:de(Z,H,te,pe,null);rd(Z,te)}return null}function be(Z,H,te,pe,Te){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return Z=Z.get(te)||null,B(H,Z,""+pe,Te);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case Q:return Z=Z.get(pe.key===null?te:pe.key)||null,W(H,Z,pe,Te);case K:return Z=Z.get(pe.key===null?te:pe.key)||null,ne(H,Z,pe,Te);case le:var Ae=pe._init;return be(Z,H,te,Ae(pe._payload),Te)}if(ct(pe)||U(pe))return Z=Z.get(te)||null,de(H,Z,pe,Te,null);rd(H,pe)}return null}function Ee(Z,H,te,pe){for(var Te=null,Ae=null,Pe=H,Oe=H=0,Yt=null;Pe!==null&&Oe<te.length;Oe++){Pe.index>Oe?(Yt=Pe,Pe=null):Yt=Pe.sibling;var Xe=ue(Z,Pe,te[Oe],pe);if(Xe===null){Pe===null&&(Pe=Yt);break}r&&Pe&&Xe.alternate===null&&a(Z,Pe),H=b(Xe,H,Oe),Ae===null?Te=Xe:Ae.sibling=Xe,Ae=Xe,Pe=Yt}if(Oe===te.length)return u(Z,Pe),mt&&wo(Z,Oe),Te;if(Pe===null){for(;Oe<te.length;Oe++)Pe=fe(Z,te[Oe],pe),Pe!==null&&(H=b(Pe,H,Oe),Ae===null?Te=Pe:Ae.sibling=Pe,Ae=Pe);return mt&&wo(Z,Oe),Te}for(Pe=p(Z,Pe);Oe<te.length;Oe++)Yt=be(Pe,Z,Oe,te[Oe],pe),Yt!==null&&(r&&Yt.alternate!==null&&Pe.delete(Yt.key===null?Oe:Yt.key),H=b(Yt,H,Oe),Ae===null?Te=Yt:Ae.sibling=Yt,Ae=Yt);return r&&Pe.forEach(function(Ei){return a(Z,Ei)}),mt&&wo(Z,Oe),Te}function Se(Z,H,te,pe){var Te=U(te);if(typeof Te!="function")throw Error(t(150));if(te=Te.call(te),te==null)throw Error(t(151));for(var Ae=Te=null,Pe=H,Oe=H=0,Yt=null,Xe=te.next();Pe!==null&&!Xe.done;Oe++,Xe=te.next()){Pe.index>Oe?(Yt=Pe,Pe=null):Yt=Pe.sibling;var Ei=ue(Z,Pe,Xe.value,pe);if(Ei===null){Pe===null&&(Pe=Yt);break}r&&Pe&&Ei.alternate===null&&a(Z,Pe),H=b(Ei,H,Oe),Ae===null?Te=Ei:Ae.sibling=Ei,Ae=Ei,Pe=Yt}if(Xe.done)return u(Z,Pe),mt&&wo(Z,Oe),Te;if(Pe===null){for(;!Xe.done;Oe++,Xe=te.next())Xe=fe(Z,Xe.value,pe),Xe!==null&&(H=b(Xe,H,Oe),Ae===null?Te=Xe:Ae.sibling=Xe,Ae=Xe);return mt&&wo(Z,Oe),Te}for(Pe=p(Z,Pe);!Xe.done;Oe++,Xe=te.next())Xe=be(Pe,Z,Oe,Xe.value,pe),Xe!==null&&(r&&Xe.alternate!==null&&Pe.delete(Xe.key===null?Oe:Xe.key),H=b(Xe,H,Oe),Ae===null?Te=Xe:Ae.sibling=Xe,Ae=Xe);return r&&Pe.forEach(function(bT){return a(Z,bT)}),mt&&wo(Z,Oe),Te}function Rt(Z,H,te,pe){if(typeof te=="object"&&te!==null&&te.type===P&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case Q:e:{for(var Te=te.key,Ae=H;Ae!==null;){if(Ae.key===Te){if(Te=te.type,Te===P){if(Ae.tag===7){u(Z,Ae.sibling),H=x(Ae,te.props.children),H.return=Z,Z=H;break e}}else if(Ae.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===le&&ly(Te)===Ae.type){u(Z,Ae.sibling),H=x(Ae,te.props),H.ref=Jl(Z,Ae,te),H.return=Z,Z=H;break e}u(Z,Ae);break}else a(Z,Ae);Ae=Ae.sibling}te.type===P?(H=Co(te.props.children,Z.mode,pe,te.key),H.return=Z,Z=H):(pe=jd(te.type,te.key,te.props,null,Z.mode,pe),pe.ref=Jl(Z,H,te),pe.return=Z,Z=pe)}return S(Z);case K:e:{for(Ae=te.key;H!==null;){if(H.key===Ae)if(H.tag===4&&H.stateNode.containerInfo===te.containerInfo&&H.stateNode.implementation===te.implementation){u(Z,H.sibling),H=x(H,te.children||[]),H.return=Z,Z=H;break e}else{u(Z,H);break}else a(Z,H);H=H.sibling}H=Qp(te,Z.mode,pe),H.return=Z,Z=H}return S(Z);case le:return Ae=te._init,Rt(Z,H,Ae(te._payload),pe)}if(ct(te))return Ee(Z,H,te,pe);if(U(te))return Se(Z,H,te,pe);rd(Z,te)}return typeof te=="string"&&te!==""||typeof te=="number"?(te=""+te,H!==null&&H.tag===6?(u(Z,H.sibling),H=x(H,te),H.return=Z,Z=H):(u(Z,H),H=Kp(te,Z.mode,pe),H.return=Z,Z=H),S(Z)):u(Z,H)}return Rt}var Ea=cy(!0),uy=cy(!1),id=fi(null),od=null,ka=null,rp=null;function ip(){rp=ka=od=null}function op(r){var a=id.current;ht(id),r._currentValue=a}function ap(r,a,u){for(;r!==null;){var p=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),r===u)break;r=r.return}}function Sa(r,a){od=r,rp=ka=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&a)!==0&&(An=!0),r.firstContext=null)}function ss(r){var a=r._currentValue;if(rp!==r)if(r={context:r,memoizedValue:a,next:null},ka===null){if(od===null)throw Error(t(308));ka=r,od.dependencies={lanes:0,firstContext:r}}else ka=ka.next=r;return a}var _o=null;function lp(r){_o===null?_o=[r]:_o.push(r)}function dy(r,a,u,p){var x=a.interleaved;return x===null?(u.next=u,lp(a)):(u.next=x.next,x.next=u),a.interleaved=u,Rr(r,p)}function Rr(r,a){r.lanes|=a;var u=r.alternate;for(u!==null&&(u.lanes|=a),u=r,r=r.return;r!==null;)r.childLanes|=a,u=r.alternate,u!==null&&(u.childLanes|=a),u=r,r=r.return;return u.tag===3?u.stateNode:null}var gi=!1;function cp(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hy(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Dr(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function xi(r,a,u){var p=r.updateQueue;if(p===null)return null;if(p=p.shared,(Ye&2)!==0){var x=p.pending;return x===null?a.next=a:(a.next=x.next,x.next=a),p.pending=a,Rr(r,u)}return x=p.interleaved,x===null?(a.next=a,lp(p)):(a.next=x.next,x.next=a),p.interleaved=a,Rr(r,u)}function ad(r,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=r.pendingLanes,u|=p,a.lanes=u,Rl(r,u)}}function fy(r,a){var u=r.updateQueue,p=r.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var x=null,b=null;if(u=u.firstBaseUpdate,u!==null){do{var S={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};b===null?x=b=S:b=b.next=S,u=u.next}while(u!==null);b===null?x=b=a:b=b.next=a}else x=b=a;u={baseState:p.baseState,firstBaseUpdate:x,lastBaseUpdate:b,shared:p.shared,effects:p.effects},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=a:r.next=a,u.lastBaseUpdate=a}function ld(r,a,u,p){var x=r.updateQueue;gi=!1;var b=x.firstBaseUpdate,S=x.lastBaseUpdate,B=x.shared.pending;if(B!==null){x.shared.pending=null;var W=B,ne=W.next;W.next=null,S===null?b=ne:S.next=ne,S=W;var de=r.alternate;de!==null&&(de=de.updateQueue,B=de.lastBaseUpdate,B!==S&&(B===null?de.firstBaseUpdate=ne:B.next=ne,de.lastBaseUpdate=W))}if(b!==null){var fe=x.baseState;S=0,de=ne=W=null,B=b;do{var ue=B.lane,be=B.eventTime;if((p&ue)===ue){de!==null&&(de=de.next={eventTime:be,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Ee=r,Se=B;switch(ue=a,be=u,Se.tag){case 1:if(Ee=Se.payload,typeof Ee=="function"){fe=Ee.call(be,fe,ue);break e}fe=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=Se.payload,ue=typeof Ee=="function"?Ee.call(be,fe,ue):Ee,ue==null)break e;fe=X({},fe,ue);break e;case 2:gi=!0}}B.callback!==null&&B.lane!==0&&(r.flags|=64,ue=x.effects,ue===null?x.effects=[B]:ue.push(B))}else be={eventTime:be,lane:ue,tag:B.tag,payload:B.payload,callback:B.callback,next:null},de===null?(ne=de=be,W=fe):de=de.next=be,S|=ue;if(B=B.next,B===null){if(B=x.shared.pending,B===null)break;ue=B,B=ue.next,ue.next=null,x.lastBaseUpdate=ue,x.shared.pending=null}}while(!0);if(de===null&&(W=fe),x.baseState=W,x.firstBaseUpdate=ne,x.lastBaseUpdate=de,a=x.shared.interleaved,a!==null){x=a;do S|=x.lane,x=x.next;while(x!==a)}else b===null&&(x.shared.lanes=0);ko|=S,r.lanes=S,r.memoizedState=fe}}function py(r,a,u){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var p=r[a],x=p.callback;if(x!==null){if(p.callback=null,p=u,typeof x!="function")throw Error(t(191,x));x.call(p)}}}var Zl={},tr=fi(Zl),ec=fi(Zl),tc=fi(Zl);function No(r){if(r===Zl)throw Error(t(174));return r}function up(r,a){switch(it(tc,a),it(ec,r),it(tr,Zl),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Zr(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=Zr(a,r)}ht(tr),it(tr,a)}function Ta(){ht(tr),ht(ec),ht(tc)}function my(r){No(tc.current);var a=No(tr.current),u=Zr(a,r.type);a!==u&&(it(ec,r),it(tr,u))}function dp(r){ec.current===r&&(ht(tr),ht(ec))}var vt=fi(0);function cd(r){for(var a=r;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var hp=[];function fp(){for(var r=0;r<hp.length;r++)hp[r]._workInProgressVersionPrimary=null;hp.length=0}var ud=$.ReactCurrentDispatcher,pp=$.ReactCurrentBatchConfig,Eo=0,bt=null,Bt=null,Kt=null,dd=!1,nc=!1,sc=0,BS=0;function fn(){throw Error(t(321))}function mp(r,a){if(a===null)return!1;for(var u=0;u<a.length&&u<r.length;u++)if(!vs(r[u],a[u]))return!1;return!0}function gp(r,a,u,p,x,b){if(Eo=b,bt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,ud.current=r===null||r.memoizedState===null?WS:HS,r=u(p,x),nc){b=0;do{if(nc=!1,sc=0,25<=b)throw Error(t(301));b+=1,Kt=Bt=null,a.updateQueue=null,ud.current=KS,r=u(p,x)}while(nc)}if(ud.current=pd,a=Bt!==null&&Bt.next!==null,Eo=0,Kt=Bt=bt=null,dd=!1,a)throw Error(t(300));return r}function xp(){var r=sc!==0;return sc=0,r}function nr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?bt.memoizedState=Kt=r:Kt=Kt.next=r,Kt}function rs(){if(Bt===null){var r=bt.alternate;r=r!==null?r.memoizedState:null}else r=Bt.next;var a=Kt===null?bt.memoizedState:Kt.next;if(a!==null)Kt=a,Bt=r;else{if(r===null)throw Error(t(310));Bt=r,r={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Kt===null?bt.memoizedState=Kt=r:Kt=Kt.next=r}return Kt}function rc(r,a){return typeof a=="function"?a(r):a}function yp(r){var a=rs(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=r;var p=Bt,x=p.baseQueue,b=u.pending;if(b!==null){if(x!==null){var S=x.next;x.next=b.next,b.next=S}p.baseQueue=x=b,u.pending=null}if(x!==null){b=x.next,p=p.baseState;var B=S=null,W=null,ne=b;do{var de=ne.lane;if((Eo&de)===de)W!==null&&(W=W.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),p=ne.hasEagerState?ne.eagerState:r(p,ne.action);else{var fe={lane:de,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};W===null?(B=W=fe,S=p):W=W.next=fe,bt.lanes|=de,ko|=de}ne=ne.next}while(ne!==null&&ne!==b);W===null?S=p:W.next=B,vs(p,a.memoizedState)||(An=!0),a.memoizedState=p,a.baseState=S,a.baseQueue=W,u.lastRenderedState=p}if(r=u.interleaved,r!==null){x=r;do b=x.lane,bt.lanes|=b,ko|=b,x=x.next;while(x!==r)}else x===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function vp(r){var a=rs(),u=a.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=r;var p=u.dispatch,x=u.pending,b=a.memoizedState;if(x!==null){u.pending=null;var S=x=x.next;do b=r(b,S.action),S=S.next;while(S!==x);vs(b,a.memoizedState)||(An=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),u.lastRenderedState=b}return[b,p]}function gy(){}function xy(r,a){var u=bt,p=rs(),x=a(),b=!vs(p.memoizedState,x);if(b&&(p.memoizedState=x,An=!0),p=p.queue,bp(by.bind(null,u,p,r),[r]),p.getSnapshot!==a||b||Kt!==null&&Kt.memoizedState.tag&1){if(u.flags|=2048,ic(9,vy.bind(null,u,p,x,a),void 0,null),Qt===null)throw Error(t(349));(Eo&30)!==0||yy(u,a,x)}return x}function yy(r,a,u){r.flags|=16384,r={getSnapshot:a,value:u},a=bt.updateQueue,a===null?(a={lastEffect:null,stores:null},bt.updateQueue=a,a.stores=[r]):(u=a.stores,u===null?a.stores=[r]:u.push(r))}function vy(r,a,u,p){a.value=u,a.getSnapshot=p,wy(a)&&_y(r)}function by(r,a,u){return u(function(){wy(a)&&_y(r)})}function wy(r){var a=r.getSnapshot;r=r.value;try{var u=a();return!vs(r,u)}catch{return!0}}function _y(r){var a=Rr(r,1);a!==null&&Es(a,r,1,-1)}function Ny(r){var a=nr();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:rc,lastRenderedState:r},a.queue=r,r=r.dispatch=GS.bind(null,bt,r),[a.memoizedState,r]}function ic(r,a,u,p){return r={tag:r,create:a,destroy:u,deps:p,next:null},a=bt.updateQueue,a===null?(a={lastEffect:null,stores:null},bt.updateQueue=a,a.lastEffect=r.next=r):(u=a.lastEffect,u===null?a.lastEffect=r.next=r:(p=u.next,u.next=r,r.next=p,a.lastEffect=r)),r}function Ey(){return rs().memoizedState}function hd(r,a,u,p){var x=nr();bt.flags|=r,x.memoizedState=ic(1|a,u,void 0,p===void 0?null:p)}function fd(r,a,u,p){var x=rs();p=p===void 0?null:p;var b=void 0;if(Bt!==null){var S=Bt.memoizedState;if(b=S.destroy,p!==null&&mp(p,S.deps)){x.memoizedState=ic(a,u,b,p);return}}bt.flags|=r,x.memoizedState=ic(1|a,u,b,p)}function ky(r,a){return hd(8390656,8,r,a)}function bp(r,a){return fd(2048,8,r,a)}function Sy(r,a){return fd(4,2,r,a)}function Ty(r,a){return fd(4,4,r,a)}function jy(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Cy(r,a,u){return u=u!=null?u.concat([r]):null,fd(4,4,jy.bind(null,a,r),u)}function wp(){}function Iy(r,a){var u=rs();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&mp(a,p[1])?p[0]:(u.memoizedState=[r,a],r)}function Ay(r,a){var u=rs();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&mp(a,p[1])?p[0]:(r=r(),u.memoizedState=[r,a],r)}function Py(r,a,u){return(Eo&21)===0?(r.baseState&&(r.baseState=!1,An=!0),r.memoizedState=u):(vs(u,a)||(u=Al(),bt.lanes|=u,ko|=u,r.baseState=!0),a)}function $S(r,a){var u=Ke;Ke=u!==0&&4>u?u:4,r(!0);var p=pp.transition;pp.transition={};try{r(!1),a()}finally{Ke=u,pp.transition=p}}function Ry(){return rs().memoizedState}function qS(r,a,u){var p=wi(r);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},Dy(r))My(a,u);else if(u=dy(r,a,u,p),u!==null){var x=kn();Es(u,r,p,x),Vy(u,a,p)}}function GS(r,a,u){var p=wi(r),x={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(Dy(r))My(a,x);else{var b=r.alternate;if(r.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var S=a.lastRenderedState,B=b(S,u);if(x.hasEagerState=!0,x.eagerState=B,vs(B,S)){var W=a.interleaved;W===null?(x.next=x,lp(a)):(x.next=W.next,W.next=x),a.interleaved=x;return}}catch{}finally{}u=dy(r,a,x,p),u!==null&&(x=kn(),Es(u,r,p,x),Vy(u,a,p))}}function Dy(r){var a=r.alternate;return r===bt||a!==null&&a===bt}function My(r,a){nc=dd=!0;var u=r.pending;u===null?a.next=a:(a.next=u.next,u.next=a),r.pending=a}function Vy(r,a,u){if((u&4194240)!==0){var p=a.lanes;p&=r.pendingLanes,u|=p,a.lanes=u,Rl(r,u)}}var pd={readContext:ss,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},WS={readContext:ss,useCallback:function(r,a){return nr().memoizedState=[r,a===void 0?null:a],r},useContext:ss,useEffect:ky,useImperativeHandle:function(r,a,u){return u=u!=null?u.concat([r]):null,hd(4194308,4,jy.bind(null,a,r),u)},useLayoutEffect:function(r,a){return hd(4194308,4,r,a)},useInsertionEffect:function(r,a){return hd(4,2,r,a)},useMemo:function(r,a){var u=nr();return a=a===void 0?null:a,r=r(),u.memoizedState=[r,a],r},useReducer:function(r,a,u){var p=nr();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},p.queue=r,r=r.dispatch=qS.bind(null,bt,r),[p.memoizedState,r]},useRef:function(r){var a=nr();return r={current:r},a.memoizedState=r},useState:Ny,useDebugValue:wp,useDeferredValue:function(r){return nr().memoizedState=r},useTransition:function(){var r=Ny(!1),a=r[0];return r=$S.bind(null,r[1]),nr().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,u){var p=bt,x=nr();if(mt){if(u===void 0)throw Error(t(407));u=u()}else{if(u=a(),Qt===null)throw Error(t(349));(Eo&30)!==0||yy(p,a,u)}x.memoizedState=u;var b={value:u,getSnapshot:a};return x.queue=b,ky(by.bind(null,p,b,r),[r]),p.flags|=2048,ic(9,vy.bind(null,p,b,u,a),void 0,null),u},useId:function(){var r=nr(),a=Qt.identifierPrefix;if(mt){var u=Pr,p=Ar;u=(p&~(1<<32-zn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=sc++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=BS++,a=":"+a+"r"+u.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},HS={readContext:ss,useCallback:Iy,useContext:ss,useEffect:bp,useImperativeHandle:Cy,useInsertionEffect:Sy,useLayoutEffect:Ty,useMemo:Ay,useReducer:yp,useRef:Ey,useState:function(){return yp(rc)},useDebugValue:wp,useDeferredValue:function(r){var a=rs();return Py(a,Bt.memoizedState,r)},useTransition:function(){var r=yp(rc)[0],a=rs().memoizedState;return[r,a]},useMutableSource:gy,useSyncExternalStore:xy,useId:Ry,unstable_isNewReconciler:!1},KS={readContext:ss,useCallback:Iy,useContext:ss,useEffect:bp,useImperativeHandle:Cy,useInsertionEffect:Sy,useLayoutEffect:Ty,useMemo:Ay,useReducer:vp,useRef:Ey,useState:function(){return vp(rc)},useDebugValue:wp,useDeferredValue:function(r){var a=rs();return Bt===null?a.memoizedState=r:Py(a,Bt.memoizedState,r)},useTransition:function(){var r=vp(rc)[0],a=rs().memoizedState;return[r,a]},useMutableSource:gy,useSyncExternalStore:xy,useId:Ry,unstable_isNewReconciler:!1};function ws(r,a){if(r&&r.defaultProps){a=X({},a),r=r.defaultProps;for(var u in r)a[u]===void 0&&(a[u]=r[u]);return a}return a}function _p(r,a,u,p){a=r.memoizedState,u=u(p,a),u=u==null?a:X({},a,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var md={isMounted:function(r){return(r=r._reactInternals)?xs(r)===r:!1},enqueueSetState:function(r,a,u){r=r._reactInternals;var p=kn(),x=wi(r),b=Dr(p,x);b.payload=a,u!=null&&(b.callback=u),a=xi(r,b,x),a!==null&&(Es(a,r,x,p),ad(a,r,x))},enqueueReplaceState:function(r,a,u){r=r._reactInternals;var p=kn(),x=wi(r),b=Dr(p,x);b.tag=1,b.payload=a,u!=null&&(b.callback=u),a=xi(r,b,x),a!==null&&(Es(a,r,x,p),ad(a,r,x))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var u=kn(),p=wi(r),x=Dr(u,p);x.tag=2,a!=null&&(x.callback=a),a=xi(r,x,p),a!==null&&(Es(a,r,p,u),ad(a,r,p))}};function Ly(r,a,u,p,x,b,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(p,b,S):a.prototype&&a.prototype.isPureReactComponent?!Gl(u,p)||!Gl(x,b):!0}function Oy(r,a,u){var p=!1,x=pi,b=a.contextType;return typeof b=="object"&&b!==null?b=ss(b):(x=In(a)?vo:hn.current,p=a.contextTypes,b=(p=p!=null)?ba(r,x):pi),a=new a(u,b),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=md,r.stateNode=a,a._reactInternals=r,p&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=x,r.__reactInternalMemoizedMaskedChildContext=b),a}function Fy(r,a,u,p){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==r&&md.enqueueReplaceState(a,a.state,null)}function Np(r,a,u,p){var x=r.stateNode;x.props=u,x.state=r.memoizedState,x.refs={},cp(r);var b=a.contextType;typeof b=="object"&&b!==null?x.context=ss(b):(b=In(a)?vo:hn.current,x.context=ba(r,b)),x.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(_p(r,a,b,u),x.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(a=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),a!==x.state&&md.enqueueReplaceState(x,x.state,null),ld(r,u,x,p),x.state=r.memoizedState),typeof x.componentDidMount=="function"&&(r.flags|=4194308)}function ja(r,a){try{var u="",p=a;do u+=ae(p),p=p.return;while(p);var x=u}catch(b){x=`
Error generating stack: `+b.message+`
`+b.stack}return{value:r,source:a,stack:x,digest:null}}function Ep(r,a,u){return{value:r,source:null,stack:u??null,digest:a??null}}function kp(r,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var QS=typeof WeakMap=="function"?WeakMap:Map;function Uy(r,a,u){u=Dr(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){_d||(_d=!0,Up=p),kp(r,a)},u}function zy(r,a,u){u=Dr(-1,u),u.tag=3;var p=r.type.getDerivedStateFromError;if(typeof p=="function"){var x=a.value;u.payload=function(){return p(x)},u.callback=function(){kp(r,a)}}var b=r.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(u.callback=function(){kp(r,a),typeof p!="function"&&(vi===null?vi=new Set([this]):vi.add(this));var S=a.stack;this.componentDidCatch(a.value,{componentStack:S!==null?S:""})}),u}function By(r,a,u){var p=r.pingCache;if(p===null){p=r.pingCache=new QS;var x=new Set;p.set(a,x)}else x=p.get(a),x===void 0&&(x=new Set,p.set(a,x));x.has(u)||(x.add(u),r=cT.bind(null,r,a,u),a.then(r,r))}function $y(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function qy(r,a,u,p,x){return(r.mode&1)===0?(r===a?r.flags|=65536:(r.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Dr(-1,1),a.tag=2,xi(u,a,1))),u.lanes|=1),r):(r.flags|=65536,r.lanes=x,r)}var YS=$.ReactCurrentOwner,An=!1;function En(r,a,u,p){a.child=r===null?uy(a,null,u,p):Ea(a,r.child,u,p)}function Gy(r,a,u,p,x){u=u.render;var b=a.ref;return Sa(a,x),p=gp(r,a,u,p,b,x),u=xp(),r!==null&&!An?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~x,Mr(r,a,x)):(mt&&u&&Zf(a),a.flags|=1,En(r,a,p,x),a.child)}function Wy(r,a,u,p,x){if(r===null){var b=u.type;return typeof b=="function"&&!Hp(b)&&b.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=b,Hy(r,a,b,p,x)):(r=jd(u.type,null,p,a,a.mode,x),r.ref=a.ref,r.return=a,a.child=r)}if(b=r.child,(r.lanes&x)===0){var S=b.memoizedProps;if(u=u.compare,u=u!==null?u:Gl,u(S,p)&&r.ref===a.ref)return Mr(r,a,x)}return a.flags|=1,r=Ni(b,p),r.ref=a.ref,r.return=a,a.child=r}function Hy(r,a,u,p,x){if(r!==null){var b=r.memoizedProps;if(Gl(b,p)&&r.ref===a.ref)if(An=!1,a.pendingProps=p=b,(r.lanes&x)!==0)(r.flags&131072)!==0&&(An=!0);else return a.lanes=r.lanes,Mr(r,a,x)}return Sp(r,a,u,p,x)}function Ky(r,a,u){var p=a.pendingProps,x=p.children,b=r!==null?r.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Ia,Kn),Kn|=u;else{if((u&1073741824)===0)return r=b!==null?b.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,it(Ia,Kn),Kn|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=b!==null?b.baseLanes:u,it(Ia,Kn),Kn|=p}else b!==null?(p=b.baseLanes|u,a.memoizedState=null):p=u,it(Ia,Kn),Kn|=p;return En(r,a,x,u),a.child}function Qy(r,a){var u=a.ref;(r===null&&u!==null||r!==null&&r.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function Sp(r,a,u,p,x){var b=In(u)?vo:hn.current;return b=ba(a,b),Sa(a,x),u=gp(r,a,u,p,b,x),p=xp(),r!==null&&!An?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~x,Mr(r,a,x)):(mt&&p&&Zf(a),a.flags|=1,En(r,a,u,x),a.child)}function Yy(r,a,u,p,x){if(In(u)){var b=!0;Zu(a)}else b=!1;if(Sa(a,x),a.stateNode===null)xd(r,a),Oy(a,u,p),Np(a,u,p,x),p=!0;else if(r===null){var S=a.stateNode,B=a.memoizedProps;S.props=B;var W=S.context,ne=u.contextType;typeof ne=="object"&&ne!==null?ne=ss(ne):(ne=In(u)?vo:hn.current,ne=ba(a,ne));var de=u.getDerivedStateFromProps,fe=typeof de=="function"||typeof S.getSnapshotBeforeUpdate=="function";fe||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(B!==p||W!==ne)&&Fy(a,S,p,ne),gi=!1;var ue=a.memoizedState;S.state=ue,ld(a,p,S,x),W=a.memoizedState,B!==p||ue!==W||Cn.current||gi?(typeof de=="function"&&(_p(a,u,de,p),W=a.memoizedState),(B=gi||Ly(a,u,B,p,ue,W,ne))?(fe||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(a.flags|=4194308)):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=W),S.props=p,S.state=W,S.context=ne,p=B):(typeof S.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{S=a.stateNode,hy(r,a),B=a.memoizedProps,ne=a.type===a.elementType?B:ws(a.type,B),S.props=ne,fe=a.pendingProps,ue=S.context,W=u.contextType,typeof W=="object"&&W!==null?W=ss(W):(W=In(u)?vo:hn.current,W=ba(a,W));var be=u.getDerivedStateFromProps;(de=typeof be=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(B!==fe||ue!==W)&&Fy(a,S,p,W),gi=!1,ue=a.memoizedState,S.state=ue,ld(a,p,S,x);var Ee=a.memoizedState;B!==fe||ue!==Ee||Cn.current||gi?(typeof be=="function"&&(_p(a,u,be,p),Ee=a.memoizedState),(ne=gi||Ly(a,u,ne,p,ue,Ee,W)||!1)?(de||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(p,Ee,W),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(p,Ee,W)),typeof S.componentDidUpdate=="function"&&(a.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof S.componentDidUpdate!="function"||B===r.memoizedProps&&ue===r.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&ue===r.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Ee),S.props=p,S.state=Ee,S.context=W,p=ne):(typeof S.componentDidUpdate!="function"||B===r.memoizedProps&&ue===r.memoizedState||(a.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||B===r.memoizedProps&&ue===r.memoizedState||(a.flags|=1024),p=!1)}return Tp(r,a,u,p,b,x)}function Tp(r,a,u,p,x,b){Qy(r,a);var S=(a.flags&128)!==0;if(!p&&!S)return x&&ty(a,u,!1),Mr(r,a,b);p=a.stateNode,YS.current=a;var B=S&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,r!==null&&S?(a.child=Ea(a,r.child,null,b),a.child=Ea(a,null,B,b)):En(r,a,B,b),a.memoizedState=p.state,x&&ty(a,u,!0),a.child}function Xy(r){var a=r.stateNode;a.pendingContext?Zx(r,a.pendingContext,a.pendingContext!==a.context):a.context&&Zx(r,a.context,!1),up(r,a.containerInfo)}function Jy(r,a,u,p,x){return Na(),sp(x),a.flags|=256,En(r,a,u,p),a.child}var jp={dehydrated:null,treeContext:null,retryLane:0};function Cp(r){return{baseLanes:r,cachePool:null,transitions:null}}function Zy(r,a,u){var p=a.pendingProps,x=vt.current,b=!1,S=(a.flags&128)!==0,B;if((B=S)||(B=r!==null&&r.memoizedState===null?!1:(x&2)!==0),B?(b=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(x|=1),it(vt,x&1),r===null)return np(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((a.mode&1)===0?a.lanes=1:r.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(S=p.children,r=p.fallback,b?(p=a.mode,b=a.child,S={mode:"hidden",children:S},(p&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=S):b=Cd(S,p,0,null),r=Co(r,p,u,null),b.return=a,r.return=a,b.sibling=r,a.child=b,a.child.memoizedState=Cp(u),a.memoizedState=jp,r):Ip(a,S));if(x=r.memoizedState,x!==null&&(B=x.dehydrated,B!==null))return XS(r,a,S,p,B,x,u);if(b){b=p.fallback,S=a.mode,x=r.child,B=x.sibling;var W={mode:"hidden",children:p.children};return(S&1)===0&&a.child!==x?(p=a.child,p.childLanes=0,p.pendingProps=W,a.deletions=null):(p=Ni(x,W),p.subtreeFlags=x.subtreeFlags&14680064),B!==null?b=Ni(B,b):(b=Co(b,S,u,null),b.flags|=2),b.return=a,p.return=a,p.sibling=b,a.child=p,p=b,b=a.child,S=r.child.memoizedState,S=S===null?Cp(u):{baseLanes:S.baseLanes|u,cachePool:null,transitions:S.transitions},b.memoizedState=S,b.childLanes=r.childLanes&~u,a.memoizedState=jp,p}return b=r.child,r=b.sibling,p=Ni(b,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,r!==null&&(u=a.deletions,u===null?(a.deletions=[r],a.flags|=16):u.push(r)),a.child=p,a.memoizedState=null,p}function Ip(r,a){return a=Cd({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function gd(r,a,u,p){return p!==null&&sp(p),Ea(a,r.child,null,u),r=Ip(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function XS(r,a,u,p,x,b,S){if(u)return a.flags&256?(a.flags&=-257,p=Ep(Error(t(422))),gd(r,a,S,p)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(b=p.fallback,x=a.mode,p=Cd({mode:"visible",children:p.children},x,0,null),b=Co(b,x,S,null),b.flags|=2,p.return=a,b.return=a,p.sibling=b,a.child=p,(a.mode&1)!==0&&Ea(a,r.child,null,S),a.child.memoizedState=Cp(S),a.memoizedState=jp,b);if((a.mode&1)===0)return gd(r,a,S,null);if(x.data==="$!"){if(p=x.nextSibling&&x.nextSibling.dataset,p)var B=p.dgst;return p=B,b=Error(t(419)),p=Ep(b,p,void 0),gd(r,a,S,p)}if(B=(S&r.childLanes)!==0,An||B){if(p=Qt,p!==null){switch(S&-S){case 4:x=2;break;case 16:x=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:x=32;break;case 536870912:x=268435456;break;default:x=0}x=(x&(p.suspendedLanes|S))!==0?0:x,x!==0&&x!==b.retryLane&&(b.retryLane=x,Rr(r,x),Es(p,r,x,-1))}return Wp(),p=Ep(Error(t(421))),gd(r,a,S,p)}return x.data==="$?"?(a.flags|=128,a.child=r.child,a=uT.bind(null,r),x._reactRetry=a,null):(r=b.treeContext,Hn=hi(x.nextSibling),Wn=a,mt=!0,bs=null,r!==null&&(ts[ns++]=Ar,ts[ns++]=Pr,ts[ns++]=bo,Ar=r.id,Pr=r.overflow,bo=a),a=Ip(a,p.children),a.flags|=4096,a)}function ev(r,a,u){r.lanes|=a;var p=r.alternate;p!==null&&(p.lanes|=a),ap(r.return,a,u)}function Ap(r,a,u,p,x){var b=r.memoizedState;b===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:x}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=p,b.tail=u,b.tailMode=x)}function tv(r,a,u){var p=a.pendingProps,x=p.revealOrder,b=p.tail;if(En(r,a,p.children,u),p=vt.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&ev(r,u,a);else if(r.tag===19)ev(r,u,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}p&=1}if(it(vt,p),(a.mode&1)===0)a.memoizedState=null;else switch(x){case"forwards":for(u=a.child,x=null;u!==null;)r=u.alternate,r!==null&&cd(r)===null&&(x=u),u=u.sibling;u=x,u===null?(x=a.child,a.child=null):(x=u.sibling,u.sibling=null),Ap(a,!1,x,u,b);break;case"backwards":for(u=null,x=a.child,a.child=null;x!==null;){if(r=x.alternate,r!==null&&cd(r)===null){a.child=x;break}r=x.sibling,x.sibling=u,u=x,x=r}Ap(a,!0,u,null,b);break;case"together":Ap(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function xd(r,a){(a.mode&1)===0&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function Mr(r,a,u){if(r!==null&&(a.dependencies=r.dependencies),ko|=a.lanes,(u&a.childLanes)===0)return null;if(r!==null&&a.child!==r.child)throw Error(t(153));if(a.child!==null){for(r=a.child,u=Ni(r,r.pendingProps),a.child=u,u.return=a;r.sibling!==null;)r=r.sibling,u=u.sibling=Ni(r,r.pendingProps),u.return=a;u.sibling=null}return a.child}function JS(r,a,u){switch(a.tag){case 3:Xy(a),Na();break;case 5:my(a);break;case 1:In(a.type)&&Zu(a);break;case 4:up(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,x=a.memoizedProps.value;it(id,p._currentValue),p._currentValue=x;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(it(vt,vt.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?Zy(r,a,u):(it(vt,vt.current&1),r=Mr(r,a,u),r!==null?r.sibling:null);it(vt,vt.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(r.flags&128)!==0){if(p)return tv(r,a,u);a.flags|=128}if(x=a.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),it(vt,vt.current),p)break;return null;case 22:case 23:return a.lanes=0,Ky(r,a,u)}return Mr(r,a,u)}var nv,Pp,sv,rv;nv=function(r,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)r.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Pp=function(){},sv=function(r,a,u,p){var x=r.memoizedProps;if(x!==p){r=a.stateNode,No(tr.current);var b=null;switch(u){case"input":x=pt(r,x),p=pt(r,p),b=[];break;case"select":x=X({},x,{value:void 0}),p=X({},p,{value:void 0}),b=[];break;case"textarea":x=to(r,x),p=to(r,p),b=[];break;default:typeof x.onClick!="function"&&typeof p.onClick=="function"&&(r.onclick=Yu)}jn(u,p);var S;u=null;for(ne in x)if(!p.hasOwnProperty(ne)&&x.hasOwnProperty(ne)&&x[ne]!=null)if(ne==="style"){var B=x[ne];for(S in B)B.hasOwnProperty(S)&&(u||(u={}),u[S]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(i.hasOwnProperty(ne)?b||(b=[]):(b=b||[]).push(ne,null));for(ne in p){var W=p[ne];if(B=x!=null?x[ne]:void 0,p.hasOwnProperty(ne)&&W!==B&&(W!=null||B!=null))if(ne==="style")if(B){for(S in B)!B.hasOwnProperty(S)||W&&W.hasOwnProperty(S)||(u||(u={}),u[S]="");for(S in W)W.hasOwnProperty(S)&&B[S]!==W[S]&&(u||(u={}),u[S]=W[S])}else u||(b||(b=[]),b.push(ne,u)),u=W;else ne==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,B=B?B.__html:void 0,W!=null&&B!==W&&(b=b||[]).push(ne,W)):ne==="children"?typeof W!="string"&&typeof W!="number"||(b=b||[]).push(ne,""+W):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(i.hasOwnProperty(ne)?(W!=null&&ne==="onScroll"&&dt("scroll",r),b||B===W||(b=[])):(b=b||[]).push(ne,W))}u&&(b=b||[]).push("style",u);var ne=b;(a.updateQueue=ne)&&(a.flags|=4)}},rv=function(r,a,u,p){u!==p&&(a.flags|=4)};function oc(r,a){if(!mt)switch(r.tailMode){case"hidden":a=r.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:p.sibling=null}}function pn(r){var a=r.alternate!==null&&r.alternate.child===r.child,u=0,p=0;if(a)for(var x=r.child;x!==null;)u|=x.lanes|x.childLanes,p|=x.subtreeFlags&14680064,p|=x.flags&14680064,x.return=r,x=x.sibling;else for(x=r.child;x!==null;)u|=x.lanes|x.childLanes,p|=x.subtreeFlags,p|=x.flags,x.return=r,x=x.sibling;return r.subtreeFlags|=p,r.childLanes=u,a}function ZS(r,a,u){var p=a.pendingProps;switch(ep(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(a),null;case 1:return In(a.type)&&Ju(),pn(a),null;case 3:return p=a.stateNode,Ta(),ht(Cn),ht(hn),fp(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(r===null||r.child===null)&&(sd(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,bs!==null&&($p(bs),bs=null))),Pp(r,a),pn(a),null;case 5:dp(a);var x=No(tc.current);if(u=a.type,r!==null&&a.stateNode!=null)sv(r,a,u,p,x),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(t(166));return pn(a),null}if(r=No(tr.current),sd(a)){p=a.stateNode,u=a.type;var b=a.memoizedProps;switch(p[er]=a,p[Yl]=b,r=(a.mode&1)!==0,u){case"dialog":dt("cancel",p),dt("close",p);break;case"iframe":case"object":case"embed":dt("load",p);break;case"video":case"audio":for(x=0;x<Hl.length;x++)dt(Hl[x],p);break;case"source":dt("error",p);break;case"img":case"image":case"link":dt("error",p),dt("load",p);break;case"details":dt("toggle",p);break;case"input":en(p,b),dt("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!b.multiple},dt("invalid",p);break;case"textarea":no(p,b),dt("invalid",p)}jn(u,b),x=null;for(var S in b)if(b.hasOwnProperty(S)){var B=b[S];S==="children"?typeof B=="string"?p.textContent!==B&&(b.suppressHydrationWarning!==!0&&Qu(p.textContent,B,r),x=["children",B]):typeof B=="number"&&p.textContent!==""+B&&(b.suppressHydrationWarning!==!0&&Qu(p.textContent,B,r),x=["children",""+B]):i.hasOwnProperty(S)&&B!=null&&S==="onScroll"&&dt("scroll",p)}switch(u){case"input":et(p),Os(p,b,!0);break;case"textarea":et(p),yr(p);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(p.onclick=Yu)}p=x,a.updateQueue=p,p!==null&&(a.flags|=4)}else{S=x.nodeType===9?x:x.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=so(u)),r==="http://www.w3.org/1999/xhtml"?u==="script"?(r=S.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof p.is=="string"?r=S.createElement(u,{is:p.is}):(r=S.createElement(u),u==="select"&&(S=r,p.multiple?S.multiple=!0:p.size&&(S.size=p.size))):r=S.createElementNS(r,u),r[er]=a,r[Yl]=p,nv(r,a,!1,!1),a.stateNode=r;e:{switch(S=vr(u,p),u){case"dialog":dt("cancel",r),dt("close",r),x=p;break;case"iframe":case"object":case"embed":dt("load",r),x=p;break;case"video":case"audio":for(x=0;x<Hl.length;x++)dt(Hl[x],r);x=p;break;case"source":dt("error",r),x=p;break;case"img":case"image":case"link":dt("error",r),dt("load",r),x=p;break;case"details":dt("toggle",r),x=p;break;case"input":en(r,p),x=pt(r,p),dt("invalid",r);break;case"option":x=p;break;case"select":r._wrapperState={wasMultiple:!!p.multiple},x=X({},p,{value:void 0}),dt("invalid",r);break;case"textarea":no(r,p),x=to(r,p),dt("invalid",r);break;default:x=p}jn(u,x),B=x;for(b in B)if(B.hasOwnProperty(b)){var W=B[b];b==="style"?Xn(r,W):b==="dangerouslySetInnerHTML"?(W=W?W.__html:void 0,W!=null&&ke(r,W)):b==="children"?typeof W=="string"?(u!=="textarea"||W!=="")&&$e(r,W):typeof W=="number"&&$e(r,""+W):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(i.hasOwnProperty(b)?W!=null&&b==="onScroll"&&dt("scroll",r):W!=null&&q(r,b,W,S))}switch(u){case"input":et(r),Os(r,p,!1);break;case"textarea":et(r),yr(r);break;case"option":p.value!=null&&r.setAttribute("value",""+De(p.value));break;case"select":r.multiple=!!p.multiple,b=p.value,b!=null?un(r,!!p.multiple,b,!1):p.defaultValue!=null&&un(r,!!p.multiple,p.defaultValue,!0);break;default:typeof x.onClick=="function"&&(r.onclick=Yu)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return pn(a),null;case 6:if(r&&a.stateNode!=null)rv(r,a,r.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(t(166));if(u=No(tc.current),No(tr.current),sd(a)){if(p=a.stateNode,u=a.memoizedProps,p[er]=a,(b=p.nodeValue!==u)&&(r=Wn,r!==null))switch(r.tag){case 3:Qu(p.nodeValue,u,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Qu(p.nodeValue,u,(r.mode&1)!==0)}b&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[er]=a,a.stateNode=p}return pn(a),null;case 13:if(ht(vt),p=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(mt&&Hn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)ay(),Na(),a.flags|=98560,b=!1;else if(b=sd(a),p!==null&&p.dehydrated!==null){if(r===null){if(!b)throw Error(t(318));if(b=a.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[er]=a}else Na(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pn(a),b=!1}else bs!==null&&($p(bs),bs=null),b=!0;if(!b)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(r!==null&&r.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(r===null||(vt.current&1)!==0?$t===0&&($t=3):Wp())),a.updateQueue!==null&&(a.flags|=4),pn(a),null);case 4:return Ta(),Pp(r,a),r===null&&Kl(a.stateNode.containerInfo),pn(a),null;case 10:return op(a.type._context),pn(a),null;case 17:return In(a.type)&&Ju(),pn(a),null;case 19:if(ht(vt),b=a.memoizedState,b===null)return pn(a),null;if(p=(a.flags&128)!==0,S=b.rendering,S===null)if(p)oc(b,!1);else{if($t!==0||r!==null&&(r.flags&128)!==0)for(r=a.child;r!==null;){if(S=cd(r),S!==null){for(a.flags|=128,oc(b,!1),p=S.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)b=u,r=p,b.flags&=14680066,S=b.alternate,S===null?(b.childLanes=0,b.lanes=r,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=S.childLanes,b.lanes=S.lanes,b.child=S.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=S.memoizedProps,b.memoizedState=S.memoizedState,b.updateQueue=S.updateQueue,b.type=S.type,r=S.dependencies,b.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),u=u.sibling;return it(vt,vt.current&1|2),a.child}r=r.sibling}b.tail!==null&&ut()>Aa&&(a.flags|=128,p=!0,oc(b,!1),a.lanes=4194304)}else{if(!p)if(r=cd(S),r!==null){if(a.flags|=128,p=!0,u=r.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),oc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!S.alternate&&!mt)return pn(a),null}else 2*ut()-b.renderingStartTime>Aa&&u!==1073741824&&(a.flags|=128,p=!0,oc(b,!1),a.lanes=4194304);b.isBackwards?(S.sibling=a.child,a.child=S):(u=b.last,u!==null?u.sibling=S:a.child=S,b.last=S)}return b.tail!==null?(a=b.tail,b.rendering=a,b.tail=a.sibling,b.renderingStartTime=ut(),a.sibling=null,u=vt.current,it(vt,p?u&1|2:u&1),a):(pn(a),null);case 22:case 23:return Gp(),p=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(Kn&1073741824)!==0&&(pn(a),a.subtreeFlags&6&&(a.flags|=8192)):pn(a),null;case 24:return null;case 25:return null}throw Error(t(156,a.tag))}function eT(r,a){switch(ep(a),a.tag){case 1:return In(a.type)&&Ju(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ta(),ht(Cn),ht(hn),fp(),r=a.flags,(r&65536)!==0&&(r&128)===0?(a.flags=r&-65537|128,a):null;case 5:return dp(a),null;case 13:if(ht(vt),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(t(340));Na()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return ht(vt),null;case 4:return Ta(),null;case 10:return op(a.type._context),null;case 22:case 23:return Gp(),null;case 24:return null;default:return null}}var yd=!1,mn=!1,tT=typeof WeakSet=="function"?WeakSet:Set,_e=null;function Ca(r,a){var u=r.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){Ct(r,a,p)}else u.current=null}function Rp(r,a,u){try{u()}catch(p){Ct(r,a,p)}}var iv=!1;function nT(r,a){if(Gf=Sr,r=Lx(),Lf(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var x=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{u.nodeType,b.nodeType}catch{u=null;break e}var S=0,B=-1,W=-1,ne=0,de=0,fe=r,ue=null;t:for(;;){for(var be;fe!==u||x!==0&&fe.nodeType!==3||(B=S+x),fe!==b||p!==0&&fe.nodeType!==3||(W=S+p),fe.nodeType===3&&(S+=fe.nodeValue.length),(be=fe.firstChild)!==null;)ue=fe,fe=be;for(;;){if(fe===r)break t;if(ue===u&&++ne===x&&(B=S),ue===b&&++de===p&&(W=S),(be=fe.nextSibling)!==null)break;fe=ue,ue=fe.parentNode}fe=be}u=B===-1||W===-1?null:{start:B,end:W}}else u=null}u=u||{start:0,end:0}}else u=null;for(Wf={focusedElem:r,selectionRange:u},Sr=!1,_e=a;_e!==null;)if(a=_e,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,_e=r;else for(;_e!==null;){a=_e;try{var Ee=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ee!==null){var Se=Ee.memoizedProps,Rt=Ee.memoizedState,Z=a.stateNode,H=Z.getSnapshotBeforeUpdate(a.elementType===a.type?Se:ws(a.type,Se),Rt);Z.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var te=a.stateNode.containerInfo;te.nodeType===1?te.textContent="":te.nodeType===9&&te.documentElement&&te.removeChild(te.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){Ct(a,a.return,pe)}if(r=a.sibling,r!==null){r.return=a.return,_e=r;break}_e=a.return}return Ee=iv,iv=!1,Ee}function ac(r,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var x=p=p.next;do{if((x.tag&r)===r){var b=x.destroy;x.destroy=void 0,b!==void 0&&Rp(a,u,b)}x=x.next}while(x!==p)}}function vd(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&r)===r){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function Dp(r){var a=r.ref;if(a!==null){var u=r.stateNode;switch(r.tag){case 5:r=u;break;default:r=u}typeof a=="function"?a(r):a.current=r}}function ov(r){var a=r.alternate;a!==null&&(r.alternate=null,ov(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[er],delete a[Yl],delete a[Yf],delete a[OS],delete a[FS])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function av(r){return r.tag===5||r.tag===3||r.tag===4}function lv(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||av(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Mp(r,a,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(r,a):u.insertBefore(r,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(r,u)):(a=u,a.appendChild(r)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=Yu));else if(p!==4&&(r=r.child,r!==null))for(Mp(r,a,u),r=r.sibling;r!==null;)Mp(r,a,u),r=r.sibling}function Vp(r,a,u){var p=r.tag;if(p===5||p===6)r=r.stateNode,a?u.insertBefore(r,a):u.appendChild(r);else if(p!==4&&(r=r.child,r!==null))for(Vp(r,a,u),r=r.sibling;r!==null;)Vp(r,a,u),r=r.sibling}var sn=null,_s=!1;function yi(r,a,u){for(u=u.child;u!==null;)cv(r,a,u),u=u.sibling}function cv(r,a,u){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(lo,u)}catch{}switch(u.tag){case 5:mn||Ca(u,a);case 6:var p=sn,x=_s;sn=null,yi(r,a,u),sn=p,_s=x,sn!==null&&(_s?(r=sn,u=u.stateNode,r.nodeType===8?r.parentNode.removeChild(u):r.removeChild(u)):sn.removeChild(u.stateNode));break;case 18:sn!==null&&(_s?(r=sn,u=u.stateNode,r.nodeType===8?Qf(r.parentNode,u):r.nodeType===1&&Qf(r,u),li(r)):Qf(sn,u.stateNode));break;case 4:p=sn,x=_s,sn=u.stateNode.containerInfo,_s=!0,yi(r,a,u),sn=p,_s=x;break;case 0:case 11:case 14:case 15:if(!mn&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){x=p=p.next;do{var b=x,S=b.destroy;b=b.tag,S!==void 0&&((b&2)!==0||(b&4)!==0)&&Rp(u,a,S),x=x.next}while(x!==p)}yi(r,a,u);break;case 1:if(!mn&&(Ca(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(B){Ct(u,a,B)}yi(r,a,u);break;case 21:yi(r,a,u);break;case 22:u.mode&1?(mn=(p=mn)||u.memoizedState!==null,yi(r,a,u),mn=p):yi(r,a,u);break;default:yi(r,a,u)}}function uv(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var u=r.stateNode;u===null&&(u=r.stateNode=new tT),a.forEach(function(p){var x=dT.bind(null,r,p);u.has(p)||(u.add(p),p.then(x,x))})}}function Ns(r,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var x=u[p];try{var b=r,S=a,B=S;e:for(;B!==null;){switch(B.tag){case 5:sn=B.stateNode,_s=!1;break e;case 3:sn=B.stateNode.containerInfo,_s=!0;break e;case 4:sn=B.stateNode.containerInfo,_s=!0;break e}B=B.return}if(sn===null)throw Error(t(160));cv(b,S,x),sn=null,_s=!1;var W=x.alternate;W!==null&&(W.return=null),x.return=null}catch(ne){Ct(x,a,ne)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)dv(a,r),a=a.sibling}function dv(r,a){var u=r.alternate,p=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Ns(a,r),sr(r),p&4){try{ac(3,r,r.return),vd(3,r)}catch(Se){Ct(r,r.return,Se)}try{ac(5,r,r.return)}catch(Se){Ct(r,r.return,Se)}}break;case 1:Ns(a,r),sr(r),p&512&&u!==null&&Ca(u,u.return);break;case 5:if(Ns(a,r),sr(r),p&512&&u!==null&&Ca(u,u.return),r.flags&32){var x=r.stateNode;try{$e(x,"")}catch(Se){Ct(r,r.return,Se)}}if(p&4&&(x=r.stateNode,x!=null)){var b=r.memoizedProps,S=u!==null?u.memoizedProps:b,B=r.type,W=r.updateQueue;if(r.updateQueue=null,W!==null)try{B==="input"&&b.type==="radio"&&b.name!=null&&Ht(x,b),vr(B,S);var ne=vr(B,b);for(S=0;S<W.length;S+=2){var de=W[S],fe=W[S+1];de==="style"?Xn(x,fe):de==="dangerouslySetInnerHTML"?ke(x,fe):de==="children"?$e(x,fe):q(x,de,fe,ne)}switch(B){case"input":Ls(x,b);break;case"textarea":Xo(x,b);break;case"select":var ue=x._wrapperState.wasMultiple;x._wrapperState.wasMultiple=!!b.multiple;var be=b.value;be!=null?un(x,!!b.multiple,be,!1):ue!==!!b.multiple&&(b.defaultValue!=null?un(x,!!b.multiple,b.defaultValue,!0):un(x,!!b.multiple,b.multiple?[]:"",!1))}x[Yl]=b}catch(Se){Ct(r,r.return,Se)}}break;case 6:if(Ns(a,r),sr(r),p&4){if(r.stateNode===null)throw Error(t(162));x=r.stateNode,b=r.memoizedProps;try{x.nodeValue=b}catch(Se){Ct(r,r.return,Se)}}break;case 3:if(Ns(a,r),sr(r),p&4&&u!==null&&u.memoizedState.isDehydrated)try{li(a.containerInfo)}catch(Se){Ct(r,r.return,Se)}break;case 4:Ns(a,r),sr(r);break;case 13:Ns(a,r),sr(r),x=r.child,x.flags&8192&&(b=x.memoizedState!==null,x.stateNode.isHidden=b,!b||x.alternate!==null&&x.alternate.memoizedState!==null||(Fp=ut())),p&4&&uv(r);break;case 22:if(de=u!==null&&u.memoizedState!==null,r.mode&1?(mn=(ne=mn)||de,Ns(a,r),mn=ne):Ns(a,r),sr(r),p&8192){if(ne=r.memoizedState!==null,(r.stateNode.isHidden=ne)&&!de&&(r.mode&1)!==0)for(_e=r,de=r.child;de!==null;){for(fe=_e=de;_e!==null;){switch(ue=_e,be=ue.child,ue.tag){case 0:case 11:case 14:case 15:ac(4,ue,ue.return);break;case 1:Ca(ue,ue.return);var Ee=ue.stateNode;if(typeof Ee.componentWillUnmount=="function"){p=ue,u=ue.return;try{a=p,Ee.props=a.memoizedProps,Ee.state=a.memoizedState,Ee.componentWillUnmount()}catch(Se){Ct(p,u,Se)}}break;case 5:Ca(ue,ue.return);break;case 22:if(ue.memoizedState!==null){pv(fe);continue}}be!==null?(be.return=ue,_e=be):pv(fe)}de=de.sibling}e:for(de=null,fe=r;;){if(fe.tag===5){if(de===null){de=fe;try{x=fe.stateNode,ne?(b=x.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(B=fe.stateNode,W=fe.memoizedProps.style,S=W!=null&&W.hasOwnProperty("display")?W.display:null,B.style.display=yt("display",S))}catch(Se){Ct(r,r.return,Se)}}}else if(fe.tag===6){if(de===null)try{fe.stateNode.nodeValue=ne?"":fe.memoizedProps}catch(Se){Ct(r,r.return,Se)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===r)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===r)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===r)break e;de===fe&&(de=null),fe=fe.return}de===fe&&(de=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:Ns(a,r),sr(r),p&4&&uv(r);break;case 21:break;default:Ns(a,r),sr(r)}}function sr(r){var a=r.flags;if(a&2){try{e:{for(var u=r.return;u!==null;){if(av(u)){var p=u;break e}u=u.return}throw Error(t(160))}switch(p.tag){case 5:var x=p.stateNode;p.flags&32&&($e(x,""),p.flags&=-33);var b=lv(r);Vp(r,b,x);break;case 3:case 4:var S=p.stateNode.containerInfo,B=lv(r);Mp(r,B,S);break;default:throw Error(t(161))}}catch(W){Ct(r,r.return,W)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function sT(r,a,u){_e=r,hv(r)}function hv(r,a,u){for(var p=(r.mode&1)!==0;_e!==null;){var x=_e,b=x.child;if(x.tag===22&&p){var S=x.memoizedState!==null||yd;if(!S){var B=x.alternate,W=B!==null&&B.memoizedState!==null||mn;B=yd;var ne=mn;if(yd=S,(mn=W)&&!ne)for(_e=x;_e!==null;)S=_e,W=S.child,S.tag===22&&S.memoizedState!==null?mv(x):W!==null?(W.return=S,_e=W):mv(x);for(;b!==null;)_e=b,hv(b),b=b.sibling;_e=x,yd=B,mn=ne}fv(r)}else(x.subtreeFlags&8772)!==0&&b!==null?(b.return=x,_e=b):fv(r)}}function fv(r){for(;_e!==null;){var a=_e;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:mn||vd(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!mn)if(u===null)p.componentDidMount();else{var x=a.elementType===a.type?u.memoizedProps:ws(a.type,u.memoizedProps);p.componentDidUpdate(x,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var b=a.updateQueue;b!==null&&py(a,b,p);break;case 3:var S=a.updateQueue;if(S!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}py(a,S,u)}break;case 5:var B=a.stateNode;if(u===null&&a.flags&4){u=B;var W=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":W.autoFocus&&u.focus();break;case"img":W.src&&(u.src=W.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ne=a.alternate;if(ne!==null){var de=ne.memoizedState;if(de!==null){var fe=de.dehydrated;fe!==null&&li(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mn||a.flags&512&&Dp(a)}catch(ue){Ct(a,a.return,ue)}}if(a===r){_e=null;break}if(u=a.sibling,u!==null){u.return=a.return,_e=u;break}_e=a.return}}function pv(r){for(;_e!==null;){var a=_e;if(a===r){_e=null;break}var u=a.sibling;if(u!==null){u.return=a.return,_e=u;break}_e=a.return}}function mv(r){for(;_e!==null;){var a=_e;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{vd(4,a)}catch(W){Ct(a,u,W)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var x=a.return;try{p.componentDidMount()}catch(W){Ct(a,x,W)}}var b=a.return;try{Dp(a)}catch(W){Ct(a,b,W)}break;case 5:var S=a.return;try{Dp(a)}catch(W){Ct(a,S,W)}}}catch(W){Ct(a,a.return,W)}if(a===r){_e=null;break}var B=a.sibling;if(B!==null){B.return=a.return,_e=B;break}_e=a.return}}var rT=Math.ceil,bd=$.ReactCurrentDispatcher,Lp=$.ReactCurrentOwner,is=$.ReactCurrentBatchConfig,Ye=0,Qt=null,Lt=null,rn=0,Kn=0,Ia=fi(0),$t=0,lc=null,ko=0,wd=0,Op=0,cc=null,Pn=null,Fp=0,Aa=1/0,Vr=null,_d=!1,Up=null,vi=null,Nd=!1,bi=null,Ed=0,uc=0,zp=null,kd=-1,Sd=0;function kn(){return(Ye&6)!==0?ut():kd!==-1?kd:kd=ut()}function wi(r){return(r.mode&1)===0?1:(Ye&2)!==0&&rn!==0?rn&-rn:zS.transition!==null?(Sd===0&&(Sd=Al()),Sd):(r=Ke,r!==0||(r=window.event,r=r===void 0?16:oa(r.type)),r)}function Es(r,a,u,p){if(50<uc)throw uc=0,zp=null,Error(t(185));fo(r,u,p),((Ye&2)===0||r!==Qt)&&(r===Qt&&((Ye&2)===0&&(wd|=u),$t===4&&_i(r,rn)),Rn(r,p),u===1&&Ye===0&&(a.mode&1)===0&&(Aa=ut()+500,ed&&mi()))}function Rn(r,a){var u=r.callbackNode;ho(r,a);var p=Nr(r,r===Qt?rn:0);if(p===0)u!==null&&Zo(u),r.callbackNode=null,r.callbackPriority=0;else if(a=p&-p,r.callbackPriority!==a){if(u!=null&&Zo(u),a===1)r.tag===0?US(xv.bind(null,r)):ny(xv.bind(null,r)),VS(function(){(Ye&6)===0&&mi()}),u=null;else{switch(qs(p)){case 1:u=ea;break;case 4:u=jl;break;case 16:u=ao;break;case 536870912:u=ta;break;default:u=ao}u=kv(u,gv.bind(null,r))}r.callbackPriority=a,r.callbackNode=u}}function gv(r,a){if(kd=-1,Sd=0,(Ye&6)!==0)throw Error(t(327));var u=r.callbackNode;if(Pa()&&r.callbackNode!==u)return null;var p=Nr(r,r===Qt?rn:0);if(p===0)return null;if((p&30)!==0||(p&r.expiredLanes)!==0||a)a=Td(r,p);else{a=p;var x=Ye;Ye|=2;var b=vv();(Qt!==r||rn!==a)&&(Vr=null,Aa=ut()+500,To(r,a));do try{aT();break}catch(B){yv(r,B)}while(!0);ip(),bd.current=b,Ye=x,Lt!==null?a=0:(Qt=null,rn=0,a=$t)}if(a!==0){if(a===2&&(x=Il(r),x!==0&&(p=x,a=Bp(r,x))),a===1)throw u=lc,To(r,0),_i(r,p),Rn(r,ut()),u;if(a===6)_i(r,p);else{if(x=r.current.alternate,(p&30)===0&&!iT(x)&&(a=Td(r,p),a===2&&(b=Il(r),b!==0&&(p=b,a=Bp(r,b))),a===1))throw u=lc,To(r,0),_i(r,p),Rn(r,ut()),u;switch(r.finishedWork=x,r.finishedLanes=p,a){case 0:case 1:throw Error(t(345));case 2:jo(r,Pn,Vr);break;case 3:if(_i(r,p),(p&130023424)===p&&(a=Fp+500-ut(),10<a)){if(Nr(r,0)!==0)break;if(x=r.suspendedLanes,(x&p)!==p){kn(),r.pingedLanes|=r.suspendedLanes&x;break}r.timeoutHandle=Kf(jo.bind(null,r,Pn,Vr),a);break}jo(r,Pn,Vr);break;case 4:if(_i(r,p),(p&4194240)===p)break;for(a=r.eventTimes,x=-1;0<p;){var S=31-zn(p);b=1<<S,S=a[S],S>x&&(x=S),p&=~b}if(p=x,p=ut()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*rT(p/1960))-p,10<p){r.timeoutHandle=Kf(jo.bind(null,r,Pn,Vr),p);break}jo(r,Pn,Vr);break;case 5:jo(r,Pn,Vr);break;default:throw Error(t(329))}}}return Rn(r,ut()),r.callbackNode===u?gv.bind(null,r):null}function Bp(r,a){var u=cc;return r.current.memoizedState.isDehydrated&&(To(r,a).flags|=256),r=Td(r,a),r!==2&&(a=Pn,Pn=u,a!==null&&$p(a)),r}function $p(r){Pn===null?Pn=r:Pn.push.apply(Pn,r)}function iT(r){for(var a=r;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var x=u[p],b=x.getSnapshot;x=x.value;try{if(!vs(b(),x))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function _i(r,a){for(a&=~Op,a&=~wd,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var u=31-zn(a),p=1<<u;r[u]=-1,a&=~p}}function xv(r){if((Ye&6)!==0)throw Error(t(327));Pa();var a=Nr(r,0);if((a&1)===0)return Rn(r,ut()),null;var u=Td(r,a);if(r.tag!==0&&u===2){var p=Il(r);p!==0&&(a=p,u=Bp(r,p))}if(u===1)throw u=lc,To(r,0),_i(r,a),Rn(r,ut()),u;if(u===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,jo(r,Pn,Vr),Rn(r,ut()),null}function qp(r,a){var u=Ye;Ye|=1;try{return r(a)}finally{Ye=u,Ye===0&&(Aa=ut()+500,ed&&mi())}}function So(r){bi!==null&&bi.tag===0&&(Ye&6)===0&&Pa();var a=Ye;Ye|=1;var u=is.transition,p=Ke;try{if(is.transition=null,Ke=1,r)return r()}finally{Ke=p,is.transition=u,Ye=a,(Ye&6)===0&&mi()}}function Gp(){Kn=Ia.current,ht(Ia)}function To(r,a){r.finishedWork=null,r.finishedLanes=0;var u=r.timeoutHandle;if(u!==-1&&(r.timeoutHandle=-1,MS(u)),Lt!==null)for(u=Lt.return;u!==null;){var p=u;switch(ep(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&Ju();break;case 3:Ta(),ht(Cn),ht(hn),fp();break;case 5:dp(p);break;case 4:Ta();break;case 13:ht(vt);break;case 19:ht(vt);break;case 10:op(p.type._context);break;case 22:case 23:Gp()}u=u.return}if(Qt=r,Lt=r=Ni(r.current,null),rn=Kn=a,$t=0,lc=null,Op=wd=ko=0,Pn=cc=null,_o!==null){for(a=0;a<_o.length;a++)if(u=_o[a],p=u.interleaved,p!==null){u.interleaved=null;var x=p.next,b=u.pending;if(b!==null){var S=b.next;b.next=x,p.next=S}u.pending=p}_o=null}return r}function yv(r,a){do{var u=Lt;try{if(ip(),ud.current=pd,dd){for(var p=bt.memoizedState;p!==null;){var x=p.queue;x!==null&&(x.pending=null),p=p.next}dd=!1}if(Eo=0,Kt=Bt=bt=null,nc=!1,sc=0,Lp.current=null,u===null||u.return===null){$t=1,lc=a,Lt=null;break}e:{var b=r,S=u.return,B=u,W=a;if(a=rn,B.flags|=32768,W!==null&&typeof W=="object"&&typeof W.then=="function"){var ne=W,de=B,fe=de.tag;if((de.mode&1)===0&&(fe===0||fe===11||fe===15)){var ue=de.alternate;ue?(de.updateQueue=ue.updateQueue,de.memoizedState=ue.memoizedState,de.lanes=ue.lanes):(de.updateQueue=null,de.memoizedState=null)}var be=$y(S);if(be!==null){be.flags&=-257,qy(be,S,B,b,a),be.mode&1&&By(b,ne,a),a=be,W=ne;var Ee=a.updateQueue;if(Ee===null){var Se=new Set;Se.add(W),a.updateQueue=Se}else Ee.add(W);break e}else{if((a&1)===0){By(b,ne,a),Wp();break e}W=Error(t(426))}}else if(mt&&B.mode&1){var Rt=$y(S);if(Rt!==null){(Rt.flags&65536)===0&&(Rt.flags|=256),qy(Rt,S,B,b,a),sp(ja(W,B));break e}}b=W=ja(W,B),$t!==4&&($t=2),cc===null?cc=[b]:cc.push(b),b=S;do{switch(b.tag){case 3:b.flags|=65536,a&=-a,b.lanes|=a;var Z=Uy(b,W,a);fy(b,Z);break e;case 1:B=W;var H=b.type,te=b.stateNode;if((b.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||te!==null&&typeof te.componentDidCatch=="function"&&(vi===null||!vi.has(te)))){b.flags|=65536,a&=-a,b.lanes|=a;var pe=zy(b,B,a);fy(b,pe);break e}}b=b.return}while(b!==null)}wv(u)}catch(Te){a=Te,Lt===u&&u!==null&&(Lt=u=u.return);continue}break}while(!0)}function vv(){var r=bd.current;return bd.current=pd,r===null?pd:r}function Wp(){($t===0||$t===3||$t===2)&&($t=4),Qt===null||(ko&268435455)===0&&(wd&268435455)===0||_i(Qt,rn)}function Td(r,a){var u=Ye;Ye|=2;var p=vv();(Qt!==r||rn!==a)&&(Vr=null,To(r,a));do try{oT();break}catch(x){yv(r,x)}while(!0);if(ip(),Ye=u,bd.current=p,Lt!==null)throw Error(t(261));return Qt=null,rn=0,$t}function oT(){for(;Lt!==null;)bv(Lt)}function aT(){for(;Lt!==null&&!oo();)bv(Lt)}function bv(r){var a=Ev(r.alternate,r,Kn);r.memoizedProps=r.pendingProps,a===null?wv(r):Lt=a,Lp.current=null}function wv(r){var a=r;do{var u=a.alternate;if(r=a.return,(a.flags&32768)===0){if(u=ZS(u,a,Kn),u!==null){Lt=u;return}}else{if(u=eT(u,a),u!==null){u.flags&=32767,Lt=u;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{$t=6,Lt=null;return}}if(a=a.sibling,a!==null){Lt=a;return}Lt=a=r}while(a!==null);$t===0&&($t=5)}function jo(r,a,u){var p=Ke,x=is.transition;try{is.transition=null,Ke=1,lT(r,a,u,p)}finally{is.transition=x,Ke=p}return null}function lT(r,a,u,p){do Pa();while(bi!==null);if((Ye&6)!==0)throw Error(t(327));u=r.finishedWork;var x=r.finishedLanes;if(u===null)return null;if(r.finishedWork=null,r.finishedLanes=0,u===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var b=u.lanes|u.childLanes;if(Pf(r,b),r===Qt&&(Lt=Qt=null,rn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Nd||(Nd=!0,kv(ao,function(){return Pa(),null})),b=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||b){b=is.transition,is.transition=null;var S=Ke;Ke=1;var B=Ye;Ye|=4,Lp.current=null,nT(r,u),dv(u,r),jS(Wf),Sr=!!Gf,Wf=Gf=null,r.current=u,sT(u),_r(),Ye=B,Ke=S,is.transition=b}else r.current=u;if(Nd&&(Nd=!1,bi=r,Ed=x),b=r.pendingLanes,b===0&&(vi=null),Du(u.stateNode),Rn(r,ut()),a!==null)for(p=r.onRecoverableError,u=0;u<a.length;u++)x=a[u],p(x.value,{componentStack:x.stack,digest:x.digest});if(_d)throw _d=!1,r=Up,Up=null,r;return(Ed&1)!==0&&r.tag!==0&&Pa(),b=r.pendingLanes,(b&1)!==0?r===zp?uc++:(uc=0,zp=r):uc=0,mi(),null}function Pa(){if(bi!==null){var r=qs(Ed),a=is.transition,u=Ke;try{if(is.transition=null,Ke=16>r?16:r,bi===null)var p=!1;else{if(r=bi,bi=null,Ed=0,(Ye&6)!==0)throw Error(t(331));var x=Ye;for(Ye|=4,_e=r.current;_e!==null;){var b=_e,S=b.child;if((_e.flags&16)!==0){var B=b.deletions;if(B!==null){for(var W=0;W<B.length;W++){var ne=B[W];for(_e=ne;_e!==null;){var de=_e;switch(de.tag){case 0:case 11:case 15:ac(8,de,b)}var fe=de.child;if(fe!==null)fe.return=de,_e=fe;else for(;_e!==null;){de=_e;var ue=de.sibling,be=de.return;if(ov(de),de===ne){_e=null;break}if(ue!==null){ue.return=be,_e=ue;break}_e=be}}}var Ee=b.alternate;if(Ee!==null){var Se=Ee.child;if(Se!==null){Ee.child=null;do{var Rt=Se.sibling;Se.sibling=null,Se=Rt}while(Se!==null)}}_e=b}}if((b.subtreeFlags&2064)!==0&&S!==null)S.return=b,_e=S;else e:for(;_e!==null;){if(b=_e,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:ac(9,b,b.return)}var Z=b.sibling;if(Z!==null){Z.return=b.return,_e=Z;break e}_e=b.return}}var H=r.current;for(_e=H;_e!==null;){S=_e;var te=S.child;if((S.subtreeFlags&2064)!==0&&te!==null)te.return=S,_e=te;else e:for(S=H;_e!==null;){if(B=_e,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:vd(9,B)}}catch(Te){Ct(B,B.return,Te)}if(B===S){_e=null;break e}var pe=B.sibling;if(pe!==null){pe.return=B.return,_e=pe;break e}_e=B.return}}if(Ye=x,mi(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(lo,r)}catch{}p=!0}return p}finally{Ke=u,is.transition=a}}return!1}function _v(r,a,u){a=ja(u,a),a=Uy(r,a,1),r=xi(r,a,1),a=kn(),r!==null&&(fo(r,1,a),Rn(r,a))}function Ct(r,a,u){if(r.tag===3)_v(r,r,u);else for(;a!==null;){if(a.tag===3){_v(a,r,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(vi===null||!vi.has(p))){r=ja(u,r),r=zy(a,r,1),a=xi(a,r,1),r=kn(),a!==null&&(fo(a,1,r),Rn(a,r));break}}a=a.return}}function cT(r,a,u){var p=r.pingCache;p!==null&&p.delete(a),a=kn(),r.pingedLanes|=r.suspendedLanes&u,Qt===r&&(rn&u)===u&&($t===4||$t===3&&(rn&130023424)===rn&&500>ut()-Fp?To(r,0):Op|=u),Rn(r,a)}function Nv(r,a){a===0&&((r.mode&1)===0?a=1:(a=ii,ii<<=1,(ii&130023424)===0&&(ii=4194304)));var u=kn();r=Rr(r,a),r!==null&&(fo(r,a,u),Rn(r,u))}function uT(r){var a=r.memoizedState,u=0;a!==null&&(u=a.retryLane),Nv(r,u)}function dT(r,a){var u=0;switch(r.tag){case 13:var p=r.stateNode,x=r.memoizedState;x!==null&&(u=x.retryLane);break;case 19:p=r.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(a),Nv(r,u)}var Ev;Ev=function(r,a,u){if(r!==null)if(r.memoizedProps!==a.pendingProps||Cn.current)An=!0;else{if((r.lanes&u)===0&&(a.flags&128)===0)return An=!1,JS(r,a,u);An=(r.flags&131072)!==0}else An=!1,mt&&(a.flags&1048576)!==0&&sy(a,nd,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;xd(r,a),r=a.pendingProps;var x=ba(a,hn.current);Sa(a,u),x=gp(null,a,p,r,x,u);var b=xp();return a.flags|=1,typeof x=="object"&&x!==null&&typeof x.render=="function"&&x.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,In(p)?(b=!0,Zu(a)):b=!1,a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,cp(a),x.updater=md,a.stateNode=x,x._reactInternals=a,Np(a,p,r,u),a=Tp(null,a,p,!0,b,u)):(a.tag=0,mt&&b&&Zf(a),En(null,a,x,u),a=a.child),a;case 16:p=a.elementType;e:{switch(xd(r,a),r=a.pendingProps,x=p._init,p=x(p._payload),a.type=p,x=a.tag=fT(p),r=ws(p,r),x){case 0:a=Sp(null,a,p,r,u);break e;case 1:a=Yy(null,a,p,r,u);break e;case 11:a=Gy(null,a,p,r,u);break e;case 14:a=Wy(null,a,p,ws(p.type,r),u);break e}throw Error(t(306,p,""))}return a;case 0:return p=a.type,x=a.pendingProps,x=a.elementType===p?x:ws(p,x),Sp(r,a,p,x,u);case 1:return p=a.type,x=a.pendingProps,x=a.elementType===p?x:ws(p,x),Yy(r,a,p,x,u);case 3:e:{if(Xy(a),r===null)throw Error(t(387));p=a.pendingProps,b=a.memoizedState,x=b.element,hy(r,a),ld(a,p,null,u);var S=a.memoizedState;if(p=S.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){x=ja(Error(t(423)),a),a=Jy(r,a,p,u,x);break e}else if(p!==x){x=ja(Error(t(424)),a),a=Jy(r,a,p,u,x);break e}else for(Hn=hi(a.stateNode.containerInfo.firstChild),Wn=a,mt=!0,bs=null,u=uy(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Na(),p===x){a=Mr(r,a,u);break e}En(r,a,p,u)}a=a.child}return a;case 5:return my(a),r===null&&np(a),p=a.type,x=a.pendingProps,b=r!==null?r.memoizedProps:null,S=x.children,Hf(p,x)?S=null:b!==null&&Hf(p,b)&&(a.flags|=32),Qy(r,a),En(r,a,S,u),a.child;case 6:return r===null&&np(a),null;case 13:return Zy(r,a,u);case 4:return up(a,a.stateNode.containerInfo),p=a.pendingProps,r===null?a.child=Ea(a,null,p,u):En(r,a,p,u),a.child;case 11:return p=a.type,x=a.pendingProps,x=a.elementType===p?x:ws(p,x),Gy(r,a,p,x,u);case 7:return En(r,a,a.pendingProps,u),a.child;case 8:return En(r,a,a.pendingProps.children,u),a.child;case 12:return En(r,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,x=a.pendingProps,b=a.memoizedProps,S=x.value,it(id,p._currentValue),p._currentValue=S,b!==null)if(vs(b.value,S)){if(b.children===x.children&&!Cn.current){a=Mr(r,a,u);break e}}else for(b=a.child,b!==null&&(b.return=a);b!==null;){var B=b.dependencies;if(B!==null){S=b.child;for(var W=B.firstContext;W!==null;){if(W.context===p){if(b.tag===1){W=Dr(-1,u&-u),W.tag=2;var ne=b.updateQueue;if(ne!==null){ne=ne.shared;var de=ne.pending;de===null?W.next=W:(W.next=de.next,de.next=W),ne.pending=W}}b.lanes|=u,W=b.alternate,W!==null&&(W.lanes|=u),ap(b.return,u,a),B.lanes|=u;break}W=W.next}}else if(b.tag===10)S=b.type===a.type?null:b.child;else if(b.tag===18){if(S=b.return,S===null)throw Error(t(341));S.lanes|=u,B=S.alternate,B!==null&&(B.lanes|=u),ap(S,u,a),S=b.sibling}else S=b.child;if(S!==null)S.return=b;else for(S=b;S!==null;){if(S===a){S=null;break}if(b=S.sibling,b!==null){b.return=S.return,S=b;break}S=S.return}b=S}En(r,a,x.children,u),a=a.child}return a;case 9:return x=a.type,p=a.pendingProps.children,Sa(a,u),x=ss(x),p=p(x),a.flags|=1,En(r,a,p,u),a.child;case 14:return p=a.type,x=ws(p,a.pendingProps),x=ws(p.type,x),Wy(r,a,p,x,u);case 15:return Hy(r,a,a.type,a.pendingProps,u);case 17:return p=a.type,x=a.pendingProps,x=a.elementType===p?x:ws(p,x),xd(r,a),a.tag=1,In(p)?(r=!0,Zu(a)):r=!1,Sa(a,u),Oy(a,p,x),Np(a,p,x,u),Tp(null,a,p,!0,r,u);case 19:return tv(r,a,u);case 22:return Ky(r,a,u)}throw Error(t(156,a.tag))};function kv(r,a){return Tl(r,a)}function hT(r,a,u,p){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function os(r,a,u,p){return new hT(r,a,u,p)}function Hp(r){return r=r.prototype,!(!r||!r.isReactComponent)}function fT(r){if(typeof r=="function")return Hp(r)?1:0;if(r!=null){if(r=r.$$typeof,r===D)return 11;if(r===ie)return 14}return 2}function Ni(r,a){var u=r.alternate;return u===null?(u=os(r.tag,a,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=a,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&14680064,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,a=r.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u}function jd(r,a,u,p,x,b){var S=2;if(p=r,typeof r=="function")Hp(r)&&(S=1);else if(typeof r=="string")S=5;else e:switch(r){case P:return Co(u.children,x,b,a);case j:S=8,x|=8;break;case V:return r=os(12,u,a,x|2),r.elementType=V,r.lanes=b,r;case A:return r=os(13,u,a,x),r.elementType=A,r.lanes=b,r;case he:return r=os(19,u,a,x),r.elementType=he,r.lanes=b,r;case G:return Cd(u,x,b,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case I:S=10;break e;case L:S=9;break e;case D:S=11;break e;case ie:S=14;break e;case le:S=16,p=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return a=os(S,u,a,x),a.elementType=r,a.type=p,a.lanes=b,a}function Co(r,a,u,p){return r=os(7,r,p,a),r.lanes=u,r}function Cd(r,a,u,p){return r=os(22,r,p,a),r.elementType=G,r.lanes=u,r.stateNode={isHidden:!1},r}function Kp(r,a,u){return r=os(6,r,null,a),r.lanes=u,r}function Qp(r,a,u){return a=os(4,r.children!==null?r.children:[],r.key,a),a.lanes=u,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function pT(r,a,u,p,x){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pl(0),this.expirationTimes=Pl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pl(0),this.identifierPrefix=p,this.onRecoverableError=x,this.mutableSourceEagerHydrationData=null}function Yp(r,a,u,p,x,b,S,B,W){return r=new pT(r,a,u,B,W),a===1?(a=1,b===!0&&(a|=8)):a=0,b=os(3,null,null,a),r.current=b,b.stateNode=r,b.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},cp(b),r}function mT(r,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:p==null?null:""+p,children:r,containerInfo:a,implementation:u}}function Sv(r){if(!r)return pi;r=r._reactInternals;e:{if(xs(r)!==r||r.tag!==1)throw Error(t(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(In(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(t(171))}if(r.tag===1){var u=r.type;if(In(u))return ey(r,u,a)}return a}function Tv(r,a,u,p,x,b,S,B,W){return r=Yp(u,p,!0,r,x,b,S,B,W),r.context=Sv(null),u=r.current,p=kn(),x=wi(u),b=Dr(p,x),b.callback=a??null,xi(u,b,x),r.current.lanes=x,fo(r,x,p),Rn(r,p),r}function Id(r,a,u,p){var x=a.current,b=kn(),S=wi(x);return u=Sv(u),a.context===null?a.context=u:a.pendingContext=u,a=Dr(b,S),a.payload={element:r},p=p===void 0?null:p,p!==null&&(a.callback=p),r=xi(x,a,S),r!==null&&(Es(r,x,S,b),ad(r,x,S)),S}function Ad(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function jv(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<a?u:a}}function Xp(r,a){jv(r,a),(r=r.alternate)&&jv(r,a)}function gT(){return null}var Cv=typeof reportError=="function"?reportError:function(r){console.error(r)};function Jp(r){this._internalRoot=r}Pd.prototype.render=Jp.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(t(409));Id(r,a,null,null)},Pd.prototype.unmount=Jp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;So(function(){Id(null,r,null,null)}),a[Cr]=null}};function Pd(r){this._internalRoot=r}Pd.prototype.unstable_scheduleHydration=function(r){if(r){var a=Vl();r={blockedOn:null,target:r,priority:a};for(var u=0;u<Bn.length&&a!==0&&a<Bn[u].priority;u++);Bn.splice(u,0,r),u===0&&ra(r)}};function Zp(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Rd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Iv(){}function xT(r,a,u,p,x){if(x){if(typeof p=="function"){var b=p;p=function(){var ne=Ad(S);b.call(ne)}}var S=Tv(a,p,r,0,null,!1,!1,"",Iv);return r._reactRootContainer=S,r[Cr]=S.current,Kl(r.nodeType===8?r.parentNode:r),So(),S}for(;x=r.lastChild;)r.removeChild(x);if(typeof p=="function"){var B=p;p=function(){var ne=Ad(W);B.call(ne)}}var W=Yp(r,0,!1,null,null,!1,!1,"",Iv);return r._reactRootContainer=W,r[Cr]=W.current,Kl(r.nodeType===8?r.parentNode:r),So(function(){Id(a,W,u,p)}),W}function Dd(r,a,u,p,x){var b=u._reactRootContainer;if(b){var S=b;if(typeof x=="function"){var B=x;x=function(){var W=Ad(S);B.call(W)}}Id(a,S,r,x)}else S=xT(u,a,r,x,p);return Ad(S)}Dl=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var u=Ze(a.pendingLanes);u!==0&&(Rl(a,u|1),Rn(a,ut()),(Ye&6)===0&&(Aa=ut()+500,mi()))}break;case 13:So(function(){var p=Rr(r,1);if(p!==null){var x=kn();Es(p,r,1,x)}}),Xp(r,1)}},na=function(r){if(r.tag===13){var a=Rr(r,134217728);if(a!==null){var u=kn();Es(a,r,134217728,u)}Xp(r,134217728)}},Ml=function(r){if(r.tag===13){var a=wi(r),u=Rr(r,a);if(u!==null){var p=kn();Es(u,r,a,p)}Xp(r,a)}},Vl=function(){return Ke},Ll=function(r,a){var u=Ke;try{return Ke=r,a()}finally{Ke=u}},Jn=function(r,a,u){switch(a){case"input":if(Ls(r,u),a=u.name,u.type==="radio"&&a!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==r&&p.form===r.form){var x=Xu(p);if(!x)throw Error(t(90));ft(p),Ls(p,x)}}}break;case"textarea":Xo(r,u);break;case"select":a=u.value,a!=null&&un(r,!!u.multiple,a,!1)}},ku=qp,Su=So;var yT={usingClientEntryPoint:!1,Events:[Xl,ya,Xu,ti,ni,qp]},dc={findFiberByHostInstance:yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},vT={bundleType:dc.bundleType,version:dc.version,rendererPackageName:dc.rendererPackageName,rendererConfig:dc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:$.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Ru(r),r===null?null:r.stateNode},findFiberByHostInstance:dc.findFiberByHostInstance||gT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Md.isDisabled&&Md.supportsFiber)try{lo=Md.inject(vT),Un=Md}catch{}}return Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yT,Dn.createPortal=function(r,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zp(a))throw Error(t(200));return mT(r,a,null,u)},Dn.createRoot=function(r,a){if(!Zp(r))throw Error(t(299));var u=!1,p="",x=Cv;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Yp(r,1,!1,null,null,u,!1,p,x),r[Cr]=a.current,Kl(r.nodeType===8?r.parentNode:r),new Jp(a)},Dn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Ru(a),r=r===null?null:r.stateNode,r},Dn.flushSync=function(r){return So(r)},Dn.hydrate=function(r,a,u){if(!Rd(a))throw Error(t(200));return Dd(null,r,a,!0,u)},Dn.hydrateRoot=function(r,a,u){if(!Zp(r))throw Error(t(405));var p=u!=null&&u.hydratedSources||null,x=!1,b="",S=Cv;if(u!=null&&(u.unstable_strictMode===!0&&(x=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onRecoverableError!==void 0&&(S=u.onRecoverableError)),a=Tv(a,null,r,1,u??null,x,!1,b,S),r[Cr]=a.current,Kl(r),p)for(r=0;r<p.length;r++)u=p[r],x=u._getVersion,x=x(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,x]:a.mutableSourceEagerHydrationData.push(u,x);return new Pd(a)},Dn.render=function(r,a,u){if(!Rd(a))throw Error(t(200));return Dd(null,r,a,!1,u)},Dn.unmountComponentAtNode=function(r){if(!Rd(r))throw Error(t(40));return r._reactRootContainer?(So(function(){Dd(null,null,r,!1,function(){r._reactRootContainer=null,r[Cr]=null})}),!0):!1},Dn.unstable_batchedUpdates=qp,Dn.unstable_renderSubtreeIntoContainer=function(r,a,u,p){if(!Rd(u))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Dd(r,a,u,!1,p)},Dn.version="18.3.1-next-f1338f8080-20240426",Dn}var Ov;function TT(){if(Ov)return nm.exports;Ov=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),nm.exports=ST(),nm.exports}var Fv;function jT(){if(Fv)return Vd;Fv=1;var n=TT();return Vd.createRoot=n.createRoot,Vd.hydrateRoot=n.hydrateRoot,Vd}var CT=jT();const IT=nu(CT),AT=()=>{};var Uv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let i=n.charCodeAt(s);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},PT=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const i=n[t++];if(i<128)e[s++]=String.fromCharCode(i);else if(i>191&&i<224){const l=n[t++];e[s++]=String.fromCharCode((i&31)<<6|l&63)}else if(i>239&&i<365){const l=n[t++],c=n[t++],d=n[t++],f=((i&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(f>>10)),e[s++]=String.fromCharCode(56320+(f&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63)}}return e.join("")},N_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let i=0;i<n.length;i+=3){const l=n[i],c=i+1<n.length,d=c?n[i+1]:0,f=i+2<n.length,m=f?n[i+2]:0,g=l>>2,y=(l&3)<<4|d>>4;let v=(d&15)<<2|m>>6,_=m&63;f||(_=64,c||(v=64)),s.push(t[g],t[y],t[v],t[_])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(__(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):PT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let i=0;i<n.length;){const l=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const y=i<n.length?t[n.charAt(i)]:64;if(++i,l==null||d==null||m==null||y==null)throw new RT;const v=l<<2|d>>4;if(s.push(v),m!==64){const _=d<<4&240|m>>2;if(s.push(_),y!==64){const k=m<<6&192|y;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class RT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DT=function(n){const e=__(n);return N_.encodeByteArray(e,!0)},wh=function(n){return DT(n).replace(/\./g,"")},E_=function(n){try{return N_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT=()=>MT().__FIREBASE_DEFAULTS__,LT=()=>{if(typeof process>"u"||typeof Uv>"u")return;const n=Uv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},OT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&E_(n[1]);return e&&JSON.parse(e)},Hh=()=>{try{return AT()||VT()||LT()||OT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},k_=n=>{var e,t;return(t=(e=Hh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},FT=n=>{const e=k_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},S_=()=>{var n;return(n=Hh())==null?void 0:n.config},T_=n=>{var e;return(e=Hh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",i=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:i,exp:i+3600,auth_time:i,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[wh(JSON.stringify(t)),wh(JSON.stringify(c)),""].join(".")}const Nc={};function BT(){const n={prod:[],emulator:[]};for(const e of Object.keys(Nc))Nc[e]?n.emulator.push(e):n.prod.push(e);return n}function $T(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let zv=!1;function C_(n,e){if(typeof window>"u"||typeof document>"u"||!ul(window.location.host)||Nc[n]===e||Nc[n]||zv)return;Nc[n]=e;function t(v){return`__firebase__banner__${v}`}const s="__firebase__banner",l=BT().prod.length>0;function c(){const v=document.getElementById(s);v&&v.remove()}function d(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function f(v,_){v.setAttribute("width","24"),v.setAttribute("id",_),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function m(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{zv=!0,c()},v}function g(v,_){v.setAttribute("id",_),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function y(){const v=$T(s),_=t("text"),k=document.getElementById(_)||document.createElement("span"),E=t("learnmore"),T=document.getElementById(E)||document.createElement("a"),M=t("preprendIcon"),O=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const q=v.element;d(q),g(T,E);const $=m();f(O,M),q.append(O,k,T,$),document.body.appendChild(q)}l?(k.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())}function GT(){var e;const n=(e=Hh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function WT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function KT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function QT(){const n=Nn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function YT(){return!GT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XT(){try{return typeof indexedDB=="object"}catch{return!1}}function JT(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(s);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var l;e(((l=i.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="FirebaseError";class Jr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=ZT,Object.setPrototypeOf(this,Jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,su.prototype.create)}}class su{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},i=`${this.service}/${e}`,l=this.errors[e],c=l?ej(l,s):"Error",d=`${this.serviceName}: ${c} (${i}).`;return new Jr(i,d,s)}}function ej(n,e){return n.replace(tj,(t,s)=>{const i=e[s];return i!=null?String(i):`<${s}?>`})}const tj=/\{\$([^}]+)}/g;function nj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function qr(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const i of t){if(!s.includes(i))return!1;const l=n[i],c=e[i];if(Bv(l)&&Bv(c)){if(!qr(l,c))return!1}else if(l!==c)return!1}for(const i of s)if(!t.includes(i))return!1;return!0}function Bv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function gc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[i,l]=s.split("=");e[decodeURIComponent(i)]=decodeURIComponent(l)}}),e}function xc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function sj(n,e){const t=new rj(n,e);return t.subscribe.bind(t)}class rj{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let i;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");ij(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:s},i.next===void 0&&(i.next=im),i.error===void 0&&(i.error=im),i.complete===void 0&&(i.complete=im);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ij(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function im(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(n){return n&&n._delegate?n._delegate:n}class Uo{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new UT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&s.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lj(e))try{this.getOrInitializeService({instanceIdentifier:Ao})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:i});s.resolve(l)}catch{}}}}clearInstance(e=Ao){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ao){return this.instances.has(e)}getOptions(e=Ao){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&c.resolve(i)}return i}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(s)??new Set;i.add(e),this.onInitCallbacks.set(s,i);const l=this.instances.get(s);return l&&e(l,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const i of s)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:aj(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ao){return this.component?this.component.multipleInstances?e:Ao:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aj(n){return n===Ao?void 0:n}function lj(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oj(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(qe||(qe={}));const uj={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},dj=qe.INFO,hj={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},fj=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),i=hj[e];if(i)console[i](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bg{constructor(e){this.name=e,this._logLevel=dj,this._logHandler=fj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const pj=(n,e)=>e.some(t=>n instanceof t);let $v,qv;function mj(){return $v||($v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gj(){return qv||(qv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I_=new WeakMap,zm=new WeakMap,A_=new WeakMap,om=new WeakMap,$g=new WeakMap;function xj(n){const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ri(n.result)),i()},c=()=>{s(n.error),i()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&I_.set(t,n)}).catch(()=>{}),$g.set(e,n),e}function yj(n){if(zm.has(n))return;const e=new Promise((t,s)=>{const i=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),i()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});zm.set(n,e)}let Bm={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zm.get(n);if(e==="objectStoreNames")return n.objectStoreNames||A_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ri(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function vj(n){Bm=n(Bm)}function bj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(am(this),e,...t);return A_.set(s,e.sort?e.sort():[e]),Ri(s)}:gj().includes(n)?function(...e){return n.apply(am(this),e),Ri(I_.get(this))}:function(...e){return Ri(n.apply(am(this),e))}}function wj(n){return typeof n=="function"?bj(n):(n instanceof IDBTransaction&&yj(n),pj(n,mj())?new Proxy(n,Bm):n)}function Ri(n){if(n instanceof IDBRequest)return xj(n);if(om.has(n))return om.get(n);const e=wj(n);return e!==n&&(om.set(n,e),$g.set(e,n)),e}const am=n=>$g.get(n);function _j(n,e,{blocked:t,upgrade:s,blocking:i,terminated:l}={}){const c=indexedDB.open(n,e),d=Ri(c);return s&&c.addEventListener("upgradeneeded",f=>{s(Ri(c.result),f.oldVersion,f.newVersion,Ri(c.transaction),f)}),t&&c.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{l&&f.addEventListener("close",()=>l()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const Nj=["get","getKey","getAll","getAllKeys","count"],Ej=["put","add","delete","clear"],lm=new Map;function Gv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(lm.get(e))return lm.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,i=Ej.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(i||Nj.includes(t)))return;const l=async function(c,...d){const f=this.transaction(c,i?"readwrite":"readonly");let m=f.store;return s&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&f.done]))[0]};return lm.set(e,l),l}vj(n=>({...n,get:(e,t,s)=>Gv(e,t)||n.get(e,t,s),has:(e,t)=>!!Gv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Sj(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function Sj(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $m="@firebase/app",Wv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=new Bg("@firebase/app"),Tj="@firebase/app-compat",jj="@firebase/analytics-compat",Cj="@firebase/analytics",Ij="@firebase/app-check-compat",Aj="@firebase/app-check",Pj="@firebase/auth",Rj="@firebase/auth-compat",Dj="@firebase/database",Mj="@firebase/data-connect",Vj="@firebase/database-compat",Lj="@firebase/functions",Oj="@firebase/functions-compat",Fj="@firebase/installations",Uj="@firebase/installations-compat",zj="@firebase/messaging",Bj="@firebase/messaging-compat",$j="@firebase/performance",qj="@firebase/performance-compat",Gj="@firebase/remote-config",Wj="@firebase/remote-config-compat",Hj="@firebase/storage",Kj="@firebase/storage-compat",Qj="@firebase/firestore",Yj="@firebase/ai",Xj="@firebase/firestore-compat",Jj="firebase",Zj="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="[DEFAULT]",eC={[$m]:"fire-core",[Tj]:"fire-core-compat",[Cj]:"fire-analytics",[jj]:"fire-analytics-compat",[Aj]:"fire-app-check",[Ij]:"fire-app-check-compat",[Pj]:"fire-auth",[Rj]:"fire-auth-compat",[Dj]:"fire-rtdb",[Mj]:"fire-data-connect",[Vj]:"fire-rtdb-compat",[Lj]:"fire-fn",[Oj]:"fire-fn-compat",[Fj]:"fire-iid",[Uj]:"fire-iid-compat",[zj]:"fire-fcm",[Bj]:"fire-fcm-compat",[$j]:"fire-perf",[qj]:"fire-perf-compat",[Gj]:"fire-rc",[Wj]:"fire-rc-compat",[Hj]:"fire-gcs",[Kj]:"fire-gcs-compat",[Qj]:"fire-fst",[Xj]:"fire-fst-compat",[Yj]:"fire-vertex","fire-js":"fire-js",[Jj]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,tC=new Map,Gm=new Map;function Hv(n,e){try{n.container.addComponent(e)}catch(t){Gr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ja(n){const e=n.name;if(Gm.has(e))return Gr.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,n);for(const t of _h.values())Hv(t,n);for(const t of tC.values())Hv(t,n);return!0}function qg(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ls(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Di=new su("app","Firebase",nC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Di.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=Zj;function P_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:qm,automaticDataCollectionEnabled:!0,...e},i=s.name;if(typeof i!="string"||!i)throw Di.create("bad-app-name",{appName:String(i)});if(t||(t=S_()),!t)throw Di.create("no-options");const l=_h.get(i);if(l){if(qr(t,l.options)&&qr(s,l.config))return l;throw Di.create("duplicate-app",{appName:i})}const c=new cj(i);for(const f of Gm.values())c.addComponent(f);const d=new sC(t,s,c);return _h.set(i,d),d}function R_(n=qm){const e=_h.get(n);if(!e&&n===qm&&S_())return P_();if(!e)throw Di.create("no-app",{appName:n});return e}function Mi(n,e,t){let s=eC[n]??n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),l=e.match(/\s|\//);if(i||l){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gr.warn(c.join(" "));return}Ja(new Uo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC="firebase-heartbeat-database",iC=1,Lc="firebase-heartbeat-store";let cm=null;function D_(){return cm||(cm=_j(rC,iC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Lc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Di.create("idb-open",{originalErrorMessage:n.message})})),cm}async function oC(n){try{const t=(await D_()).transaction(Lc),s=await t.objectStore(Lc).get(M_(n));return await t.done,s}catch(e){if(e instanceof Jr)Gr.warn(e.message);else{const t=Di.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gr.warn(t.message)}}}async function Kv(n,e){try{const s=(await D_()).transaction(Lc,"readwrite");await s.objectStore(Lc).put(e,M_(n)),await s.done}catch(t){if(t instanceof Jr)Gr.warn(t.message);else{const s=Di.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Gr.warn(s.message)}}}function M_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=1024,lC=30;class cC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Qv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:i}),this._heartbeatsCache.heartbeats.length>lC){const c=hC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Gr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Qv(),{heartbeatsToSend:s,unsentEntries:i}=uC(this._heartbeatsCache.heartbeats),l=wh(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Gr.warn(t),""}}}function Qv(){return new Date().toISOString().substring(0,10)}function uC(n,e=aC){const t=[];let s=n.slice();for(const i of n){const l=t.find(c=>c.agent===i.agent);if(l){if(l.dates.push(i.date),Yv(t)>e){l.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Yv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class dC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XT()?JT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await oC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Kv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Yv(n){return wh(JSON.stringify({version:2,heartbeats:n})).length}function hC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fC(n){Ja(new Uo("platform-logger",e=>new kj(e),"PRIVATE")),Ja(new Uo("heartbeat",e=>new cC(e),"PRIVATE")),Mi($m,Wv,n),Mi($m,Wv,"esm2020"),Mi("fire-js","")}fC("");function V_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const pC=V_,L_=new su("auth","Firebase",V_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Bg("@firebase/auth");function mC(n,...e){Nh.logLevel<=qe.WARN&&Nh.warn(`Auth (${dl}): ${n}`,...e)}function sh(n,...e){Nh.logLevel<=qe.ERROR&&Nh.error(`Auth (${dl}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(n,...e){throw Gg(n,...e)}function cr(n,...e){return Gg(n,...e)}function O_(n,e,t){const s={...pC(),[e]:t};return new su("auth","Firebase",s).create(e,{appName:n.name})}function zr(n){return O_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return L_.create(n,...e)}function Me(n,e,...t){if(!n)throw Gg(e,...t)}function Or(n){const e="INTERNAL ASSERTION FAILED: "+n;throw sh(e),new Error(e)}function Wr(n,e){n||Or(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wm(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function gC(){return Xv()==="http:"||Xv()==="https:"}function Xv(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(gC()||HT()||"connection"in navigator)?navigator.onLine:!0}function yC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wr(t>e,"Short delay should be less than long delay!"),this.isMobile=qT()||KT()}get(){return xC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(n,e){Wr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Or("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Or("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Or("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],wC=new iu(3e4,6e4);function Qi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Yi(n,e,t,s,i={}){return U_(n,i,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const d=ru({key:n.config.apiKey,...c}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...l};return WT()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ul(n.emulatorConfig.host)&&(m.credentials="include"),F_.fetch()(await z_(n,n.config.apiHost,t,d),m)})}async function U_(n,e,t){n._canInitEmulator=!1;const s={...vC,...e};try{const i=new NC(n),l=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ld(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ld(n,"credential-already-in-use",c);if(f==="EMAIL_EXISTS")throw Ld(n,"email-already-in-use",c);if(f==="USER_DISABLED")throw Ld(n,"user-disabled",c);const g=s[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw O_(n,g,m);Rs(n,g)}}catch(i){if(i instanceof Jr)throw i;Rs(n,"network-request-failed",{message:String(i)})}}async function ou(n,e,t,s,i={}){const l=await Yi(n,e,t,s,i);return"mfaPendingCredential"in l&&Rs(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function z_(n,e,t,s){const i=`${e}${t}?${s}`,l=n,c=l.config.emulator?Wg(n.config,i):`${n.config.apiScheme}://${i}`;return bC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function _C(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(cr(this.auth,"network-request-failed")),wC.get())})}}function Ld(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const i=cr(n,e,s);return i.customData._tokenResponse=t,i}function Jv(n){return n!==void 0&&n.enterprise!==void 0}class EC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return _C(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kC(n,e){return Yi(n,"GET","/v2/recaptchaConfig",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(n,e){return Yi(n,"POST","/v1/accounts:delete",e)}async function Eh(n,e){return Yi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function TC(n,e=!1){const t=Mt(n),s=await t.getIdToken(e),i=Hg(s);Me(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const l=typeof i.firebase=="object"?i.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:i,token:s,authTime:Ec(um(i.auth_time)),issuedAtTime:Ec(um(i.iat)),expirationTime:Ec(um(i.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function um(n){return Number(n)*1e3}function Hg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return sh("JWT malformed, contained fewer than 3 sections"),null;try{const i=E_(t);return i?JSON.parse(i):(sh("Failed to decode base64 JWT payload"),null)}catch(i){return sh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Zv(n){const e=Hg(n);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Jr&&jC(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function jC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(n){var y;const e=n.auth,t=await n.getIdToken(),s=await Oc(n,Eh(e,{idToken:t}));Me(s==null?void 0:s.users.length,e,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const l=(y=i.providerUserInfo)!=null&&y.length?B_(i.providerUserInfo):[],c=AC(n.providerData,l),d=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!(c!=null&&c.length),m=d?f:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Hm(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,g)}async function IC(n){const e=Mt(n);await kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function AC(n,e){return[...n.filter(s=>!e.some(i=>i.providerId===s.providerId)),...e]}function B_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(n,e){const t=await U_(n,{},async()=>{const s=ru({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:l}=n.config,c=await z_(n,i,"/v1/token",`key=${l}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:s};return n.emulatorConfig&&ul(n.emulatorConfig.host)&&(f.credentials="include"),F_.fetch()(c,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RC(n,e){return Yi(n,"POST","/v2/accounts:revokeToken",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const t=Zv(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:i,expiresIn:l}=await PC(e,t);this.updateTokensAndExpiration(s,i,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:i,expirationTime:l}=t,c=new Wa;return s&&(Me(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),i&&(Me(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),l&&(Me(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wa,this.toJSON())}_performRefresh(){return Or("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(n,e){Me(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class js{constructor({uid:e,auth:t,stsTokenManager:s,...i}){this.providerId="firebase",this.proactiveRefresh=new CC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Hm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Oc(this,this.stsTokenManager.getToken(this.auth,e));return Me(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return TC(this,e)}reload(){return IC(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new js({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await kh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ls(this.auth.app))return Promise.reject(zr(this.auth));const e=await this.getIdToken();return await Oc(this,SC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,i=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,g=t.lastLoginAt??void 0,{uid:y,emailVerified:v,isAnonymous:_,providerData:k,stsTokenManager:E}=t;Me(y&&E,e,"internal-error");const T=Wa.fromJSON(this.name,E);Me(typeof y=="string",e,"internal-error"),ki(s,e.name),ki(i,e.name),Me(typeof v=="boolean",e,"internal-error"),Me(typeof _=="boolean",e,"internal-error"),ki(l,e.name),ki(c,e.name),ki(d,e.name),ki(f,e.name),ki(m,e.name),ki(g,e.name);const M=new js({uid:y,auth:e,email:i,emailVerified:v,displayName:s,isAnonymous:_,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:T,createdAt:m,lastLoginAt:g});return k&&Array.isArray(k)&&(M.providerData=k.map(O=>({...O}))),f&&(M._redirectEventId=f),M}static async _fromIdTokenResponse(e,t,s=!1){const i=new Wa;i.updateFromServerResponse(t);const l=new js({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:s});return await kh(l),l}static async _fromGetAccountInfoResponse(e,t,s){const i=t.users[0];Me(i.localId!==void 0,"internal-error");const l=i.providerUserInfo!==void 0?B_(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!(l!=null&&l.length),d=new Wa;d.updateFromIdToken(s);const f=new js({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:c}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Hm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(l!=null&&l.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb=new Map;function Fr(n){Wr(n instanceof Function,"Expected a class definition");let e=eb.get(n);return e?(Wr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,eb.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$_.type="NONE";const tb=$_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rh(n,e,t){return`firebase:${n}:${e}:${t}`}class Ha{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:i,name:l}=this.auth;this.fullUserKey=rh(this.userKey,i.apiKey,l),this.fullPersistenceKey=rh("persistence",i.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Eh(this.auth,{idToken:e}).catch(()=>{});return t?js._fromGetAccountInfoResponse(this.auth,t,e):null}return js._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Ha(Fr(tb),e,s);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=i[0]||Fr(tb);const c=rh(s,e.config.apiKey,e.name);let d=null;for(const m of t)try{const g=await m._get(c);if(g){let y;if(typeof g=="string"){const v=await Eh(e,{idToken:g}).catch(()=>{});if(!v)break;y=await js._fromGetAccountInfoResponse(e,v,g)}else y=js._fromJSON(e,g);m!==l&&(d=y),l=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!f.length?new Ha(l,e,s):(l=f[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Ha(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(H_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q_(e))return"Blackberry";if(Y_(e))return"Webos";if(G_(e))return"Safari";if((e.includes("chrome/")||W_(e))&&!e.includes("edge/"))return"Chrome";if(K_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function q_(n=Nn()){return/firefox\//i.test(n)}function G_(n=Nn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function W_(n=Nn()){return/crios\//i.test(n)}function H_(n=Nn()){return/iemobile/i.test(n)}function K_(n=Nn()){return/android/i.test(n)}function Q_(n=Nn()){return/blackberry/i.test(n)}function Y_(n=Nn()){return/webos/i.test(n)}function Kg(n=Nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function DC(n=Nn()){var e;return Kg(n)&&!!((e=window.navigator)!=null&&e.standalone)}function MC(){return QT()&&document.documentMode===10}function X_(n=Nn()){return Kg(n)||K_(n)||Y_(n)||Q_(n)||/windows phone/i.test(n)||H_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J_(n,e=[]){let t;switch(n){case"Browser":t=nb(Nn());break;case"Worker":t=`${nb(Nn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${dl}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,d)=>{try{const f=e(l);c(f)}catch(f){d(f)}});s.onAbort=t,this.queue.push(s);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(n,e={}){return Yi(n,"GET","/v2/passwordPolicy",Qi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=6;class FC{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??OC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let i=0;i<e.length;i++)s=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,i,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t,s,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sb(this),this.idTokenSubscription=new sb(this),this.beforeStateQueue=new VC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(async()=>{var s,i,l;if(!this._deleted&&(this.persistenceManager=await Ha.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Eh(this,{idToken:e}),s=await js._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(ls(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,d=s==null?void 0:s._redirectEventId,f=await this.tryRedirectSignIn(e);(!c||c===d)&&(f!=null&&f.user)&&(s=f.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=yC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ls(this.app))return Promise.reject(zr(this));const t=e?Mt(e):null;return t&&Me(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ls(this.app)?Promise.reject(zr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ls(this.app)?Promise.reject(zr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LC(this),t=new FC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new su("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await RC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fr(e)||this._popupRedirectResolver;Me(t,this,"argument-error"),this.redirectPersistenceManager=await Ha.create(this,[Fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,i){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,s,i);return()=>{c=!0,f()}}else{const f=e.addObserver(t);return()=>{c=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=J_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(ls(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&mC(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ho(n){return Mt(n)}class sb{constructor(e){this.auth=e,this.observer=null,this.addObserver=sj(t=>this.observer=t)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zC(n){Kh=n}function Z_(n){return Kh.loadJS(n)}function BC(){return Kh.recaptchaEnterpriseScript}function $C(){return Kh.gapiScript}function qC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class GC{constructor(){this.enterprise=new WC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class WC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const HC="recaptcha-enterprise",e2="NO_RECAPTCHA";class KC{constructor(e){this.type=HC,this.auth=Ho(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,d)=>{kC(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(f=>{if(f.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const m=new EC(f);return l.tenantId==null?l._agentRecaptchaConfig=m:l._tenantRecaptchaConfigs[l.tenantId]=m,c(m.siteKey)}}).catch(f=>{d(f)})})}function i(l,c,d){const f=window.grecaptcha;Jv(f)?f.enterprise.ready(()=>{f.enterprise.execute(l,{action:e}).then(m=>{c(m)}).catch(()=>{c(e2)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new GC().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(d=>{if(!t&&Jv(window.grecaptcha))i(d,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let f=BC();f.length!==0&&(f+=d),Z_(f).then(()=>{i(d,l,c)}).catch(m=>{c(m)})}}).catch(d=>{c(d)})})}}async function rb(n,e,t,s=!1,i=!1){const l=new KC(n);let c;if(i)c=e2;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const d={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const f=d.phoneEnrollmentInfo.phoneNumber,m=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:f,recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const f=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:c}):Object.assign(d,{captchaResponse:c}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function ib(n,e,t,s,i){var l;if((l=n._getRecaptchaConfig())!=null&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await rb(n,e,t,t==="getOobCode");return s(n,c)}else return s(n,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await rb(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QC(n,e){const t=qg(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),l=t.getOptions();if(qr(l,e??{}))return i;Rs(i,"already-initialized")}return t.initialize({options:e})}function YC(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Fr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function XC(n,e,t){const s=Ho(n);Me(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const i=!1,l=t2(e),{host:c,port:d}=JC(e),f=d===null?"":`:${d}`,m={url:`${l}//${c}${f}/`},g=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!s._canInitEmulator){Me(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Me(qr(m,s.config.emulator)&&qr(g,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=g,s.settings.appVerificationDisabledForTesting=!0,ul(c)?(j_(`${l}//${c}${f}`),C_("Auth",!0)):ZC()}function t2(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function JC(n){const e=t2(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(s);if(i){const l=i[1];return{host:l,port:ob(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:ob(c)}}}function ob(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function ZC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Or("not implemented")}_getIdTokenResponse(e){return Or("not implemented")}_linkToIdToken(e,t){return Or("not implemented")}_getReauthenticationResolver(e){return Or("not implemented")}}async function eI(n,e){return Yi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(n,e){return ou(n,"POST","/v1/accounts:signInWithPassword",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nI(n,e){return ou(n,"POST","/v1/accounts:signInWithEmailLink",Qi(n,e))}async function sI(n,e){return ou(n,"POST","/v1/accounts:signInWithEmailLink",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends Qg{constructor(e,t,s,i=null){super("password",s),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Fc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Fc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ib(e,t,"signInWithPassword",tI);case"emailLink":return nI(e,{email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ib(e,s,"signUpPassword",eI);case"emailLink":return sI(e,{idToken:t,email:this._email,oobCode:this._password});default:Rs(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(n,e){return ou(n,"POST","/v1/accounts:signInWithIdp",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI="http://localhost";class zo extends Qg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new zo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Rs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:i,...l}=t;if(!s||!i)return null;const c=new zo(s,i);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Ka(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Ka(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ka(e,t)}buildRequest(){const e={requestUri:rI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ru(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function oI(n){const e=gc(xc(n)).link,t=e?gc(xc(e)).deep_link_id:null,s=gc(xc(n)).deep_link_id;return(s?gc(xc(s)).link:null)||s||t||e||n}class Yg{constructor(e){const t=gc(xc(e)),s=t.apiKey??null,i=t.oobCode??null,l=iI(t.mode??null);Me(s&&i&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=oI(e);try{return new Yg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(){this.providerId=hl.PROVIDER_ID}static credential(e,t){return Fc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Yg.parseLink(t);return Me(s,"argument-error"),Fc._fromEmailAndCode(e,s.code,s.tenantId)}}hl.PROVIDER_ID="password";hl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au extends n2{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji extends au{constructor(){super("facebook.com")}static credential(e){return zo._fromParams({providerId:ji.PROVIDER_ID,signInMethod:ji.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ji.credentialFromTaggedObject(e)}static credentialFromError(e){return ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ji.credential(e.oauthAccessToken)}catch{return null}}}ji.FACEBOOK_SIGN_IN_METHOD="facebook.com";ji.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends au{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return zo._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ci.credential(t,s)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii extends au{constructor(){super("github.com")}static credential(e){return zo._fromParams({providerId:Ii.PROVIDER_ID,signInMethod:Ii.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ii.credentialFromTaggedObject(e)}static credentialFromError(e){return Ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ii.credential(e.oauthAccessToken)}catch{return null}}}Ii.GITHUB_SIGN_IN_METHOD="github.com";Ii.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends au{constructor(){super("twitter.com")}static credential(e,t){return zo._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Ai.credential(t,s)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,i=!1){const l=await js._fromIdTokenResponse(e,s,i),c=ab(s);return new Bo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const i=ab(s);return new Bo({user:e,providerId:i,_tokenResponse:s,operationType:t})}}function ab(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends Jr{constructor(e,t,s,i){super(t.code,t.message),this.operationType=s,this.user=i,Object.setPrototypeOf(this,Sh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,i){return new Sh(e,t,s,i)}}function s2(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Sh._fromErrorAndOperation(n,l,e,s):l})}async function aI(n,e,t=!1){const s=await Oc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Bo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(n,e,t=!1){const{auth:s}=n;if(ls(s.app))return Promise.reject(zr(s));const i="reauthenticate";try{const l=await Oc(n,s2(s,i,e,n),t);Me(l.idToken,s,"internal-error");const c=Hg(l.idToken);Me(c,s,"internal-error");const{sub:d}=c;return Me(n.uid===d,s,"user-mismatch"),Bo._forOperation(n,i,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Rs(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(n,e,t=!1){if(ls(n.app))return Promise.reject(zr(n));const s="signIn",i=await s2(n,s,e),l=await Bo._fromIdTokenResponse(n,s,i);return t||await n._updateCurrentUser(l.user),l}async function cI(n,e){return r2(Ho(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(n,e){return ou(n,"POST","/v1/accounts:signInWithCustomToken",Qi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(n,e){if(ls(n.app))return Promise.reject(zr(n));const t=Ho(n),s=await uI(t,{token:e,returnSecureToken:!0}),i=await Bo._fromIdTokenResponse(t,"signIn",s);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(n){const e=Ho(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function fI(n,e,t){return ls(n.app)?Promise.reject(zr(n)):cI(Mt(n),hl.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&hI(n),s})}function pI(n,e,t,s){return Mt(n).onIdTokenChanged(e,t,s)}function mI(n,e,t){return Mt(n).beforeAuthStateChanged(e,t)}function gI(n,e,t,s){return Mt(n).onAuthStateChanged(e,t,s)}function xI(n){return Mt(n).signOut()}const Th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i2{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=1e3,vI=10;class o2 extends i2{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=X_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),i=this.localCache[t];s!==i&&e(t,i,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,f)=>{this.notifyListeners(c,f)});return}const s=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);MC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,vI):i()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},yI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}o2.type="LOCAL";const bI=o2;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2 extends i2{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}a2.type="SESSION";const l2=a2;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const s=new Qh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:i,data:l}=t.data,c=this.handlersMap[i];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:i});const d=Array.from(c).map(async m=>m(t.origin,l)),f=await wI(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let l,c;return new Promise((d,f)=>{const m=Xg("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},s);c={messageChannel:i,onMessage(y){const v=y;if(v.data.eventId===m)switch(v.data.status){case"ack":clearTimeout(g),l=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(v.data.response);break;default:clearTimeout(g),clearTimeout(l),f(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(){return window}function NI(n){ur().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(){return typeof ur().WorkerGlobalScope<"u"&&typeof ur().importScripts=="function"}async function EI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kI(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function SI(){return c2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="firebaseLocalStorageDb",TI=1,jh="firebaseLocalStorage",d2="fbase_key";class lu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Yh(n,e){return n.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function jI(){const n=indexedDB.deleteDatabase(u2);return new lu(n).toPromise()}function Km(){const n=indexedDB.open(u2,TI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(jh,{keyPath:d2})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(jh)?e(s):(s.close(),await jI(),e(await Km()))})})}async function lb(n,e,t){const s=Yh(n,!0).put({[d2]:e,value:t});return new lu(s).toPromise()}async function CI(n,e){const t=Yh(n,!1).get(e),s=await new lu(t).toPromise();return s===void 0?null:s.value}function cb(n,e){const t=Yh(n,!0).delete(e);return new lu(t).toPromise()}const II=800,AI=3;class h2{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Km(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>AI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return c2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(SI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await EI(),!this.activeServiceWorker)return;this.sender=new _I(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Km();return await lb(e,Th,"1"),await cb(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>lb(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>CI(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const l=Yh(i,!1).getAll();return new lu(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:i,value:l}of e)s.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(l)&&(this.notifyListeners(i,l),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!s.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const i of Array.from(s))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),II)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}h2.type="LOCAL";const PI=h2;new iu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(n,e){return e?Fr(e):(Me(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends Qg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ka(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ka(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ka(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function DI(n){return r2(n.auth,new Jg(n),n.bypassAuthState)}function MI(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),lI(t,new Jg(n),n.bypassAuthState)}async function VI(n){const{auth:e,user:t}=n;return Me(t,e,"internal-error"),aI(t,new Jg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t,s,i,l=!1){this.auth=e,this.resolver=s,this.user=i,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:i,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const f={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return DI;case"linkViaPopup":case"linkViaRedirect":return VI;case"reauthViaPopup":case"reauthViaRedirect":return MI;default:Rs(this.auth,"internal-error")}}resolve(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new iu(2e3,1e4);class Fa extends f2{constructor(e,t,s,i,l){super(e,t,i,l),this.provider=s,this.authWindow=null,this.pollId=null,Fa.currentPopupAction&&Fa.currentPopupAction.cancel(),Fa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Wr(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LI.get())};e()}}Fa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="pendingRedirect",ih=new Map;class FI extends f2{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=ih.get(this.auth._key());if(!e){try{const s=await UI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}ih.set(this.auth._key(),e)}return this.bypassAuthState||ih.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function UI(n,e){const t=$I(e),s=BI(n);if(!await s._isAvailable())return!1;const i=await s._get(t)==="true";return await s._remove(t),i}function zI(n,e){ih.set(n._key(),e)}function BI(n){return Fr(n._redirectPersistence)}function $I(n){return rh(OI,n.config.apiKey,n.name)}async function qI(n,e,t=!1){if(ls(n.app))return Promise.reject(zr(n));const s=Ho(n),i=RI(s,e),c=await new FI(s,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=600*1e3;class WI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!HI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!p2(e)){const i=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(cr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GI&&this.cachedEventUids.clear(),this.cachedEventUids.has(ub(e))}saveEventToCache(e){this.cachedEventUids.add(ub(e)),this.lastProcessedEventTime=Date.now()}}function ub(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function p2({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function HI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return p2(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(n,e={}){return Yi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YI=/^https?/;async function XI(n){if(n.config.emulator)return;const{authorizedDomains:e}=await KI(n);for(const t of e)try{if(JI(t))return}catch{}Rs(n,"unauthorized-domain")}function JI(n){const e=Wm(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!YI.test(t))return!1;if(QI.test(n))return s===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new iu(3e4,6e4);function db(){const n=ur().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function eA(n){return new Promise((e,t)=>{var i,l,c;function s(){db(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{db(),t(cr(n,"network-request-failed"))},timeout:ZI.get()})}if((l=(i=ur().gapi)==null?void 0:i.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=ur().gapi)!=null&&c.load)s();else{const d=qC("iframefcb");return ur()[d]=()=>{gapi.load?s():t(cr(n,"network-request-failed"))},Z_(`${$C()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw oh=null,e})}let oh=null;function tA(n){return oh=oh||eA(n),oh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=new iu(5e3,15e3),sA="__/auth/iframe",rA="emulator/auth/iframe",iA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aA(n){const e=n.config;Me(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Wg(e,rA):`https://${n.config.authDomain}/${sA}`,s={apiKey:e.apiKey,appName:n.name,v:dl},i=oA.get(n.config.apiHost);i&&(s.eid=i);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${ru(s).slice(1)}`}async function lA(n){const e=await tA(n),t=ur().gapi;return Me(t,n,"internal-error"),e.open({where:document.body,url:aA(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iA,dontclear:!0},s=>new Promise(async(i,l)=>{await s.restyle({setHideOnLeave:!1});const c=cr(n,"network-request-failed"),d=ur().setTimeout(()=>{l(c)},nA.get());function f(){ur().clearTimeout(d),i(s)}s.ping(f).then(f,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uA=500,dA=600,hA="_blank",fA="http://localhost";class hb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pA(n,e,t,s=uA,i=dA){const l=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const f={...cA,width:s.toString(),height:i.toString(),top:l,left:c},m=Nn().toLowerCase();t&&(d=W_(m)?hA:t),q_(m)&&(e=e||fA,f.scrollbars="yes");const g=Object.entries(f).reduce((v,[_,k])=>`${v}${_}=${k},`,"");if(DC(m)&&d!=="_self")return mA(e||"",d),new hb(null);const y=window.open(e||"",d,g);Me(y,n,"popup-blocked");try{y.focus()}catch{}return new hb(y)}function mA(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA="__/auth/handler",xA="emulator/auth/handler",yA=encodeURIComponent("fac");async function fb(n,e,t,s,i,l){Me(n.config.authDomain,n,"auth-domain-config-required"),Me(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:dl,eventId:i};if(e instanceof n2){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",nj(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,y]of Object.entries({}))c[g]=y}if(e instanceof au){const g=e.getScopes().filter(y=>y!=="");g.length>0&&(c.scopes=g.join(","))}n.tenantId&&(c.tid=n.tenantId);const d=c;for(const g of Object.keys(d))d[g]===void 0&&delete d[g];const f=await n._getAppCheckToken(),m=f?`#${yA}=${encodeURIComponent(f)}`:"";return`${vA(n)}?${ru(d).slice(1)}${m}`}function vA({config:n}){return n.emulator?Wg(n,xA):`https://${n.authDomain}/${gA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="webStorageSupport";class bA{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=l2,this._completeRedirectFn=qI,this._overrideRedirectResult=zI}async _openPopup(e,t,s,i){var c;Wr((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await fb(e,t,s,Wm(),i);return pA(e,l,Xg())}async _openRedirect(e,t,s,i){await this._originValidation(e);const l=await fb(e,t,s,Wm(),i);return NI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:l}=this.eventManagers[t];return i?Promise.resolve(i):(Wr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await lA(e),s=new WI(e);return t.register("authEvent",i=>(Me(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:s.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dm,{type:dm},i=>{var c;const l=(c=i==null?void 0:i[0])==null?void 0:c[dm];l!==void 0&&t(!!l),Rs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return X_()||G_()||Kg()}}const wA=bA;var pb="@firebase/auth",mb="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function EA(n){Ja(new Uo("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;Me(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const f={apiKey:c,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:J_(n)},m=new UC(s,i,l,f);return YC(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ja(new Uo("auth-internal",e=>{const t=Ho(e.getProvider("auth").getImmediate());return(s=>new _A(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mi(pb,mb,NA(n)),Mi(pb,mb,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=300,SA=T_("authIdTokenMaxAge")||kA;let gb=null;const TA=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>SA)return;const i=t==null?void 0:t.token;gb!==i&&(gb=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jA(n=R_()){const e=qg(n,"auth");if(e.isInitialized())return e.getImmediate();const t=QC(n,{popupRedirectResolver:wA,persistence:[PI,bI,l2]}),s=T_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=TA(l.toString());mI(t,c,()=>c(t.currentUser)),pI(t,d=>c(d))}}const i=k_("auth");return i&&XC(t,`http://${i}`),t}function CA(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}zC({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=i=>{const l=cr("internal-error");l.customData=i,t(l)},s.type="text/javascript",s.charset="UTF-8",CA().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});EA("Browser");var IA="firebase",AA="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mi(IA,AA,"app");var xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vi,m2;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,j){function V(){}V.prototype=j.prototype,P.F=j.prototype,P.prototype=new V,P.prototype.constructor=P,P.D=function(I,L,D){for(var A=Array(arguments.length-2),he=2;he<arguments.length;he++)A[he-2]=arguments[he];return j.prototype[L].apply(I,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(P,j,V){V||(V=0);const I=Array(16);if(typeof j=="string")for(var L=0;L<16;++L)I[L]=j.charCodeAt(V++)|j.charCodeAt(V++)<<8|j.charCodeAt(V++)<<16|j.charCodeAt(V++)<<24;else for(L=0;L<16;++L)I[L]=j[V++]|j[V++]<<8|j[V++]<<16|j[V++]<<24;j=P.g[0],V=P.g[1],L=P.g[2];let D=P.g[3],A;A=j+(D^V&(L^D))+I[0]+3614090360&4294967295,j=V+(A<<7&4294967295|A>>>25),A=D+(L^j&(V^L))+I[1]+3905402710&4294967295,D=j+(A<<12&4294967295|A>>>20),A=L+(V^D&(j^V))+I[2]+606105819&4294967295,L=D+(A<<17&4294967295|A>>>15),A=V+(j^L&(D^j))+I[3]+3250441966&4294967295,V=L+(A<<22&4294967295|A>>>10),A=j+(D^V&(L^D))+I[4]+4118548399&4294967295,j=V+(A<<7&4294967295|A>>>25),A=D+(L^j&(V^L))+I[5]+1200080426&4294967295,D=j+(A<<12&4294967295|A>>>20),A=L+(V^D&(j^V))+I[6]+2821735955&4294967295,L=D+(A<<17&4294967295|A>>>15),A=V+(j^L&(D^j))+I[7]+4249261313&4294967295,V=L+(A<<22&4294967295|A>>>10),A=j+(D^V&(L^D))+I[8]+1770035416&4294967295,j=V+(A<<7&4294967295|A>>>25),A=D+(L^j&(V^L))+I[9]+2336552879&4294967295,D=j+(A<<12&4294967295|A>>>20),A=L+(V^D&(j^V))+I[10]+4294925233&4294967295,L=D+(A<<17&4294967295|A>>>15),A=V+(j^L&(D^j))+I[11]+2304563134&4294967295,V=L+(A<<22&4294967295|A>>>10),A=j+(D^V&(L^D))+I[12]+1804603682&4294967295,j=V+(A<<7&4294967295|A>>>25),A=D+(L^j&(V^L))+I[13]+4254626195&4294967295,D=j+(A<<12&4294967295|A>>>20),A=L+(V^D&(j^V))+I[14]+2792965006&4294967295,L=D+(A<<17&4294967295|A>>>15),A=V+(j^L&(D^j))+I[15]+1236535329&4294967295,V=L+(A<<22&4294967295|A>>>10),A=j+(L^D&(V^L))+I[1]+4129170786&4294967295,j=V+(A<<5&4294967295|A>>>27),A=D+(V^L&(j^V))+I[6]+3225465664&4294967295,D=j+(A<<9&4294967295|A>>>23),A=L+(j^V&(D^j))+I[11]+643717713&4294967295,L=D+(A<<14&4294967295|A>>>18),A=V+(D^j&(L^D))+I[0]+3921069994&4294967295,V=L+(A<<20&4294967295|A>>>12),A=j+(L^D&(V^L))+I[5]+3593408605&4294967295,j=V+(A<<5&4294967295|A>>>27),A=D+(V^L&(j^V))+I[10]+38016083&4294967295,D=j+(A<<9&4294967295|A>>>23),A=L+(j^V&(D^j))+I[15]+3634488961&4294967295,L=D+(A<<14&4294967295|A>>>18),A=V+(D^j&(L^D))+I[4]+3889429448&4294967295,V=L+(A<<20&4294967295|A>>>12),A=j+(L^D&(V^L))+I[9]+568446438&4294967295,j=V+(A<<5&4294967295|A>>>27),A=D+(V^L&(j^V))+I[14]+3275163606&4294967295,D=j+(A<<9&4294967295|A>>>23),A=L+(j^V&(D^j))+I[3]+4107603335&4294967295,L=D+(A<<14&4294967295|A>>>18),A=V+(D^j&(L^D))+I[8]+1163531501&4294967295,V=L+(A<<20&4294967295|A>>>12),A=j+(L^D&(V^L))+I[13]+2850285829&4294967295,j=V+(A<<5&4294967295|A>>>27),A=D+(V^L&(j^V))+I[2]+4243563512&4294967295,D=j+(A<<9&4294967295|A>>>23),A=L+(j^V&(D^j))+I[7]+1735328473&4294967295,L=D+(A<<14&4294967295|A>>>18),A=V+(D^j&(L^D))+I[12]+2368359562&4294967295,V=L+(A<<20&4294967295|A>>>12),A=j+(V^L^D)+I[5]+4294588738&4294967295,j=V+(A<<4&4294967295|A>>>28),A=D+(j^V^L)+I[8]+2272392833&4294967295,D=j+(A<<11&4294967295|A>>>21),A=L+(D^j^V)+I[11]+1839030562&4294967295,L=D+(A<<16&4294967295|A>>>16),A=V+(L^D^j)+I[14]+4259657740&4294967295,V=L+(A<<23&4294967295|A>>>9),A=j+(V^L^D)+I[1]+2763975236&4294967295,j=V+(A<<4&4294967295|A>>>28),A=D+(j^V^L)+I[4]+1272893353&4294967295,D=j+(A<<11&4294967295|A>>>21),A=L+(D^j^V)+I[7]+4139469664&4294967295,L=D+(A<<16&4294967295|A>>>16),A=V+(L^D^j)+I[10]+3200236656&4294967295,V=L+(A<<23&4294967295|A>>>9),A=j+(V^L^D)+I[13]+681279174&4294967295,j=V+(A<<4&4294967295|A>>>28),A=D+(j^V^L)+I[0]+3936430074&4294967295,D=j+(A<<11&4294967295|A>>>21),A=L+(D^j^V)+I[3]+3572445317&4294967295,L=D+(A<<16&4294967295|A>>>16),A=V+(L^D^j)+I[6]+76029189&4294967295,V=L+(A<<23&4294967295|A>>>9),A=j+(V^L^D)+I[9]+3654602809&4294967295,j=V+(A<<4&4294967295|A>>>28),A=D+(j^V^L)+I[12]+3873151461&4294967295,D=j+(A<<11&4294967295|A>>>21),A=L+(D^j^V)+I[15]+530742520&4294967295,L=D+(A<<16&4294967295|A>>>16),A=V+(L^D^j)+I[2]+3299628645&4294967295,V=L+(A<<23&4294967295|A>>>9),A=j+(L^(V|~D))+I[0]+4096336452&4294967295,j=V+(A<<6&4294967295|A>>>26),A=D+(V^(j|~L))+I[7]+1126891415&4294967295,D=j+(A<<10&4294967295|A>>>22),A=L+(j^(D|~V))+I[14]+2878612391&4294967295,L=D+(A<<15&4294967295|A>>>17),A=V+(D^(L|~j))+I[5]+4237533241&4294967295,V=L+(A<<21&4294967295|A>>>11),A=j+(L^(V|~D))+I[12]+1700485571&4294967295,j=V+(A<<6&4294967295|A>>>26),A=D+(V^(j|~L))+I[3]+2399980690&4294967295,D=j+(A<<10&4294967295|A>>>22),A=L+(j^(D|~V))+I[10]+4293915773&4294967295,L=D+(A<<15&4294967295|A>>>17),A=V+(D^(L|~j))+I[1]+2240044497&4294967295,V=L+(A<<21&4294967295|A>>>11),A=j+(L^(V|~D))+I[8]+1873313359&4294967295,j=V+(A<<6&4294967295|A>>>26),A=D+(V^(j|~L))+I[15]+4264355552&4294967295,D=j+(A<<10&4294967295|A>>>22),A=L+(j^(D|~V))+I[6]+2734768916&4294967295,L=D+(A<<15&4294967295|A>>>17),A=V+(D^(L|~j))+I[13]+1309151649&4294967295,V=L+(A<<21&4294967295|A>>>11),A=j+(L^(V|~D))+I[4]+4149444226&4294967295,j=V+(A<<6&4294967295|A>>>26),A=D+(V^(j|~L))+I[11]+3174756917&4294967295,D=j+(A<<10&4294967295|A>>>22),A=L+(j^(D|~V))+I[2]+718787259&4294967295,L=D+(A<<15&4294967295|A>>>17),A=V+(D^(L|~j))+I[9]+3951481745&4294967295,P.g[0]=P.g[0]+j&4294967295,P.g[1]=P.g[1]+(L+(A<<21&4294967295|A>>>11))&4294967295,P.g[2]=P.g[2]+L&4294967295,P.g[3]=P.g[3]+D&4294967295}s.prototype.v=function(P,j){j===void 0&&(j=P.length);const V=j-this.blockSize,I=this.C;let L=this.h,D=0;for(;D<j;){if(L==0)for(;D<=V;)i(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<j;)if(I[L++]=P.charCodeAt(D++),L==this.blockSize){i(this,I),L=0;break}}else for(;D<j;)if(I[L++]=P[D++],L==this.blockSize){i(this,I),L=0;break}}this.h=L,this.o+=j},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var j=1;j<P.length-8;++j)P[j]=0;j=this.o*8;for(var V=P.length-8;V<P.length;++V)P[V]=j&255,j/=256;for(this.v(P),P=Array(16),j=0,V=0;V<4;++V)for(let I=0;I<32;I+=8)P[j++]=this.g[V]>>>I&255;return P};function l(P,j){var V=d;return Object.prototype.hasOwnProperty.call(V,P)?V[P]:V[P]=j(P)}function c(P,j){this.h=j;const V=[];let I=!0;for(let L=P.length-1;L>=0;L--){const D=P[L]|0;I&&D==j||(V[L]=D,I=!1)}this.g=V}var d={};function f(P){return-128<=P&&P<128?l(P,function(j){return new c([j|0],j<0?-1:0)}):new c([P|0],P<0?-1:0)}function m(P){if(isNaN(P)||!isFinite(P))return y;if(P<0)return T(m(-P));const j=[];let V=1;for(let I=0;P>=V;I++)j[I]=P/V|0,V*=4294967296;return new c(j,0)}function g(P,j){if(P.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(P.charAt(0)=="-")return T(g(P.substring(1),j));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const V=m(Math.pow(j,8));let I=y;for(let D=0;D<P.length;D+=8){var L=Math.min(8,P.length-D);const A=parseInt(P.substring(D,D+L),j);L<8?(L=m(Math.pow(j,L)),I=I.j(L).add(m(A))):(I=I.j(V),I=I.add(m(A)))}return I}var y=f(0),v=f(1),_=f(16777216);n=c.prototype,n.m=function(){if(E(this))return-T(this).m();let P=0,j=1;for(let V=0;V<this.g.length;V++){const I=this.i(V);P+=(I>=0?I:4294967296+I)*j,j*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(k(this))return"0";if(E(this))return"-"+T(this).toString(P);const j=m(Math.pow(P,6));var V=this;let I="";for(;;){const L=$(V,j).g;V=M(V,L.j(j));let D=((V.g.length>0?V.g[0]:V.h)>>>0).toString(P);if(V=L,k(V))return D+I;for(;D.length<6;)D="0"+D;I=D+I}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function k(P){if(P.h!=0)return!1;for(let j=0;j<P.g.length;j++)if(P.g[j]!=0)return!1;return!0}function E(P){return P.h==-1}n.l=function(P){return P=M(this,P),E(P)?-1:k(P)?0:1};function T(P){const j=P.g.length,V=[];for(let I=0;I<j;I++)V[I]=~P.g[I];return new c(V,~P.h).add(v)}n.abs=function(){return E(this)?T(this):this},n.add=function(P){const j=Math.max(this.g.length,P.g.length),V=[];let I=0;for(let L=0;L<=j;L++){let D=I+(this.i(L)&65535)+(P.i(L)&65535),A=(D>>>16)+(this.i(L)>>>16)+(P.i(L)>>>16);I=A>>>16,D&=65535,A&=65535,V[L]=A<<16|D}return new c(V,V[V.length-1]&-2147483648?-1:0)};function M(P,j){return P.add(T(j))}n.j=function(P){if(k(this)||k(P))return y;if(E(this))return E(P)?T(this).j(T(P)):T(T(this).j(P));if(E(P))return T(this.j(T(P)));if(this.l(_)<0&&P.l(_)<0)return m(this.m()*P.m());const j=this.g.length+P.g.length,V=[];for(var I=0;I<2*j;I++)V[I]=0;for(I=0;I<this.g.length;I++)for(let L=0;L<P.g.length;L++){const D=this.i(I)>>>16,A=this.i(I)&65535,he=P.i(L)>>>16,ie=P.i(L)&65535;V[2*I+2*L]+=A*ie,O(V,2*I+2*L),V[2*I+2*L+1]+=D*ie,O(V,2*I+2*L+1),V[2*I+2*L+1]+=A*he,O(V,2*I+2*L+1),V[2*I+2*L+2]+=D*he,O(V,2*I+2*L+2)}for(P=0;P<j;P++)V[P]=V[2*P+1]<<16|V[2*P];for(P=j;P<2*j;P++)V[P]=0;return new c(V,0)};function O(P,j){for(;(P[j]&65535)!=P[j];)P[j+1]+=P[j]>>>16,P[j]&=65535,j++}function q(P,j){this.g=P,this.h=j}function $(P,j){if(k(j))throw Error("division by zero");if(k(P))return new q(y,y);if(E(P))return j=$(T(P),j),new q(T(j.g),T(j.h));if(E(j))return j=$(P,T(j)),new q(T(j.g),j.h);if(P.g.length>30){if(E(P)||E(j))throw Error("slowDivide_ only works with positive integers.");for(var V=v,I=j;I.l(P)<=0;)V=Q(V),I=Q(I);var L=K(V,1),D=K(I,1);for(I=K(I,2),V=K(V,2);!k(I);){var A=D.add(I);A.l(P)<=0&&(L=L.add(V),D=A),I=K(I,1),V=K(V,1)}return j=M(P,L.j(j)),new q(L,j)}for(L=y;P.l(j)>=0;){for(V=Math.max(1,Math.floor(P.m()/j.m())),I=Math.ceil(Math.log(V)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),D=m(V),A=D.j(j);E(A)||A.l(P)>0;)V-=I,D=m(V),A=D.j(j);k(D)&&(D=v),L=L.add(D),P=M(P,A)}return new q(L,P)}n.B=function(P){return $(this,P).h},n.and=function(P){const j=Math.max(this.g.length,P.g.length),V=[];for(let I=0;I<j;I++)V[I]=this.i(I)&P.i(I);return new c(V,this.h&P.h)},n.or=function(P){const j=Math.max(this.g.length,P.g.length),V=[];for(let I=0;I<j;I++)V[I]=this.i(I)|P.i(I);return new c(V,this.h|P.h)},n.xor=function(P){const j=Math.max(this.g.length,P.g.length),V=[];for(let I=0;I<j;I++)V[I]=this.i(I)^P.i(I);return new c(V,this.h^P.h)};function Q(P){const j=P.g.length+1,V=[];for(let I=0;I<j;I++)V[I]=P.i(I)<<1|P.i(I-1)>>>31;return new c(V,P.h)}function K(P,j){const V=j>>5;j%=32;const I=P.g.length-V,L=[];for(let D=0;D<I;D++)L[D]=j>0?P.i(D+V)>>>j|P.i(D+V+1)<<32-j:P.i(D+V);return new c(L,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,m2=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=g,Vi=c}).apply(typeof xb<"u"?xb:typeof self<"u"?self:typeof window<"u"?window:{});var Od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g2,yc,x2,ah,Qm,y2,v2,b2;(function(){var n,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Od=="object"&&Od];for(var w=0;w<h.length;++w){var N=h[w];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var s=t(this);function i(h,w){if(w)e:{var N=s;h=h.split(".");for(var R=0;R<h.length-1;R++){var ee=h[R];if(!(ee in N))break e;N=N[ee]}h=h[h.length-1],R=N[h],w=w(R),w!=R&&w!=null&&e(N,h,{configurable:!0,writable:!0,value:w})}}i("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(h){return h||function(w){var N=[],R;for(R in w)Object.prototype.hasOwnProperty.call(w,R)&&N.push([R,w[R]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var w=typeof h;return w=="object"&&h!=null||w=="function"}function f(h,w,N){return h.call.apply(h.bind,arguments)}function m(h,w,N){return m=f,m.apply(null,arguments)}function g(h,w){var N=Array.prototype.slice.call(arguments,1);return function(){var R=N.slice();return R.push.apply(R,arguments),h.apply(this,R)}}function y(h,w){function N(){}N.prototype=w.prototype,h.Z=w.prototype,h.prototype=new N,h.prototype.constructor=h,h.Ob=function(R,ee,se){for(var ge=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)ge[Ue-2]=arguments[Ue];return w.prototype[ee].apply(R,ge)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function _(h){const w=h.length;if(w>0){const N=Array(w);for(let R=0;R<w;R++)N[R]=h[R];return N}return[]}function k(h,w){for(let R=1;R<arguments.length;R++){const ee=arguments[R];var N=typeof ee;if(N=N!="object"?N:ee?Array.isArray(ee)?"array":N:"null",N=="array"||N=="object"&&typeof ee.length=="number"){N=h.length||0;const se=ee.length||0;h.length=N+se;for(let ge=0;ge<se;ge++)h[N+ge]=ee[ge]}else h.push(ee)}}class E{constructor(w,N){this.i=w,this.j=N,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function T(h){c.setTimeout(()=>{throw h},0)}function M(){var h=P;let w=null;return h.g&&(w=h.g,h.g=h.g.next,h.g||(h.h=null),w.next=null),w}class O{constructor(){this.h=this.g=null}add(w,N){const R=q.get();R.set(w,N),this.h?this.h.next=R:this.g=R,this.h=R}}var q=new E(()=>new $,h=>h.reset());class ${constructor(){this.next=this.g=this.h=null}set(w,N){this.h=w,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let Q,K=!1,P=new O,j=()=>{const h=Promise.resolve(void 0);Q=()=>{h.then(V)}};function V(){for(var h;h=M();){try{h.h.call(h.g)}catch(N){T(N)}var w=q;w.j(h),w.h<100&&(w.h++,h.next=w.g,w.g=h)}K=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function L(h,w){this.type=h,this.g=this.target=w,this.defaultPrevented=!1}L.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,w=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const N=()=>{};c.addEventListener("test",N,w),c.removeEventListener("test",N,w)}catch{}return h})();function A(h){return/^[\s\xa0]*$/.test(h)}function he(h,w){L.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,w)}y(he,L),he.prototype.init=function(h,w){const N=this.type=h.type,R=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=w,w=h.relatedTarget,w||(N=="mouseover"?w=h.fromElement:N=="mouseout"&&(w=h.toElement)),this.relatedTarget=w,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&he.Z.h.call(this)},he.prototype.h=function(){he.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),le=0;function G(h,w,N,R,ee){this.listener=h,this.proxy=null,this.src=w,this.type=N,this.capture=!!R,this.ha=ee,this.key=++le,this.da=this.fa=!1}function F(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function U(h,w,N){for(const R in h)w.call(N,h[R],R,h)}function X(h,w){for(const N in h)w.call(void 0,h[N],N,h)}function z(h){const w={};for(const N in h)w[N]=h[N];return w}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(h,w){let N,R;for(let ee=1;ee<arguments.length;ee++){R=arguments[ee];for(N in R)h[N]=R[N];for(let se=0;se<Y.length;se++)N=Y[se],Object.prototype.hasOwnProperty.call(R,N)&&(h[N]=R[N])}}function re(h){this.src=h,this.g={},this.h=0}re.prototype.add=function(h,w,N,R,ee){const se=h.toString();h=this.g[se],h||(h=this.g[se]=[],this.h++);const ge=xe(h,w,R,ee);return ge>-1?(w=h[ge],N||(w.fa=!1)):(w=new G(w,this.src,se,!!R,ee),w.fa=N,h.push(w)),w};function ae(h,w){const N=w.type;if(N in h.g){var R=h.g[N],ee=Array.prototype.indexOf.call(R,w,void 0),se;(se=ee>=0)&&Array.prototype.splice.call(R,ee,1),se&&(F(w),h.g[N].length==0&&(delete h.g[N],h.h--))}}function xe(h,w,N,R){for(let ee=0;ee<h.length;++ee){const se=h[ee];if(!se.da&&se.listener==w&&se.capture==!!N&&se.ha==R)return ee}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),De={};function He(h,w,N,R,ee){if(Array.isArray(w)){for(let se=0;se<w.length;se++)He(h,w[se],N,R,ee);return null}return N=Os(N),h&&h[ie]?h.J(w,N,d(R)?!!R.capture:!1,ee):ve(h,w,N,!1,R,ee)}function ve(h,w,N,R,ee,se){if(!w)throw Error("Invalid event type");const ge=d(ee)?!!ee.capture:!!ee;let Ue=Ht(h);if(Ue||(h[Ce]=Ue=new re(h)),N=Ue.add(w,N,R,ge,se),N.proxy)return N;if(R=et(),N.proxy=R,R.src=h,R.listener=N,h.addEventListener)D||(ee=ge),ee===void 0&&(ee=!1),h.addEventListener(w.toString(),R,ee);else if(h.attachEvent)h.attachEvent(pt(w.toString()),R);else if(h.addListener&&h.removeListener)h.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return N}function et(){function h(N){return w.call(h.src,h.listener,N)}const w=en;return h}function ft(h,w,N,R,ee){if(Array.isArray(w))for(var se=0;se<w.length;se++)ft(h,w[se],N,R,ee);else R=d(R)?!!R.capture:!!R,N=Os(N),h&&h[ie]?(h=h.i,se=String(w).toString(),se in h.g&&(w=h.g[se],N=xe(w,N,R,ee),N>-1&&(F(w[N]),Array.prototype.splice.call(w,N,1),w.length==0&&(delete h.g[se],h.h--)))):h&&(h=Ht(h))&&(w=h.g[w.toString()],h=-1,w&&(h=xe(w,N,R,ee)),(N=h>-1?w[h]:null)&&xt(N))}function xt(h){if(typeof h!="number"&&h&&!h.da){var w=h.src;if(w&&w[ie])ae(w.i,h);else{var N=h.type,R=h.proxy;w.removeEventListener?w.removeEventListener(N,R,h.capture):w.detachEvent?w.detachEvent(pt(N),R):w.addListener&&w.removeListener&&w.removeListener(R),(N=Ht(w))?(ae(N,h),N.h==0&&(N.src=null,w[Ce]=null)):F(h)}}}function pt(h){return h in De?De[h]:De[h]="on"+h}function en(h,w){if(h.da)h=!0;else{w=new he(w,this);const N=h.listener,R=h.ha||h.src;h.fa&&xt(h),h=N.call(R,w)}return h}function Ht(h){return h=h[Ce],h instanceof re?h:null}var Ls="__closure_events_fn_"+(Math.random()*1e9>>>0);function Os(h){return typeof h=="function"?h:(h[Ls]||(h[Ls]=function(w){return h.handleEvent(w)}),h[Ls])}function St(){I.call(this),this.i=new re(this),this.M=this,this.G=null}y(St,I),St.prototype[ie]=!0,St.prototype.removeEventListener=function(h,w,N,R){ft(this,h,w,N,R)};function ct(h,w){var N,R=h.G;if(R)for(N=[];R;R=R.G)N.push(R);if(h=h.M,R=w.type||w,typeof w=="string")w=new L(w,h);else if(w instanceof L)w.target=w.target||h;else{var ee=w;w=new L(R,h),Ne(w,ee)}ee=!0;let se,ge;if(N)for(ge=N.length-1;ge>=0;ge--)se=w.g=N[ge],ee=un(se,R,!0,w)&&ee;if(se=w.g=h,ee=un(se,R,!0,w)&&ee,ee=un(se,R,!1,w)&&ee,N)for(ge=0;ge<N.length;ge++)se=w.g=N[ge],ee=un(se,R,!1,w)&&ee}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var h=this.i;for(const w in h.g){const N=h.g[w];for(let R=0;R<N.length;R++)F(N[R]);delete h.g[w],h.h--}}this.G=null},St.prototype.J=function(h,w,N,R){return this.i.add(String(h),w,!1,N,R)},St.prototype.K=function(h,w,N,R){return this.i.add(String(h),w,!0,N,R)};function un(h,w,N,R){if(w=h.i.g[String(w)],!w)return!0;w=w.concat();let ee=!0;for(let se=0;se<w.length;++se){const ge=w[se];if(ge&&!ge.da&&ge.capture==N){const Ue=ge.listener,Pt=ge.ha||ge.src;ge.fa&&ae(h.i,ge),ee=Ue.call(Pt,R)!==!1&&ee}}return ee&&!R.defaultPrevented}function to(h,w){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=m(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:c.setTimeout(h,w||0)}function no(h){h.g=to(()=>{h.g=null,h.i&&(h.i=!1,no(h))},h.l);const w=h.h;h.h=null,h.m.apply(null,w)}class Xo extends I{constructor(w,N){super(),this.m=w,this.l=N,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:no(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yr(h){I.call(this),this.h=h,this.g={}}y(yr,I);var so=[];function Zr(h){U(h.g,function(w,N){this.g.hasOwnProperty(N)&&xt(w)},h),h.g={}}yr.prototype.N=function(){yr.Z.N.call(this),Zr(this)},yr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fs=c.JSON.stringify,ke=c.JSON.parse,$e=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Je(){}function At(){}var yt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Xn(){L.call(this,"d")}y(Xn,L);function ei(){L.call(this,"c")}y(ei,L);var jn={},vr=null;function gs(){return vr=vr||new St}jn.Ia="serverreachability";function br(h){L.call(this,jn.Ia,h)}y(br,L);function Jn(h){const w=gs();ct(w,new br(w))}jn.STAT_EVENT="statevent";function Tt(h,w){L.call(this,jn.STAT_EVENT,h),this.stat=w}y(Tt,L);function jt(h){const w=gs();ct(w,new Tt(w,h))}jn.Ja="timingevent";function El(h,w){L.call(this,jn.Ja,h),this.size=w}y(El,L);function ti(h,w){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},w)}function ni(){this.g=!0}ni.prototype.ua=function(){this.g=!1};function ku(h,w,N,R,ee,se){h.info(function(){if(h.g)if(se){var ge="",Ue=se.split("&");for(let nt=0;nt<Ue.length;nt++){var Pt=Ue[nt].split("=");if(Pt.length>1){const Vt=Pt[0];Pt=Pt[1];const Gn=Vt.split("_");ge=Gn.length>=2&&Gn[1]=="type"?ge+(Vt+"="+Pt+"&"):ge+(Vt+"=redacted&")}}}else ge=null;else ge=se;return"XMLHTTP REQ ("+R+") [attempt "+ee+"]: "+w+`
`+N+`
`+ge})}function Su(h,w,N,R,ee,se,ge){h.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+ee+"]: "+w+`
`+N+`
`+se+" "+ge})}function Us(h,w,N,R){h.info(function(){return"XMLHTTP TEXT ("+w+"): "+ro(h,N)+(R?" "+R:"")})}function Tu(h,w){h.info(function(){return"TIMEOUT: "+w})}ni.prototype.info=function(){};function ro(h,w){if(!h.g)return w;if(!w)return null;try{const se=JSON.parse(w);if(se){for(h=0;h<se.length;h++)if(Array.isArray(se[h])){var N=se[h];if(!(N.length<2)){var R=N[1];if(Array.isArray(R)&&!(R.length<1)){var ee=R[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(let ge=1;ge<R.length;ge++)R[ge]=""}}}}return Fs(se)}catch{return w}}var si={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ri={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ju;function wr(){}y(wr,Je),wr.prototype.g=function(){return new XMLHttpRequest},ju=new wr;function zs(h){return encodeURIComponent(String(h))}function Jo(h){var w=1;h=h.split(":");const N=[];for(;w>0&&h.length;)N.push(h.shift()),w--;return h.length&&N.push(h.join(":")),N}function Zn(h,w,N,R){this.j=h,this.i=w,this.l=N,this.S=R||1,this.V=new yr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Cu}function Cu(){this.i=null,this.g="",this.h=!1}var Iu={},kl={};function xs(h,w,N){h.M=1,h.A=Nr(es(w)),h.u=N,h.R=!0,Sl(h,null)}function Sl(h,w){h.F=Date.now(),io(h),h.B=es(h.A);var N=h.B,R=h.S;Array.isArray(R)||(R=[String(R)]),Vl(N.i,"t",R),h.C=0,N=h.j.L,h.h=new Cu,h.g=Uu(h.j,N?w:null,!h.u),h.P>0&&(h.O=new Xo(m(h.Y,h,h.g),h.P)),w=h.V,N=h.g,R=h.ba;var ee="readystatechange";Array.isArray(ee)||(ee&&(so[0]=ee.toString()),ee=so);for(let se=0;se<ee.length;se++){const ge=He(N,ee[se],R||w.handleEvent,!1,w.h||w);if(!ge)break;w.g[ge.key]=ge}w=h.J?z(h.J):{},h.u?(h.v||(h.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,w)):(h.v="GET",h.g.ea(h.B,h.v,null,w)),Jn(),ku(h.i,h.v,h.B,h.l,h.S,h.u)}Zn.prototype.ba=function(h){h=h.target;const w=this.O;w&&Ks(h)==3?w.j():this.Y(h)},Zn.prototype.Y=function(h){try{if(h==this.g)e:{const Ue=Ks(this.g),Pt=this.g.ya(),nt=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||Ou(this.g)))){this.K||Ue!=4||Pt==7||(Pt==8||nt<=0?Jn(3):Jn(2)),Zo(this);var w=this.g.ca();this.X=w;var N=Au(this);if(this.o=w==200,Su(this.i,this.v,this.B,this.l,this.S,Ue,w),this.o){if(this.U&&!this.L){t:{if(this.g){var R,ee=this.g;if((R=ee.g?ee.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(R)){var se=R;break t}}se=null}if(h=se)Us(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ut(this,h);else{this.o=!1,this.m=3,jt(12),_r(this),oo(this);break e}}if(this.R){h=!0;let Vt;for(;!this.K&&this.C<N.length;)if(Vt=Ru(this,N),Vt==kl){Ue==4&&(this.m=4,jt(14),h=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(Vt==Iu){this.m=4,jt(15),Us(this.i,this.l,N,"[Invalid Chunk]"),h=!1;break}else Us(this.i,this.l,Vt,null),ut(this,Vt);if(Pu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||N.length!=0||this.h.h||(this.m=1,jt(16),h=!1),this.o=this.o&&h,!h)Us(this.i,this.l,N,"[Invalid Chunked Response]"),_r(this),oo(this);else if(N.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),go(ge),ge.P=!0,jt(11))}}else Us(this.i,this.l,N,null),ut(this,N);Ue==4&&_r(this),this.o&&!this.K&&(Ue==4?ca(this.j,this):(this.o=!1,io(this)))}else Ol(this.g),w==400&&N.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),_r(this),oo(this)}}}catch{}finally{}};function Au(h){if(!Pu(h))return h.g.la();const w=Ou(h.g);if(w==="")return"";let N="";const R=w.length,ee=Ks(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return _r(h),oo(h),"";h.h.i=new c.TextDecoder}for(let se=0;se<R;se++)h.h.h=!0,N+=h.h.i.decode(w[se],{stream:!(ee&&se==R-1)});return w.length=0,h.h.g+=N,h.C=0,h.h.g}function Pu(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Ru(h,w){var N=h.C,R=w.indexOf(`
`,N);return R==-1?kl:(N=Number(w.substring(N,R)),isNaN(N)?Iu:(R+=1,R+N>w.length?kl:(w=w.slice(R,R+N),h.C=R+N,w)))}Zn.prototype.cancel=function(){this.K=!0,_r(this)};function io(h){h.T=Date.now()+h.H,Tl(h,h.H)}function Tl(h,w){if(h.D!=null)throw Error("WatchDog timer not null");h.D=ti(m(h.aa,h),w)}function Zo(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Zn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(Tu(this.i,this.B),this.M!=2&&(Jn(),jt(17)),_r(this),this.m=2,oo(this)):Tl(this,this.T-h)};function oo(h){h.j.I==0||h.K||ca(h.j,h)}function _r(h){Zo(h);var w=h.O;w&&typeof w.dispose=="function"&&w.dispose(),h.O=null,Zr(h.V),h.g&&(w=h.g,h.g=null,w.abort(),w.dispose())}function ut(h,w){try{var N=h.j;if(N.I!=0&&(N.g==h||Cl(N.h,h))){if(!h.L&&Cl(N.h,h)&&N.I==3){try{var R=N.Ba.g.parse(w)}catch{R=null}if(Array.isArray(R)&&R.length==3){var ee=R;if(ee[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<h.F)la(N),$n(N);else break e;Xs(N),jt(18)}}else N.xa=ee[1],0<N.xa-N.K&&ee[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=ti(m(N.Va,N),6e3));ao(N.h)<=1&&N.ta&&(N.ta=void 0)}else qn(N,11)}else if((h.L||N.g==h)&&la(N),!A(w))for(ee=N.Ba.g.parse(w),w=0;w<ee.length;w++){let nt=ee[w];const Vt=nt[0];if(!(Vt<=N.K))if(N.K=Vt,nt=nt[1],N.I==2)if(nt[0]=="c"){N.M=nt[1],N.ba=nt[2];const Gn=nt[3];Gn!=null&&(N.ka=Gn,N.j.info("VER="+N.ka));const jr=nt[4];jr!=null&&(N.za=jr,N.j.info("SVER="+N.za));const Js=nt[5];Js!=null&&typeof Js=="number"&&Js>0&&(R=1.5*Js,N.O=R,N.j.info("backChannelRequestTimeoutMs_="+R)),R=N;const Zs=h.g;if(Zs){const ha=Zs.g?Zs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ha){var se=R.h;se.g||ha.indexOf("spdy")==-1&&ha.indexOf("quic")==-1&&ha.indexOf("h2")==-1||(se.j=se.l,se.g=new Set,se.h&&(ta(se,se.h),se.h=null))}if(R.G){const zl=Zs.g?Zs.g.getResponseHeader("X-HTTP-Session-Id"):null;zl&&(R.wa=zl,Ze(R.J,R.G,zl))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-h.F,N.j.info("Handshake RTT: "+N.T+"ms")),R=N;var ge=h;if(R.na=Ul(R,R.L?R.ba:null,R.W),ge.L){lo(R.h,ge);var Ue=ge,Pt=R.O;Pt&&(Ue.H=Pt),Ue.D&&(Zo(Ue),io(Ue)),R.g=ge}else dn(R);N.i.length>0&&Tr(N)}else nt[0]!="stop"&&nt[0]!="close"||qn(N,7);else N.I==3&&(nt[0]=="stop"||nt[0]=="close"?nt[0]=="stop"?qn(N,7):oa(N):nt[0]!="noop"&&N.l&&N.l.qa(nt),N.A=0)}}Jn(4)}catch{}}var Af=class{constructor(h,w){this.g=h,this.map=w}};function ea(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function jl(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function ao(h){return h.h?1:h.g?h.g.size:0}function Cl(h,w){return h.h?h.h==w:h.g?h.g.has(w):!1}function ta(h,w){h.g?h.g.add(w):h.h=w}function lo(h,w){h.h&&h.h==w?h.h=null:h.g&&h.g.has(w)&&h.g.delete(w)}ea.prototype.cancel=function(){if(this.i=Un(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Un(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let w=h.i;for(const N of h.g.values())w=w.concat(N.G);return w}return _(h.i)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zn(h,w){if(h){h=h.split("&");for(let N=0;N<h.length;N++){const R=h[N].indexOf("=");let ee,se=null;R>=0?(ee=h[N].substring(0,R),se=h[N].substring(R+1)):ee=h[N],w(ee,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function Bs(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;h instanceof Bs?(this.l=h.l,co(this,h.j),this.o=h.o,this.g=h.g,$s(this,h.u),this.h=h.h,ii(this,Ll(h.i)),this.m=h.m):h&&(w=String(h).match(Du))?(this.l=!1,co(this,w[1]||"",!0),this.o=uo(w[2]||""),this.g=uo(w[3]||"",!0),$s(this,w[4]),this.h=uo(w[5]||"",!0),ii(this,w[6]||"",!0),this.m=uo(w[7]||"")):(this.l=!1,this.i=new Ke(null,this.l))}Bs.prototype.toString=function(){const h=[];var w=this.j;w&&h.push(ho(w,Al,!0),":");var N=this.g;return(N||w=="file")&&(h.push("//"),(w=this.o)&&h.push(ho(w,Al,!0),"@"),h.push(zs(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&h.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&h.push("/"),h.push(ho(N,N.charAt(0)=="/"?fo:Pl,!0))),(N=this.i.toString())&&h.push("?",N),(N=this.m)&&h.push("#",ho(N,Rl)),h.join("")},Bs.prototype.resolve=function(h){const w=es(this);let N=!!h.j;N?co(w,h.j):N=!!h.o,N?w.o=h.o:N=!!h.g,N?w.g=h.g:N=h.u!=null;var R=h.h;if(N)$s(w,h.u);else if(N=!!h.h){if(R.charAt(0)!="/")if(this.g&&!this.h)R="/"+R;else{var ee=w.h.lastIndexOf("/");ee!=-1&&(R=w.h.slice(0,ee+1)+R)}if(ee=R,ee==".."||ee==".")R="";else if(ee.indexOf("./")!=-1||ee.indexOf("/.")!=-1){R=ee.lastIndexOf("/",0)==0,ee=ee.split("/");const se=[];for(let ge=0;ge<ee.length;){const Ue=ee[ge++];Ue=="."?R&&ge==ee.length&&se.push(""):Ue==".."?((se.length>1||se.length==1&&se[0]!="")&&se.pop(),R&&ge==ee.length&&se.push("")):(se.push(Ue),R=!0)}R=se.join("/")}else R=ee}return N?w.h=R:N=h.i.toString()!=="",N?ii(w,Ll(h.i)):N=!!h.m,N&&(w.m=h.m),w};function es(h){return new Bs(h)}function co(h,w,N){h.j=N?uo(w,!0):w,h.j&&(h.j=h.j.replace(/:$/,""))}function $s(h,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);h.u=w}else h.u=null}function ii(h,w,N){w instanceof Ke?(h.i=w,sa(h.i,h.l)):(N||(w=ho(w,Pf)),h.i=new Ke(w,h.l))}function Ze(h,w,N){h.i.set(w,N)}function Nr(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function uo(h,w){return h?w?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function ho(h,w,N){return typeof h=="string"?(h=encodeURI(h).replace(w,Il),N&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Il(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Al=/[#\/\?@]/g,Pl=/[#\?:]/g,fo=/[#\?]/g,Pf=/[#\?@]/g,Rl=/#/g;function Ke(h,w){this.h=this.g=null,this.i=h||null,this.j=!!w}function qs(h){h.g||(h.g=new Map,h.h=0,h.i&&zn(h.i,function(w,N){h.add(decodeURIComponent(w.replace(/\+/g," ")),N)}))}n=Ke.prototype,n.add=function(h,w){qs(this),this.i=null,h=Gs(this,h);let N=this.g.get(h);return N||this.g.set(h,N=[]),N.push(w),this.h+=1,this};function Dl(h,w){qs(h),w=Gs(h,w),h.g.has(w)&&(h.i=null,h.h-=h.g.get(w).length,h.g.delete(w))}function na(h,w){return qs(h),w=Gs(h,w),h.g.has(w)}n.forEach=function(h,w){qs(this),this.g.forEach(function(N,R){N.forEach(function(ee){h.call(w,ee,R,this)},this)},this)};function Ml(h,w){qs(h);let N=[];if(typeof w=="string")na(h,w)&&(N=N.concat(h.g.get(Gs(h,w))));else for(h=Array.from(h.g.values()),w=0;w<h.length;w++)N=N.concat(h[w]);return N}n.set=function(h,w){return qs(this),this.i=null,h=Gs(this,h),na(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[w]),this.h+=1,this},n.get=function(h,w){return h?(h=Ml(this,h),h.length>0?String(h[0]):w):w};function Vl(h,w,N){Dl(h,w),N.length>0&&(h.i=null,h.g.set(Gs(h,w),_(N)),h.h+=N.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],w=Array.from(this.g.keys());for(let R=0;R<w.length;R++){var N=w[R];const ee=zs(N);N=Ml(this,N);for(let se=0;se<N.length;se++){let ge=ee;N[se]!==""&&(ge+="="+zs(N[se])),h.push(ge)}}return this.i=h.join("&")};function Ll(h){const w=new Ke;return w.i=h.i,h.g&&(w.g=new Map(h.g),w.h=h.h),w}function Gs(h,w){return w=String(w),h.j&&(w=w.toLowerCase()),w}function sa(h,w){w&&!h.j&&(qs(h),h.i=null,h.g.forEach(function(N,R){const ee=R.toLowerCase();R!=ee&&(Dl(this,R),Vl(this,ee,N))},h)),h.j=w}function Ws(h,w){const N=new ni;if(c.Image){const R=new Image;R.onload=g(tn,N,"TestLoadImage: loaded",!0,w,R),R.onerror=g(tn,N,"TestLoadImage: error",!1,w,R),R.onabort=g(tn,N,"TestLoadImage: abort",!1,w,R),R.ontimeout=g(tn,N,"TestLoadImage: timeout",!1,w,R),c.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=h}else w(!1)}function Hs(h,w){const N=new ni,R=new AbortController,ee=setTimeout(()=>{R.abort(),tn(N,"TestPingServer: timeout",!1,w)},1e4);fetch(h,{signal:R.signal}).then(se=>{clearTimeout(ee),se.ok?tn(N,"TestPingServer: ok",!0,w):tn(N,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(ee),tn(N,"TestPingServer: error",!1,w)})}function tn(h,w,N,R,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),R(N)}catch{}}function po(){this.g=new $e}function Er(h){this.i=h.Sb||null,this.h=h.ab||!1}y(Er,Je),Er.prototype.g=function(){return new Bn(this.i,this.h)};function Bn(h,w){St.call(this),this.H=h,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Bn,St),n=Bn.prototype,n.open=function(h,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=w,this.readyState=1,ys(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(w.body=h),(this.H||c).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},n.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ys(this)),this.g&&(this.readyState=3,ys(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Mu(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function Mu(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}n.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var w=h.value?h.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!h.done}))&&(this.response=this.responseText+=w)}h.done?oi(this):ys(this),this.readyState==3&&Mu(this)}},n.Oa=function(h){this.g&&(this.response=this.responseText=h,oi(this))},n.Na=function(h){this.g&&(this.response=h,oi(this))},n.ga=function(){this.g&&oi(this)};function oi(h){h.readyState=4,h.l=null,h.j=null,h.B=null,ys(h)}n.setRequestHeader=function(h,w){this.A.append(h,w)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],w=this.h.entries();for(var N=w.next();!N.done;)N=N.value,h.push(N[0]+": "+N[1]),N=w.next();return h.join(`\r
`)};function ys(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Bn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Vu(h){let w="";return U(h,function(N,R){w+=R,w+=":",w+=N,w+=`\r
`}),w}function ra(h,w,N){e:{for(R in N){var R=!1;break e}R=!0}R||(N=Vu(N),typeof h=="string"?N!=null&&zs(N):Ze(h,w,N))}function rt(h){St.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(rt,St);var Lu=/^https?$/i,Rf=["POST","PUT"];n=rt.prototype,n.Fa=function(h){this.H=h},n.ea=function(h,w,N,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);w=w?w.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ju.g(),this.g.onreadystatechange=v(m(this.Ca,this));try{this.B=!0,this.g.open(w,String(h),!0),this.B=!1}catch(se){ai(this,se);return}if(h=N||"",N=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var ee in R)N.set(ee,R[ee]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const se of R.keys())N.set(se,R.get(se));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(N.keys()).find(se=>se.toLowerCase()=="content-type"),ee=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Rf,w,void 0)>=0)||R||ee||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[se,ge]of N)this.g.setRequestHeader(se,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(se){ai(this,se)}};function ai(h,w){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=w,h.o=5,li(h),Sr(h)}function li(h){h.A||(h.A=!0,ct(h,"complete"),ct(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,ct(this,"complete"),ct(this,"abort"),Sr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),rt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?kr(this):this.Xa())},n.Xa=function(){kr(this)};function kr(h){if(h.h&&typeof l<"u"){if(h.v&&Ks(h)==4)setTimeout(h.Ca.bind(h),0);else if(ct(h,"readystatechange"),Ks(h)==4){h.h=!1;try{const se=h.ca();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var N;if(!(N=w)){var R;if(R=se===0){let ge=String(h.D).match(Du)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),R=!Lu.test(ge?ge.toLowerCase():"")}N=R}if(N)ct(h,"complete"),ct(h,"success");else{h.o=6;try{var ee=Ks(h)>2?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.ca()+"]",li(h)}}finally{Sr(h)}}}}function Sr(h,w){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const N=h.g;h.g=null,w||ct(h,"ready");try{N.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ks(h){return h.g?h.g.readyState:0}n.ca=function(){try{return Ks(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(h){if(this.g){var w=this.g.responseText;return h&&w.indexOf(h)==0&&(w=w.substring(h.length)),ke(w)}};function Ou(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Ol(h){const w={};h=(h.g&&Ks(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<h.length;R++){if(A(h[R]))continue;var N=Jo(h[R]);const ee=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const se=w[ee]||[];w[ee]=se,se.push(N)}X(w,function(R){return R.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Qs(h,w,N){return N&&N.internalChannelParams&&N.internalChannelParams[h]||w}function ia(h){this.za=0,this.i=[],this.j=new ni,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Qs("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Qs("baseRetryDelayMs",5e3,h),this.Za=Qs("retryDelaySeedMs",1e4,h),this.Ta=Qs("forwardChannelMaxRetries",2,h),this.va=Qs("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new ea(h&&h.concurrentRequestLimit),this.Ba=new po,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=ia.prototype,n.ka=8,n.I=1,n.connect=function(h,w,N,R){jt(0),this.W=h,this.H=w||{},N&&R!==void 0&&(this.H.OSID=N,this.H.OAID=R),this.F=this.X,this.J=Ul(this,null,this.W),Tr(this)};function oa(h){if(aa(h),h.I==3){var w=h.V++,N=es(h.J);if(Ze(N,"SID",h.M),Ze(N,"RID",w),Ze(N,"TYPE","terminate"),Ys(h,N),w=new Zn(h,h.j,w),w.M=2,w.A=Nr(es(N)),N=!1,c.navigator&&c.navigator.sendBeacon)try{N=c.navigator.sendBeacon(w.A.toString(),"")}catch{}!N&&c.Image&&(new Image().src=w.A,N=!0),N||(w.g=Uu(w.j,null),w.g.ea(w.A)),w.F=Date.now(),io(w)}xo(h)}function $n(h){h.g&&(go(h),h.g.cancel(),h.g=null)}function aa(h){$n(h),h.v&&(c.clearTimeout(h.v),h.v=null),la(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function Tr(h){if(!jl(h.h)&&!h.m){h.m=!0;var w=h.Ea;Q||j(),K||(Q(),K=!0),P.add(w,h),h.D=0}}function Fu(h,w){return ao(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=w.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=ti(m(h.Ea,h,w),ua(h,h.D)),h.D++,!0)}n.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const ee=new Zn(this,this.j,h);let se=this.o;if(this.U&&(se?(se=z(se),Ne(se,this.U)):se=this.U),this.u!==null||this.R||(ee.J=se,se=null),this.S)e:{for(var w=0,N=0;N<this.i.length;N++){t:{var R=this.i[N];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(w+=R,w>4096){w=N;break e}if(w===4096||N===this.i.length-1){w=N+1;break e}}w=1e3}else w=1e3;w=Fl(this,ee,w),N=es(this.J),Ze(N,"RID",h),Ze(N,"CVER",22),this.G&&Ze(N,"X-HTTP-Session-Id",this.G),Ys(this,N),se&&(this.R?w="headers="+zs(Vu(se))+"&"+w:this.u&&ra(N,this.u,se)),ta(this.h,ee),this.Ra&&Ze(N,"TYPE","init"),this.S?(Ze(N,"$req",w),Ze(N,"SID","null"),ee.U=!0,xs(ee,N,null)):xs(ee,N,w),this.I=2}}else this.I==3&&(h?mo(this,h):this.i.length==0||jl(this.h)||mo(this))};function mo(h,w){var N;w?N=w.l:N=h.V++;const R=es(h.J);Ze(R,"SID",h.M),Ze(R,"RID",N),Ze(R,"AID",h.K),Ys(h,R),h.u&&h.o&&ra(R,h.u,h.o),N=new Zn(h,h.j,N,h.D+1),h.u===null&&(N.J=h.o),w&&(h.i=w.G.concat(h.i)),w=Fl(h,N,1e3),N.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),ta(h.h,N),xs(N,R,w)}function Ys(h,w){h.H&&U(h.H,function(N,R){Ze(w,R,N)}),h.l&&U({},function(N,R){Ze(w,R,N)})}function Fl(h,w,N){N=Math.min(h.i.length,N);const R=h.l?m(h.l.Ka,h.l,h):null;e:{var ee=h.i;let Ue=-1;for(;;){const Pt=["count="+N];Ue==-1?N>0?(Ue=ee[0].g,Pt.push("ofs="+Ue)):Ue=0:Pt.push("ofs="+Ue);let nt=!0;for(let Vt=0;Vt<N;Vt++){var se=ee[Vt].g;const Gn=ee[Vt].map;if(se-=Ue,se<0)Ue=Math.max(0,ee[Vt].g-100),nt=!1;else try{se="req"+se+"_"||"";try{var ge=Gn instanceof Map?Gn:Object.entries(Gn);for(const[jr,Js]of ge){let Zs=Js;d(Js)&&(Zs=Fs(Js)),Pt.push(se+jr+"="+encodeURIComponent(Zs))}}catch(jr){throw Pt.push(se+"type="+encodeURIComponent("_badmap")),jr}}catch{R&&R(Gn)}}if(nt){ge=Pt.join("&");break e}}ge=void 0}return h=h.i.splice(0,N),w.G=h,ge}function dn(h){if(!h.g&&!h.v){h.Y=1;var w=h.Da;Q||j(),K||(Q(),K=!0),P.add(w,h),h.A=0}}function Xs(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=ti(m(h.Da,h),ua(h,h.A)),h.A++,!0)}n.Da=function(){if(this.v=null,ci(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=ti(m(this.Wa,this),h)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),$n(this),ci(this))};function go(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function ci(h){h.g=new Zn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var w=es(h.na);Ze(w,"RID","rpc"),Ze(w,"SID",h.M),Ze(w,"AID",h.K),Ze(w,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(w,"TO",h.ia),Ze(w,"TYPE","xmlhttp"),Ys(h,w),h.u&&h.o&&ra(w,h.u,h.o),h.O&&(h.g.H=h.O);var N=h.g;h=h.ba,N.M=1,N.A=Nr(es(w)),N.u=null,N.R=!0,Sl(N,h)}n.Va=function(){this.C!=null&&(this.C=null,$n(this),Xs(this),jt(19))};function la(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function ca(h,w){var N=null;if(h.g==w){la(h),go(h),h.g=null;var R=2}else if(Cl(h.h,w))N=w.G,lo(h.h,w),R=1;else return;if(h.I!=0){if(w.o)if(R==1){N=w.u?w.u.length:0,w=Date.now()-w.F;var ee=h.D;R=gs(),ct(R,new El(R,N)),Tr(h)}else dn(h);else if(ee=w.m,ee==3||ee==0&&w.X>0||!(R==1&&Fu(h,w)||R==2&&Xs(h)))switch(N&&N.length>0&&(w=h.h,w.i=w.i.concat(N)),ee){case 1:qn(h,5);break;case 4:qn(h,10);break;case 3:qn(h,6);break;default:qn(h,2)}}}function ua(h,w){let N=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(N*=2),N*w}function qn(h,w){if(h.j.info("Error code "+w),w==2){var N=m(h.bb,h),R=h.Ua;const ee=!R;R=new Bs(R||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||co(R,"https"),Nr(R),ee?Ws(R.toString(),N):Hs(R.toString(),N)}else jt(2);h.I=0,h.l&&h.l.pa(w),xo(h),aa(h)}n.bb=function(h){h?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function xo(h){if(h.I=0,h.ja=[],h.l){const w=Un(h.h);(w.length!=0||h.i.length!=0)&&(k(h.ja,w),k(h.ja,h.i),h.h.i.length=0,_(h.i),h.i.length=0),h.l.oa()}}function Ul(h,w,N){var R=N instanceof Bs?es(N):new Bs(N);if(R.g!="")w&&(R.g=w+"."+R.g),$s(R,R.u);else{var ee=c.location;R=ee.protocol,w=w?w+"."+ee.hostname:ee.hostname,ee=+ee.port;const se=new Bs(null);R&&co(se,R),w&&(se.g=w),ee&&$s(se,ee),N&&(se.h=N),R=se}return N=h.G,w=h.wa,N&&w&&Ze(R,N,w),Ze(R,"VER",h.ka),Ys(h,R),R}function Uu(h,w,N){if(w&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=h.Aa&&!h.ma?new rt(new Er({ab:N})):new rt(h.ma),w.Fa(h.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zu(){}n=zu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function da(){}da.prototype.g=function(h,w){return new nn(h,w)};function nn(h,w){St.call(this),this.g=new ia(w),this.l=h,this.h=w&&w.messageUrlParams||null,h=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(h?h["X-WebChannel-Content-Type"]=w.messageContentType:h={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(h?h["X-WebChannel-Client-Profile"]=w.sa:h={"X-WebChannel-Client-Profile":w.sa}),this.g.U=h,(h=w&&w.Qb)&&!A(h)&&(this.g.u=h),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!A(w)&&(this.g.G=w,h=this.h,h!==null&&w in h&&(h=this.h,w in h&&delete h[w])),this.j=new ui(this)}y(nn,St),nn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){oa(this.g)},nn.prototype.o=function(h){var w=this.g;if(typeof h=="string"){var N={};N.__data__=h,h=N}else this.v&&(N={},N.__data__=Fs(h),h=N);w.i.push(new Af(w.Ya++,h)),w.I==3&&Tr(w)},nn.prototype.N=function(){this.g.l=null,delete this.j,oa(this.g),delete this.g,nn.Z.N.call(this)};function Bu(h){Xn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var w=h.__sm__;if(w){e:{for(const N in w){h=N;break e}h=void 0}(this.i=h)&&(h=this.i,w=w!==null&&h in w?w[h]:void 0),this.data=w}else this.data=h}y(Bu,Xn);function $u(){ei.call(this),this.status=1}y($u,ei);function ui(h){this.g=h}y(ui,zu),ui.prototype.ra=function(){ct(this.g,"a")},ui.prototype.qa=function(h){ct(this.g,new Bu(h))},ui.prototype.pa=function(h){ct(this.g,new $u)},ui.prototype.oa=function(){ct(this.g,"b")},da.prototype.createWebChannel=da.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,b2=function(){return new da},v2=function(){return gs()},y2=jn,Qm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},si.NO_ERROR=0,si.TIMEOUT=8,si.HTTP_ERROR=6,ah=si,ri.COMPLETE="complete",x2=ri,At.EventType=yt,yt.OPEN="a",yt.CLOSE="b",yt.ERROR="c",yt.MESSAGE="d",St.prototype.listen=St.prototype.J,yc=At,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,g2=rt}).apply(typeof Od<"u"?Od:typeof self<"u"?self:typeof window<"u"?window:{});const yb="@firebase/firestore",vb="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new Bg("@firebase/firestore");function Ma(){return $o.logLevel}function we(n,...e){if($o.logLevel<=qe.DEBUG){const t=e.map(Zg);$o.debug(`Firestore (${fl}): ${n}`,...t)}}function Hr(n,...e){if($o.logLevel<=qe.ERROR){const t=e.map(Zg);$o.error(`Firestore (${fl}): ${n}`,...t)}}function qo(n,...e){if($o.logLevel<=qe.WARN){const t=e.map(Zg);$o.warn(`Firestore (${fl}): ${n}`,...t)}}function Zg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,w2(n,s,t)}function w2(n,e,t){let s=`FIRESTORE (${fl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Hr(s),new Error(s)}function tt(n,e,t,s){let i="Unexpected state";typeof t=="string"?i=t:s=t,n||w2(e,i,s)}function ze(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(xn.UNAUTHENTICATED)))}shutdown(){}}class PA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class RA{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tt(this.o===void 0,42304);let s=this.i;const i=f=>this.i!==s?(s=this.i,t(f)):Promise.resolve();let l=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Br,e.enqueueRetryable((()=>i(this.currentUser)))};const c=()=>{const f=l;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},d=f=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Br)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(tt(typeof s.accessToken=="string",31837,{l:s}),new _2(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return tt(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class DA{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class MA{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new DA(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VA{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ls(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tt(this.o===void 0,3512);const s=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const i=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>i(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?i(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bb(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(tt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bb(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const i=LA(40);for(let l=0;l<i.length;++l)s.length<20&&i[l]<t&&(s+=e.charAt(i[l]%62))}return s}}function Ge(n,e){return n<e?-1:n>e?1:0}function Ym(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const i=n.charAt(s),l=e.charAt(s);if(i!==l)return hm(i)===hm(l)?Ge(i,l):hm(i)?1:-1}return Ge(n.length,e.length)}const OA=55296,FA=57343;function hm(n){const e=n.charCodeAt(0);return e>=OA&&e<=FA}function Za(n,e,t){return n.length===e.length&&n.every(((s,i)=>t(s,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="__name__";class rr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ve(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ve(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return rr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let i=0;i<s;i++){const l=rr.compareSegments(e.get(i),t.get(i));if(l!==0)return l}return Ge(e.length,t.length)}static compareSegments(e,t){const s=rr.isNumericId(e),i=rr.isNumericId(t);return s&&!i?-1:!s&&i?1:s&&i?rr.extractNumericId(e).compare(rr.extractNumericId(t)):Ym(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Vi.fromString(e.substring(4,e.length-2))}}class ot extends rr{construct(e,t,s){return new ot(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(oe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((i=>i.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const UA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends rr{construct(e,t,s){return new Jt(e,t,s)}static isValidIdentifier(e){return UA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wb}static keyField(){return new Jt([wb])}static fromServerFormat(e){const t=[];let s="",i=0;const l=()=>{if(s.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new ye(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ye(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=f,i+=2}else d==="`"?(c=!c,i++):d!=="."||c?(s+=d,i++):(l(),i++)}if(l(),c)throw new ye(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(t)}static emptyPath(){return new Jt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(ot.fromString(e))}static fromName(e){return new Ie(ot.fromString(e).popFirst(5))}static empty(){return new Ie(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(n,e,t){if(!t)throw new ye(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k2(n,e,t,s){if(e===!0&&s===!0)throw new ye(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _b(n){if(!Ie.isDocumentKey(n))throw new ye(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Nb(n){if(Ie.isDocumentKey(n))throw new ye(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function S2(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Jh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ve(12329,{type:typeof n})}function _n(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Jh(n);throw new ye(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function zA(n,e){if(e<=0)throw new ye(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function cu(n,e){if(!S2(n))throw new ye(oe.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const i=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(i&&typeof c!==i){t=`JSON field '${s}' must be a ${i}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ye(oe.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=-62135596800,kb=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*kb);return new at(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Eb)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/kb}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(cu(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Eb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:zt("string",at._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new at(0,0))}static max(){return new Fe(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=-1;function BA(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,i=Fe.fromTimestamp(s===1e9?new at(t+1,0):new at(t,s));return new Ui(i,Ie.empty(),e)}function $A(n){return new Ui(n.readTime,n.key,Uc)}class Ui{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ui(Fe.min(),Ie.empty(),Uc)}static max(){return new Ui(Fe.max(),Ie.empty(),Uc)}}function qA(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:Ge(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pl(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==GA)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce(((s,i)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,i)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ce.reject(t)}static resolve(e){return new ce(((t,s)=>{t(e)}))}static reject(e){return new ce(((t,s)=>{s(e)}))}static waitFor(e){return new ce(((t,s)=>{let i=0,l=0,c=!1;e.forEach((d=>{++i,d.next((()=>{++l,c&&l===i&&t()}),(f=>s(f)))})),c=!0,l===i&&t()}))}static or(e){let t=ce.resolve(!1);for(const s of e)t=t.next((i=>i?ce.resolve(i):s()));return t}static forEach(e,t){const s=[];return e.forEach(((i,l)=>{s.push(t.call(this,i,l))})),this.waitFor(s)}static mapArray(e,t){return new ce(((s,i)=>{const l=e.length,c=new Array(l);let d=0;for(let f=0;f<l;f++){const m=f;t(e[m]).next((g=>{c[m]=g,++d,d===l&&s(c)}),(g=>i(g)))}}))}static doWhile(e,t){return new ce(((s,i)=>{const l=()=>{e()===!0?t().next((()=>{l()}),i):s()};l()}))}}function HA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ml(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=-1;function ef(n){return n==null}function Ch(n){return n===0&&1/n==-1/0}function KA(n){return typeof n=="number"&&Number.isInteger(n)&&!Ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="";function QA(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sb(e)),e=YA(n.get(t),e);return Sb(e)}function YA(n,e){let t=e;const s=n.length;for(let i=0;i<s;i++){const l=n.charAt(i);switch(l){case"\0":t+="";break;case T2:t+="";break;default:t+=l}}return t}function Sb(n){return n+T2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function j2(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new kt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const i=this.comparator(e,s.key);if(i===0)return t+s.left.size;i<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fd(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fd(this.root,e,this.comparator,!0)}}class Fd{constructor(e,t,s,i){this.isReverse=i,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&i&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,s,i,l){this.key=e,this.value=t,this.color=s??ln.RED,this.left=i??ln.EMPTY,this.right=l??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,i,l){return new ln(e??this.key,t??this.value,s??this.color,i??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let i=this;const l=s(e,i.key);return i=l<0?i.copy(null,null,null,i.left.insert(e,t,s),null):l===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,s)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ln.EMPTY;s=i.right.min(),i=i.copy(s.key,s.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,t,s,i,l){return this}insert(e,t,s){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const i=s.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jb(this.data.getIterator())}getIteratorFrom(e){return new jb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=s.getNext().key;if(this.comparator(i,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Wt(this.comparator);return t.data=e,t}}class jb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Wt(Jt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Za(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new C2("Invalid base64 string: "+l):l}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(i){let l="";for(let c=0;c<i.length;++c)l+=String.fromCharCode(i[c]);return l})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let i=0;i<t.length;i++)s[i]=t.charCodeAt(i);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const XA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(n){if(tt(!!n,39018),typeof n=="string"){let e=0;const t=XA.exec(n);if(tt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Dt(n.seconds),nanos:Dt(n.nanos)}}function Dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bi(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="server_timestamp",A2="__type__",P2="__previous_value__",R2="__local_write_time__";function t0(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[A2])==null?void 0:s.stringValue)===I2}function tf(n){const e=n.mapValue.fields[P2];return t0(e)?tf(e):e}function zc(n){const e=zi(n.mapValue.fields[R2].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t,s,i,l,c,d,f,m,g){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=i,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=g}}const Ih="(default)";class el{constructor(e,t){this.projectId=e,this.database=t||Ih}static empty(){return new el("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof el&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="__type__",ZA="__max__",Ud={mapValue:{}},M2="__vector__",Ah="value";function $i(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?t0(n)?4:tP(n)?9007199254740991:eP(n)?10:11:Ve(28295,{value:n})}function mr(n,e){if(n===e)return!0;const t=$i(n);if(t!==$i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zc(n).isEqual(zc(e));case 3:return(function(i,l){if(typeof i.timestampValue=="string"&&typeof l.timestampValue=="string"&&i.timestampValue.length===l.timestampValue.length)return i.timestampValue===l.timestampValue;const c=zi(i.timestampValue),d=zi(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,l){return Bi(i.bytesValue).isEqual(Bi(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,l){return Dt(i.geoPointValue.latitude)===Dt(l.geoPointValue.latitude)&&Dt(i.geoPointValue.longitude)===Dt(l.geoPointValue.longitude)})(n,e);case 2:return(function(i,l){if("integerValue"in i&&"integerValue"in l)return Dt(i.integerValue)===Dt(l.integerValue);if("doubleValue"in i&&"doubleValue"in l){const c=Dt(i.doubleValue),d=Dt(l.doubleValue);return c===d?Ch(c)===Ch(d):isNaN(c)&&isNaN(d)}return!1})(n,e);case 9:return Za(n.arrayValue.values||[],e.arrayValue.values||[],mr);case 10:case 11:return(function(i,l){const c=i.mapValue.fields||{},d=l.mapValue.fields||{};if(Tb(c)!==Tb(d))return!1;for(const f in c)if(c.hasOwnProperty(f)&&(d[f]===void 0||!mr(c[f],d[f])))return!1;return!0})(n,e);default:return Ve(52216,{left:n})}}function Bc(n,e){return(n.values||[]).find((t=>mr(t,e)))!==void 0}function tl(n,e){if(n===e)return 0;const t=$i(n),s=$i(e);if(t!==s)return Ge(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ge(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=Dt(l.integerValue||l.doubleValue),f=Dt(c.integerValue||c.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return Cb(n.timestampValue,e.timestampValue);case 4:return Cb(zc(n),zc(e));case 5:return Ym(n.stringValue,e.stringValue);case 6:return(function(l,c){const d=Bi(l),f=Bi(c);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),f=c.split("/");for(let m=0;m<d.length&&m<f.length;m++){const g=Ge(d[m],f[m]);if(g!==0)return g}return Ge(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Ge(Dt(l.latitude),Dt(c.latitude));return d!==0?d:Ge(Dt(l.longitude),Dt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ib(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var v,_,k,E;const d=l.fields||{},f=c.fields||{},m=(v=d[Ah])==null?void 0:v.arrayValue,g=(_=f[Ah])==null?void 0:_.arrayValue,y=Ge(((k=m==null?void 0:m.values)==null?void 0:k.length)||0,((E=g==null?void 0:g.values)==null?void 0:E.length)||0);return y!==0?y:Ib(m,g)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ud.mapValue&&c===Ud.mapValue)return 0;if(l===Ud.mapValue)return 1;if(c===Ud.mapValue)return-1;const d=l.fields||{},f=Object.keys(d),m=c.fields||{},g=Object.keys(m);f.sort(),g.sort();for(let y=0;y<f.length&&y<g.length;++y){const v=Ym(f[y],g[y]);if(v!==0)return v;const _=tl(d[f[y]],m[g[y]]);if(_!==0)return _}return Ge(f.length,g.length)})(n.mapValue,e.mapValue);default:throw Ve(23264,{he:t})}}function Cb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ge(n,e);const t=zi(n),s=zi(e),i=Ge(t.seconds,s.seconds);return i!==0?i:Ge(t.nanos,s.nanos)}function Ib(n,e){const t=n.values||[],s=e.values||[];for(let i=0;i<t.length&&i<s.length;++i){const l=tl(t[i],s[i]);if(l)return l}return Ge(t.length,s.length)}function nl(n){return Xm(n)}function Xm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=zi(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Bi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ie.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",i=!0;for(const l of t.values||[])i?i=!1:s+=",",s+=Xm(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let i="{",l=!0;for(const c of s)l?l=!1:i+=",",i+=`${c}:${Xm(t.fields[c])}`;return i+"}"})(n.mapValue):Ve(61005,{value:n})}function lh(n){switch($i(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=tf(n);return e?16+lh(e):16;case 5:return 2*n.stringValue.length;case 6:return Bi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((i,l)=>i+lh(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let i=0;return Xi(s.fields,((l,c)=>{i+=l.length+lh(c)})),i})(n.mapValue);default:throw Ve(13486,{value:n})}}function Ab(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Jm(n){return!!n&&"integerValue"in n}function n0(n){return!!n&&"arrayValue"in n}function Pb(n){return!!n&&"nullValue"in n}function Rb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ch(n){return!!n&&"mapValue"in n}function eP(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[D2])==null?void 0:s.stringValue)===M2}function kc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Xi(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=kc(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kc(n.arrayValue.values[t]);return e}return{...n}}function tP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===ZA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.value=e}static empty(){return new Vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!ch(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kc(t)}setAll(e){let t=Jt.emptyPath(),s={},i=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,s,i),s={},i=[],t=d.popLast()}c?s[d.lastSegment()]=kc(c):i.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,i)}delete(e){const t=this.field(e.popLast());ch(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let i=t.mapValue.fields[e.get(s)];ch(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,s){Xi(t,((i,l)=>e[i]=l));for(const i of s)delete e[i]}clone(){return new Vn(kc(this.value))}}function V2(n){const e=[];return Xi(n.fields,((t,s)=>{const i=new Jt([t]);if(ch(s)){const l=V2(s.mapValue).fields;if(l.length===0)e.push(i);else for(const c of l)e.push(i.child(c))}else e.push(i)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t,s,i,l,c,d){this.key=e,this.documentType=t,this.version=s,this.readTime=i,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new yn(e,0,Fe.min(),Fe.min(),Fe.min(),Vn.empty(),0)}static newFoundDocument(e,t,s,i){return new yn(e,1,t,Fe.min(),s,i,0)}static newNoDocument(e,t){return new yn(e,2,t,Fe.min(),Fe.min(),Vn.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,Fe.min(),Fe.min(),Vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){this.position=e,this.inclusive=t}}function Db(n,e,t){let s=0;for(let i=0;i<n.position.length;i++){const l=e[i],c=n.position[i];if(l.field.isKeyField()?s=Ie.comparator(Ie.fromName(c.referenceValue),t.key):s=tl(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Mb(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t="asc"){this.field=e,this.dir=t}}function nP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{}class Ut extends L2{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new rP(e,t,s):t==="array-contains"?new aP(e,s):t==="in"?new lP(e,s):t==="not-in"?new cP(e,s):t==="array-contains-any"?new uP(e,s):new Ut(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new iP(e,s):new oP(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(tl(t,this.value)):t!==null&&$i(this.value)===$i(t)&&this.matchesComparison(tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ds extends L2{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Ds(e,t)}matches(e){return O2(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function O2(n){return n.op==="and"}function F2(n){return sP(n)&&O2(n)}function sP(n){for(const e of n.filters)if(e instanceof Ds)return!1;return!0}function Zm(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+nl(n.value);if(F2(n))return n.filters.map((e=>Zm(e))).join(",");{const e=n.filters.map((t=>Zm(t))).join(",");return`${n.op}(${e})`}}function U2(n,e){return n instanceof Ut?(function(s,i){return i instanceof Ut&&s.op===i.op&&s.field.isEqual(i.field)&&mr(s.value,i.value)})(n,e):n instanceof Ds?(function(s,i){return i instanceof Ds&&s.op===i.op&&s.filters.length===i.filters.length?s.filters.reduce(((l,c,d)=>l&&U2(c,i.filters[d])),!0):!1})(n,e):void Ve(19439)}function z2(n){return n instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${nl(t.value)}`})(n):n instanceof Ds?(function(t){return t.op.toString()+" {"+t.getFilters().map(z2).join(" ,")+"}"})(n):"Filter"}class rP extends Ut{constructor(e,t,s){super(e,t,s),this.key=Ie.fromName(s.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class iP extends Ut{constructor(e,t){super(e,"in",t),this.keys=B2("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class oP extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=B2("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function B2(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ie.fromName(s.referenceValue)))}class aP extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return n0(t)&&Bc(t.arrayValue,this.value)}}class lP extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bc(this.value.arrayValue,t)}}class cP extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Bc(this.value.arrayValue,t)}}class uP extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!n0(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Bc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e,t=null,s=[],i=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=i,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function Vb(n,e=null,t=[],s=[],i=null,l=null,c=null){return new dP(n,e,t,s,i,l,c)}function s0(n){const e=ze(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Zm(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),ef(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>nl(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>nl(s))).join(",")),e.Te=t}return e.Te}function r0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!nP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!U2(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mb(n.startAt,e.startAt)&&Mb(n.endAt,e.endAt)}function eg(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,t=null,s=[],i=[],l=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=i,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function hP(n,e,t,s,i,l,c,d){return new gl(n,e,t,s,i,l,c,d)}function nf(n){return new gl(n)}function Lb(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $2(n){return n.collectionGroup!==null}function Sc(n){const e=ze(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Wt(Jt.comparator);return c.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new $c(l,s))})),t.has(Jt.keyField().canonicalString())||e.Ie.push(new $c(Jt.keyField(),s))}return e.Ie}function dr(n){const e=ze(n);return e.Ee||(e.Ee=fP(e,Sc(n))),e.Ee}function fP(n,e){if(n.limitType==="F")return Vb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const l=i.dir==="desc"?"asc":"desc";return new $c(i.field,l)}));const t=n.endAt?new Ph(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Ph(n.startAt.position,n.startAt.inclusive):null;return Vb(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function tg(n,e){const t=n.filters.concat([e]);return new gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Rh(n,e,t){return new gl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sf(n,e){return r0(dr(n),dr(e))&&n.limitType===e.limitType}function q2(n){return`${s0(dr(n))}|lt:${n.limitType}`}function Va(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((i=>z2(i))).join(", ")}]`),ef(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((i=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(i))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((i=>nl(i))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((i=>nl(i))).join(",")),`Target(${s})`})(dr(n))}; limitType=${n.limitType})`}function rf(n,e){return e.isFoundDocument()&&(function(s,i){const l=i.key.path;return s.collectionGroup!==null?i.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ie.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,i){for(const l of Sc(s))if(!l.field.isKeyField()&&i.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,i){for(const l of s.filters)if(!l.matches(i))return!1;return!0})(n,e)&&(function(s,i){return!(s.startAt&&!(function(c,d,f){const m=Db(c,d,f);return c.inclusive?m<=0:m<0})(s.startAt,Sc(s),i)||s.endAt&&!(function(c,d,f){const m=Db(c,d,f);return c.inclusive?m>=0:m>0})(s.endAt,Sc(s),i))})(n,e)}function pP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function G2(n){return(e,t)=>{let s=!1;for(const i of Sc(n)){const l=mP(i,e,t);if(l!==0)return l;s=s||i.field.isKeyField()}return 0}}function mP(n,e,t){const s=n.field.isKeyField()?Ie.comparator(e.key,t.key):(function(l,c,d){const f=c.data.field(l),m=d.data.field(l);return f!==null&&m!==null?tl(f,m):Ve(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ve(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[i,l]of s)if(this.equalsFn(i,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),i=this.inner[s];if(i===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<i.length;l++)if(this.equalsFn(i[l][0],e))return void(i[l]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return s.length===1?delete this.inner[t]:s.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Xi(this.inner,((t,s)=>{for(const[i,l]of s)e(i,l)}))}isEmpty(){return j2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=new kt(Ie.comparator);function Kr(){return gP}const W2=new kt(Ie.comparator);function vc(...n){let e=W2;for(const t of n)e=e.insert(t.key,t);return e}function H2(n){let e=W2;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Do(){return Tc()}function K2(){return Tc()}function Tc(){return new Ko((n=>n.toString()),((n,e)=>n.isEqual(e)))}const xP=new kt(Ie.comparator),yP=new Wt(Ie.comparator);function We(...n){let e=yP;for(const t of n)e=e.add(t);return e}const vP=new Wt(Ge);function bP(){return vP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ch(e)?"-0":e}}function Q2(n){return{integerValue:""+n}}function Y2(n,e){return KA(e)?Q2(e):i0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(){this._=void 0}}function wP(n,e,t){return n instanceof qc?(function(i,l){const c={fields:{[A2]:{stringValue:I2},[R2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return l&&t0(l)&&(l=tf(l)),l&&(c.fields[P2]=l),{mapValue:c}})(t,e):n instanceof sl?J2(n,e):n instanceof rl?Z2(n,e):(function(i,l){const c=X2(i,l),d=Ob(c)+Ob(i.Ae);return Jm(c)&&Jm(i.Ae)?Q2(d):i0(i.serializer,d)})(n,e)}function _P(n,e,t){return n instanceof sl?J2(n,e):n instanceof rl?Z2(n,e):t}function X2(n,e){return n instanceof Gc?(function(s){return Jm(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class qc extends of{}class sl extends of{constructor(e){super(),this.elements=e}}function J2(n,e){const t=eN(e);for(const s of n.elements)t.some((i=>mr(i,s)))||t.push(s);return{arrayValue:{values:t}}}class rl extends of{constructor(e){super(),this.elements=e}}function Z2(n,e){let t=eN(e);for(const s of n.elements)t=t.filter((i=>!mr(i,s)));return{arrayValue:{values:t}}}class Gc extends of{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ob(n){return Dt(n.integerValue||n.doubleValue)}function eN(n){return n0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,t){this.field=e,this.transform=t}}function NP(n,e){return n.field.isEqual(e.field)&&(function(s,i){return s instanceof sl&&i instanceof sl||s instanceof rl&&i instanceof rl?Za(s.elements,i.elements,mr):s instanceof Gc&&i instanceof Gc?mr(s.Ae,i.Ae):s instanceof qc&&i instanceof qc})(n.transform,e.transform)}class EP{constructor(e,t){this.version=e,this.transformResults=t}}class Tn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class lf{}function tN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cf(n.key,Tn.none()):new uu(n.key,n.data,Tn.none());{const t=n.data,s=Vn.empty();let i=new Wt(Jt.comparator);for(let l of e.fields)if(!i.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),i=i.add(l)}return new Ji(n.key,s,new Yn(i.toArray()),Tn.none())}}function kP(n,e,t){n instanceof uu?(function(i,l,c){const d=i.value.clone(),f=Ub(i.fieldTransforms,l,c.transformResults);d.setAll(f),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(n,e,t):n instanceof Ji?(function(i,l,c){if(!uh(i.precondition,l))return void l.convertToUnknownDocument(c.version);const d=Ub(i.fieldTransforms,l,c.transformResults),f=l.data;f.setAll(nN(i)),f.setAll(d),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):(function(i,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function jc(n,e,t,s){return n instanceof uu?(function(l,c,d,f){if(!uh(l.precondition,c))return d;const m=l.value.clone(),g=zb(l.fieldTransforms,f,c);return m.setAll(g),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof Ji?(function(l,c,d,f){if(!uh(l.precondition,c))return d;const m=zb(l.fieldTransforms,f,c),g=c.data;return g.setAll(nN(l)),g.setAll(m),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((y=>y.field)))})(n,e,t,s):(function(l,c,d){return uh(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(n,e,t)}function SP(n,e){let t=null;for(const s of n.fieldTransforms){const i=e.data.field(s.field),l=X2(s.transform,i||null);l!=null&&(t===null&&(t=Vn.empty()),t.set(s.field,l))}return t||null}function Fb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,i){return s===void 0&&i===void 0||!(!s||!i)&&Za(s,i,((l,c)=>NP(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class uu extends lf{constructor(e,t,s,i=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ji extends lf{constructor(e,t,s,i,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=i,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nN(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Ub(n,e,t){const s=new Map;tt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const l=n[i],c=l.transform,d=e.data.field(l.field);s.set(l.field,_P(c,d,t[i]))}return s}function zb(n,e,t){const s=new Map;for(const i of n){const l=i.transform,c=t.data.field(i.field);s.set(i.field,wP(l,c,e))}return s}class cf extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TP extends lf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,t,s,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=i}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const l=this.mutations[i];l.key.isEqual(e.key)&&kP(l,e,s[i])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=jc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=jc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=K2();return this.mutations.forEach((i=>{const l=e.get(i.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(i.key)?null:d;const f=tN(c,d);f!==null&&s.set(i.key,f),c.isValidDocument()||c.convertToNoDocument(Fe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),We())}isEqual(e){return this.batchId===e.batchId&&Za(this.mutations,e.mutations,((t,s)=>Fb(t,s)))&&Za(this.baseMutations,e.baseMutations,((t,s)=>Fb(t,s)))}}class o0{constructor(e,t,s,i){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=i}static from(e,t,s){tt(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let i=(function(){return xP})();const l=e.mutations;for(let c=0;c<l.length;c++)i=i.insert(l[c].key,s[c].version);return new o0(e,t,s,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,Qe;function AP(n){switch(n){case oe.OK:return Ve(64938);case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0;default:return Ve(15467,{code:n})}}function sN(n){if(n===void 0)return Hr("GRPC error has no .code"),oe.UNKNOWN;switch(n){case Ot.OK:return oe.OK;case Ot.CANCELLED:return oe.CANCELLED;case Ot.UNKNOWN:return oe.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return oe.INTERNAL;case Ot.UNAVAILABLE:return oe.UNAVAILABLE;case Ot.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case Ot.NOT_FOUND:return oe.NOT_FOUND;case Ot.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case Ot.ABORTED:return oe.ABORTED;case Ot.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case Ot.DATA_LOSS:return oe.DATA_LOSS;default:return Ve(39323,{code:n})}}(Qe=Ot||(Ot={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=new Vi([4294967295,4294967295],0);function Bb(n){const e=PP().encode(n),t=new m2;return t.update(e),new Uint8Array(t.digest())}function $b(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),i=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Vi([t,s],0),new Vi([i,l],0)]}class a0{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new bc(`Invalid padding: ${t}`);if(s<0)throw new bc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new bc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new bc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Vi.fromNumber(this.ge)}ye(e,t,s){let i=e.add(t.multiply(Vi.fromNumber(s)));return i.compare(RP)===1&&(i=new Vi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Bb(e),[s,i]=$b(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,i,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const i=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new a0(l,i,t);return s.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=Bb(e),[s,i]=$b(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,i,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class bc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t,s,i,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=i,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const i=new Map;return i.set(e,du.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new uf(Fe.min(),i,new kt(Ge),Kr(),We())}}class du{constructor(e,t,s,i,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=i,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new du(s,t,We(),We(),We())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,t,s,i){this.be=e,this.removedTargetIds=t,this.key=s,this.De=i}}class rN{constructor(e,t){this.targetId=e,this.Ce=t}}class iN{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=i}}class qb{constructor(){this.ve=0,this.Fe=Gb(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=We(),t=We(),s=We();return this.Fe.forEach(((i,l)=>{switch(l){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:s=s.add(i);break;default:Ve(38017,{changeType:l})}})),new du(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Gb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,tt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class DP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Kr(),this.Je=zd(),this.He=zd(),this.Ye=new kt(Ge)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,s=e.Ce.count,i=this.ot(t);if(i){const l=i.target;if(eg(l))if(s===0){const c=new Ie(l.path);this.et(t,c,yn.newNoDocument(c,Fe.min()))}else tt(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const d=this.ut(e),f=d?this.ct(d,e,c):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:i=0},hashCount:l=0}=t;let c,d;try{c=Bi(s).toUint8Array()}catch(f){if(f instanceof C2)return qo("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new a0(c,i,l)}catch(f){return qo(f instanceof bc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let i=0;return s.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&eg(d.target)){const f=new Ie(d.target.path);this.It(f).has(c)||this.Et(c,f)||this.et(c,f,yn.newNoDocument(f,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=We();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const i=new uf(e,t,this.Ye,this.je,s);return this.je=Kr(),this.Je=zd(),this.He=zd(),this.Ye=new kt(Ge),i}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new qb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Wt(Ge),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Wt(Ge),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function zd(){return new kt(Ie.comparator)}function Gb(){return new kt(Ie.comparator)}const MP={asc:"ASCENDING",desc:"DESCENDING"},VP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},LP={and:"AND",or:"OR"};class OP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ng(n,e){return n.useProto3Json||ef(e)?e:{value:e}}function Dh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function oN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function FP(n,e){return Dh(n,e.toTimestamp())}function hr(n){return tt(!!n,49232),Fe.fromTimestamp((function(t){const s=zi(t);return new at(s.seconds,s.nanos)})(n))}function l0(n,e){return sg(n,e).canonicalString()}function sg(n,e){const t=(function(i){return new ot(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function aN(n){const e=ot.fromString(n);return tt(hN(e),10190,{key:e.toString()}),e}function rg(n,e){return l0(n.databaseId,e.path)}function fm(n,e){const t=aN(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(cN(t))}function lN(n,e){return l0(n.databaseId,e)}function UP(n){const e=aN(n);return e.length===4?ot.emptyPath():cN(e)}function ig(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cN(n){return tt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Wb(n,e,t){return{name:rg(n,e),fields:t.value.mapValue.fields}}function zP(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ve(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],l=(function(m,g){return m.useProto3Json?(tt(g===void 0||typeof g=="string",58123),Zt.fromBase64String(g||"")):(tt(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Zt.fromUint8Array(g||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(m){const g=m.code===void 0?oe.UNKNOWN:sN(m.code);return new ye(g,m.message||"")})(c);t=new iN(s,i,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const i=fm(n,s.document.name),l=hr(s.document.updateTime),c=s.document.createTime?hr(s.document.createTime):Fe.min(),d=new Vn({mapValue:{fields:s.document.fields}}),f=yn.newFoundDocument(i,l,c,d),m=s.targetIds||[],g=s.removedTargetIds||[];t=new dh(m,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const i=fm(n,s.document),l=s.readTime?hr(s.readTime):Fe.min(),c=yn.newNoDocument(i,l),d=s.removedTargetIds||[];t=new dh([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const i=fm(n,s.document),l=s.removedTargetIds||[];t=new dh([],l,i,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:i=0,unchangedNames:l}=s,c=new IP(i,l),d=s.targetId;t=new rN(d,c)}}return t}function BP(n,e){let t;if(e instanceof uu)t={update:Wb(n,e.key,e.value)};else if(e instanceof cf)t={delete:rg(n,e.key)};else if(e instanceof Ji)t={update:Wb(n,e.key,e.data),updateMask:XP(e.fieldMask)};else{if(!(e instanceof TP))return Ve(16599,{Vt:e.type});t={verify:rg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const d=c.transform;if(d instanceof qc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof sl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof rl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ve(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(i,l){return l.updateTime!==void 0?{updateTime:FP(i,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ve(27497)})(n,e.precondition)),t}function $P(n,e){return n&&n.length>0?(tt(e!==void 0,14353),n.map((t=>(function(i,l){let c=i.updateTime?hr(i.updateTime):hr(l);return c.isEqual(Fe.min())&&(c=hr(l)),new EP(c,i.transformResults||[])})(t,e)))):[]}function qP(n,e){return{documents:[lN(n,e.path)]}}function GP(n,e){const t={structuredQuery:{}},s=e.path;let i;e.collectionGroup!==null?(i=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=lN(n,i);const l=(function(m){if(m.length!==0)return dN(Ds.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((g=>(function(v){return{field:La(v.field),direction:KP(v.dir)}})(g)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=ng(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function WP(n){let e=UP(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let i=null;if(s>0){tt(s===1,65062);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let l=[];t.where&&(l=(function(y){const v=uN(y);return v instanceof Ds&&F2(v)?v.getFilters():[v]})(t.where));let c=[];t.orderBy&&(c=(function(y){return y.map((v=>(function(k){return new $c(Oa(k.field),(function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(v)))})(t.orderBy));let d=null;t.limit&&(d=(function(y){let v;return v=typeof y=="object"?y.value:y,ef(v)?null:v})(t.limit));let f=null;t.startAt&&(f=(function(y){const v=!!y.before,_=y.values||[];return new Ph(_,v)})(t.startAt));let m=null;return t.endAt&&(m=(function(y){const v=!y.before,_=y.values||[];return new Ph(_,v)})(t.endAt)),hP(e,i,c,l,d,"F",f,m)}function HP(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Oa(t.unaryFilter.field);return Ut.create(s,"==",{doubleValue:NaN});case"IS_NULL":const i=Oa(t.unaryFilter.field);return Ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Oa(t.unaryFilter.field);return Ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Oa(t.unaryFilter.field);return Ut.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ut.create(Oa(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Ds.create(t.compositeFilter.filters.map((s=>uN(s))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(t.compositeFilter.op))})(n):Ve(30097,{filter:n})}function KP(n){return MP[n]}function QP(n){return VP[n]}function YP(n){return LP[n]}function La(n){return{fieldPath:n.canonicalString()}}function Oa(n){return Jt.fromServerFormat(n.fieldPath)}function dN(n){return n instanceof Ut?(function(t){if(t.op==="=="){if(Rb(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NAN"}};if(Pb(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Rb(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NAN"}};if(Pb(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(t.field),op:QP(t.op),value:t.value}}})(n):n instanceof Ds?(function(t){const s=t.getFilters().map((i=>dN(i)));return s.length===1?s[0]:{compositeFilter:{op:YP(t.op),filters:s}}})(n):Ve(54877,{filter:n})}function XP(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,t,s,i,l=Fe.min(),c=Fe.min(),d=Zt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=i,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Pi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.yt=e}}function ZP(n){const e=WP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Rh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.Cn=new tR}addToCollectionParentIndex(e,t){return this.Cn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Ui.min())}updateCollectionGroup(e,t,s){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class tR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t]||new Wt(ot.comparator),l=!i.has(s);return this.index[t]=i.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),i=this.index[t];return i&&i.has(s)}getEntries(e){return(this.index[e]||new Wt(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fN=41943040;class Mn{static withCacheSize(e){return new Mn(e,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mn.DEFAULT_COLLECTION_PERCENTILE=10,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mn.DEFAULT=new Mn(fN,Mn.DEFAULT_COLLECTION_PERCENTILE,Mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mn.DISABLED=new Mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new il(0)}static cr(){return new il(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="LruGarbageCollector",nR=1048576;function Qb([n,e],[t,s]){const i=Ge(n,t);return i===0?Ge(e,s):i}class sR{constructor(e){this.Ir=e,this.buffer=new Wt(Qb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qb(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){we(Kb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ml(t)?we(Kb,"Ignoring IndexedDB error during garbage collection: ",t):await pl(t)}await this.Vr(3e5)}))}}class iR{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ce.resolve(Zh.ce);const s=new sR(t);return this.mr.forEachTarget(e,(i=>s.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>s.Ar(i))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(Hb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,i,l,c,d,f,m;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),i=this.params.maximumSequenceNumbersToCollect):i=y,c=Date.now(),this.nthSequenceNumber(e,i)))).next((y=>(s=y,d=Date.now(),this.removeTargets(e,s,t)))).next((y=>(l=y,f=Date.now(),this.removeOrphanedDocuments(e,s)))).next((y=>(m=Date.now(),Ma()<=qe.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-g}ms
	Determined least recently used ${i} in `+(d-c)+`ms
	Removed ${l} targets in `+(f-d)+`ms
	Removed ${y} documents in `+(m-f)+`ms
Total Duration: ${m-g}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:l,documentsRemoved:y}))))}}function oR(n,e){return new iR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.changes=new Ko((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ce.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,t,s,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=i}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(s=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(s!==null&&jc(s.mutation,i,Yn.empty(),at.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,We()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=We()){const i=Do();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,s).next((l=>{let c=vc();return l.forEach(((d,f)=>{c=c.insert(d,f.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Do();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,We())))}populateOverlays(e,t,s){const i=[];return s.forEach((l=>{t.has(l)||i.push(l)})),this.documentOverlayCache.getOverlays(e,i).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,s,i){let l=Kr();const c=Tc(),d=(function(){return Tc()})();return t.forEach(((f,m)=>{const g=s.get(m.key);i.has(m.key)&&(g===void 0||g.mutation instanceof Ji)?l=l.insert(m.key,m):g!==void 0?(c.set(m.key,g.mutation.getFieldMask()),jc(g.mutation,m,g.mutation.getFieldMask(),at.now())):c.set(m.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((f=>(f.forEach(((m,g)=>c.set(m,g))),t.forEach(((m,g)=>d.set(m,new lR(g,c.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Tc();let i=new kt(((c,d)=>c-d)),l=We();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let g=s.get(f)||Yn.empty();g=d.applyToLocalView(m,g),s.set(f,g);const y=(i.get(d.batchId)||We()).add(f);i=i.insert(d.batchId,y)}))})).next((()=>{const c=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,g=f.value,y=K2();g.forEach((v=>{if(!l.has(v)){const _=tN(t.get(v),s.get(v));_!==null&&y.set(v,_),l=l.add(v)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,y))}return ce.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,i){return(function(c){return Ie.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,i):this.getDocumentsMatchingCollectionQuery(e,t,s,i)}getNextDocuments(e,t,s,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,i).next((l=>{const c=i-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,i-l.size):ce.resolve(Do());let d=Uc,f=l;return c.next((m=>ce.forEach(m,((g,y)=>(d<y.largestBatchId&&(d=y.largestBatchId),l.get(g)?ce.resolve():this.remoteDocumentCache.getEntry(e,g).next((v=>{f=f.insert(g,v)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,f,m,We()))).next((g=>({batchId:d,changes:H2(g)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next((s=>{let i=vc();return s.isFoundDocument()&&(i=i.insert(s.key,s)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,i){const l=t.collectionGroup;let c=vc();return this.indexManager.getCollectionParents(e,l).next((d=>ce.forEach(d,(f=>{const m=(function(y,v){return new gl(v,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,f.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,i).next((g=>{g.forEach(((y,v)=>{c=c.insert(y,v)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,i){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,i)))).next((c=>{l.forEach(((f,m)=>{const g=m.getKey();c.get(g)===null&&(c=c.insert(g,yn.newInvalidDocument(g)))}));let d=vc();return c.forEach(((f,m)=>{const g=l.get(f);g!==void 0&&jc(g.mutation,m,Yn.empty(),at.now()),rf(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:hr(i.createTime)}})(t)),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:ZP(i.bundledQuery),readTime:hr(i.readTime)}})(t)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.overlays=new kt(Ie.comparator),this.qr=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Do();return ce.forEach(t,(i=>this.getOverlay(e,i).next((l=>{l!==null&&s.set(i,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((i,l)=>{this.St(e,t,l)})),ce.resolve()}removeOverlaysForBatchId(e,t,s){const i=this.qr.get(s);return i!==void 0&&(i.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),ce.resolve()}getOverlaysForCollection(e,t,s){const i=Do(),l=t.length+1,c=new Ie(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&f.largestBatchId>s&&i.set(f.getKey(),f)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,s,i){let l=new kt(((m,g)=>m-g));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let g=l.get(m.largestBatchId);g===null&&(g=Do(),l=l.insert(m.largestBatchId,g)),g.set(m.getKey(),m)}}const d=Do(),f=l.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,g)=>d.set(m,g))),!(d.size()>=i)););return ce.resolve(d)}St(e,t,s){const i=this.overlays.get(s.key);if(i!==null){const c=this.qr.get(i.largestBatchId).delete(s.key);this.qr.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new CP(t,s));let l=this.qr.get(t);l===void 0&&(l=We(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(){this.Qr=new Wt(Xt.$r),this.Ur=new Wt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Xt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Xt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ie(new ot([])),s=new Xt(t,e),i=new Xt(t,e+1),l=[];return this.Ur.forEachInRange([s,i],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ie(new ot([])),s=new Xt(t,e),i=new Xt(t,e+1);let l=We();return this.Ur.forEachInRange([s,i],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Xt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Xt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ie.comparator(e.key,t.key)||Ge(e.Yr,t.Yr)}static Kr(e,t){return Ge(e.Yr,t.Yr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Wt(Xt.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,i){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new jP(l,t,s,i);this.mutationQueue.push(c);for(const d of i)this.Zr=this.Zr.add(new Xt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ce.resolve(c)}lookupMutationBatch(e,t){return ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,i=this.ei(s),l=i<0?0:i;return ce.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?e0:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Xt(t,0),i=new Xt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,i],(c=>{const d=this.Xr(c.Yr);l.push(d)})),ce.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Wt(Ge);return t.forEach((i=>{const l=new Xt(i,0),c=new Xt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{s=s.add(d.Yr)}))})),ce.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,i=s.length+1;let l=s;Ie.isDocumentKey(l)||(l=l.child(""));const c=new Xt(new Ie(l),0);let d=new Wt(Ge);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!s.isPrefixOf(m)&&(m.length===i&&(d=d.add(f.Yr)),!0)}),c),ce.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const i=this.Xr(s);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){tt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ce.forEach(t.mutations,(i=>{const l=new Xt(i.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Xt(t,0),i=this.Zr.firstAfterOrEqual(s);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e){this.ri=e,this.docs=(function(){return new kt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,i=this.docs.get(s),l=i?i.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ce.resolve(s?s.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let s=Kr();return t.forEach((i=>{const l=this.docs.get(i);s=s.insert(i,l?l.document.mutableCopy():yn.newInvalidDocument(i))})),ce.resolve(s)}getDocumentsMatchingQuery(e,t,s,i){let l=Kr();const c=t.path,d=new Ie(c.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:g}}=f.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||qA($A(g),s)<=0||(i.has(g.key)||rf(t,g))&&(l=l.insert(g.key,g.mutableCopy()))}return ce.resolve(l)}getAllFromCollectionGroup(e,t,s,i){Ve(9500)}ii(e,t){return ce.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new mR(this)}getSize(e){return ce.resolve(this.size)}}class mR extends aR{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(s)})),ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.persistence=e,this.si=new Ko((t=>s0(t)),r0),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.oi=0,this._i=new c0,this.targetCount=0,this.ai=il.ur()}forEachTarget(e,t){return this.si.forEach(((s,i)=>t(i))),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ce.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new il(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Pr(t),ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,s){let i=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),ce.waitFor(l).next((()=>i))}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ce.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ce.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const i=this.persistence.referenceDelegate,l=[];return i&&t.forEach((c=>{l.push(i.markPotentiallyOrphaned(e,c))})),ce.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ce.resolve(s)}containsKey(e,t){return ce.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zh(0),this.li=!1,this.li=!0,this.hi=new hR,this.referenceDelegate=e(this),this.Pi=new gR(this),this.indexManager=new eR,this.remoteDocumentCache=(function(i){return new pR(i)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new JP(t),this.Ii=new uR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new fR(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){we("MemoryPersistence","Starting transaction:",e);const i=new xR(this.ci.next());return this.referenceDelegate.Ei(),s(i).next((l=>this.referenceDelegate.di(i).next((()=>l)))).toPromise().then((l=>(i.raiseOnCommittedEvent(),l)))}Ai(e,t){return ce.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class xR extends WA{constructor(e){super(),this.currentSequenceNumber=e}}class u0{constructor(e){this.persistence=e,this.Ri=new c0,this.Vi=null}static mi(e){return new u0(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ce.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,(s=>{const i=Ie.fromPath(s);return this.gi(e,i).next((l=>{l||t.removeEntry(i,Fe.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ce.or([()=>ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Mh{constructor(e,t){this.persistence=e,this.pi=new Ko((s=>QA(s.path)),((s,i)=>s.isEqual(i))),this.garbageCollector=oR(this,t)}static mi(e,t){return new Mh(e,t)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((i=>s+i))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ce.forEach(this.pi,((s,i)=>this.br(e,s,i).next((l=>l?ce.resolve():t(i)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const i=this.persistence.getRemoteDocumentCache(),l=i.newChangeBuffer();return i.ii(e,(c=>this.br(e,c,t).next((d=>{d||(s++,l.removeEntry(c,Fe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ce.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=lh(e.data.value)),t}br(e,t,s){return ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ce.resolve(i!==void 0&&i>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,t,s,i){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=i}static As(e,t){let s=We(),i=We();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}return new d0(e,t.fromCache,s,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return YT()?8:HA(Nn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,i){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,i,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new yR;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,s,i){return s.documentReadCount<this.fs?(Ma()<=qe.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Va(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(Ma()<=qe.DEBUG&&we("QueryEngine","Query:",Va(t),"scans",s.documentReadCount,"local documents and returns",i,"documents as results."),s.documentReadCount>this.gs*i?(Ma()<=qe.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Va(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(t))):ce.resolve())}ys(e,t){if(Lb(t))return ce.resolve(null);let s=dr(t);return this.indexManager.getIndexType(e,s).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Rh(t,null,"F"),s=dr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=We(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,s).next((f=>{const m=this.Ds(t,d);return this.Cs(t,m,c,f.readTime)?this.ys(e,Rh(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,s,i){return Lb(t)||i.isEqual(Fe.min())?ce.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,i)?ce.resolve(null):(Ma()<=qe.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Va(t)),this.vs(e,c,t,BA(i,Uc)).next((d=>d)))}))}Ds(e,t){let s=new Wt(G2(e));return t.forEach(((i,l)=>{rf(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,i){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(i)>0)}Ss(e,t,s){return Ma()<=qe.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Va(t)),this.ps.getDocumentsMatchingQuery(e,t,Ui.min(),s)}vs(e,t,s,i){return this.ps.getDocumentsMatchingQuery(e,s,i).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="LocalStore",bR=3e8;class wR{constructor(e,t,s,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new kt(Ge),this.xs=new Ko((l=>s0(l)),r0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function _R(n,e,t,s){return new wR(n,e,t,s)}async function mN(n,e){const t=ze(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let i;return t.mutationQueue.getAllMutationBatches(s).next((l=>(i=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],d=[];let f=We();for(const m of i){c.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}for(const m of l){d.push(m.batchId);for(const g of m.mutations)f=f.add(g.key)}return t.localDocuments.getDocuments(s,f).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:d})))}))}))}function NR(n,e){const t=ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const i=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,g){const y=m.batch,v=y.keys();let _=ce.resolve();return v.forEach((k=>{_=_.next((()=>g.getEntry(f,k))).next((E=>{const T=m.docVersions.get(k);tt(T!==null,48541),E.version.compareTo(T)<0&&(y.applyToRemoteDocument(E,m),E.isValidDocument()&&(E.setReadTime(m.commitVersion),g.addEntry(E)))}))})),_.next((()=>d.mutationQueue.removeMutationBatch(f,y)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let f=We();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(s,i)))}))}function gN(n){const e=ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function ER(n,e){const t=ze(n),s=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((g,y)=>{const v=i.get(y);if(!v)return;d.push(t.Pi.removeMatchingKeys(l,g.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(l,g.addedDocuments,y))));let _=v.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(y)!==null?_=_.withResumeToken(Zt.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):g.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(g.resumeToken,s)),i=i.insert(y,_),(function(E,T,M){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=bR?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(v,_,g)&&d.push(t.Pi.updateTargetData(l,_))}));let f=Kr(),m=We();if(e.documentUpdates.forEach((g=>{e.resolvedLimboDocuments.has(g)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,g))})),d.push(kR(l,c,e.documentUpdates).next((g=>{f=g.ks,m=g.qs}))),!s.isEqual(Fe.min())){const g=t.Pi.getLastRemoteSnapshotVersion(l).next((y=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(g)}return ce.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,f,m))).next((()=>f))})).then((l=>(t.Ms=i,l)))}function kR(n,e,t){let s=We(),i=We();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=Kr();return t.forEach(((d,f)=>{const m=l.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Fe.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):we(h0,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{ks:c,qs:i}}))}function SR(n,e){const t=ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=e0),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function TR(n,e){const t=ze(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let i;return t.Pi.getTargetData(s,e).next((l=>l?(i=l,ce.resolve(i)):t.Pi.allocateTargetId(s).next((c=>(i=new Pi(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,i).next((()=>i)))))))})).then((s=>{const i=t.Ms.get(s.targetId);return(i===null||s.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function og(n,e,t){const s=ze(n),i=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!ml(c))throw c;we(h0,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(i.target)}function Yb(n,e,t){const s=ze(n);let i=Fe.min(),l=We();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(f,m,g){const y=ze(f),v=y.xs.get(g);return v!==void 0?ce.resolve(y.Ms.get(v)):y.Pi.getTargetData(m,g)})(s,c,dr(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((f=>{l=f}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?i:Fe.min(),t?l:We()))).next((d=>(jR(s,pP(e),d),{documents:d,Qs:l})))))}function jR(n,e,t){let s=n.Os.get(e)||Fe.min();t.forEach(((i,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class Xb{constructor(){this.activeTargetIds=bP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CR{constructor(){this.Mo=new Xb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xb,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="ConnectivityMonitor";class Zb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){we(Jb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){we(Jb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bd=null;function ag(){return Bd===null?Bd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bd++,"0x"+Bd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="RestConnection",AR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${i}`,this.Wo=this.databaseId.database===Ih?`project_id=${s}`:`project_id=${s}&database_id=${i}`}Go(e,t,s,i,l){const c=ag(),d=this.zo(e,t.toUriEncodedString());we(pm,`Sending RPC '${e}' ${c}:`,d,s);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,l);const{host:m}=new URL(d),g=ul(m);return this.Jo(e,d,f,s,g).then((y=>(we(pm,`Received RPC '${e}' ${c}: `,y),y)),(y=>{throw qo(pm,`RPC '${e}' ${c} failed with error: `,y,"url: ",d,"request:",s),y}))}Ho(e,t,s,i,l,c){return this.Go(e,t,s,i,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fl})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,l)=>e[l]=i)),s&&s.headers.forEach(((i,l)=>e[l]=i))}zo(e,t){const s=AR[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection";class DR extends PR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,i,l){const c=ag();return new Promise(((d,f)=>{const m=new g2;m.setWithCredentials(!0),m.listenOnce(x2.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case ah.NO_ERROR:const y=m.getResponseJson();we(gn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(y)),d(y);break;case ah.TIMEOUT:we(gn,`RPC '${e}' ${c} timed out`),f(new ye(oe.DEADLINE_EXCEEDED,"Request time out"));break;case ah.HTTP_ERROR:const v=m.getStatus();if(we(gn,`RPC '${e}' ${c} failed with status:`,v,"response text:",m.getResponseText()),v>0){let _=m.getResponseJson();Array.isArray(_)&&(_=_[0]);const k=_==null?void 0:_.error;if(k&&k.status&&k.message){const E=(function(M){const O=M.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(O)>=0?O:oe.UNKNOWN})(k.status);f(new ye(E,k.message))}else f(new ye(oe.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new ye(oe.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{we(gn,`RPC '${e}' ${c} completed.`)}}));const g=JSON.stringify(i);we(gn,`RPC '${e}' ${c} sending request:`,i),m.send(t,"POST",g,s,15)}))}T_(e,t,s){const i=ag(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=b2(),d=v2(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const g=l.join("");we(gn,`Creating RPC '${e}' stream ${i}: ${g}`,f);const y=c.createWebChannel(g,f);this.I_(y);let v=!1,_=!1;const k=new RR({Yo:T=>{_?we(gn,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(v||(we(gn,`Opening RPC '${e}' stream ${i} transport.`),y.open(),v=!0),we(gn,`RPC '${e}' stream ${i} sending:`,T),y.send(T))},Zo:()=>y.close()}),E=(T,M,O)=>{T.listen(M,(q=>{try{O(q)}catch($){setTimeout((()=>{throw $}),0)}}))};return E(y,yc.EventType.OPEN,(()=>{_||(we(gn,`RPC '${e}' stream ${i} transport opened.`),k.o_())})),E(y,yc.EventType.CLOSE,(()=>{_||(_=!0,we(gn,`RPC '${e}' stream ${i} transport closed`),k.a_(),this.E_(y))})),E(y,yc.EventType.ERROR,(T=>{_||(_=!0,qo(gn,`RPC '${e}' stream ${i} transport errored. Name:`,T.name,"Message:",T.message),k.a_(new ye(oe.UNAVAILABLE,"The operation could not be completed")))})),E(y,yc.EventType.MESSAGE,(T=>{var M;if(!_){const O=T.data[0];tt(!!O,16349);const q=O,$=(q==null?void 0:q.error)||((M=q[0])==null?void 0:M.error);if($){we(gn,`RPC '${e}' stream ${i} received error:`,$);const Q=$.status;let K=(function(V){const I=Ot[V];if(I!==void 0)return sN(I)})(Q),P=$.message;K===void 0&&(K=oe.INTERNAL,P="Unknown error status: "+Q+" with message "+$.message),_=!0,k.a_(new ye(K,P)),y.close()}else we(gn,`RPC '${e}' stream ${i} received:`,O),k.u_(O)}})),E(d,y2.STAT_EVENT,(T=>{T.stat===Qm.PROXY?we(gn,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Qm.NOPROXY&&we(gn,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(n){return new OP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t,s=1e3,i=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=i,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-s);i>0&&we("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="PersistentStream";class yN{constructor(e,t,s,i,l,c,d,f){this.Mi=e,this.S_=s,this.b_=i,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(Hr(t.toString()),Hr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===oe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,i])=>{this.D_===t&&this.G_(s,i)}),(s=>{e((()=>{const i=new ye(oe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(i)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{s((()=>this.z_(i)))})),this.stream.onMessage((i=>{s((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(ew,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(we(ew,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class MR extends yN{constructor(e,t,s,i,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,i,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=zP(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Fe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Fe.min():c.readTime?hr(c.readTime):Fe.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=ig(this.serializer),t.addTarget=(function(l,c){let d;const f=c.target;if(d=eg(f)?{documents:qP(l,f)}:{query:GP(l,f).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=oN(l,c.resumeToken);const m=ng(l,c.expectedCount);m!==null&&(d.expectedCount=m)}else if(c.snapshotVersion.compareTo(Fe.min())>0){d.readTime=Dh(l,c.snapshotVersion.toTimestamp());const m=ng(l,c.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const s=HP(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=ig(this.serializer),t.removeTarget=e,this.q_(t)}}class VR extends yN{constructor(e,t,s,i,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,i,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return tt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){tt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=$P(e.writeResults,e.commitTime),s=hr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=ig(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>BP(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{}class OR extends LR{constructor(e,t,s,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,sg(t,s),i,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(oe.UNKNOWN,l.toString())}))}Ho(e,t,s,i,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,sg(t,s),i,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(oe.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class FR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Hr(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go="RemoteStore";class UR{constructor(e,t,s,i,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Qo(this)&&(we(Go,"Restarting streams for network reachability change."),await(async function(f){const m=ze(f);m.Ea.add(4),await hu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await hf(m)})(this))}))})),this.Ra=new FR(s,i)}}async function hf(n){if(Qo(n))for(const e of n.da)await e(!0)}async function hu(n){for(const e of n.da)await e(!1)}function vN(n,e){const t=ze(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),g0(t)?m0(t):xl(t).O_()&&p0(t,e))}function f0(n,e){const t=ze(n),s=xl(t);t.Ia.delete(e),s.O_()&&bN(t,e),t.Ia.size===0&&(s.O_()?s.L_():Qo(t)&&t.Ra.set("Unknown"))}function p0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xl(n).Y_(e)}function bN(n,e){n.Va.Ue(e),xl(n).Z_(e)}function m0(n){n.Va=new DP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),xl(n).start(),n.Ra.ua()}function g0(n){return Qo(n)&&!xl(n).x_()&&n.Ia.size>0}function Qo(n){return ze(n).Ea.size===0}function wN(n){n.Va=void 0}async function zR(n){n.Ra.set("Online")}async function BR(n){n.Ia.forEach(((e,t)=>{p0(n,e)}))}async function $R(n,e){wN(n),g0(n)?(n.Ra.ha(e),m0(n)):n.Ra.set("Unknown")}async function qR(n,e,t){if(n.Ra.set("Online"),e instanceof iN&&e.state===2&&e.cause)try{await(async function(i,l){const c=l.cause;for(const d of l.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,c),i.Ia.delete(d),i.Va.removeTarget(d))})(n,e)}catch(s){we(Go,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Vh(n,s)}else if(e instanceof dh?n.Va.Ze(e):e instanceof rN?n.Va.st(e):n.Va.tt(e),!t.isEqual(Fe.min()))try{const s=await gN(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const g=l.Ia.get(m);g&&l.Ia.set(m,g.withResumeToken(f.resumeToken,c))}})),d.targetMismatches.forEach(((f,m)=>{const g=l.Ia.get(f);if(!g)return;l.Ia.set(f,g.withResumeToken(Zt.EMPTY_BYTE_STRING,g.snapshotVersion)),bN(l,f);const y=new Pi(g.target,f,m,g.sequenceNumber);p0(l,y)})),l.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(s){we(Go,"Failed to raise snapshot:",s),await Vh(n,s)}}async function Vh(n,e,t){if(!ml(e))throw e;n.Ea.add(1),await hu(n),n.Ra.set("Offline"),t||(t=()=>gN(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(Go,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await hf(n)}))}function _N(n,e){return e().catch((t=>Vh(n,t,e)))}async function ff(n){const e=ze(n),t=qi(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:e0;for(;GR(e);)try{const i=await SR(e.localStore,s);if(i===null){e.Ta.length===0&&t.L_();break}s=i.batchId,WR(e,i)}catch(i){await Vh(e,i)}NN(e)&&EN(e)}function GR(n){return Qo(n)&&n.Ta.length<10}function WR(n,e){n.Ta.push(e);const t=qi(n);t.O_()&&t.X_&&t.ea(e.mutations)}function NN(n){return Qo(n)&&!qi(n).x_()&&n.Ta.length>0}function EN(n){qi(n).start()}async function HR(n){qi(n).ra()}async function KR(n){const e=qi(n);for(const t of n.Ta)e.ea(t.mutations)}async function QR(n,e,t){const s=n.Ta.shift(),i=o0.from(s,e,t);await _N(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await ff(n)}async function YR(n,e){e&&qi(n).X_&&await(async function(s,i){if((function(c){return AP(c)&&c!==oe.ABORTED})(i.code)){const l=s.Ta.shift();qi(s).B_(),await _N(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,i))),await ff(s)}})(n,e),NN(n)&&EN(n)}async function tw(n,e){const t=ze(n);t.asyncQueue.verifyOperationInProgress(),we(Go,"RemoteStore received new credentials");const s=Qo(t);t.Ea.add(3),await hu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await hf(t)}async function XR(n,e){const t=ze(n);e?(t.Ea.delete(2),await hf(t)):e||(t.Ea.add(2),await hu(t),t.Ra.set("Unknown"))}function xl(n){return n.ma||(n.ma=(function(t,s,i){const l=ze(t);return l.sa(),new MR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)})(n.datastore,n.asyncQueue,{Xo:zR.bind(null,n),t_:BR.bind(null,n),r_:$R.bind(null,n),H_:qR.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),g0(n)?m0(n):n.Ra.set("Unknown")):(await n.ma.stop(),wN(n))}))),n.ma}function qi(n){return n.fa||(n.fa=(function(t,s,i){const l=ze(t);return l.sa(),new VR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:HR.bind(null,n),r_:YR.bind(null,n),ta:KR.bind(null,n),na:QR.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await ff(n)):(await n.fa.stop(),n.Ta.length>0&&(we(Go,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(e,t,s,i,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=i,this.removalCallback=l,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,i,l){const c=Date.now()+s,d=new x0(e,t,c,i,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function y0(n,e){if(Hr("AsyncQueue",`${e}: ${n}`),ml(n))return new ye(oe.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{static emptySet(e){return new Qa(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ie.comparator(t.key,s.key):(t,s)=>Ie.comparator(t.key,s.key),this.keyedMap=vc(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,l=s.getNext().key;if(!i.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Qa;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(){this.ga=new kt(Ie.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class ol{constructor(e,t,s,i,l,c,d,f,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=i,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,i,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new ol(e,t,Qa.emptySet(t),c,s,i,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==s[i].type||!t[i].doc.isEqual(s[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ZR{constructor(){this.queries=sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const i=ze(t),l=i.queries;i.queries=sw(),l.forEach(((c,d)=>{for(const f of d.Sa)f.onError(s)}))})(this,new ye(oe.ABORTED,"Firestore shutting down"))}}function sw(){return new Ko((n=>q2(n)),sf)}async function v0(n,e){const t=ze(n);let s=3;const i=e.query;let l=t.queries.get(i);l?!l.ba()&&e.Da()&&(s=2):(l=new JR,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(i,!0);break;case 1:l.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(c){const d=y0(c,`Initialization of query '${Va(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&w0(t)}async function b0(n,e){const t=ze(n),s=e.query;let i=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?i=e.Da()?0:1:!l.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function e4(n,e){const t=ze(n);let s=!1;for(const i of e){const l=i.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(i)&&(s=!0);c.wa=i}}s&&w0(t)}function t4(n,e,t){const s=ze(n),i=s.queries.get(e);if(i)for(const l of i.Sa)l.onError(t);s.queries.delete(e)}function w0(n){n.Ca.forEach((e=>{e.next()}))}var lg,rw;(rw=lg||(lg={})).Ma="default",rw.Cache="cache";class _0{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const i of e.docChanges)i.type!==3&&s.push(i);e=new ol(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=ol.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.key=e}}class SN{constructor(e){this.key=e}}class n4{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=We(),this.mutatedKeys=We(),this.eu=G2(e),this.tu=new Qa(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new nw,i=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((g,y)=>{const v=i.get(g),_=rf(this.query,y)?y:null,k=!!v&&this.mutatedKeys.has(v.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let T=!1;v&&_?v.data.isEqual(_.data)?k!==E&&(s.track({type:3,doc:_}),T=!0):this.su(v,_)||(s.track({type:2,doc:_}),T=!0,(f&&this.eu(_,f)>0||m&&this.eu(_,m)<0)&&(d=!0)):!v&&_?(s.track({type:0,doc:_}),T=!0):v&&!_&&(s.track({type:1,doc:v}),T=!0,(f||m)&&(d=!0)),T&&(_?(c=c.add(_),l=E?l.add(g):l.delete(g)):(c=c.delete(g),l=l.delete(g)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const g=this.query.limitType==="F"?c.last():c.first();c=c.delete(g.key),l=l.delete(g.key),s.track({type:1,doc:g})}return{tu:c,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,i){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((g,y)=>(function(_,k){const E=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:T})}};return E(_)-E(k)})(g.type,y.type)||this.eu(g.doc,y.doc))),this.ou(s),i=i??!1;const d=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,m=f!==this.Za;return this.Za=f,c.length!==0||m?{snapshot:new ol(this.query,e.tu,l,c,e.mutatedKeys,f===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=We(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new SN(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new kN(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=We();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return ol.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const N0="SyncEngine";class s4{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class r4{constructor(e){this.key=e,this.hu=!1}}class i4{constructor(e,t,s,i,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=i,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Ko((d=>q2(d)),sf),this.Iu=new Map,this.Eu=new Set,this.du=new kt(Ie.comparator),this.Au=new Map,this.Ru=new c0,this.Vu={},this.mu=new Map,this.fu=il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function o4(n,e,t=!0){const s=PN(n);let i;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),i=l.view.lu()):i=await TN(s,e,t,!0),i}async function a4(n,e){const t=PN(n);await TN(t,e,!0,!1)}async function TN(n,e,t,s){const i=await TR(n.localStore,dr(e)),l=i.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await l4(n,e,l,c==="current",i.resumeToken)),n.isPrimaryClient&&t&&vN(n.remoteStore,i),d}async function l4(n,e,t,s,i){n.pu=(y,v,_)=>(async function(E,T,M,O){let q=T.view.ru(M);q.Cs&&(q=await Yb(E.localStore,T.query,!1).then((({documents:P})=>T.view.ru(P,q))));const $=O&&O.targetChanges.get(T.targetId),Q=O&&O.targetMismatches.get(T.targetId)!=null,K=T.view.applyChanges(q,E.isPrimaryClient,$,Q);return ow(E,T.targetId,K.au),K.snapshot})(n,y,v,_);const l=await Yb(n.localStore,e,!0),c=new n4(e,l.Qs),d=c.ru(l.documents),f=du.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",i),m=c.applyChanges(d,n.isPrimaryClient,f);ow(n,t,m.au);const g=new s4(e,t,c);return n.Tu.set(e,g),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function c4(n,e,t){const s=ze(n),i=s.Tu.get(e),l=s.Iu.get(i.targetId);if(l.length>1)return s.Iu.set(i.targetId,l.filter((c=>!sf(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(i.targetId),s.sharedClientState.isActiveQueryTarget(i.targetId)||await og(s.localStore,i.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(i.targetId),t&&f0(s.remoteStore,i.targetId),cg(s,i.targetId)})).catch(pl)):(cg(s,i.targetId),await og(s.localStore,i.targetId,!0))}async function u4(n,e){const t=ze(n),s=t.Tu.get(e),i=t.Iu.get(s.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),f0(t.remoteStore,s.targetId))}async function d4(n,e,t){const s=y4(n);try{const i=await(function(c,d){const f=ze(c),m=at.now(),g=d.reduce(((_,k)=>_.add(k.key)),We());let y,v;return f.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let k=Kr(),E=We();return f.Ns.getEntries(_,g).next((T=>{k=T,k.forEach(((M,O)=>{O.isValidDocument()||(E=E.add(M))}))})).next((()=>f.localDocuments.getOverlayedDocuments(_,k))).next((T=>{y=T;const M=[];for(const O of d){const q=SP(O,y.get(O.key).overlayedDocument);q!=null&&M.push(new Ji(O.key,q,V2(q.value.mapValue),Tn.exists(!0)))}return f.mutationQueue.addMutationBatch(_,m,M,d)})).next((T=>{v=T;const M=T.applyToLocalDocumentSet(y,E);return f.documentOverlayCache.saveOverlays(_,T.batchId,M)}))})).then((()=>({batchId:v.batchId,changes:H2(y)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(i.batchId),(function(c,d,f){let m=c.Vu[c.currentUser.toKey()];m||(m=new kt(Ge)),m=m.insert(d,f),c.Vu[c.currentUser.toKey()]=m})(s,i.batchId,t),await fu(s,i.changes),await ff(s.remoteStore)}catch(i){const l=y0(i,"Failed to persist write");t.reject(l)}}async function jN(n,e){const t=ze(n);try{const s=await ER(t.localStore,e);e.targetChanges.forEach(((i,l)=>{const c=t.Au.get(l);c&&(tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?c.hu=!0:i.modifiedDocuments.size>0?tt(c.hu,14607):i.removedDocuments.size>0&&(tt(c.hu,42227),c.hu=!1))})),await fu(t,s,e)}catch(s){await pl(s)}}function iw(n,e,t){const s=ze(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const i=[];s.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(c,d){const f=ze(c);f.onlineState=d;let m=!1;f.queries.forEach(((g,y)=>{for(const v of y.Sa)v.va(d)&&(m=!0)})),m&&w0(f)})(s.eventManager,e),i.length&&s.Pu.H_(i),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function h4(n,e,t){const s=ze(n);s.sharedClientState.updateQueryState(e,"rejected",t);const i=s.Au.get(e),l=i&&i.key;if(l){let c=new kt(Ie.comparator);c=c.insert(l,yn.newNoDocument(l,Fe.min()));const d=We().add(l),f=new uf(Fe.min(),new Map,new kt(Ge),c,d);await jN(s,f),s.du=s.du.remove(l),s.Au.delete(e),E0(s)}else await og(s.localStore,e,!1).then((()=>cg(s,e,t))).catch(pl)}async function f4(n,e){const t=ze(n),s=e.batch.batchId;try{const i=await NR(t.localStore,e);IN(t,s,null),CN(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await fu(t,i)}catch(i){await pl(i)}}async function p4(n,e,t){const s=ze(n);try{const i=await(function(c,d){const f=ze(c);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let g;return f.mutationQueue.lookupMutationBatch(m,d).next((y=>(tt(y!==null,37113),g=y.keys(),f.mutationQueue.removeMutationBatch(m,y)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,g,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,g))).next((()=>f.localDocuments.getDocuments(m,g)))}))})(s.localStore,e);IN(s,e,t),CN(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await fu(s,i)}catch(i){await pl(i)}}function CN(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function IN(n,e,t){const s=ze(n);let i=s.Vu[s.currentUser.toKey()];if(i){const l=i.get(e);l&&(t?l.reject(t):l.resolve(),i=i.remove(e)),s.Vu[s.currentUser.toKey()]=i}}function cg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||AN(n,s)}))}function AN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(f0(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),E0(n))}function ow(n,e,t){for(const s of t)s instanceof kN?(n.Ru.addReference(s.key,e),m4(n,s)):s instanceof SN?(we(N0,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||AN(n,s.key)):Ve(19791,{wu:s})}function m4(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(we(N0,"New document in limbo: "+t),n.Eu.add(s),E0(n))}function E0(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ie(ot.fromString(e)),s=n.fu.next();n.Au.set(s,new r4(t)),n.du=n.du.insert(t,s),vN(n.remoteStore,new Pi(dr(nf(t.path)),s,"TargetPurposeLimboResolution",Zh.ce))}}async function fu(n,e,t){const s=ze(n),i=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,f)=>{c.push(s.pu(f,e,t).then((m=>{var g;if((m||t)&&s.isPrimaryClient){const y=m?!m.fromCache:(g=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:g.current;s.sharedClientState.updateQueryState(f.targetId,y?"current":"not-current")}if(m){i.push(m);const y=d0.As(f.targetId,m);l.push(y)}})))})),await Promise.all(c),s.Pu.H_(i),await(async function(f,m){const g=ze(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>ce.forEach(m,(v=>ce.forEach(v.Es,(_=>g.persistence.referenceDelegate.addReference(y,v.targetId,_))).next((()=>ce.forEach(v.ds,(_=>g.persistence.referenceDelegate.removeReference(y,v.targetId,_)))))))))}catch(y){if(!ml(y))throw y;we(h0,"Failed to update sequence numbers: "+y)}for(const y of m){const v=y.targetId;if(!y.fromCache){const _=g.Ms.get(v),k=_.snapshotVersion,E=_.withLastLimboFreeSnapshotVersion(k);g.Ms=g.Ms.insert(v,E)}}})(s.localStore,l))}async function g4(n,e){const t=ze(n);if(!t.currentUser.isEqual(e)){we(N0,"User change. New user:",e.toKey());const s=await mN(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((f=>{f.reject(new ye(oe.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await fu(t,s.Ls)}}function x4(n,e){const t=ze(n),s=t.Au.get(e);if(s&&s.hu)return We().add(s.key);{let i=We();const l=t.Iu.get(e);if(!l)return i;for(const c of l){const d=t.Tu.get(c);i=i.unionWith(d.view.nu)}return i}}function PN(n){const e=ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h4.bind(null,e),e.Pu.H_=e4.bind(null,e.eventManager),e.Pu.yu=t4.bind(null,e.eventManager),e}function y4(n){const e=ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p4.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _R(this.persistence,new vR,e.initialUser,this.serializer)}Cu(e){return new pN(u0.mi,this.serializer)}Du(e){return new CR}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class v4 extends Lh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){tt(this.persistence.referenceDelegate instanceof Mh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new rR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Mn.withCacheSize(this.cacheSizeBytes):Mn.DEFAULT;return new pN((s=>Mh.mi(s,t)),this.serializer)}}class ug{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>iw(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=g4.bind(null,this.syncEngine),await XR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZR})()}createDatastore(e){const t=df(e.databaseInfo.databaseId),s=(function(l){return new DR(l)})(e.databaseInfo);return(function(l,c,d,f){return new OR(l,c,d,f)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,i,l,c,d){return new UR(s,i,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>iw(this.syncEngine,t,0)),(function(){return Zb.v()?new Zb:new IR})())}createSyncEngine(e,t){return(function(i,l,c,d,f,m,g){const y=new i4(i,l,c,d,f,m);return g&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const l=ze(i);we(Go,"RemoteStore shutting down."),l.Ea.add(5),await hu(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ug.provider={build:()=>new ug};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Hr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gi="FirestoreClient";class b4{constructor(e,t,s,i,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=i,this.user=xn.UNAUTHENTICATED,this.clientId=Xh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{we(Gi,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(we(Gi,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=y0(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function gm(n,e){n.asyncQueue.verifyOperationInProgress(),we(Gi,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async i=>{s.isEqual(i)||(await mN(e.localStore,i),s=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function aw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await w4(n);we(Gi,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>tw(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,i)=>tw(e.remoteStore,i))),n._onlineComponents=e}async function w4(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(Gi,"Using user provided OfflineComponentProvider");try{await gm(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===oe.FAILED_PRECONDITION||i.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;qo("Error using user provided cache. Falling back to memory cache: "+t),await gm(n,new Lh)}}else we(Gi,"Using default OfflineComponentProvider"),await gm(n,new v4(void 0));return n._offlineComponents}async function RN(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(Gi,"Using user provided OnlineComponentProvider"),await aw(n,n._uninitializedComponentsProvider._online)):(we(Gi,"Using default OnlineComponentProvider"),await aw(n,new ug))),n._onlineComponents}function _4(n){return RN(n).then((e=>e.syncEngine))}async function Oh(n){const e=await RN(n),t=e.eventManager;return t.onListen=o4.bind(null,e.syncEngine),t.onUnlisten=c4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=a4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=u4.bind(null,e.syncEngine),t}function N4(n,e,t={}){const s=new Br;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,f,m){const g=new k0({next:v=>{g.Nu(),c.enqueueAndForget((()=>b0(l,y)));const _=v.docs.has(d);!_&&v.fromCache?m.reject(new ye(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&v.fromCache&&f&&f.source==="server"?m.reject(new ye(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(v)},error:v=>m.reject(v)}),y=new _0(nf(d.path),g,{includeMetadataChanges:!0,qa:!0});return v0(l,y)})(await Oh(n),n.asyncQueue,e,t,s))),s.promise}function E4(n,e,t={}){const s=new Br;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,f,m){const g=new k0({next:v=>{g.Nu(),c.enqueueAndForget((()=>b0(l,y))),v.fromCache&&f.source==="server"?m.reject(new ye(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(v)},error:v=>m.reject(v)}),y=new _0(d,g,{includeMetadataChanges:!0,qa:!0});return v0(l,y)})(await Oh(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DN(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="firestore.googleapis.com",cw=!0;class uw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=MN,this.ssl=cw}else this.host=e.host,this.ssl=e.ssl??cw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<nR)throw new ye(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DN(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(oe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,i){return s.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class pf{constructor(e,t,s,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new N2;switch(s.type){case"firstParty":return new MA(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=lw.get(t);s&&(we("ComponentProvider","Removing Datastore"),lw.delete(t),s.terminate())})(this),Promise.resolve()}}function VN(n,e,t,s={}){var m;n=_n(n,pf);const i=ul(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(j_(`https://${d}`),C_("Firestore",!0)),l.host!==MN&&l.host!==d&&qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...l,host:d,ssl:i,emulatorOptions:s};if(!qr(f,c)&&(n._setSettings(f),s.mockUserToken)){let g,y;if(typeof s.mockUserToken=="string")g=s.mockUserToken,y=xn.MOCK_USER;else{g=zT(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new ye(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new xn(v)}n._authCredentials=new PA(new _2(g,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new gr(this.firestore,e,this._query)}}class Et{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(cu(t,Et._jsonSchema))return new Et(e,s||null,new Ie(ot.fromString(t.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:zt("string",Et._jsonSchemaVersion),referencePath:zt("string")};class $r extends gr{constructor(e,t,s){super(e,t,nf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new Ie(e))}withConverter(e){return new $r(this.firestore,e,this._path)}}function je(n,e,...t){if(n=Mt(n),E2("collection","path",e),n instanceof pf){const s=ot.fromString(e,...t);return Nb(s),new $r(n,null,s)}{if(!(n instanceof Et||n instanceof $r))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ot.fromString(e,...t));return Nb(s),new $r(n.firestore,null,s)}}function Re(n,e,...t){if(n=Mt(n),arguments.length===1&&(e=Xh.newId()),E2("doc","path",e),n instanceof pf){const s=ot.fromString(e,...t);return _b(s),new Et(n,null,new Ie(s))}{if(!(n instanceof Et||n instanceof $r))throw new ye(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ot.fromString(e,...t));return _b(s),new Et(n.firestore,n instanceof $r?n.converter:null,new Ie(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="AsyncQueue";class hw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xN(this,"async_queue_retry"),this._c=()=>{const s=mm();s&&we(dw,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=mm();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=mm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Br;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ml(e))throw e;we(dw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Hr("INTERNAL UNHANDLED ERROR: ",fw(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=x0.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(i),i}uc(){this.nc&&Ve(47125,{Pc:fw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const i=t;for(const l of s)if(l in i&&typeof i[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Ms extends pf{constructor(e,t,s,i){super(e,t,s,i),this.type="firestore",this._queue=new hw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hw(e),this._firestoreClient=void 0,await e}}}function LN(n,e){const t=typeof n=="object"?n:R_(),s=typeof n=="string"?n:e||Ih,i=qg(t,"firestore").getImmediate({identifier:s});if(!i._initialized){const l=FT("firestore");l&&VN(i,...l)}return i}function yl(n){if(n._terminated)throw new ye(oe.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||k4(n),n._firestoreClient}function k4(n){var s,i,l;const e=n._freezeSettings(),t=(function(d,f,m,g){return new JA(d,f,m,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,DN(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new b4(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qn(Zt.fromBase64String(e))}catch(t){throw new ye(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(cu(e,Qn._jsonSchema))return Qn.fromBase64String(e.bytes)}}Qn._jsonSchemaVersion="firestore/bytes/1.0",Qn._jsonSchema={type:zt("string",Qn._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Cs._jsonSchemaVersion}}static fromJSON(e){if(cu(e,Cs._jsonSchema))return new Cs(e.latitude,e.longitude)}}Cs._jsonSchemaVersion="firestore/geoPoint/1.0",Cs._jsonSchema={type:zt("string",Cs._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,i){if(s.length!==i.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==i[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Is._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(cu(e,Is._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Is(e.vectorValues);throw new ye(oe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Is._jsonSchemaVersion="firestore/vectorValue/1.0",Is._jsonSchema={type:zt("string",Is._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=/^__.*__$/;class T4{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ji(e,this.data,this.fieldMask,t,this.fieldTransforms):new uu(e,this.data,t,this.fieldTransforms)}}class ON{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ji(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function FN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:n})}}class mf{constructor(e,t,s,i,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=i,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Fh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(FN(this.Ac)&&S4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class j4{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||df(e)}Cc(e,t,s,i=!1){return new mf({Ac:e,methodName:t,Dc:s,path:Jt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pu(n){const e=n._freezeSettings(),t=df(n._databaseId);return new j4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function S0(n,e,t,s,i,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,i);A0("Data must be an object, but it was:",c,s);const d=$N(s,c);let f,m;if(l.merge)f=new Yn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const g=[];for(const y of l.mergeFields){const v=dg(e,y,t);if(!c.contains(v))throw new ye(oe.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);GN(g,v)||g.push(v)}f=new Yn(g),m=c.fieldTransforms.filter((y=>f.covers(y.field)))}else f=null,m=c.fieldTransforms;return new T4(new Vn(d),f,m)}class gf extends Zi{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}function UN(n,e,t){return new mf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class T0 extends Zi{_toFieldTransform(e){return new af(e.path,new qc)}isEqual(e){return e instanceof T0}}class j0 extends Zi{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=UN(this,e,!0),s=this.vc.map((l=>Yo(l,t))),i=new sl(s);return new af(e.path,i)}isEqual(e){return e instanceof j0&&qr(this.vc,e.vc)}}class C0 extends Zi{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=UN(this,e,!0),s=this.vc.map((l=>Yo(l,t))),i=new rl(s);return new af(e.path,i)}isEqual(e){return e instanceof C0&&qr(this.vc,e.vc)}}class I0 extends Zi{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Gc(e.serializer,Y2(e.serializer,this.Fc));return new af(e.path,t)}isEqual(e){return e instanceof I0&&this.Fc===e.Fc}}function zN(n,e,t,s){const i=n.Cc(1,e,t);A0("Data must be an object, but it was:",i,s);const l=[],c=Vn.empty();Xi(s,((f,m)=>{const g=P0(e,f,t);m=Mt(m);const y=i.yc(g);if(m instanceof gf)l.push(g);else{const v=Yo(m,y);v!=null&&(l.push(g),c.set(g,v))}}));const d=new Yn(l);return new ON(c,d,i.fieldTransforms)}function BN(n,e,t,s,i,l){const c=n.Cc(1,e,t),d=[dg(e,s,t)],f=[i];if(l.length%2!=0)throw new ye(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<l.length;v+=2)d.push(dg(e,l[v])),f.push(l[v+1]);const m=[],g=Vn.empty();for(let v=d.length-1;v>=0;--v)if(!GN(m,d[v])){const _=d[v];let k=f[v];k=Mt(k);const E=c.yc(_);if(k instanceof gf)m.push(_);else{const T=Yo(k,E);T!=null&&(m.push(_),g.set(_,T))}}const y=new Yn(m);return new ON(g,y,c.fieldTransforms)}function C4(n,e,t,s=!1){return Yo(t,n.Cc(s?4:3,e))}function Yo(n,e){if(qN(n=Mt(n)))return A0("Unsupported field value:",e,n),$N(n,e);if(n instanceof Zi)return(function(s,i){if(!FN(i.Ac))throw i.Sc(`${s._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(i);l&&i.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,i){const l=[];let c=0;for(const d of s){let f=Yo(d,i.wc(c));f==null&&(f={nullValue:"NULL_VALUE"}),l.push(f),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,i){if((s=Mt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Y2(i.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=at.fromDate(s);return{timestampValue:Dh(i.serializer,l)}}if(s instanceof at){const l=new at(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Dh(i.serializer,l)}}if(s instanceof Cs)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Qn)return{bytesValue:oN(i.serializer,s._byteString)};if(s instanceof Et){const l=i.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw i.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:l0(s.firestore._databaseId||i.databaseId,s._key.path)}}if(s instanceof Is)return(function(c,d){return{mapValue:{fields:{[D2]:{stringValue:M2},[Ah]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return i0(d.serializer,m)}))}}}}}})(s,i);throw i.Sc(`Unsupported field value: ${Jh(s)}`)})(n,e)}function $N(n,e){const t={};return j2(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xi(n,((s,i)=>{const l=Yo(i,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function qN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof Cs||n instanceof Qn||n instanceof Et||n instanceof Zi||n instanceof Is)}function A0(n,e,t){if(!qN(t)||!S2(t)){const s=Jh(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function dg(n,e,t){if((e=Mt(e))instanceof vl)return e._internalPath;if(typeof e=="string")return P0(n,e);throw Fh("Field path arguments must be of type string or ",n,!1,void 0,t)}const I4=new RegExp("[~\\*/\\[\\]]");function P0(n,e,t){if(e.search(I4)>=0)throw Fh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vl(...e.split("."))._internalPath}catch{throw Fh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Fh(n,e,t,s,i){const l=s&&!s.isEmpty(),c=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(l||c)&&(f+=" (found",l&&(f+=` in field ${s}`),c&&(f+=` in document ${i}`),f+=")"),new ye(oe.INVALID_ARGUMENT,d+n+f)}function GN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,t,s,i,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=i,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new A4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class A4 extends WN{data(){return super.data()}}function xf(n,e){return typeof e=="string"?P0(n,e):e instanceof vl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class R0{}class yf extends R0{}function Gt(n,e,...t){let s=[];e instanceof R0&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((f=>f instanceof vf)).length,d=l.filter((f=>f instanceof mu)).length;if(c>1||c>0&&d>0)throw new ye(oe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const i of s)n=i._apply(n);return n}class mu extends yf{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new mu(e,t,s)}_apply(e){const t=this._parse(e);return KN(e._query,t),new gr(e.firestore,e.converter,tg(e._query,t))}_parse(e){const t=pu(e.firestore);return(function(l,c,d,f,m,g,y){let v;if(m.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){gw(y,g);const k=[];for(const E of y)k.push(mw(f,l,E));v={arrayValue:{values:k}}}else v=mw(f,l,y)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||gw(y,g),v=C4(d,c,y,g==="in"||g==="not-in");return Ut.create(m,g,v)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function wt(n,e,t){const s=e,i=xf("where",n);return mu._create(i,s,t)}class vf extends R0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vf(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Ds.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,l){let c=i;const d=l.getFlattenedFilters();for(const f of d)KN(c,f),c=tg(c,f)})(e._query,t),new gr(e.firestore,e.converter,tg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bf extends yf{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new bf(e,t)}_apply(e){const t=(function(i,l,c){if(i.startAt!==null)throw new ye(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ye(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $c(l,c)})(e._query,this._field,this._direction);return new gr(e.firestore,e.converter,(function(i,l){const c=i.explicitOrderBy.concat([l]);return new gl(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function gu(n,e="asc"){const t=e,s=xf("orderBy",n);return bf._create(s,t)}class wf extends yf{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new wf(e,t,s)}_apply(e){return new gr(e.firestore,e.converter,Rh(e._query,this._limit,this._limitType))}}function _f(n){return zA("limit",n),wf._create("limit",n,"F")}function mw(n,e,t){if(typeof(t=Mt(t))=="string"){if(t==="")throw new ye(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$2(e)&&t.indexOf("/")!==-1)throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ot.fromString(t));if(!Ie.isDocumentKey(s))throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ab(n,new Ie(s))}if(t instanceof Et)return Ab(n,t._key);throw new ye(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jh(t)}.`)}function gw(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function KN(n,e){const t=(function(i,l){for(const c of i)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(oe.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class QN{convertValue(e,t="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Bi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Xi(e,((i,l)=>{s[i]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,i,l;const t=(l=(i=(s=e.fields)==null?void 0:s[Ah].arrayValue)==null?void 0:i.values)==null?void 0:l.map((c=>Dt(c.doubleValue)));return new Is(t)}convertGeoPoint(e){return new Cs(Dt(e.latitude),Dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=tf(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(zc(e));default:return null}}convertTimestamp(e){const t=zi(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ot.fromString(e);tt(hN(s),9688,{name:e});const i=new el(s.get(1),s.get(3)),l=new Ie(s.popFirst(5));return i.isEqual(t)||Hr(`Document ${l} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D0(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class Ua{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Li extends WN{constructor(e,t,s,i,l,c){super(e,t,s,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Cc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(xf("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Li._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Li._jsonSchemaVersion="firestore/documentSnapshot/1.0",Li._jsonSchema={type:zt("string",Li._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Cc extends Li{data(e={}){return super.data(e)}}class Oi{constructor(e,t,s,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ua(i.hasPendingWrites,i.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Cc(this._firestore,this._userDataWriter,s.key,s,new Ua(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,l){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map((d=>{const f=new Cc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Ua(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:c++}}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const f=new Cc(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Ua(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,g=-1;return d.type!==0&&(m=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),g=c.indexOf(d.doc.key)),{type:P4(d.type),doc:f,oldIndex:m,newIndex:g}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(oe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Oi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],i=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),i.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function P4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(n){n=_n(n,Et);const e=_n(n.firestore,Ms);return N4(yl(e),n._key).then((t=>YN(e,n,t)))}Oi._jsonSchemaVersion="firestore/querySnapshot/1.0",Oi._jsonSchema={type:zt("string",Oi._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class M0 extends QN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,t)}}function st(n){n=_n(n,gr);const e=_n(n.firestore,Ms),t=yl(e),s=new M0(e);return HN(n._query),E4(t,n._query).then((i=>new Oi(e,s,n,i)))}function Qr(n,e,t){n=_n(n,Et);const s=_n(n.firestore,Ms),i=D0(n.converter,e,t);return bl(s,[S0(pu(s),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Tn.none())])}function bn(n,e,t,...s){n=_n(n,Et);const i=_n(n.firestore,Ms),l=pu(i);let c;return c=typeof(e=Mt(e))=="string"||e instanceof vl?BN(l,"updateDoc",n._key,e,t,s):zN(l,"updateDoc",n._key,e),bl(i,[c.toMutation(n._key,Tn.exists(!0))])}function Ps(n){return bl(_n(n.firestore,Ms),[new cf(n._key,Tn.none())])}function cs(n,e){const t=_n(n.firestore,Ms),s=Re(n),i=D0(n.converter,e);return bl(t,[S0(pu(n.firestore),"addDoc",s._key,i,n.converter!==null,{}).toMutation(s._key,Tn.exists(!1))]).then((()=>s))}function cn(n,...e){var f,m,g;n=Mt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||pw(e[s])||(t=e[s++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(pw(e[s])){const y=e[s];e[s]=(f=y.next)==null?void 0:f.bind(y),e[s+1]=(m=y.error)==null?void 0:m.bind(y),e[s+2]=(g=y.complete)==null?void 0:g.bind(y)}let l,c,d;if(n instanceof Et)c=_n(n.firestore,Ms),d=nf(n._key.path),l={next:y=>{e[s]&&e[s](YN(c,n,y))},error:e[s+1],complete:e[s+2]};else{const y=_n(n,gr);c=_n(y.firestore,Ms),d=y._query;const v=new M0(c);l={next:_=>{e[s]&&e[s](new Oi(c,v,y,_))},error:e[s+1],complete:e[s+2]},HN(n._query)}return(function(v,_,k,E){const T=new k0(E),M=new _0(_,T,k);return v.asyncQueue.enqueueAndForget((async()=>v0(await Oh(v),M))),()=>{T.Nu(),v.asyncQueue.enqueueAndForget((async()=>b0(await Oh(v),M)))}})(yl(c),d,i,l)}function bl(n,e){return(function(s,i){const l=new Br;return s.asyncQueue.enqueueAndForget((async()=>d4(await _4(s),i,l))),l.promise})(yl(n),e)}function YN(n,e,t){const s=t.docs.get(e._key),i=new M0(n);return new Li(n,i,e._key,s,new Ua(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=pu(e)}set(e,t,s){this._verifyNotCommitted();const i=xm(e,this._firestore),l=D0(i.converter,t,s),c=S0(this._dataReader,"WriteBatch.set",i._key,l,i.converter!==null,s);return this._mutations.push(c.toMutation(i._key,Tn.none())),this}update(e,t,s,...i){this._verifyNotCommitted();const l=xm(e,this._firestore);let c;return c=typeof(t=Mt(t))=="string"||t instanceof vl?BN(this._dataReader,"WriteBatch.update",l._key,t,s,i):zN(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(c.toMutation(l._key,Tn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xm(e,this._firestore);return this._mutations=this._mutations.concat(new cf(t._key,Tn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xm(n,e){if((n=Mt(n)).firestore!==e)throw new ye(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function lr(){return new T0("serverTimestamp")}function JN(...n){return new j0("arrayUnion",n)}function ZN(...n){return new C0("arrayRemove",n)}function eE(n){return new I0("increment",n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R4(n){return yl(n=_n(n,Ms)),new XN(n,(e=>bl(n,e)))}(function(e,t=!0){(function(i){fl=i})(dl),Ja(new Uo("firestore",((s,{instanceIdentifier:i,options:l})=>{const c=s.getProvider("app").getImmediate(),d=new Ms(new RA(s.getProvider("auth-internal")),new VA(c,s.getProvider("app-check-internal")),(function(m,g){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ye(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new el(m.options.projectId,g)})(c,i),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Mi(yb,vb,e),Mi(yb,vb,"esm2020")})();const Mo=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:QN,Bytes:Qn,CollectionReference:$r,DocumentReference:Et,DocumentSnapshot:Li,FieldPath:vl,FieldValue:Zi,Firestore:Ms,FirestoreError:ye,GeoPoint:Cs,Query:gr,QueryCompositeFilterConstraint:vf,QueryConstraint:yf,QueryDocumentSnapshot:Cc,QueryFieldFilterConstraint:mu,QueryLimitConstraint:wf,QueryOrderByConstraint:bf,QuerySnapshot:Oi,SnapshotMetadata:Ua,Timestamp:at,VectorValue:Is,WriteBatch:XN,_AutoId:Xh,_ByteString:Zt,_DatabaseId:el,_DocumentKey:Ie,_EmptyAuthCredentialsProvider:N2,_FieldPath:Jt,_cast:_n,_logWarn:qo,_validateIsNotUsedTogether:k2,addDoc:cs,arrayRemove:ZN,arrayUnion:JN,collection:je,connectFirestoreEmulator:VN,deleteDoc:Ps,doc:Re,ensureFirestoreConfigured:yl,executeWrite:bl,getDoc:As,getDocs:st,getFirestore:LN,increment:eE,limit:_f,onSnapshot:cn,orderBy:gu,query:Gt,serverTimestamp:lr,setDoc:Qr,updateDoc:bn,where:wt,writeBatch:R4},Symbol.toStringTag,{value:"Module"})),tE={apiKey:"AIzaSyCbSdElE-DXh83x02wszjfUcXl9z0iQj1A",authDomain:"edufy-makerlab.firebaseapp.com",projectId:"edufy-makerlab",storageBucket:"edufy-makerlab.firebasestorage.app",messagingSenderId:"273507751238",appId:"1:273507751238:web:c8306f6177654befa54147",measurementId:"G-KZV1Q7T1H2"};let wc,J,Ts;console.log(" Initializing Firebase...");try{wc=P_(tE),console.log(" Firebase App initialized:",wc.name),J=LN(wc),console.log(" Firestore initialized:",J?"Connected":"Failed"),Ts=jA(wc),console.log(" Auth initialized:",Ts?"Connected":"Failed")}catch(n){console.error(" Firebase initialization failed:",n)}const D4=Object.freeze(Object.defineProperty({__proto__:null,get app(){return wc},get auth(){return Ts},get db(){return J},firebaseConfig:tE},Symbol.toStringTag,{value:"Module"})),nE=C.createContext({user:null,userProfile:null,loading:!0,signInWithToken:async()=>{},signOut:async()=>{},updateCredits:async()=>{}}),ms=()=>C.useContext(nE),M4=({children:n})=>{const[e,t]=C.useState(null),[s,i]=C.useState(null),[l,c]=C.useState(!0),d=C.useRef(!1),f=async v=>{if(J)try{const _=await As(Re(J,"users",v));_.exists()?i(_.data()):i({uid:v,name:"Student",email:"",role:"student"})}catch(_){console.error("Error fetching user profile:",_)}};C.useEffect(()=>{const v=localStorage.getItem("sparkquest_bridge_user");if(v)try{const k=JSON.parse(v);if(k&&k.uid){console.log("Restoring Bridge Session from Storage"),d.current=!0;const E={uid:k.uid,displayName:k.name||"Explorer",email:k.email,emailVerified:!0,isAnonymous:!1,getIdToken:async()=>"bridge-token",getIdTokenResult:async()=>({token:"bridge-token",claims:{role:k.role}}),photoURL:k.photoURL||null};t(E),i(k),c(!1)}}catch(k){console.error("Failed to restore bridge session",k),localStorage.removeItem("sparkquest_bridge_user")}if(!Ts){c(!1);return}const _=gI(Ts,async k=>{k?(d.current=!1,t(k),await f(k.uid)):d.current||(t(null),i(null)),c(!1)});return()=>_()},[]);const m=async v=>{if(Ts)try{try{const _=atob(v);if(_.trim().startsWith("{")){const k=JSON.parse(_);if(k&&k.uid&&k.email){console.log("Bridge Token Verified",k);const E={uid:k.uid,displayName:k.name||"Explorer",email:k.email,emailVerified:!0,isAnonymous:!1,metadata:{},providerData:[],refreshToken:"",tenantId:null,delete:async()=>{},getIdToken:async()=>v,getIdTokenResult:async()=>({token:v,signInProvider:"custom",claims:{role:k.role},authTime:Date.now().toString(),issuedAtTime:Date.now().toString(),expirationTime:(Date.now()+36e5).toString(),signInSecondFactor:null}),reload:async()=>{},toJSON:()=>({}),phoneNumber:null,photoURL:k.photoURL||null};localStorage.setItem("sparkquest_bridge_user",JSON.stringify(k)),d.current=!0,t(E),i(k);return}}}catch(_){console.debug("Token sent is not a bridge token",_)}v==="demo-token"?(console.warn("Using demo token mode"),d.current=!0,t({uid:"demo-student-id",displayName:"Demo Student",email:"student@makerlab.academy",emailVerified:!0,isAnonymous:!1,metadata:{},providerData:[],refreshToken:"",tenantId:null,delete:async()=>{},getIdToken:async()=>"demo-token",getIdTokenResult:async()=>({token:"demo-token",signInProvider:"custom",claims:{},authTime:Date.now().toString(),issuedAtTime:Date.now().toString(),expirationTime:(Date.now()+36e5).toString(),signInSecondFactor:null}),reload:async()=>{},toJSON:()=>({}),phoneNumber:null,photoURL:null}),i({uid:"demo-student-id",name:"Demo Student",email:"student@makerlab.academy",role:"student"})):await dI(Ts,v)}catch(_){throw console.error("Login failed",_),_}},g=async()=>{localStorage.removeItem("sparkquest_bridge_user"),Ts&&await xI(Ts)},y=async v=>{if(!e||d.current){s&&i({...s,arcadeCredits:(s.arcadeCredits||0)+v});return}try{if(J){const _=Re(J,"users",e.uid);await bn(_,{arcadeCredits:eE(v)}),i(k=>k?{...k,arcadeCredits:(k.arcadeCredits||0)+v}:null)}}catch(_){console.error("Failed to update credits:",_)}};return o.jsx(nE.Provider,{value:{user:e,userProfile:s,loading:l,signInWithToken:m,signOut:g,updateCredits:y},children:n})},fc=n=>{const e=n.toLowerCase();return e.includes("robot")||e.includes("electronic")?"robotics":e.includes("cod")||e.includes("saas")||e.includes("software")?"coding":e.includes("game")?"game_design":e.includes("video")||e.includes("multim")?"multimedia":e.includes("design")||e.includes("brand")?"branding":e.includes("engineer")||e.includes("diy")||e.includes("prototype")?"engineering":"general"},V4=()=>{const{user:n,userProfile:e}=ms(),[t,s]=C.useState(!1),[i,l]=C.useState(null),[c,d]=C.useState(null),[f,m]=C.useState(null),[g,y]=C.useState(!0),v=async(_,k)=>{if(J){s(!0);try{if(_==="demo-student-id"){const I={id:"demo-mission-01",title:"Mars Rover Prototype",description:"Design and build a prototype rover capable of traversing the rocky terrain of Mars.",station:"Station 1: Prototyping",badges:[],recommendedWorkflow:"engineering-design"};l(I),d({id:`proj_demo_${Date.now()}`,title:I.title,description:I.description,station:fc(I.station),status:"building",workflowId:I.recommendedWorkflow,steps:[{id:"1",title:"Empathize",status:"done"},{id:"2",title:"Define",status:"done"},{id:"3",title:"Ideate",status:"todo"},{id:"4",title:"Prototype",status:"todo"},{id:"5",title:"Test",status:"todo"}],commits:[],skills:[],resources:[]}),s(!1);return}if(k){console.log(`[useMissionData] Attempting to fetch specific project: ${k}`);const I=Re(J,"student_projects",k),L=await As(I);if(L.exists()){console.log("[useMissionData] Project found!",L.data());const D={id:L.id,...L.data()};console.log(" [useMissionData] Project with ID:",D.id),D.studentId||(D.studentId=_);const A={id:D.templateId||"custom-mission",title:D.title,description:D.description,station:fc(D.station),badges:[],recommendedWorkflow:D.workflowId||"default"};l(A),d(D),s(!1);return}else{console.error(`[useMissionData] Project ${k} NOT found in DB.`),m(`Project not found (ID: ${k}). Check if you have permission or if the link is correct.`),s(!1);return}}const E=Gt(je(J,"enrollments"),wt("studentId","==",_),wt("status","==","active")),T=await st(E);if(T.empty){const I=Gt(je(J,"student_projects"),wt("studentId","==",_),wt("status","in",["planning","building","submitted","changes_requested","published"])),L=await st(I);if(!L.empty){const D={id:L.docs[0].id,...L.docs[0].data()};D.studentId||(D.studentId=_);const A={id:D.templateId||"custom-mission",title:D.title,description:D.description,station:fc(D.station),badges:[],recommendedWorkflow:D.workflowId||"default"};l(A),d(D),s(!1);return}throw new Error("No active enrollment or project found.")}const O=T.docs[0].data().programId,q=await As(Re(J,"programs",O));if(!q.exists())throw new Error("Program not found");const $=q.data(),Q={id:$.id,title:$.name,description:$.description||"Complete your training mission.",station:fc($.type||"Station 1"),badges:[],recommendedWorkflow:"default"},K=$.steps||[],P=K.length>0?K:[{id:"1",title:"Briefing",status:"todo"},{id:"2",title:"Execution",status:"todo"}];l(Q);const j=Gt(je(J,"student_projects"),wt("studentId","==",_),wt("templateId","==",O)),V=await st(j);if(V.empty){const I=Gt(je(J,"student_projects"),wt("studentId","==",_),wt("title","==",Q.title)),L=await st(I);if(L.empty){const D={id:`proj_${_}_${Date.now()}`,studentId:_,templateId:O,title:Q.title,description:Q.description,station:fc(Q.station),status:"planning",workflowId:"",steps:P,commits:[],skills:[],resources:[]};console.log("[useMissionData] Creating new project:",D.id);try{const A=Re(J,"student_projects",D.id);await Qr(A,{...D,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),console.log(" [useMissionData] New project saved to Firestore:",D.id)}catch(A){throw console.error(" [useMissionData] Failed to save new project:",A),new Error("Failed to create project in database")}d(D)}else{const D={id:L.docs[0].id,...L.docs[0].data()};console.log(" [useMissionData] Found existing project by TITLE fallback:",D.id);try{await Qr(Re(J,"student_projects",D.id),{templateId:O},{merge:!0})}catch(A){console.warn("Could not link project to template",A)}d(D)}}else{const I={id:V.docs[0].id,...V.docs[0].data()};console.log("[useMissionData] Found existing project for this program:",I.id),d(I)}}catch(E){console.error("Error fetching mission:",E),m(E.message)}finally{s(!1)}}};return C.useEffect(()=>{if(!(c!=null&&c.id)||!J)return;console.log(` [useMissionData] Setting up real-time listener for project: ${c.id}`);const _=cn(Re(J,"student_projects",c.id),k=>{if(k.exists()){const E={id:k.id,...k.data()};console.log(" [useMissionData] Received update from Firestore:",E),d(E),y(!0)}else console.warn(" [useMissionData] Project document deleted")},k=>{console.error(" [useMissionData] Firestore sync error:",k),y(!1),m("Connection lost - changes may not be saved")});return()=>{console.log(" [useMissionData] Cleaning up real-time listener"),_()}},[c==null?void 0:c.id]),{fetchMission:v,assignment:i,project:c,loading:t,error:f,isConnected:g}},L4="modulepreload",O4=function(n,e){return new URL(n,e).href},xw={},Ur=function(e,t,s){let i=Promise.resolve();if(t&&t.length>0){let c=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};const d=document.getElementsByTagName("link"),f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));i=c(t.map(g=>{if(g=O4(g,s),g in xw)return;xw[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(!!s)for(let E=d.length-1;E>=0;E--){const T=d[E];if(T.href===g&&(!y||T.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${g}"]${v}`))return;const k=document.createElement("link");if(k.rel=y?"stylesheet":L4,y||(k.as="script"),k.crossOrigin="",k.href=g,m&&k.setAttribute("nonce",m),document.head.appendChild(k),y)return new Promise((E,T)=>{k.addEventListener("load",E),k.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return i.then(c=>{for(const d of c||[])d.status==="rejected"&&l(d.reason);return e().catch(l)})};var yw;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(yw||(yw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vw;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(vw||(vw={}));var bw;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(bw||(bw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww=["user","model","function","system"];var _w;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(_w||(_w={}));var Nw;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Nw||(Nw={}));var Ew;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ew||(Ew={}));var kw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(kw||(kw={}));var Ic;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Ic||(Ic={}));var Sw;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Sw||(Sw={}));var Tw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Tw||(Tw={}));var jw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(jw||(jw={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Ra extends vn{constructor(e,t){super(e),this.response=t}}class sE extends vn{constructor(e,t,s,i){super(e),this.status=t,this.statusText=s,this.errorDetails=i}}class Fi extends vn{}class rE extends vn{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F4="https://generativelanguage.googleapis.com",U4="v1beta",z4="0.24.1",B4="genai-js";var Wo;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Wo||(Wo={}));class $4{constructor(e,t,s,i,l){this.model=e,this.task=t,this.apiKey=s,this.stream=i,this.requestOptions=l}toString(){var e,t;const s=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||U4;let l=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||F4}/${s}/${this.model}:${this.task}`;return this.stream&&(l+="?alt=sse"),l}}function q4(n){const e=[];return n!=null&&n.apiClient&&e.push(n.apiClient),e.push(`${B4}/${z4}`),e.join(" ")}async function G4(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",q4(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let s=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(s){if(!(s instanceof Headers))try{s=new Headers(s)}catch(i){throw new Fi(`unable to convert customHeaders value ${JSON.stringify(s)} to Headers: ${i.message}`)}for(const[i,l]of s.entries()){if(i==="x-goog-api-key")throw new Fi(`Cannot set reserved header name ${i}`);if(i==="x-goog-api-client")throw new Fi(`Header name ${i} can only be set using the apiClient field`);t.append(i,l)}}return t}async function W4(n,e,t,s,i,l){const c=new $4(n,e,t,s,l);return{url:c.toString(),fetchOptions:Object.assign(Object.assign({},Y4(l)),{method:"POST",headers:await G4(c),body:i})}}async function xu(n,e,t,s,i,l={},c=fetch){const{url:d,fetchOptions:f}=await W4(n,e,t,s,i,l);return H4(d,f,c)}async function H4(n,e,t=fetch){let s;try{s=await t(n,e)}catch(i){K4(i,n)}return s.ok||await Q4(s,n),s}function K4(n,e){let t=n;throw t.name==="AbortError"?(t=new rE(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof sE||n instanceof Fi||(t=new vn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function Q4(n,e){let t="",s;try{const i=await n.json();t=i.error.message,i.error.details&&(t+=` ${JSON.stringify(i.error.details)}`,s=i.error.details)}catch{}throw new sE(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,s)}function Y4(n){const e={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const t=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>t.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),hh(n.candidates[0]))throw new Ra(`${Ti(n)}`,n);return X4(n)}else if(n.promptFeedback)throw new Ra(`Text not available. ${Ti(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hh(n.candidates[0]))throw new Ra(`${Ti(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),Cw(n)[0]}else if(n.promptFeedback)throw new Ra(`Function call not available. ${Ti(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),hh(n.candidates[0]))throw new Ra(`${Ti(n)}`,n);return Cw(n)}else if(n.promptFeedback)throw new Ra(`Function call not available. ${Ti(n)}`,n)},n}function X4(n){var e,t,s,i;const l=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(i=(s=n.candidates)===null||s===void 0?void 0:s[0].content)===null||i===void 0?void 0:i.parts)c.text&&l.push(c.text),c.executableCode&&l.push("\n```"+c.executableCode.language+`
`+c.executableCode.code+"\n```\n"),c.codeExecutionResult&&l.push("\n```\n"+c.codeExecutionResult.output+"\n```\n");return l.length>0?l.join(""):""}function Cw(n){var e,t,s,i;const l=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const c of(i=(s=n.candidates)===null||s===void 0?void 0:s[0].content)===null||i===void 0?void 0:i.parts)c.functionCall&&l.push(c.functionCall);if(l.length>0)return l}const J4=[Ic.RECITATION,Ic.SAFETY,Ic.LANGUAGE];function hh(n){return!!n.finishReason&&J4.includes(n.finishReason)}function Ti(n){var e,t,s;let i="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)i+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(i+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(i+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((s=n.candidates)===null||s===void 0)&&s[0]){const l=n.candidates[0];hh(l)&&(i+=`Candidate was blocked due to ${l.finishReason}`,l.finishMessage&&(i+=`: ${l.finishMessage}`))}return i}function Wc(n){return this instanceof Wc?(this.v=n,this):new Wc(n)}function Z4(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),i,l=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(v){s[v]&&(i[v]=function(_){return new Promise(function(k,E){l.push([v,_,k,E])>1||d(v,_)})})}function d(v,_){try{f(s[v](_))}catch(k){y(l[0][3],k)}}function f(v){v.value instanceof Wc?Promise.resolve(v.value.v).then(m,g):y(l[0][2],v)}function m(v){d("next",v)}function g(v){d("throw",v)}function y(v,_){v(_),l.shift(),l.length&&d(l[0][0],l[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function e5(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=s5(e),[s,i]=t.tee();return{stream:n5(s),response:t5(i)}}async function t5(n){const e=[],t=n.getReader();for(;;){const{done:s,value:i}=await t.read();if(s)return V0(r5(e));e.push(i)}}function n5(n){return Z4(this,arguments,function*(){const t=n.getReader();for(;;){const{value:s,done:i}=yield Wc(t.read());if(i)break;yield yield Wc(V0(s))}})}function s5(n){const e=n.getReader();return new ReadableStream({start(s){let i="";return l();function l(){return e.read().then(({value:c,done:d})=>{if(d){if(i.trim()){s.error(new vn("Failed to parse stream"));return}s.close();return}i+=c;let f=i.match(Iw),m;for(;f;){try{m=JSON.parse(f[1])}catch{s.error(new vn(`Error parsing JSON response: "${f[1]}"`));return}s.enqueue(m),i=i.substring(f[0].length),f=i.match(Iw)}return l()}).catch(c=>{let d=c;throw d.stack=c.stack,d.name==="AbortError"?d=new rE("Request aborted when reading from the stream"):d=new vn("Error reading from the stream"),d})}}})}function r5(n){const e=n[n.length-1],t={promptFeedback:e==null?void 0:e.promptFeedback};for(const s of n){if(s.candidates){let i=0;for(const l of s.candidates)if(t.candidates||(t.candidates=[]),t.candidates[i]||(t.candidates[i]={index:i}),t.candidates[i].citationMetadata=l.citationMetadata,t.candidates[i].groundingMetadata=l.groundingMetadata,t.candidates[i].finishReason=l.finishReason,t.candidates[i].finishMessage=l.finishMessage,t.candidates[i].safetyRatings=l.safetyRatings,l.content&&l.content.parts){t.candidates[i].content||(t.candidates[i].content={role:l.content.role||"user",parts:[]});const c={};for(const d of l.content.parts)d.text&&(c.text=d.text),d.functionCall&&(c.functionCall=d.functionCall),d.executableCode&&(c.executableCode=d.executableCode),d.codeExecutionResult&&(c.codeExecutionResult=d.codeExecutionResult),Object.keys(c).length===0&&(c.text=""),t.candidates[i].content.parts.push(c)}i++}s.usageMetadata&&(t.usageMetadata=s.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iE(n,e,t,s){const i=await xu(e,Wo.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),s);return e5(i)}async function oE(n,e,t,s){const l=await(await xu(e,Wo.GENERATE_CONTENT,n,!1,JSON.stringify(t),s)).json();return{response:V0(l)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Hc(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return i5(e)}function i5(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let s=!1,i=!1;for(const l of n)"functionResponse"in l?(t.parts.push(l),i=!0):(e.parts.push(l),s=!0);if(s&&i)throw new vn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!s&&!i)throw new vn("No content is provided for sending chat message.");return s?e:t}function o5(n,e){var t;let s={model:e==null?void 0:e.model,generationConfig:e==null?void 0:e.generationConfig,safetySettings:e==null?void 0:e.safetySettings,tools:e==null?void 0:e.tools,toolConfig:e==null?void 0:e.toolConfig,systemInstruction:e==null?void 0:e.systemInstruction,cachedContent:(t=e==null?void 0:e.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const i=n.generateContentRequest!=null;if(n.contents){if(i)throw new Fi("CountTokensRequest must have one of contents or generateContentRequest, not both.");s.contents=n.contents}else if(i)s=Object.assign(Object.assign({},s),n.generateContentRequest);else{const l=Hc(n);s.contents=[l]}return{generateContentRequest:s}}function Aw(n){let e;return n.contents?e=n:e={contents:[Hc(n)]},n.systemInstruction&&(e.systemInstruction=aE(n.systemInstruction)),e}function a5(n){return typeof n=="string"||Array.isArray(n)?{content:Hc(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],l5={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function c5(n){let e=!1;for(const t of n){const{role:s,parts:i}=t;if(!e&&s!=="user")throw new vn(`First content should be with role 'user', got ${s}`);if(!ww.includes(s))throw new vn(`Each item should include role field. Got ${s} but valid roles are: ${JSON.stringify(ww)}`);if(!Array.isArray(i))throw new vn("Content should have 'parts' property with an array of Parts");if(i.length===0)throw new vn("Each Content should have at least one part");const l={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const d of i)for(const f of Pw)f in d&&(l[f]+=1);const c=l5[s];for(const d of Pw)if(!c.includes(d)&&l[d]>0)throw new vn(`Content with role '${s}' can't contain '${d}' part`);e=!0}}function Rw(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const s of t.parts)if(s===void 0||Object.keys(s).length===0||s.text!==void 0&&s.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="SILENT_ERROR";class u5{constructor(e,t,s,i={}){this.model=t,this.params=s,this._requestOptions=i,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,s!=null&&s.history&&(c5(s.history),this._history=s.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var s,i,l,c,d,f;await this._sendPromise;const m=Hc(e),g={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,m]},y=Object.assign(Object.assign({},this._requestOptions),t);let v;return this._sendPromise=this._sendPromise.then(()=>oE(this._apiKey,this.model,g,y)).then(_=>{var k;if(Rw(_.response)){this._history.push(m);const E=Object.assign({parts:[],role:"model"},(k=_.response.candidates)===null||k===void 0?void 0:k[0].content);this._history.push(E)}else{const E=Ti(_.response);E&&console.warn(`sendMessage() was unsuccessful. ${E}. Inspect response object for details.`)}v=_}).catch(_=>{throw this._sendPromise=Promise.resolve(),_}),await this._sendPromise,v}async sendMessageStream(e,t={}){var s,i,l,c,d,f;await this._sendPromise;const m=Hc(e),g={safetySettings:(s=this.params)===null||s===void 0?void 0:s.safetySettings,generationConfig:(i=this.params)===null||i===void 0?void 0:i.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(c=this.params)===null||c===void 0?void 0:c.toolConfig,systemInstruction:(d=this.params)===null||d===void 0?void 0:d.systemInstruction,cachedContent:(f=this.params)===null||f===void 0?void 0:f.cachedContent,contents:[...this._history,m]},y=Object.assign(Object.assign({},this._requestOptions),t),v=iE(this._apiKey,this.model,g,y);return this._sendPromise=this._sendPromise.then(()=>v).catch(_=>{throw new Error(Dw)}).then(_=>_.response).then(_=>{if(Rw(_)){this._history.push(m);const k=Object.assign({},_.candidates[0].content);k.role||(k.role="model"),this._history.push(k)}else{const k=Ti(_);k&&console.warn(`sendMessageStream() was unsuccessful. ${k}. Inspect response object for details.`)}}).catch(_=>{_.message!==Dw&&console.error(_)}),v}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(n,e,t,s){return(await xu(e,Wo.COUNT_TOKENS,n,!1,JSON.stringify(t),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(n,e,t,s){return(await xu(e,Wo.EMBED_CONTENT,n,!1,JSON.stringify(t),s)).json()}async function f5(n,e,t,s){const i=t.requests.map(c=>Object.assign(Object.assign({},c),{model:e}));return(await xu(e,Wo.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:i}),s)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e,t,s={}){this.apiKey=e,this._requestOptions=s,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=aE(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var s;const i=Aw(e),l=Object.assign(Object.assign({},this._requestOptions),t);return oE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},i),l)}async generateContentStream(e,t={}){var s;const i=Aw(e),l=Object.assign(Object.assign({},this._requestOptions),t);return iE(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(s=this.cachedContent)===null||s===void 0?void 0:s.name},i),l)}startChat(e){var t;return new u5(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const s=o5(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),i=Object.assign(Object.assign({},this._requestOptions),t);return d5(this.apiKey,this.model,s,i)}async embedContent(e,t={}){const s=a5(e),i=Object.assign(Object.assign({},this._requestOptions),t);return h5(this.apiKey,this.model,s,i)}async batchEmbedContents(e,t={}){const s=Object.assign(Object.assign({},this._requestOptions),t);return f5(this.apiKey,this.model,e,s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new vn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new Mw(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,s){if(!e.name)throw new Fi("Cached content must contain a `name` field.");if(!e.model)throw new Fi("Cached content must contain a `model` field.");const i=["model","systemInstruction"];for(const c of i)if(t!=null&&t[c]&&e[c]&&(t==null?void 0:t[c])!==e[c]){if(c==="model"){const d=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,f=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(d===f)continue}throw new Fi(`Different value for "${c}" specified in modelParams (${t[c]}) and cachedContent (${e[c]})`)}const l=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new Mw(this.apiKey,l,s)}}const m5=async(n,e)=>{try{const t=encodeURIComponent(`${n}: ${e.substring(0,20)}`);return`https://placehold.co/600x400/indigo/white?text=${encodeURIComponent(n)}`}catch{return null}},g5=async(n,e,t)=>({feedback:"Offline mode: Your work looks great! Onwards!",approved:!0}),x5=n=>{const e=n.toLowerCase();return e.includes("robot")||e.includes("electronic")?"robotics":e.includes("cod")||e.includes("saas")||e.includes("software")?"coding":e.includes("game")?"game_design":e.includes("video")||e.includes("multim")?"multimedia":e.includes("design")||e.includes("brand")?"branding":e.includes("engineer")||e.includes("diy")||e.includes("prototype")?"engineering":"general"},fh={async initializeSession(n){return console.warn("api.initializeSession is deprecated. Use useMissionData hook."),null},async syncProject(n){if(!n||!n.id)return{success:!1,error:"Invalid project data"};const e=3,t=500;for(let s=1;s<=e;s++)try{if(!J)throw new Error("Database not initialized");const i=J;console.log(`[ERP] Syncing project state... (attempt ${s}/${e})`,n.id);const l=Re(i,"student_projects",n.id),c={...n,station:x5(n.station),updatedAt:new Date().toISOString()};return console.log(` [SparkQuest] Saving project with normalized station: "${n.station}"  "${c.station}"`),await Qr(l,c,{merge:!0}),console.log(` [SparkQuest] Project saved successfully on attempt ${s}`),{success:!0}}catch(i){if(console.error(` [SparkQuest] Failed to sync project (attempt ${s}/${e}):`,i),s===e)return{success:!1,error:i.message||"Failed to save after multiple attempts"};await new Promise(l=>setTimeout(l,t*s))}return{success:!1,error:"Failed to sync project"}},async submitStepEvidence(n,e){console.log(`[ERP] Submitting evidence for step ${n}`);try{if(!J)return!1;await Qr(Re(je(J,"notifications")),{type:"submission",title:"Mission Step Submitted",message:`A student submitted evidence for step: ${n}`,read:!1,timestamp:new Date().toISOString(),entityId:n,link:"/review",userId:"all"})}catch(t){console.error("Failed to send notification",t)}return!0}},y5=({id:n,type:e,title:t,status:s,icon:i,onClick:l,onHover:c,isFirst:d})=>{const f=s==="LOCKED",m=s==="ACTIVE",g=s==="REVIEW",y=s==="COMPLETED";let v="bg-slate-800",_="border-slate-900",k="text-slate-500",E="bg-slate-800/50";m?(v="bg-blue-500",_="border-blue-700",k="text-blue-200",E="bg-blue-900/50",e==="TASK"&&(v="bg-indigo-500",_="border-indigo-700",k="text-indigo-200",E="bg-indigo-900/50")):y?(v="bg-emerald-500",_="border-emerald-700",k="text-emerald-400",E="bg-emerald-900/30"):g&&(v="bg-amber-500",_="border-amber-700",k="text-amber-400",E="bg-amber-900/30");const T=()=>{if(i)return o.jsx("span",{className:"text-4xl filter drop-shadow-md",children:i});switch(e){case"IDENTITY":return o.jsx("span",{className:"text-4xl filter drop-shadow-md",children:""});case"STRATEGY":return o.jsx("span",{className:"text-4xl filter drop-shadow-md",children:""});case"BLUEPRINT":return o.jsx("span",{className:"text-4xl filter drop-shadow-md",children:""});case"TASK":return o.jsx("span",{className:"text-4xl filter drop-shadow-md",children:""});case"PUBLISH":return o.jsx("span",{className:"text-4xl filter drop-shadow-md",children:""});default:return o.jsx("span",{className:"text-4xl filter drop-shadow-md",children:""})}};return o.jsxs("div",{className:"relative flex flex-col items-center justify-center w-48 z-10 flex-shrink-0 group",children:[m&&d&&o.jsxs("div",{className:"absolute -top-24 animate-bounce z-20 pointer-events-none",children:[o.jsx("div",{className:"bg-blue-500 text-white font-black px-6 py-2 rounded-2xl shadow-[0_0_20px_rgba(59,130,246,0.5)] border-4 border-blue-400 text-lg uppercase tracking-wider transform -rotate-3",children:"Current Mission"}),o.jsx("div",{className:"w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-t-[12px] border-t-blue-400 mx-auto mt-[-4px]"})]}),g&&o.jsxs("div",{className:"absolute -top-24 animate-pulse z-20 pointer-events-none",children:[o.jsx("div",{className:"bg-amber-500 text-white font-black px-6 py-2 rounded-2xl shadow-[0_0_20px_rgba(245,158,11,0.5)] border-4 border-amber-400 text-lg uppercase tracking-wider",children:"In Review"}),o.jsx("div",{className:"w-0 h-0 border-l-[10px] border-l-transparent border-r-[10px] border-r-transparent border-t-[12px] border-t-amber-400 mx-auto mt-[-4px]"})]}),o.jsxs("button",{onClick:()=>!f&&l(),onMouseEnter:()=>!f&&c&&c(),disabled:f,className:`
          relative w-32 h-32 rounded-[2.5rem] flex items-center justify-center 
          border-b-[8px] transition-all duration-200 ease-out
          ${v} ${_} shadow-2xl
          ${f?"cursor-not-allowed opacity-50 grayscale":"cursor-pointer hover:scale-110 hover:-translate-y-2 hover:brightness-110 active:border-b-0 active:translate-y-[8px] active:shadow-none"}
        `,children:[y&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-30 text-emerald-900",children:o.jsx("svg",{className:"w-20 h-20",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})})}),o.jsx("div",{className:`transform transition-transform duration-300 ${f?"scale-90":"scale-100"}`,children:T()}),o.jsx("div",{className:"absolute top-4 left-4 w-6 h-3 bg-white opacity-20 rounded-full rotate-45 pointer-events-none"}),m&&o.jsx("div",{className:"absolute inset-0 rounded-[2.5rem] shadow-[0_0_30px_rgba(59,130,246,0.6)] animate-pulse pointer-events-none"})]}),o.jsx("div",{className:`mt-6 px-4 py-2 rounded-xl ${E} backdrop-blur-sm border border-white/5 transition-colors duration-300 max-w-[200px]`,children:o.jsx("div",{className:`text-center font-black text-lg uppercase tracking-wider leading-tight ${k}`,children:t})})]})},v5=({title:n,subtitle:e,icon:t,color:s="blue",onClose:i,children:l})=>{const c={blue:"border-blue-100 text-blue-500",green:"border-green-100 text-green-500",pink:"border-pink-100 text-pink-500",orange:"border-orange-100 text-orange-500",indigo:"border-indigo-100 text-indigo-500"};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white rounded-[3rem] shadow-2xl w-full max-w-3xl overflow-hidden relative animate-float border-[8px] border-slate-100 flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"bg-white p-8 pb-6 text-center relative border-b-4 border-slate-100 flex-none z-10",children:[o.jsx("button",{onClick:i,className:"absolute top-6 right-6 text-slate-300 hover:text-slate-500 hover:bg-slate-100 p-3 rounded-full transition-colors",children:o.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:4,d:"M6 18L18 6M6 6l12 12"})})}),o.jsxs("div",{className:"flex flex-col items-center",children:[t&&o.jsx("div",{className:"text-6xl mb-4 filter drop-shadow-md",children:t}),o.jsx("h2",{className:"text-4xl font-black text-slate-800 uppercase tracking-tight",children:n}),e&&o.jsx("p",{className:`font-extrabold text-xl mt-2 ${c[s].split(" ")[1]}`,children:e})]})]}),o.jsx("div",{className:"p-8 overflow-y-auto overflow-x-hidden flex-1 no-scrollbar",children:l})]})})},lE=C.createContext(void 0),b5=({children:n})=>{const[e,t]=C.useState(!1),[s,i]=C.useState(null),[l,c]=C.useState(null),[d,f]=C.useState(0),m=C.useCallback(()=>{t(!1),i(null),c(null),f(0)},[]),g=C.useCallback((v,_=30,k)=>{t(!0),i(v),c(k||null),f(_*60)},[]);C.useEffect(()=>{let v;return e&&d>0&&(v=setInterval(()=>{f(_=>_<=1?(m(),0):_-1)},1e3)),()=>clearInterval(v)},[e,d,m]);const y=v=>{const _=Math.floor(v/60),k=v%60;return`${_}:${k.toString().padStart(2,"0")}`};return o.jsx(lE.Provider,{value:{isActive:e,timeLeft:d,sessionUrl:s,sessionTool:l,startSession:g,endSession:m,formatTime:y},children:n})},L0=()=>{const n=C.useContext(lE);if(n===void 0)throw new Error("useSession must be used within a SessionProvider");return n},xr=()=>{const[n,e]=C.useState([]),[t,s]=C.useState([]),[i,l]=C.useState([]),[c,d]=C.useState([]),[f,m]=C.useState([]),[g,y]=C.useState([]),[v,_]=C.useState(!0);C.useEffect(()=>{if(!J)return;const G=J,F=cn(je(G,"project_templates"),re=>{e(re.docs.map(ae=>({id:ae.id,...ae.data()})))}),U=cn(je(G,"process_templates"),re=>{s(re.docs.map(ae=>({id:ae.id,...ae.data()})))}),X=cn(Gt(je(G,"stations"),gu("order","asc")),re=>{l(re.docs.map(ae=>({id:ae.id,...ae.data()})))}),z=cn(je(G,"badges"),re=>{d(re.docs.map(ae=>({id:ae.id,...ae.data()})))}),Y=cn(je(G,"programs"),re=>{m(re.docs.map(ae=>({id:ae.id,...ae.data()})))}),Ne=cn(je(G,"student_projects"),re=>{y(re.docs.map(ae=>({id:ae.id,...ae.data()})))});return _(!1),()=>{F(),U(),X(),z(),Y(),Ne()}},[]);const k=f.reduce((G,F)=>(F.grades&&F.grades.forEach(U=>{G.find(z=>z.id===U.id||z.name===U.name)||G.push({id:U.id,name:U.name})}),G),[]),E=f.reduce((G,F)=>(F.grades&&F.grades.forEach(U=>{U.groups&&Array.isArray(U.groups)&&U.groups.forEach(X=>{X.name&&!G.includes(X.name)&&G.push(X.name)})}),G),[]),T=async G=>{J&&await cs(je(J,"badges"),{...G,createdAt:lr()})},M=async(G,F)=>{J&&await bn(Re(J,"badges",G),F)},O=async G=>{J&&await Ps(Re(J,"badges",G))},q=async G=>{J&&await cs(je(J,"process_templates"),{...G,createdAt:lr()})},$=async(G,F)=>{J&&await bn(Re(J,"process_templates",G),F)},Q=async G=>{J&&await Ps(Re(J,"process_templates",G))},K=async G=>{J&&await cs(je(J,"stations"),{...G,order:i.length})},P=async(G,F)=>{J&&await bn(Re(J,"stations",G),F)},j=async G=>{J&&await Ps(Re(J,"stations",G))},V=async G=>{J&&await cs(je(J,"project_templates"),{...G,createdAt:lr()})},I=async(G,F)=>{J&&await bn(Re(J,"project_templates",G),{...F,updatedAt:lr()})},L=async G=>{if(!J)return;const F=J,U=(await Ur(async()=>{const{writeBatch:Y}=await Promise.resolve().then(()=>Mo);return{writeBatch:Y}},void 0,import.meta.url)).writeBatch(F);U.delete(Re(F,"project_templates",G));const X=Gt(je(F,"student_projects"),(await Ur(async()=>{const{where:Y}=await Promise.resolve().then(()=>Mo);return{where:Y}},void 0,import.meta.url)).where("templateId","==",G));(await(await Ur(async()=>{const{getDocs:Y}=await Promise.resolve().then(()=>Mo);return{getDocs:Y}},void 0,import.meta.url)).getDocs(X)).forEach(Y=>{U.delete(Y.ref)}),await U.commit()},D=async(G,F,U)=>{var re;if(!J)return;const X=J,z=(await Ur(async()=>{const{writeBatch:ae}=await Promise.resolve().then(()=>Mo);return{writeBatch:ae}},void 0,import.meta.url)).writeBatch(X),Y=U.find(ae=>ae.id===G);if(!Y)return;if((re=Y.activeForGradeIds)==null?void 0:re.includes(F)){const ae=(Y.activeForGradeIds||[]).filter(xe=>xe!==F);z.update(Re(X,"stations",G),{activeForGradeIds:ae})}else{const ae=[...Y.activeForGradeIds||[],F];z.update(Re(X,"stations",G),{activeForGradeIds:ae}),U.forEach(xe=>{var Ce;if(xe.id!==G&&((Ce=xe.activeForGradeIds)!=null&&Ce.includes(F))){const De=(xe.activeForGradeIds||[]).filter(He=>He!==F);z.update(Re(X,"stations",xe.id),{activeForGradeIds:De})}})}await z.commit()},[A,he]=C.useState([]);C.useEffect(()=>{if(!J)return;const F=cn(je(J,"users"),U=>{const X=U.docs.map(z=>({id:z.id,...z.data()}));he(X)});return()=>{F()}},[]);const[ie,le]=C.useState([]);return C.useEffect(()=>{if(!J)return;const F=cn(je(J,"enrollments"),U=>{le(U.docs.map(X=>({id:X.id,...X.data()})))});return()=>F()},[]),{projectTemplates:n,processTemplates:t,stations:i,badges:c,programs:f,studentProjects:g,students:A,enrollments:ie,availableGrades:k,availableGroups:E,loading:v,actions:{addBadge:T,updateBadge:M,deleteBadge:O,addWorkflow:q,updateWorkflow:$,deleteWorkflow:Q,addStation:K,updateStation:P,deleteStation:j,toggleStationActivation:D,addProjectTemplate:V,updateProjectTemplate:I,deleteProjectTemplate:L}}},Vw=[{id:"e1",text:"Engineers don't fail, they just find 10,000 ways that won't work.",author:"Thomas Edison",category:"engineering"},{id:"e2",text:"The best way to predict the future is to invent it.",author:"Alan Kay",category:"engineering"},{id:"e3",text:"Simplicity is the ultimate sophistication.",author:"Leonardo da Vinci",category:"engineering"},{id:"e4",text:"Measure twice, cut once.",category:"engineering"},{id:"c1",text:"Creativity is intelligence having fun.",author:"Albert Einstein",category:"creativity"},{id:"c2",text:"Every artist was first an amateur.",author:"Ralph Waldo Emerson",category:"creativity"},{id:"c3",text:"You can't use up creativity. The more you use, the more you have.",author:"Maya Angelou",category:"creativity"},{id:"r1",text:"Mistakes are proof that you are trying.",category:"resilience"},{id:"r2",text:"It always seems impossible until it's done.",author:"Nelson Mandela",category:"resilience"},{id:"r3",text:"Fall seven times, stand up eight.",author:"Japanese Proverb",category:"resilience"},{id:"r4",text:"I have not failed. I've just found 10,000 ways that won't work.",author:"Thomas Edison",category:"resilience"},{id:"col1",text:"Alone we can do so little; together we can do so much.",author:"Helen Keller",category:"collaboration"},{id:"col2",text:"Talent wins games, but teamwork and intelligence win championships.",author:"Michael Jordan",category:"collaboration"}],w5=()=>Vw[Math.floor(Math.random()*Vw.length)],cE=n=>{const e=n.toLowerCase();return e.includes("robot")||e.includes("bot")||e.includes("mech")?"":e.includes("space")||e.includes("mars")||e.includes("moon")?"":e.includes("car")||e.includes("vehicle")||e.includes("racer")?"":e.includes("game")||e.includes("play")?"":e.includes("art")||e.includes("design")||e.includes("draw")?"":e.includes("music")||e.includes("sound")?"":e.includes("code")||e.includes("app")||e.includes("web")?"":e.includes("plant")||e.includes("garden")||e.includes("bio")?"":e.includes("water")||e.includes("sea")||e.includes("ocean")?"":e.includes("light")||e.includes("lamp")?"":""},_5=({template:n,onComplete:e,onCancel:t})=>{const[s,i]=C.useState(""),[l,c]=C.useState(null),[d,f]=C.useState(0),[m,g]=C.useState(100),y=C.useRef(null);C.useEffect(()=>{y.current&&y.current.focus()},[]);const v=k=>{const E=k.target.value;l||c(Date.now()),i(E);const T=E.length/5,M=(Date.now()-(l||Date.now()))/6e4;M>0&&f(Math.round(T/M));let O=0;for(let q=0;q<E.length;q++)E[q]!==n[q]&&O++;g(Math.max(0,100-Math.round(O/Math.max(1,E.length)*100)))},_=s===n;return o.jsxs("div",{className:"bg-slate-900 p-6 rounded-3xl border-4 border-slate-700 shadow-2xl max-w-2xl w-full mx-auto animate-in zoom-in-95",children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsxs("h3",{className:"text-xl font-black text-blue-400 uppercase tracking-widest flex items-center gap-2",children:[o.jsx("span",{className:"animate-pulse",children:""})," Pro Comms Protocol"]}),o.jsxs("div",{className:"flex gap-4 text-xs font-bold text-slate-500 uppercase",children:[o.jsxs("span",{children:["WPM: ",o.jsx("span",{className:"text-white",children:d})]}),o.jsxs("span",{children:["Accuracy: ",o.jsxs("span",{className:`${m<90?"text-red-400":"text-green-400"}`,children:[m,"%"]})]})]})]}),o.jsx("p",{className:"text-slate-400 text-sm font-bold mb-4",children:"Type the message below exactly to transmit. Professionalism is key, Cadet."}),o.jsxs("div",{className:"relative font-mono text-lg leading-relaxed mb-6 bg-slate-800 rounded-xl overflow-hidden border-2 border-slate-600",children:[o.jsx("div",{className:"absolute inset-0 p-4 text-slate-600 pointer-events-none whitespace-pre-wrap",children:n}),o.jsx("textarea",{ref:y,value:s,onChange:v,className:"w-full h-48 bg-transparent text-white p-4 outline-none resize-none relative z-10 whitespace-pre-wrap",spellCheck:!1,placeholder:"Start typing..."})]}),s.length>0&&s!==n&&o.jsx("div",{className:"bg-red-500/10 text-red-400 px-4 py-2 rounded-lg text-xs font-bold mb-4 border border-red-500/20 text-center animate-pulse",children:"match the template exactly"}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:t,className:"px-6 py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-800 transition-colors",children:"Cancel"}),o.jsx("button",{onClick:()=>e(s),disabled:!_,className:`flex-1 py-3 rounded-xl font-black uppercase tracking-wider transition-all
                        ${_?"bg-green-500 text-white shadow-lg shadow-green-500/20 hover:scale-105 active:scale-95":"bg-slate-800 text-slate-600 cursor-not-allowed"}
                    `,children:_?"Transmit Message ":`Complete Typing (${Math.round(s.length/n.length*100)}%)`})]})]})},uE=[{id:"robot_1",name:"Mecha Bot",price:100,preview:"https://api.dicebear.com/7.x/bottts/svg?seed=Felix",type:"avatar"},{id:"robot_2",name:"Cyber Droid",price:200,preview:"https://api.dicebear.com/7.x/bottts/svg?seed=Aneka",type:"avatar"},{id:"adventurer",name:"Space Explorer",price:500,preview:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix",type:"avatar"},{id:"wizard",name:"Techno Wizard",price:1e3,preview:"https://api.dicebear.com/7.x/avataaars/svg?seed=Wizard",type:"avatar"}],dE=[{id:"confetti",name:"Victory Confetti",price:100,preview:"",type:"effect"},{id:"fireworks",name:"Code Fireworks",price:300,preview:"",type:"effect"},{id:"matrix",name:"Matrix Rain",price:500,preview:"",type:"effect"}],Wi=[{id:"default",name:"Galactic Standard",description:"The standard issue interface for all cadets.",price:0,bgGradient:"bg-slate-900",accentColor:"indigo"},{id:"cyberpunk",name:"Neon City",description:"High-tech, low-life. Maximum cyber vibes.",price:500,bgGradient:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",accentColor:"cyan"},{id:"retro",name:"8-Bit Arcade",description:"Old school cool. Press start to play.",price:300,bgGradient:"bg-slate-950",accentColor:"green",font:"font-mono"},{id:"royal",name:"Imperial Gold",description:"Luxury interface for distinguished achievers.",price:1e3,bgGradient:"bg-gradient-to-br from-slate-900 via-slate-800 to-amber-900/20",accentColor:"amber"},{id:"nature",name:"Zen Garden",description:"Peaceful and organic. Flow like water.",price:200,bgGradient:"bg-gradient-to-br from-emerald-950 to-teal-900",accentColor:"emerald"},{id:"hacker",name:"The Mainframe",description:"Access granted. Matrix protocols active.",price:666,bgGradient:"bg-black text-green-500 font-mono",accentColor:"green",font:"font-mono"},{id:"minecraft",name:"Block World",description:"Build your dreams, one block at a time.",price:400,bgGradient:"bg-gradient-to-b from-sky-400 to-green-600",accentColor:"green"},{id:"roblox",name:"Blox Verse",description:"OOF! The ultimate playground style.",price:350,bgGradient:"bg-gradient-to-br from-red-600 via-slate-800 to-blue-600",accentColor:"red"}],hE=C.createContext(void 0),N5=({children:n})=>{const[e,t]=C.useState(()=>localStorage.getItem("spark_active_theme")||"default"),[s,i]=C.useState(()=>{const K=localStorage.getItem("spark_unlocked_themes");return K?JSON.parse(K):["default"]}),[l,c]=C.useState(()=>{const K=localStorage.getItem("spark_coins");return K?parseInt(K):1e3}),[d,f]=C.useState(()=>localStorage.getItem("spark_active_avatar")||"default"),[m,g]=C.useState(()=>{const K=localStorage.getItem("spark_unlocked_avatars");return K?JSON.parse(K):["default"]}),[y,v]=C.useState(()=>localStorage.getItem("spark_active_effect")||"default"),[_,k]=C.useState(()=>{const K=localStorage.getItem("spark_unlocked_effects");return K?JSON.parse(K):["default"]});C.useEffect(()=>{localStorage.setItem("spark_active_theme",e),localStorage.setItem("spark_unlocked_themes",JSON.stringify(s)),localStorage.setItem("spark_coins",l.toString()),localStorage.setItem("spark_active_avatar",d),localStorage.setItem("spark_unlocked_avatars",JSON.stringify(m)),localStorage.setItem("spark_active_effect",y),localStorage.setItem("spark_unlocked_effects",JSON.stringify(_))},[e,s,l,d,m,y,_]);const E=K=>{s.includes(K)&&t(K)},T=K=>{const P=Wi.find(j=>j.id===K);return P?s.includes(K)?!0:l>=P.price?(c(j=>j-P.price),i(j=>[...j,K]),!0):!1:!1},M=K=>{c(P=>P+K)},O=K=>{(m.includes(K)||K==="default")&&f(K)},q=K=>{const P=uE.find(j=>j.id===K);return P?m.includes(K)?!0:l>=P.price?(c(j=>j-P.price),g(j=>[...j,K]),!0):!1:!1},$=K=>{(_.includes(K)||K==="default")&&v(K)},Q=K=>{const P=dE.find(j=>j.id===K);return P?_.includes(K)?!0:l>=P.price?(c(j=>j-P.price),k(j=>[...j,K]),!0):!1:!1};return o.jsx(hE.Provider,{value:{activeTheme:e,unlockedThemes:s,activeAvatar:d,unlockedAvatars:m,activeEffect:y,unlockedEffects:_,coins:l,equipTheme:E,buyTheme:T,equipAvatar:O,buyAvatar:q,equipEffect:$,buyEffect:Q,addCoins:M},children:n})},Nf=()=>{const n=C.useContext(hE);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},fE=C.createContext(void 0),O0=()=>{const n=C.useContext(fE);if(!n)throw new Error("useFocusSession must be used within FocusSessionProvider");return n},E5=({children:n})=>{const{user:e}=ms(),[t,s]=C.useState(null),[i,l]=C.useState([]),[c,d]=C.useState(0),[f,m]=C.useState(0),[g,y]=C.useState(0);C.useEffect(()=>{e!=null&&e.uid&&v()},[e==null?void 0:e.uid]),C.useEffect(()=>{if(!t){d(0);return}const O=setInterval(()=>{const q=Math.floor((Date.now()-t.startTime.getTime())/1e3);d(q)},1e3);return()=>clearInterval(O)},[t]);const v=async()=>{if(!(!J||!(e!=null&&e.uid)))try{const O=new Date;O.setDate(O.getDate()-30);const q=Gt(je(J,"focus_sessions"),wt("studentId","==",e.uid),gu("startTime","desc"),_f(100)),Q=(await st(q)).docs.map(D=>{var he,ie;const A=D.data();return{id:D.id,...A,startTime:((he=A.startTime)==null?void 0:he.toDate())||new Date,endTime:(ie=A.endTime)==null?void 0:ie.toDate()}});l(Q);const K=new Date().toISOString().split("T")[0],j=Q.filter(D=>D.date===K).reduce((D,A)=>D+(A.duration||0),0);m(j);const V=new Date;V.setDate(V.getDate()-7);const L=Q.filter(D=>new Date(D.date)>=V).reduce((D,A)=>D+(A.duration||0),0);y(L)}catch(O){console.error("Error loading session history:",O)}},_=()=>{if(!(e!=null&&e.uid)||t)return;const O=new Date,q={studentId:e.uid,startTime:O,date:O.toISOString().split("T")[0],stats:{missionsWorked:0,arcadeGames:0,xpEarned:0,stepsCompleted:0}};s(q),console.log(" Focus session started!")},k=async()=>{if(!t||!J||!(e!=null&&e.uid))return;const O=new Date,q=Math.floor((O.getTime()-t.startTime.getTime())/6e4);({...t});try{await cs(je(J,"focus_sessions"),{studentId:e.uid,startTime:t.startTime,endTime:O,duration:q,date:t.date,stats:t.stats}),console.log(` Session saved: ${q} minutes`),s(null),d(0),v()}catch($){console.error("Error saving session:",$)}},E=()=>{t&&s({...t,stats:{...t.stats,missionsWorked:t.stats.missionsWorked+1}})},T=O=>{t&&s({...t,stats:{...t.stats,arcadeGames:t.stats.arcadeGames+1,xpEarned:t.stats.xpEarned+O}})},M=()=>{t&&s({...t,stats:{...t.stats,stepsCompleted:t.stats.stepsCompleted+1}})};return o.jsx(fE.Provider,{value:{activeSession:t,sessionHistory:i,elapsedSeconds:c,startSession:_,endSession:k,incrementMissions:E,incrementArcade:T,incrementSteps:M,todayFocusMinutes:f,weekFocusMinutes:g},children:n})},_t=n=>{try{const e=window.AudioContext||window.webkitAudioContext;if(!e)return;const t=new e,s=t.createOscillator(),i=t.createGain();s.connect(i),i.connect(t.destination);const l=t.currentTime;if(n==="hover")s.type="sine",s.frequency.setValueAtTime(800,l),s.frequency.exponentialRampToValueAtTime(1200,l+.05),i.gain.setValueAtTime(.05,l),i.gain.exponentialRampToValueAtTime(.001,l+.05),s.start(l),s.stop(l+.05);else if(n==="click")s.type="square",s.frequency.setValueAtTime(400,l),s.frequency.exponentialRampToValueAtTime(600,l+.1),i.gain.setValueAtTime(.1,l),i.gain.exponentialRampToValueAtTime(.001,l+.1),s.start(l),s.stop(l+.1);else if(n==="open")s.type="triangle",s.frequency.setValueAtTime(200,l),s.frequency.linearRampToValueAtTime(600,l+.3),i.gain.setValueAtTime(.1,l),i.gain.linearRampToValueAtTime(0,l+.3),s.start(l),s.stop(l+.3);else if(n==="success"){const c=(d,f)=>{const m=t.createOscillator(),g=t.createGain();m.type="sine",m.frequency.value=d,m.connect(g),g.connect(t.destination),g.gain.setValueAtTime(.1,f),g.gain.exponentialRampToValueAtTime(.001,f+.5),m.start(f),m.stop(f+.5)};c(523.25,l),c(659.25,l+.1),c(783.99,l+.2),c(1046.5,l+.3)}}catch{}},k5=({project:n,assignment:e,updateProject:t,closeModal:s})=>{const[i,l]=C.useState(n.title?"CUSTOMIZE":"BRIEFING"),[c,d]=C.useState(!1);C.useEffect(()=>{!n.title&&i==="CUSTOMIZE"&&(n.station!==e.station&&t({station:e.station}),n.description||t({description:`My plan for the ${e.title} is to build...`}))},[i,n.title,n.station,n.description,e,t]);const f=async()=>{if(!n.title||!n.description)return;_t("click"),d(!0);const m=await m5(n.title,n.description);t({coverImage:m||`https://placehold.co/600x400/indigo/white?text=${encodeURIComponent(n.title)}`}),d(!1),_t("success")};return i==="BRIEFING"?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-slate-900 text-white p-6 rounded-3xl border-4 border-slate-700 shadow-2xl relative overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 bg-blue-500/10 pointer-events-none bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0IiBoZWlnaHQ9IjQiPgo8cmVjdCB3aWR0aD0iNCIgaGVpZ2h0PSI0IiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9IjAuMDUiLz4KPC9zdmc+')] opacity-50"}),o.jsxs("div",{className:"relative z-10 text-center space-y-4",children:[o.jsx("div",{className:"inline-block bg-blue-600 px-4 py-1 rounded-full text-xs font-black uppercase tracking-widest animate-pulse border border-blue-400",children:"Incoming Mission"}),o.jsx("h2",{className:"text-4xl font-black uppercase tracking-tight text-blue-300 drop-shadow-lg",children:e.title}),o.jsxs("div",{className:"flex justify-center gap-4 text-slate-400 font-bold uppercase text-xs",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-xl",children:""})," Station: ",e.station]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"text-xl",children:""})," Due: Friday"]})]}),o.jsx("div",{className:"bg-slate-800/80 p-6 rounded-2xl border border-slate-600 text-left",children:o.jsxs("p",{className:"text-lg leading-relaxed font-bold text-slate-300",children:[o.jsx("span",{className:"text-blue-400",children:"Commander:"}),' "',e.description,'"']})}),o.jsxs("div",{className:"pt-4",children:[o.jsx("p",{className:"text-xs font-black uppercase text-slate-500 mb-3 tracking-widest",children:"Mission Badges Available"}),o.jsx("div",{className:"flex justify-center gap-6",children:e.badges.map(m=>o.jsxs("div",{className:"flex flex-col items-center group/badge",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center text-3xl border-2 border-slate-600 group-hover/badge:border-yellow-400 group-hover/badge:scale-110 transition-all shadow-lg",children:m.icon}),o.jsx("span",{className:"text-xs font-bold text-slate-500 mt-2 group-hover/badge:text-yellow-400",children:m.name})]},m.id))})]})]})]}),o.jsx("button",{onClick:()=>{_t("click"),l("CUSTOMIZE")},className:"w-full py-4 rounded-3xl bg-blue-600 text-white font-black text-xl uppercase tracking-wider border-b-8 border-blue-800 active:border-b-0 active:translate-y-2 hover:bg-blue-500 transition-colors shadow-xl",children:"Accept Mission"})]}):o.jsxs("div",{className:"space-y-8 text-center animate-in fade-in slide-in-from-right-8",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"bg-blue-50 p-4 rounded-2xl border-2 border-blue-100 mb-6",children:o.jsxs("p",{className:"text-blue-500 font-black uppercase text-xs tracking-wider",children:["Mission Accepted: ",e.title]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-wider mb-2",children:"Codename Your Project"}),o.jsx("input",{value:n.title,onChange:m=>t({title:m.target.value}),className:"w-full text-3xl font-black p-4 rounded-3xl border-4 border-slate-200 focus:border-blue-400 outline-none text-slate-800 text-center transition-all focus:scale-105",placeholder:"e.g. Mars Explorer X1",autoFocus:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-wider mb-2",children:"Your Approach"}),o.jsx("textarea",{value:n.description,onChange:m=>t({description:m.target.value}),className:"w-full text-lg font-bold p-4 rounded-3xl border-4 border-slate-200 focus:border-blue-400 outline-none text-slate-600 min-h-[120px] transition-all focus:scale-105",placeholder:"How will you solve the mission?"})]})]}),o.jsx("div",{className:"bg-slate-50 p-6 rounded-[2rem] border-4 border-dashed border-slate-200 flex flex-col items-center justify-center min-h-[200px]",children:n.coverImage?o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:n.coverImage,alt:"Cover",className:"rounded-2xl shadow-lg max-h-64 object-cover transform rotate-2 group-hover:rotate-0 transition-transform duration-500"}),o.jsx("button",{onClick:f,className:"absolute -bottom-4 -right-4 bg-white p-3 rounded-full shadow-lg border-2 border-slate-100 hover:scale-110 transition-transform",children:""})]}):o.jsxs("button",{onClick:f,disabled:c||!n.title,className:`flex flex-col items-center gap-2 p-4 transition-all ${c?"opacity-50":"hover:scale-105"}`,children:[o.jsx("span",{className:"text-5xl animate-bounce",children:c?"":""}),o.jsx("span",{className:"font-black text-slate-400 uppercase",children:c?"Conjuring...":"Generate Mission Cover"})]})}),o.jsxs("div",{className:"flex gap-4",children:[o.jsx("button",{onClick:()=>l("BRIEFING"),className:"px-6 py-4 rounded-3xl bg-slate-200 text-slate-500 font-black text-xl border-b-8 border-slate-300 active:border-b-0 active:translate-y-2 hover:bg-slate-300 transition-colors",children:"Back"}),o.jsx("button",{onClick:()=>{_t("success"),s()},disabled:!n.title,className:"flex-1 py-4 rounded-3xl bg-green-500 text-white font-black text-xl uppercase tracking-wider border-b-8 border-green-700 active:border-b-0 active:translate-y-2 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-400 transition-colors",children:"Start Journey"})]})]})},S5=({project:n,assignment:e,updateProject:t,closeModal:s})=>{const{processTemplates:i}=xr(),l=i.map(d=>({id:d.id,name:d.name,description:d.description||"Custom Workflow",color:"bg-indigo-500",icon:""}));C.useEffect(()=>{if(e.recommendedWorkflow){const d=l.find(f=>f.id===e.recommendedWorkflow);d&&n.workflowId!==d.id&&(console.log("Auto-selecting assigned workflow:",d.name),t({workflowId:d.id}))}},[e.recommendedWorkflow,n.workflowId,t,l]);const c=async()=>{if(_t("success"),n.workflowId)try{const{getFirestore:d,doc:f,getDoc:m,Firestore:g}=await Ur(async()=>{const{getFirestore:_,doc:k,getDoc:E,Firestore:T}=await Promise.resolve().then(()=>Mo);return{getFirestore:_,doc:k,getDoc:E,Firestore:T}},void 0,import.meta.url),{db:y}=await Ur(async()=>{const{db:_}=await Promise.resolve().then(()=>D4);return{db:_}},void 0,import.meta.url);if(!y)throw new Error("Firestore not initialized");const v=await m(f(y,"process_templates",n.workflowId));if(v.exists()){const _=v.data();if(console.log(" [DEBUG] Raw Workflow Template Data:",_),_!=null&&_.phases){let k=[...n.steps||[]],E=!1;k.length===0?(k=_.phases.map(T=>({id:T.id||Date.now().toString()+Math.random(),title:T.name,status:"todo",resources:T.resources||[]})),E=!0,console.log(" Generated new steps from workflow")):(k=k.map((T,M)=>{const O=_.phases[M];return O&&(O.name===T.title||M<_.phases.length)?{...T,resources:O.resources||[]}:T}),E=!0,console.log(" Merged resources into existing steps")),E&&t({steps:k})}}}catch(d){console.error("Failed to auto-generate steps:",d)}s()};return o.jsxs("div",{className:"space-y-8",children:[o.jsx("div",{className:"bg-indigo-50 p-4 rounded-2xl border-2 border-indigo-100 text-center",children:o.jsxs("p",{className:"text-indigo-600 font-bold",children:["Recommended for this mission: ",o.jsx("span",{className:"uppercase font-black",children:e.recommendedWorkflow})]})}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map(d=>o.jsxs("div",{onClick:()=>{_t("click"),t({workflowId:d.id})},className:`
                relative p-6 rounded-[2rem] border-4 cursor-pointer transition-all transform hover:scale-105 duration-300
                ${n.workflowId===d.id?`${d.color} border-white shadow-xl scale-105 text-white ring-4 ring-offset-2 ring-blue-200`:"bg-white border-slate-200 text-slate-600 hover:border-slate-300"}
              `,children:[d.id===e.recommendedWorkflow&&o.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-yellow-400 text-yellow-900 text-[10px] font-black uppercase px-3 py-1 rounded-full shadow-sm z-10 whitespace-nowrap",children:"Suggested"}),o.jsx("div",{className:"text-5xl mb-4 transform transition-transform group-hover:rotate-12",children:d.icon}),o.jsx("h3",{className:"text-xl font-black mb-2",children:d.name}),o.jsx("p",{className:`text-sm font-bold ${n.workflowId===d.id?"text-white/90":"text-slate-400"}`,children:d.description})]},d.id))}),o.jsx("button",{onClick:c,disabled:!n.workflowId,className:"w-full py-4 rounded-3xl bg-green-500 text-white font-black text-xl uppercase tracking-wider border-b-8 border-green-700 active:border-b-0 active:translate-y-2 disabled:opacity-50 hover:bg-green-400 transition-colors",children:"Lock In Strategy"})]})},T5=({project:n,updateProject:e,closeModal:t})=>{const[s,i]=C.useState(""),l=()=>{if(!s.trim())return;_t("click");const f={id:Date.now().toString(),title:s,status:"todo"};e({steps:[...n.steps,f]}),i("")},c=f=>{_t("click"),e({steps:n.steps.filter(m=>m.id!==f)})},d=n.status==="building"||n.status==="submitted"||n.status==="published";return o.jsxs("div",{className:"space-y-8",children:[!d&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{value:s,onChange:f=>i(f.target.value),onKeyDown:f=>f.key==="Enter"&&l(),className:"flex-1 text-lg font-bold p-4 rounded-2xl border-2 border-slate-200 focus:border-blue-400 outline-none",placeholder:"Add a mission step..."}),o.jsx("button",{onClick:l,className:"bg-blue-500 text-white p-4 rounded-2xl font-black text-xl border-b-4 border-blue-700 active:border-b-0 active:translate-y-1 hover:bg-blue-400 transition-colors",children:""})]}),o.jsxs("div",{className:"space-y-3",children:[n.steps.length===0&&o.jsx("div",{className:"text-center text-slate-400 font-bold italic py-8",children:"No steps yet."}),n.steps.map((f,m)=>o.jsxs("div",{className:"bg-slate-50 p-4 rounded-2xl border-b-4 border-slate-200 flex items-center justify-between animate-in fade-in slide-in-from-bottom-2",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"bg-slate-200 text-slate-500 font-black w-8 h-8 flex items-center justify-center rounded-full",children:m+1}),o.jsx("span",{className:"font-bold text-slate-700 text-lg",children:f.title})]}),!d&&o.jsx("button",{onClick:()=>c(f.id),className:"text-red-300 hover:text-red-500 p-2",children:""})]},f.id))]}),d?o.jsx("div",{className:"text-center p-4 bg-green-100 rounded-2xl text-green-700 font-bold",children:"Mission in progress! Steps are locked."}):o.jsx("button",{onClick:()=>{_t("success"),e({status:"building"}),t()},disabled:n.steps.length===0,className:"w-full py-4 rounded-3xl bg-green-500 text-white font-black text-xl uppercase tracking-wider border-b-8 border-green-700 active:border-b-0 active:translate-y-2 disabled:opacity-50 hover:bg-green-400 transition-colors",children:"Launch Mission (Start Building) "})]})},j5=({project:n,updateProject:e,closeModal:t,taskId:s})=>{var A,he;const{startSession:i}=L0(),l=s.replace("step-",""),c=n.steps.find(ie=>ie.id===l),[d,f]=C.useState(""),[m,g]=C.useState(null),[y,v]=C.useState(null),[_,k]=C.useState(!1),[E,T]=C.useState(!1),[M,O]=C.useState(""),[q,$]=C.useState(!1),[Q,K]=C.useState(!1),P=C.useRef(null),{activeTheme:j}=Nf();Wi.find(ie=>ie.id===j)||Wi[0];const V=`Subject: Mission Report - ${(c==null?void 0:c.title)||"Unknown Step"}

Dear Commander,

I have successfully completed the tasks for this mission step.
Attached is the evidence of my work.

Key Learnings:
- [Enter 1 key learning here]

Ready for inspection.

Signed,
${n.studentId||"Cadet"}`;if(!c)return o.jsx("div",{children:"Error: Step not found"});const I=ie=>{var le;if((le=ie.target.files)!=null&&le[0]){_t("click"),g(ie.target.files[0]);const G=new FileReader;G.onloadend=()=>v(G.result),G.readAsDataURL(ie.target.files[0])}},L=async()=>{_t("click"),k(!0);let ie;if(y&&(ie=y.split(",")[1]),(await g5(c.title)).approved){_t("success");const G=n.steps.map(F=>F.id===l?{...F,status:"PENDING_REVIEW",evidence:y||void 0,note:d}:F);e({steps:G}),console.log(" [StudentWizard] About to call api.syncProject with station:",n.station),await fh.syncProject({...n,steps:G}),console.log(" [StudentWizard] api.syncProject completed!"),fh.submitStepEvidence(c.id,{note:d,image:ie}),setTimeout(()=>t(),1500)}k(!1)},D=async()=>{if(!M.trim()){alert("Please enter a commit message");return}_t("click");const ie={id:`commit-${Date.now()}`,timestamp:new Date,message:M,stepId:l},le={...n,commits:[...n.commits||[],ie]};e(le),await fh.syncProject(le),O(""),$(!1),_t("success"),alert(" Progress saved!")};return c.status==="done"?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),o.jsx("h3",{className:"text-2xl font-black text-slate-800",children:"Step Completed!"}),o.jsx("p",{className:"text-green-600 font-bold",children:"Commander Approved"}),c.evidence&&o.jsx("img",{src:c.evidence,className:"mt-6 rounded-2xl shadow-lg mx-auto max-h-60 border-4 border-white transform -rotate-1",alt:"Evidence"})]}):c.status==="REJECTED"?o.jsxs("div",{className:"text-center py-8 space-y-6",children:[o.jsx("div",{className:"w-24 h-24 mx-auto bg-red-100 rounded-full flex items-center justify-center animate-bounce",children:o.jsx("span",{className:"text-5xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-red-600",children:"Revision Required"}),o.jsx("p",{className:"text-slate-500 font-bold",children:"Commander Feedback:"})]}),o.jsx("div",{className:"bg-red-50 p-6 rounded-2xl border-2 border-red-100 text-left max-w-sm mx-auto shadow-sm",children:o.jsxs("p",{className:"text-red-800 font-bold",children:['"',c.reviewNotes||"Please review instructions and try again.",'"']})}),o.jsx("button",{onClick:()=>{const ie=n.steps.map(le=>le.id===l?{...le,status:"DOING"}:le);e({steps:ie})},className:"w-full py-4 rounded-3xl bg-slate-800 text-white font-black text-xl uppercase tracking-wider hover:bg-slate-700 transition-colors shadow-lg",children:"Retry Mission Step"})]}):(console.log("TaskStepContent step:",c),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-blue-50 p-6 rounded-3xl border-4 border-blue-100 text-blue-900 font-bold text-center text-lg relative overflow-hidden",children:[o.jsxs("div",{className:"relative z-10",children:["Mission: ",c.title]}),o.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-blue-200 rounded-bl-full opacity-50"})]}),c.status==="PENDING_REVIEW"&&o.jsxs("div",{className:"bg-amber-50 p-6 rounded-3xl border-4 border-amber-100 flex flex-col items-center text-center space-y-4 animate-in fade-in slide-in-from-top-4",children:[o.jsx("div",{className:"w-16 h-16 bg-amber-100 rounded-full flex items-center justify-center animate-pulse text-3xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-black text-amber-600 uppercase tracking-wide",children:"Under Review"}),o.jsx("p",{className:"text-amber-800/70 font-bold text-sm",children:"Mission Control is analyzing your data..."})]}),o.jsxs("div",{className:"w-full bg-white/50 p-4 rounded-xl border border-amber-200/50 text-left",children:[o.jsx("p",{className:"text-xs font-black uppercase text-amber-400 mb-1",children:"Your Note"}),o.jsxs("p",{className:"text-slate-600 text-sm italic",children:['"',c.note||"No notes",'"']})]})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-wider mb-3",children:"Project Tools (Debug v3)"}),o.jsxs("span",{className:"text-xs text-slate-300 font-mono",children:["Res: ",((A=c.resources)==null?void 0:A.length)||0]})]}),(!c.resources||c.resources.length===0)&&o.jsx("div",{className:"text-sm text-slate-400 italic",children:"No tools attached to this step. (Check Factory)"}),o.jsx("div",{className:"flex flex-wrap gap-3",children:c.resources&&c.resources.map((ie,le)=>o.jsxs("button",{onClick:()=>{console.log("Launching session for:",ie.url),i(ie.url,30,ie.title)},className:"flex items-center gap-2 px-4 py-3 bg-white border-2 border-slate-200 rounded-xl font-bold text-slate-600 hover:border-blue-400 hover:text-blue-600 hover:scale-105 transition-all shadow-sm",children:[o.jsx("span",{children:ie.title}),o.jsx("span",{className:"text-xs opacity-50",children:""})]},le))})]}),c.status!=="PENDING_REVIEW"||E?o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-black text-slate-400 uppercase tracking-wider mb-3",children:"Evidence"}),o.jsxs("div",{onClick:()=>{var ie;return(ie=P.current)==null?void 0:ie.click()},className:"border-4 border-dashed border-slate-300 rounded-3xl p-8 flex flex-col items-center justify-center cursor-pointer hover:border-blue-400 hover:bg-blue-50 transition-colors bg-slate-50 min-h-[200px] group relative overflow-hidden",children:[y?o.jsx("img",{src:y,alt:"Preview",className:"h-48 object-cover rounded-2xl shadow-md transform rotate-2 group-hover:rotate-0 transition-transform relative z-10"}):o.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4 text-blue-500 group-hover:scale-110 transition-transform shadow-sm",children:""}),o.jsx("span",{className:"text-lg font-bold text-slate-400",children:"Upload Photo / Screenshot"})]}),o.jsx("input",{type:"file",ref:P,onChange:I,className:"hidden",accept:"image/*"})]}),o.jsxs("div",{className:"mt-2 flex justify-center",children:[o.jsx("button",{onClick:()=>$(!q),className:"w-full py-4 bg-cyan-600/10 border-2 border-cyan-500/30 hover:bg-cyan-600 hover:text-white text-cyan-400 rounded-2xl font-bold flex items-center justify-center gap-3 transition-all mb-4",children:" Save Progress"}),q&&o.jsxs("div",{className:"mb-4 p-4 bg-cyan-50 rounded-2xl border-2 border-cyan-100",children:[o.jsx("label",{className:"block text-xs font-black text-cyan-600 uppercase tracking-wider mb-2",children:"Commit Message"}),o.jsx("input",{type:"text",value:M,onChange:ie=>O(ie.target.value),placeholder:"e.g., Finished motor assembly",className:"w-full p-3 bg-white border-2 border-cyan-200 rounded-xl font-medium text-slate-600 outline-none focus:border-cyan-500 mb-2"}),o.jsx("button",{onClick:D,className:"w-full py-2 bg-cyan-600 hover:bg-cyan-700 text-white rounded-xl font-bold transition-colors",children:"Save Commit"})]}),((he=n.commits)==null?void 0:he.filter(ie=>ie.stepId===l).length)>0&&o.jsxs("div",{className:"mb-4 p-4 bg-slate-50 rounded-2xl border-2 border-slate-100",children:[o.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Previous Saves"}),o.jsx("div",{className:"space-y-2",children:n.commits.filter(ie=>ie.stepId===l).slice(-3).reverse().map(ie=>o.jsxs("div",{className:"p-2 bg-white rounded-lg border border-slate-200",children:[o.jsx("p",{className:"text-sm font-bold text-slate-700",children:ie.message}),o.jsx("p",{className:"text-xs text-slate-400",children:new Date(ie.timestamp).toLocaleString()})]},ie.id))})]}),o.jsx("button",{onClick:()=>{const ie=sessionStorage.getItem("temp_evidence");ie?(v(ie),fetch(ie).then(le=>le.blob()).then(le=>{const G=new File([le],"evidence_screenshot.png",{type:"image/png"});g(G),_t("click")})):alert("No screenshot found! Take a photo in the Mission Tool/Session first.")},className:"text-xs font-bold text-indigo-500 hover:text-indigo-700 underline flex items-center gap-1",children:" Use Last Session Screenshot"})]})]}),o.jsx("div",{className:"flex justify-end mb-2",children:o.jsx("button",{onClick:()=>K(!Q),className:`text-xs font-black uppercase tracking-wider px-3 py-1 rounded-full border transition-all ${Q?"bg-indigo-500 text-white border-indigo-500":"bg-white text-slate-400 border-slate-300"}`,children:Q?" Pro Mode Active":"Enable Pro Mode"})}),Q?o.jsx(_5,{template:V,onComplete:ie=>{f(ie),K(!1),_t("success")},onCancel:()=>K(!1)}):o.jsx("textarea",{value:d,onChange:ie=>f(ie.target.value),className:"w-full rounded-3xl border-4 border-slate-200 p-4 font-bold text-slate-600 min-h-[100px] focus:border-blue-400 outline-none transition-colors resize-none",placeholder:"How did it go? Notes for Commander..."}),o.jsx("button",{onClick:L,disabled:_||!d&&!m,className:"w-full py-4 rounded-3xl bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-black text-xl uppercase tracking-wider border-b-8 border-indigo-800 active:border-b-0 active:translate-y-2 disabled:opacity-50 hover:to-indigo-500 transition-all shadow-xl shadow-blue-500/20",children:_?"Transmitting...":"Submit for Review"})]}):o.jsx("button",{onClick:t,className:"w-full py-4 rounded-3xl bg-slate-100 text-slate-500 font-bold hover:bg-slate-200 transition-colors",children:"Close"})]}))},C5=({project:n,updateProject:e,closeModal:t})=>o.jsxs("div",{className:"text-center space-y-8",children:[o.jsx("div",{className:"text-6xl animate-bounce",children:""}),o.jsx("h3",{className:"text-3xl font-black text-slate-800",children:"Ready to Launch!"}),o.jsx("p",{className:"text-slate-500 font-bold",children:"You've completed all steps. Share your victory!"}),o.jsxs("div",{className:"max-w-md mx-auto bg-slate-50 p-6 rounded-3xl border-4 border-slate-200",children:[o.jsx("input",{className:"w-full text-lg font-bold p-3 rounded-2xl border-2 border-slate-200 mb-4",placeholder:"YouTube Link..."}),o.jsx("button",{onClick:()=>{_t("success"),e({status:"submitted"}),t()},className:"w-full bg-indigo-500 text-white py-3 rounded-2xl font-black border-b-4 border-indigo-700 active:border-b-0 active:translate-y-1 hover:bg-indigo-400 transition-colors",children:" PUBLISH TO WORLD"})]})]}),I5=({assignment:n,initialProject:e,isConnected:t=!0,onExit:s})=>{var he,ie;const{activeTheme:i}=Nf(),l=Wi.find(le=>le.id===i)||Wi[0],[c,d]=C.useState(e),[f,m]=C.useState(null),[g,y]=C.useState(!1),[v,_]=C.useState(null),k=C.useRef(null),[E]=C.useState(w5()),[T,M]=C.useState(""),[O]=C.useState([{id:"p1",name:"Alex",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Alex",stepId:"strategy",color:"bg-pink-500"},{id:"p2",name:"Sam",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Sam",stepId:"step-1700000000000",color:"bg-blue-500"},{id:"p3",name:"Jordan",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Jordan",stepId:"publish",color:"bg-emerald-500"}]);C.useEffect(()=>{c.title&&M(cE(c.title))},[c.title]);const{startSession:q,activeSession:$,incrementMissions:Q}=O0();C.useEffect(()=>{$||(q(),console.log(" Auto-started focus session for project work")),$&&Q()},[]),C.useEffect(()=>{console.log(" [StudentWizard] Received project update from parent:",e.id),d(e)},[e]);const K=async le=>{const G={...c,...le};d(G),y(!0),_(null);const F=await fh.syncProject(G);y(!1),F.success?console.log(" [StudentWizard] Save successful"):(console.error(" [StudentWizard] Save failed:",F.error),_(F.error||"Failed to save"))},P=le=>{_t("open"),m(le)},V=(()=>{const le=[];le.push({id:"identity",type:"IDENTITY",title:"The Spark",status:c.title?"COMPLETED":"ACTIVE",icon:"",onClick:()=>P("identity"),onHover:()=>_t("hover")}),le.push({id:"strategy",type:"STRATEGY",title:"Compass",status:c.title?c.workflowId?"COMPLETED":"ACTIVE":"LOCKED",icon:"",onClick:()=>P("strategy"),onHover:()=>_t("hover")}),le.push({id:"blueprint",type:"BLUEPRINT",title:"Blueprint",status:c.workflowId?c.status==="building"||c.status==="submitted"||c.status==="published"?"COMPLETED":"ACTIVE":"LOCKED",icon:"",onClick:()=>P("blueprint"),onHover:()=>_t("hover")}),(c.status==="building"||c.status==="submitted"||c.status==="published")&&c.steps.forEach((U,X)=>{let z="LOCKED";if(U.status==="done")z="COMPLETED";else if(U.status==="PENDING_REVIEW")z="REVIEW";else if(U.status==="REJECTED")z="ACTIVE";else{const Ne=c.steps[X-1];(!Ne||Ne.status==="done")&&(z="ACTIVE")}(c.status==="submitted"||c.status==="published")&&(z="COMPLETED");let Y="";U.status==="done"&&(Y=""),U.status==="PENDING_REVIEW"&&(Y=""),U.status==="REJECTED"&&(Y=""),le.push({id:`step-${U.id}`,type:"TASK",title:U.title,status:z,icon:Y,onClick:()=>P(`step-${U.id}`),onHover:()=>_t("hover")})});const G=c.steps.length>0&&c.steps.every(U=>U.status==="done"),F=c.status==="building"&&G;return le.push({id:"publish",type:"PUBLISH",title:"Launch",status:c.status==="submitted"||c.status==="published"?"COMPLETED":F?"ACTIVE":"LOCKED",icon:"",onClick:()=>P("publish"),onHover:()=>_t("hover")}),le})(),I=V.findIndex(le=>le.status==="ACTIVE"||le.status==="REVIEW");C.useEffect(()=>{if(k.current&&I!==-1){const G=I*300+150-window.innerWidth/2+150;k.current.scrollTo({left:Math.max(0,G),behavior:"smooth"})}},[I,c.steps.length,c.status]);const L=C.useCallback(()=>{const le=V.length;if(le<2)return{basePath:"",progressPath:""};const G=300,F=200;let U=`M 150 ${F}`;for(let Y=0;Y<le-1;Y++){const Ne=150+Y*G,re=150+(Y+1)*G,ae=F+(Y%2===0?0:40),xe=F+((Y+1)%2===0?0:40),Ce=Ne+G/2,De=ae,He=Ne+G/2;U+=` C ${Ce} ${De}, ${He} ${xe}, ${re} ${xe}`}let X=`M 150 ${F}`,z=-1;I>0?z=I:I===-1&&c.status==="published"&&(z=le);for(let Y=0;Y<z&&!(Y>=le-1);Y++){const Ne=150+Y*G,re=150+(Y+1)*G,ae=F+(Y%2===0?0:40),xe=F+((Y+1)%2===0?0:40),Ce=Ne+G/2,De=ae,He=Ne+G/2;X+=` C ${Ce} ${De}, ${He} ${xe}, ${re} ${xe}`}return{basePath:U,progressPath:z>0?X:""}},[V,I,c.status]),{basePath:D,progressPath:A}=L();return o.jsxs("div",{className:`h-full flex flex-col w-full overflow-hidden relative selection:bg-blue-500 selection:text-white transition-colors duration-700 ${l.bgGradient} ${l.font||""}`,children:[o.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none",children:o.jsxs("svg",{width:"100%",height:"100%",children:[o.jsx("pattern",{id:"cosmic-grid",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:o.jsx("path",{d:"M 60 0 L 0 0 0 60",fill:"none",stroke:"#60a5fa",strokeWidth:"1"})}),o.jsx("rect",{width:"100%",height:"100%",fill:"url(#cosmic-grid)"})]})}),o.jsxs("div",{className:"absolute inset-0 z-0 pointer-events-none",children:[o.jsx("div",{className:"absolute top-10 left-1/4 w-2 h-2 bg-white rounded-full animate-pulse opacity-50"}),o.jsx("div",{className:"absolute bottom-1/3 right-1/4 w-1 h-1 bg-blue-300 rounded-full animate-pulse opacity-70",style:{animationDelay:"1s"}}),o.jsx("div",{className:"absolute top-1/2 left-10 w-3 h-3 bg-indigo-400 rounded-full animate-pulse opacity-40",style:{animationDelay:"2s"}}),o.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[500px] h-[500px] bg-blue-600/20 rounded-full blur-[100px]"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[600px] h-[600px] bg-indigo-600/20 rounded-full blur-[120px]"})]}),o.jsxs("div",{className:"relative z-20 px-8 py-6 bg-slate-900/80 backdrop-blur-md border-b border-slate-700 flex justify-between items-center shadow-lg",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("div",{className:"flex items-center gap-3 pr-6 border-r border-slate-700",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:`https://api.dicebear.com/7.x/avataaars/svg?seed=${c.studentId||"You"}`,className:"w-12 h-12 rounded-full border-2 border-slate-500 bg-slate-800"}),o.jsx("div",{className:"absolute -bottom-1 -right-1 bg-amber-500 text-amber-900 text-[10px] font-black px-1.5 py-0.5 rounded-md border border-amber-400",children:"LVL 3"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-white font-bold text-sm leading-tight",children:"Cadet Builder"}),o.jsx("div",{className:"w-20 h-1.5 bg-slate-700 rounded-full mt-1 overflow-hidden",children:o.jsx("div",{className:"h-full bg-blue-500 w-[60%] animate-pulse"})}),o.jsx("p",{className:"text-[10px] text-blue-400 font-bold mt-0.5",children:"850 / 1000 XP"})]})]}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-4xl md:text-5xl font-black text-white uppercase tracking-tight flex items-center gap-4 filter drop-shadow-lg",children:[o.jsx("span",{className:"text-5xl animate-bounce",children:T})," ",c.title||n.title]}),o.jsxs("p",{className:"text-slate-400 font-bold text-sm uppercase tracking-wider pl-16 flex items-center gap-2",children:[o.jsx("span",{className:"text-blue-400",children:n.station}),o.jsx("span",{className:"text-slate-600",children:""}),o.jsx("span",{children:"SparkQuest Mission"})]})]})]}),o.jsxs("div",{className:"flex gap-4 items-center",children:[o.jsxs("div",{className:"hidden lg:flex flex-col items-end mr-4 max-w-[200px]",children:[o.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest mb-1",children:"Creator's Mindset"}),o.jsxs("div",{className:"bg-slate-800/50 border border-slate-700 p-2 rounded-xl text-right",children:[o.jsxs("p",{className:"text-xs text-slate-300 italic",children:['"',E.text,'"']}),E.author&&o.jsxs("p",{className:"text-[10px] text-slate-500 font-bold mt-1",children:["- ",E.author]})]})]}),o.jsxs("div",{className:"px-6 py-3 bg-slate-800 text-blue-400 rounded-2xl font-black border-2 border-slate-700 shadow-inner text-lg",children:["Step ",I!==-1?I+1:V.length," ",o.jsx("span",{className:"text-slate-600",children:"/"})," ",V.length]}),s&&o.jsx("button",{onClick:s,className:"px-8 py-3 bg-emerald-500 hover:bg-emerald-400 text-white border-b-4 border-emerald-700 active:border-b-0 active:translate-y-1 rounded-2xl font-black transition-all text-lg flex items-center gap-2 shadow-lg shadow-emerald-500/20",children:"Exit Mission "})]})]}),o.jsx("div",{ref:k,className:"flex-1 overflow-x-auto overflow-y-hidden relative no-scrollbar flex items-center",children:o.jsxs("div",{className:"relative h-[500px] flex items-center px-[calc(50vw-150px)] min-w-max",children:[o.jsxs("svg",{className:"absolute top-0 left-0 w-full h-full pointer-events-none z-0 overflow-visible",children:[o.jsx("path",{d:D,stroke:"#334155",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:"20 10"}),A&&o.jsx("path",{d:A,stroke:"#3b82f6",strokeWidth:"12",fill:"none",strokeLinecap:"round",className:"opacity-30 blur-md"}),A&&o.jsx("path",{d:A,stroke:"#3b82f6",strokeWidth:"8",fill:"none",strokeLinecap:"round",className:"animate-pulse"})]}),o.jsx("div",{className:"flex gap-[108px] z-10 pl-[50px]",children:V.map((le,G)=>o.jsxs("div",{className:`transform transition-all duration-500 ${G%2===0?"-translate-y-0":"translate-y-10"} relative group`,children:[o.jsx("div",{className:"absolute -top-20 left-1/2 -translate-x-1/2 flex -space-x-4 z-50 pointer-events-auto",children:O.filter(F=>F.stepId===le.id||!V.some(U=>U.id===F.stepId)&&(G+1)%2===parseInt(F.id.replace(/\D/g,""))%2).map(F=>o.jsxs("div",{className:"w-14 h-14 rounded-full border-4 border-slate-900 bg-slate-700 overflow-hidden relative shadow-xl transform hover:scale-125 hover:z-50 transition-all cursor-pointer",title:`${F.name} is working on ${le.title}`,children:[o.jsx("img",{src:F.avatar,className:"w-full h-full object-cover",alt:F.name}),o.jsx("div",{className:`absolute bottom-0 right-0 w-4 h-4 rounded-full border-2 border-slate-900 ${F.color||"bg-green-500"}`})]},F.id))}),o.jsx(y5,{...le,isFirst:G===I})]},le.id))}),o.jsx("div",{className:"ml-24 opacity-50 flex flex-col items-center",children:o.jsx("span",{className:"text-6xl filter drop-shadow-[0_0_10px_rgba(255,255,255,0.5)]",children:""})})]})}),f&&o.jsxs(v5,{title:((he=V.find(le=>le.id===f))==null?void 0:he.title)||"",icon:(ie=V.find(le=>le.id===f))==null?void 0:ie.icon,onClose:()=>m(null),color:f.includes("step")?"indigo":"blue",children:[f==="identity"&&o.jsx(k5,{project:c,assignment:n,updateProject:K,closeModal:()=>m(null)}),f==="strategy"&&o.jsx(S5,{project:c,assignment:n,updateProject:K,closeModal:()=>m(null)}),f==="blueprint"&&o.jsx(T5,{project:c,assignment:n,updateProject:K,closeModal:()=>m(null)}),f.startsWith("step-")&&o.jsx(j5,{project:c,assignment:n,updateProject:K,closeModal:()=>m(null),taskId:f}),f==="publish"&&o.jsx(C5,{project:c,assignment:n,updateProject:K,closeModal:()=>m(null)})]})]})};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P5=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),Lw=n=>{const e=P5(n);return e.charAt(0).toUpperCase()+e.slice(1)},pE=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim(),R5=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var D5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M5=C.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:i="",children:l,iconNode:c,...d},f)=>C.createElement("svg",{ref:f,...D5,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:pE("lucide",i),...!l&&!R5(d)&&{"aria-hidden":"true"},...d},[...c.map(([m,g])=>C.createElement(m,g)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=(n,e)=>{const t=C.forwardRef(({className:s,...i},l)=>C.createElement(M5,{ref:l,iconNode:e,className:pE(`lucide-${A5(Lw(n))}`,`lucide-${n}`,s),...i}));return t.displayName=Lw(n),t};/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],L5=me("activity",V5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ac=me("arrow-left",O5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],ir=me("arrow-right",F5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],hs=me("award",U5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],B5=me("bell",z5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],q5=me("book-open",$5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],Ow=me("box",G5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],H5=me("briefcase",W5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fw=me("calendar",K5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Y5=me("camera",Q5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],F0=me("car",X5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ln=me("check",J5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],e3=me("chevron-right",Z5);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],mE=me("circle-alert",t3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],gE=me("circle-check-big",n3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],r3=me("circle-check",s3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],o3=me("circle-question-mark",i3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],l3=me("circle-x",a3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fs=me("clock",c3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],hg=me("copy",u3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],xE=me("cpu",d3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],f3=me("crown",h3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],m3=me("database",p3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],x3=me("download",g3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],or=me("external-link",y3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],U0=me("eye-off",v3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yu=me("eye",b3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],_3=me("file-text",w3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],$d=me("folder",N3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["line",{x1:"22",x2:"2",y1:"6",y2:"6",key:"15w7dq"}],["line",{x1:"22",x2:"2",y1:"18",y2:"18",key:"1ip48p"}],["line",{x1:"6",x2:"6",y1:"2",y2:"22",key:"a2lnyx"}],["line",{x1:"18",x2:"18",y1:"2",y2:"22",key:"8vb6jd"}]],k3=me("frame",E3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],yE=me("funnel",S3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],al=me("gamepad-2",T3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]],C3=me("git-merge",j3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],pc=me("graduation-cap",I3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Uw=me("grid-3x3",A3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],R3=me("grip-vertical",P3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],vE=me("hammer",D3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],V3=me("hexagon",M3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],fg=me("image",L3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Kc=me("key",O3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],U3=me("layout-list",F3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],bE=me("link",z3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],z0=me("loader-circle",B3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ph=me("lock",$3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],pg=me("log-out",q3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],W3=me("map-pin",G3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],wE=me("maximize-2",H3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],Q3=me("maximize",K3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],X3=me("medal",Y3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],Z3=me("menu",J3);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],tD=me("minimize-2",eD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M5 12h14",key:"1ays0h"}]],sD=me("minus",nD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],zw=me("monitor",rD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],_E=me("palette",iD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],NE=me("panels-top-left",oD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],lD=me("pause",aD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ef=me("pen",cD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Ya=me("play",uD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fn=me("plus",dD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],EE=me("power",hD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],pD=me("qr-code",fD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],mg=me("rocket",mD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],gg=me("rotate-ccw",gD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],vu=me("save",xD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Qc=me("search",yD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kE=me("settings",vD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],wD=me("shield",bD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],SE=me("shopping-bag",_D);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],B0=me("sparkles",ND);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],kD=me("square-check-big",ED);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],TD=me("square",SD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yc=me("star",jD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ID=me("tag",CD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],TE=me("target",AD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],RD=me("terminal",PD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],MD=me("text-align-start",DD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Vs=me("trash-2",VD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],jE=me("trending-up",LD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],FD=me("triangle-alert",OD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],$0=me("trophy",UD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],BD=me("upload",zD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pc=me("user",$D);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],kf=me("users",qD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Uh=me("video",GD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],HD=me("volume-2",WD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],QD=me("volume-x",KD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],XD=me("wifi",YD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lt=me("x",JD);/**
 * @license lucide-react v0.561.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],bu=me("zap",ZD),eM=[{id:"gemini",title:"Gemini AI Assistant",type:"link",url:"https://gemini.google.com"},{id:"chatgpt",title:"ChatGPT",type:"link",url:"https://chat.openai.com"},{id:"tldraw",title:"TLDraw Whiteboard",type:"link",url:"https://tldraw.com"}],tM=()=>{var q;const{processTemplates:n,actions:e}=xr(),[t,s]=C.useState(null),[i,l]=C.useState(!1),[c,d]=C.useState({name:"",description:"",phases:[]}),[f,m]=C.useState(null),[g,y]=C.useState({title:"",url:""}),v=$=>{s($.id),d({...$}),l(!0)},_=()=>{s(null),d({name:"",description:"",phases:[],isDefault:!1}),l(!0)},k=async()=>{if(!(!c.name||!c.phases))try{t?await e.updateWorkflow(t,c):await e.addWorkflow(c),l(!1)}catch($){console.error($),alert("Error saving workflow")}},E=async $=>{confirm("Delete this workflow? This cannot be undone.")&&await e.deleteWorkflow($)},T=()=>{var Q;const $={id:Date.now().toString(),name:"New Phase",color:"blue",icon:"Circle",order:(((Q=c.phases)==null?void 0:Q.length)||0)+1,description:"",resources:eM};d({...c,phases:[...c.phases||[],$]})},M=($,Q,K)=>{const P=[...c.phases||[]];P[$]={...P[$],[Q]:K},d({...c,phases:P})},O=$=>{const Q=[...c.phases||[]];Q.splice($,1),d({...c,phases:Q})};return o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-slate-800",children:"Process Architect"}),o.jsx("p",{className:"text-slate-500 font-medium",children:"Design the learning journeys for your students."})]}),o.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-5 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all hover:-translate-y-1",children:[o.jsx(Fn,{size:20})," New Workflow"]})]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map($=>{var Q;return o.jsxs("div",{className:"group relative bg-white border border-slate-200 rounded-2xl p-6 hover:shadow-xl transition-all hover:border-indigo-400",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h4",{className:"text-lg font-bold text-slate-800",children:$.name}),$.isDefault&&o.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-[10px] font-bold rounded-full uppercase tracking-wide",children:"Default"})]}),o.jsx("p",{className:"text-slate-500 text-sm mt-1 max-w-xl",children:$.description})]}),o.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>v($),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:o.jsx(Ef,{size:18})}),o.jsx("button",{onClick:()=>E($.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:o.jsx(Vs,{size:18})})]})]}),o.jsx("div",{className:"flex items-center gap-2 overflow-x-auto pb-2 scrollbar-hide",children:(Q=$.phases)==null?void 0:Q.sort((K,P)=>K.order-P.order).map((K,P)=>o.jsxs("div",{className:"flex items-center shrink-0",children:[o.jsxs("div",{className:"flex flex-col items-center gap-2",children:[o.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center text-${K.color}-600 bg-${K.color}-50 border border-${K.color}-200 font-bold shadow-sm`,children:P+1}),o.jsx("span",{className:"text-xs font-bold text-slate-600",children:K.name})]}),P<$.phases.length-1&&o.jsx("div",{className:"w-8 h-0.5 bg-slate-200 mx-2 mb-4"})]},P))})]},$.id)})}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[o.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[o.jsxs("h3",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[o.jsx(U3,{className:"text-indigo-500"}),t?"Edit Workflow":"New Workflow"]}),o.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:o.jsx(lt,{size:24})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[o.jsxs("div",{className:"col-span-2 md:col-span-1",children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Workflow Name"}),o.jsx("input",{className:"w-full p-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold text-slate-800 outline-none focus:border-indigo-500 focus:bg-white transition-all",placeholder:"e.g. Design Thinking",value:c.name,onChange:$=>d({...c,name:$.target.value})})]}),o.jsxs("div",{className:"col-span-2 md:col-span-1",children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Description"}),o.jsx("input",{className:"w-full p-4 bg-slate-50 border-2 border-slate-200 rounded-xl font-medium text-slate-800 outline-none focus:border-indigo-500 focus:bg-white transition-all",placeholder:"Short description...",value:c.description,onChange:$=>d({...c,description:$.target.value})})]})]}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider",children:"Phases & Steps"}),o.jsxs("button",{onClick:T,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 bg-indigo-50 hover:bg-indigo-100 px-3 py-1.5 rounded-lg transition-colors flex items-center gap-1",children:[o.jsx(Fn,{size:14})," Add Phase"]})]}),o.jsxs("div",{className:"space-y-3",children:[(q=c.phases)==null?void 0:q.map(($,Q)=>{var K;return o.jsxs("div",{className:"flex flex-col gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 group hover:border-indigo-300 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"cursor-move text-slate-400 hover:text-slate-600",children:o.jsx(R3,{size:20})}),o.jsx("div",{className:"w-10 h-10 shrink-0 flex items-center justify-center bg-white rounded-lg border border-slate-200 font-black text-slate-400",children:Q+1}),o.jsx("input",{className:"flex-1 bg-transparent font-bold text-slate-700 outline-none border-b border-transparent focus:border-indigo-500 px-1",placeholder:"Phase Name",value:$.name,onChange:P=>M(Q,"name",P.target.value)}),o.jsxs("select",{className:"bg-white border border-slate-200 text-xs font-medium rounded-lg px-2 py-2 outline-none",value:$.color,onChange:P=>M(Q,"color",P.target.value),children:[o.jsx("option",{value:"slate",children:"Slate"}),o.jsx("option",{value:"blue",children:"Blue"}),o.jsx("option",{value:"indigo",children:"Indigo"}),o.jsx("option",{value:"purple",children:"Purple"}),o.jsx("option",{value:"amber",children:"Amber"}),o.jsx("option",{value:"emerald",children:"Green"}),o.jsx("option",{value:"rose",children:"Red"})]}),o.jsx("button",{onClick:()=>O(Q),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:o.jsx(Vs,{size:16})})]}),o.jsxs("div",{className:"pl-12",children:[o.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(K=$.resources)==null?void 0:K.map((P,j)=>o.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 bg-white border border-slate-200 rounded-lg text-xs font-bold text-slate-600",children:[o.jsxs("span",{children:[" ",P.title]}),o.jsx("button",{onClick:()=>{const V=[...$.resources||[]];V.splice(j,1),M(Q,"resources",V)},className:"text-red-400 hover:text-red-600",children:o.jsx(lt,{size:12})})]},j))}),o.jsxs("button",{onClick:()=>{m(Q),y({title:"",url:""})},className:"text-xs font-bold text-slate-400 hover:text-indigo-500 flex items-center gap-1 mt-2",children:[o.jsx(Fn,{size:12})," Add Tool/Resource"]}),f===Q&&o.jsx("div",{className:"mt-2 p-3 bg-indigo-50/50 border border-indigo-100 rounded-lg animate-in slide-in-from-top-2",children:o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("input",{placeholder:"Resource Name (e.g. Tldraw)",className:"text-xs p-2 border border-slate-200 rounded-md outline-none focus:border-indigo-400",value:g.title,onChange:P=>y({...g,title:P.target.value}),autoFocus:!0}),o.jsx("input",{placeholder:"URL (https://...)",className:"text-xs p-2 border border-slate-200 rounded-md outline-none focus:border-indigo-400",value:g.url,onChange:P=>y({...g,url:P.target.value})}),o.jsxs("div",{className:"flex gap-2 justify-end",children:[o.jsx("button",{onClick:()=>m(null),className:"px-2 py-1 text-xs text-slate-500 hover:text-slate-700",children:"Cancel"}),o.jsx("button",{onClick:()=>{if(!g.title||!g.url)return;const P=[...$.resources||[],{id:Date.now().toString(),title:g.title,url:g.url,type:"link"}];M(Q,"resources",P),m(null)},className:"px-3 py-1 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold rounded-md",children:"Add"})]})]})})]})]},Q)}),(!c.phases||c.phases.length===0)&&o.jsx("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-xl text-slate-400 text-sm",children:'No phases added yet. Click "Add Phase" to start.'})]})]})]}),o.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>l(!1),className:"px-6 py-3 font-bold text-slate-500 hover:text-slate-700 hover:bg-white rounded-xl transition-colors",children:"Cancel"}),o.jsxs("button",{onClick:k,className:"px-8 py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl shadow-lg shadow-indigo-500/20 transition-all flex items-center gap-2",children:[o.jsx(Ln,{size:20})," Save Workflow"]})]})]})})]})},Bw={Award:hs,Zap:bu,Star:Yc,Trophy:$0,Target:TE,Crown:f3,Medal:X3},nM=()=>{var v,_,k,E;const{badges:n,actions:e}=xr(),[t,s]=C.useState(null),[i,l]=C.useState(!1),[c,d]=C.useState({name:"",description:"",color:"blue",icon:"Award",criteria:{type:"project_count",target:"all",count:1}}),f=T=>{s(T.id),d({...T}),l(!0)},m=()=>{s(null),d({name:"",description:"",color:"amber",icon:"Award",criteria:{type:"project_count",target:"all",count:1}}),l(!0)},g=async()=>{if(c.name)try{t?await e.updateBadge(t,c):await e.addBadge(c),l(!1)}catch(T){console.error(T),alert("Error saving badge")}},y=async T=>{confirm("Delete this badge?")&&await e.deleteBadge(T)};return o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-slate-800",children:"Badge Smithy"}),o.jsx("p",{className:"text-slate-500 font-medium",children:"Forge rewards for your students' achievements."})]}),o.jsxs("button",{onClick:m,className:"flex items-center gap-2 px-5 py-3 bg-amber-500 hover:bg-amber-600 text-white rounded-xl font-bold shadow-lg shadow-amber-500/20 transition-all hover:-translate-y-1",children:[o.jsx(Fn,{size:20})," New Badge"]})]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map(T=>o.jsxs("div",{className:"group relative bg-white border border-slate-200 rounded-2xl p-6 hover:shadow-xl transition-all hover:scale-105 flex flex-col items-center text-center",children:[o.jsx("div",{className:`w-16 h-16 rounded-full bg-${T.color}-50 text-${T.color}-500 flex items-center justify-center mb-4 text-3xl shadow-sm border border-${T.color}-100`,children:ds.createElement(Bw[T.icon]||hs,{size:32})}),o.jsx("h4",{className:"text-lg font-black text-slate-800 mb-1",children:T.name}),o.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:T.description}),o.jsx("div",{className:"mt-4 pt-4 border-t border-slate-100 w-full",children:o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400",children:T.criteria.type==="project_count"?`${T.criteria.count} ${T.criteria.target==="all"?"Projects":T.criteria.target}`:`Skill: ${T.criteria.target}`})}),o.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>f(T),className:"p-1.5 text-slate-400 hover:text-indigo-600 bg-white shadow-sm rounded-lg hover:shadow-md transition-all",children:o.jsx(Ef,{size:14})}),o.jsx("button",{onClick:()=>y(T.id),className:"p-1.5 text-slate-400 hover:text-red-600 bg-white shadow-sm rounded-lg hover:shadow-md transition-all",children:o.jsx(Vs,{size:14})})]})]},T.id))}),i&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-lg overflow-hidden animate-in zoom-in-95 duration-200",children:[o.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-amber-50/50",children:[o.jsxs("h3",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[o.jsx(hs,{className:"text-amber-500"}),t?"Reforge Badge":"Forget New Badge"]}),o.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:o.jsx(lt,{size:24})})]}),o.jsxs("div",{className:"p-8 space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[o.jsx("div",{className:"col-span-1 flex items-center justify-center",children:o.jsx("div",{className:`w-20 h-20 rounded-full bg-${c.color}-100 text-${c.color}-600 flex items-center justify-center border-4 border-${c.color}-200`,children:ds.createElement(Bw[c.icon||"Award"]||hs,{size:40})})}),o.jsxs("div",{className:"col-span-3 space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Badge Name"}),o.jsx("input",{className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl font-bold text-slate-800 outline-none focus:border-amber-500 focus:bg-white transition-all",placeholder:"e.g. Master Builder",value:c.name,onChange:T=>d({...c,name:T.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Color"}),o.jsxs("select",{className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl font-medium outline-none",value:c.color,onChange:T=>d({...c,color:T.target.value}),children:[o.jsx("option",{value:"blue",children:"Blue"}),o.jsx("option",{value:"amber",children:"Amber/Gold"}),o.jsx("option",{value:"slate",children:"Slate/Silver"}),o.jsx("option",{value:"yellow",children:"Yellow/Bronze"}),o.jsx("option",{value:"purple",children:"Purple"}),o.jsx("option",{value:"emerald",children:"Emerald"}),o.jsx("option",{value:"rose",children:"Rose"})]})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Description"}),o.jsx("textarea",{className:"w-full p-3 bg-slate-50 border-2 border-slate-200 rounded-xl font-medium text-slate-800 outline-none focus:border-amber-500 focus:bg-white transition-all resize-none h-24",placeholder:"How to earn this badge...",value:c.description,onChange:T=>d({...c,description:T.target.value})})]}),o.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-3",children:"Criteria"}),o.jsxs("div",{className:"flex gap-4 mb-3",children:[o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:((v=c.criteria)==null?void 0:v.type)==="project_count",onChange:()=>d({...c,criteria:{type:"project_count",target:"all",count:1}}),className:"text-amber-500 focus:ring-amber-500"}),o.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Project Count"})]}),o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"radio",checked:((_=c.criteria)==null?void 0:_.type)==="skill",onChange:()=>d({...c,criteria:{type:"skill",target:"Python",count:1}}),className:"text-amber-500 focus:ring-amber-500"}),o.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Specific Skill"})]})]}),((k=c.criteria)==null?void 0:k.type)==="project_count"?o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("span",{className:"text-xs text-slate-400 block mb-1",children:"Target Station"}),o.jsx("input",{className:"w-full p-2 rounded-lg border border-slate-300 text-sm font-medium",value:c.criteria.target,onChange:T=>d({...c,criteria:{...c.criteria,target:T.target.value}}),placeholder:"all"})]}),o.jsxs("div",{className:"w-20",children:[o.jsx("span",{className:"text-xs text-slate-400 block mb-1",children:"Count"}),o.jsx("input",{type:"number",className:"w-full p-2 rounded-lg border border-slate-300 text-sm font-medium",value:c.criteria.count,onChange:T=>d({...c,criteria:{...c.criteria,count:parseInt(T.target.value)}})})]})]}):o.jsxs("div",{children:[o.jsx("span",{className:"text-xs text-slate-400 block mb-1",children:"Skill Name"}),o.jsx("input",{className:"w-full p-2 rounded-lg border border-slate-300 text-sm font-medium",value:(E=c.criteria)==null?void 0:E.target,onChange:T=>d({...c,criteria:{...c.criteria,target:T.target.value}}),placeholder:"e.g. 3D Design"})]})]})]}),o.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex justify-end gap-3",children:[o.jsx("button",{onClick:()=>l(!1),className:"px-6 py-3 font-bold text-slate-500 hover:text-slate-700 hover:bg-white rounded-xl transition-colors",children:"Cancel"}),o.jsxs("button",{onClick:g,className:"px-8 py-3 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-xl shadow-lg shadow-amber-500/20 transition-all flex items-center gap-2",children:[o.jsx(Ln,{size:20})," Save Badge"]})]})]})})]})},sM=()=>{const{stations:n,actions:e,availableGrades:t}=xr(),[s,i]=C.useState(null),[l,c]=C.useState(!1),d={label:"",description:"",color:"blue",activeForGradeIds:[]},[f,m]=C.useState(d),g=O=>{i(O.id),c(!1),m({...O})},y=()=>{i(null),c(!0),m(d)},v=async()=>{if(s)await e.updateStation(s,f),i(null);else if(l){if(!f.label)return alert("Station Name is required");await e.addStation(f),c(!1)}},_=async O=>{confirm("Are you sure you want to delete this station?")&&(await e.deleteStation(O),s===O&&i(null))},k=async(O,q)=>{await e.toggleStationActivation(O.id,q,n)},E=O=>O?(O.seconds?new Date(O.seconds*1e3):new Date(O)).toISOString().split("T")[0]:"",T=(O,q)=>{if(!q){m(Q=>({...Q,[O]:null}));return}const $=new Date(q);$.setHours(12,0,0,0),m(Q=>({...Q,[O]:$}))},M=()=>o.jsxs("div",{className:"bg-white border-2 border-indigo-500 rounded-2xl p-6 shadow-xl animate-in fade-in zoom-in-95 duration-200",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsx("h4",{className:"text-xl font-black text-slate-800",children:l?"Create New Station":"Edit Station"}),o.jsx("button",{onClick:()=>{i(null),c(!1)},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",children:o.jsx(lt,{size:20})})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Station Name"}),o.jsx("input",{className:"w-full text-lg font-bold text-slate-800 border-b-2 border-indigo-100 focus:border-indigo-500 outline-none py-2 transition-colors",value:f.label||"",onChange:O=>m({...f,label:O.target.value}),placeholder:"e.g. Robotics Lab"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Color Theme"}),o.jsxs("select",{className:"w-full p-2 bg-slate-50 rounded-lg font-bold text-slate-600 border border-slate-200 outline-none",value:f.color||"blue",onChange:O=>m({...f,color:O.target.value}),children:[o.jsx("option",{value:"blue",children:"Blue"}),o.jsx("option",{value:"indigo",children:"Indigo"}),o.jsx("option",{value:"purple",children:"Purple"}),o.jsx("option",{value:"emerald",children:"Emerald"}),o.jsx("option",{value:"amber",children:"Amber"}),o.jsx("option",{value:"rose",children:"Rose"}),o.jsx("option",{value:"slate",children:"Slate"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Description"}),o.jsx("textarea",{className:"w-full p-3 bg-slate-50 rounded-xl border border-slate-200 focus:border-indigo-500 outline-none resize-none h-24 font-medium text-slate-600 transition-colors",value:f.description||"",onChange:O=>m({...f,description:O.target.value}),placeholder:"What will students learn here?"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-slate-50 p-4 rounded-xl border border-slate-100",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"Start Date"}),o.jsx("input",{type:"date",className:"w-full bg-white p-2 rounded-lg border border-slate-200 font-bold text-slate-600 outline-none",value:E(f.startDate),onChange:O=>T("startDate",O.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-400 uppercase mb-1",children:"End Date"}),o.jsx("input",{type:"date",className:"w-full bg-white p-2 rounded-lg border border-slate-200 font-bold text-slate-600 outline-none",value:E(f.endDate),onChange:O=>T("endDate",O.target.value)})]})]}),o.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-100",children:[!l&&o.jsx("button",{onClick:()=>s&&_(s),className:"px-4 py-2 text-red-400 hover:text-red-600 font-bold text-sm mr-auto",children:"Delete Station"}),o.jsx("button",{onClick:()=>{i(null),c(!1)},className:"px-6 py-2 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-xl font-bold transition-colors",children:"Cancel"}),o.jsx("button",{onClick:v,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/30 transition-all hover:scale-105",children:l?"Create Station":"Save Changes"})]})]})]});return o.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-slate-800",children:"Station Command"}),o.jsx("p",{className:"text-slate-500 font-medium",children:"Activate learning zones for your classes."})]}),!l&&!s&&o.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-5 py-2.5 bg-slate-900 text-white rounded-xl font-bold shadow-lg hover:-translate-y-1 transition-all",children:[o.jsx(bu,{size:18,className:"text-yellow-400",fill:"currentColor"}),"New Station"]})]}),l&&o.jsx("div",{className:"max-w-2xl mx-auto",children:M()}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:n.map(O=>s===O.id?o.jsx("div",{className:"max-w-2xl mx-auto w-full",children:M()},O.id):o.jsxs("div",{className:"bg-white border-2 border-slate-100 rounded-2xl p-6 hover:border-slate-300 transition-all group",children:[o.jsxs("div",{className:"flex items-start justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`w-14 h-14 rounded-2xl flex items-center justify-center text-3xl shadow-sm border border-slate-100 bg-${O.color||"blue"}-50`,children:""}),o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-black text-slate-800 flex items-center gap-3",children:[O.label,(O.startDate||O.endDate)&&o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider bg-slate-100 text-slate-500 px-2 py-1 rounded-md border border-slate-200",children:"Scheduled"})]}),o.jsx("p",{className:"text-sm text-slate-500",children:O.description||"No description provided."})]})]}),o.jsx("button",{onClick:()=>g(O),className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:o.jsx(Ef,{size:20})})]}),o.jsxs("div",{className:"bg-slate-50 rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-wider",children:"Active for Grades"}),O.startDate&&o.jsxs("span",{className:"text-[10px] font-mono text-slate-400",children:[new Date(O.startDate.seconds*1e3).toLocaleDateString()," - ",O.endDate?new Date(O.endDate.seconds*1e3).toLocaleDateString():"Forever"]})]}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.length===0&&o.jsx("span",{className:"text-xs text-slate-400 italic",children:"No grades found in active programs."}),t.map(q=>{var Q;const $=(Q=O.activeForGradeIds)==null?void 0:Q.includes(q.id);return o.jsx("button",{onClick:()=>k(O,q.id),className:`px-4 py-2 rounded-lg text-xs font-bold border-2 transition-all ${$?`bg-${O.color||"blue"}-500 text-white border-${O.color||"blue"}-500 shadow-md`:"bg-white border-slate-200 text-slate-400 hover:border-slate-300"}`,children:q.name},q.id)})]}),t.length>0&&o.jsxs("p",{className:"mt-3 text-[10px] text-slate-400 max-w-lg",children:["Note: A grade can only have ",o.jsx("strong",{children:"one"})," station active at a time. activating this station will automatically deactivate others for that grade."]})]})]},O.id))})]})},Da=["details","resources","targeting","publishing"],CE=({templateId:n,initialViewProject:e,onClose:t})=>{var $,Q,K,P,j,V;const{projectTemplates:s,stations:i,processTemplates:l,availableGrades:c,programs:d,actions:f}=xr(),m={title:"",description:"",difficulty:"beginner",skills:[],station:"Robotics",resources:[],status:"draft",targetAudience:{grades:[],groups:[]},defaultWorkflowId:""},y=e||(n?s.find(I=>I.id===n):null)||m,v={...m,...y,targetAudience:{...m.targetAudience,...(y==null?void 0:y.targetAudience)||{}}};if(((Q=($=v.targetAudience)==null?void 0:$.grades)==null?void 0:Q.length)>0&&c.length>0){const I=[];v.targetAudience.grades.forEach(L=>{if(c.find(A=>A.id===L))I.push(L),console.log(`[ProjectEditor]  Exact match for grade ID: ${L}`);else if(c.length>0){const A=c[0];I.push(A.id),console.warn(`[ProjectEditor] Grade ID ${L} not found, using fallback: ${A.name} (${A.id})`)}else I.push(L)}),v.targetAudience.grades=I}const[_,k]=C.useState(v),[E,T]=C.useState("details");console.log("[ProjectEditor] Initialized with:",{templateId:n,initialViewProject:e,mergedData:v.targetAudience,availableGrades:c.map(I=>({id:I.id,name:I.name})),preSelectedGrades:(K=v.targetAudience)==null?void 0:K.grades,matchFound:(j=(P=v.targetAudience)==null?void 0:P.grades)==null?void 0:j.map(I=>c.find(L=>L.id===I)?"MATCH":"NO MATCH for "+I)});const M=async()=>{var I,L,D,A;try{console.log(" [ProjectEditor] Saving mission with targetAudience:",{grades:(I=_.targetAudience)==null?void 0:I.grades,gradeNames:(D=(L=_.targetAudience)==null?void 0:L.grades)==null?void 0:D.map(he=>{var ie;return((ie=c.find(le=>le.id===he))==null?void 0:ie.name)||`Unknown (${he})`}),groups:(A=_.targetAudience)==null?void 0:A.groups}),n?await f.updateProjectTemplate(n,_):await f.addProjectTemplate(_),t()}catch(he){console.error(he),alert("Error saving project template")}},O=()=>{const I=Da.indexOf(E);I<Da.length-1&&T(Da[I+1])},q=()=>{const I=Da.indexOf(E);I>0&&T(Da[I-1])};return o.jsxs("div",{className:"flex flex-col h-full bg-slate-50",children:[o.jsxs("div",{className:"bg-white border-b border-slate-200 px-8 py-5 flex items-center justify-between shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:o.jsx(lt,{size:24})}),o.jsxs("div",{children:[o.jsxs("h2",{className:"text-xl font-black text-slate-800 flex items-center gap-2",children:[n?"Edit Project":"New Project",o.jsx("span",{className:"text-xs bg-indigo-100 text-indigo-700 px-2 py-0.5 rounded-full",children:"v1.1"})]}),o.jsx("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-wider",children:E})]})]}),o.jsx("div",{className:"flex gap-3",children:o.jsxs("button",{onClick:M,className:"flex items-center gap-2 px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all",children:[o.jsx(vu,{size:18})," Save & Close"]})})]}),o.jsx("div",{className:"flex px-8 border-b border-slate-200 bg-white shrink-0",children:Da.map(I=>o.jsx("button",{onClick:()=>T(I),className:`px-6 py-4 text-sm font-bold uppercase tracking-wider border-b-2 transition-colors ${E===I?"border-indigo-600 text-indigo-600":"border-transparent text-slate-400 hover:text-slate-600"}`,children:I},I))}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 max-w-5xl mx-auto w-full",children:[E==="details"&&o.jsx("div",{className:"space-y-8 animate-in slide-in-from-right-8 duration-300",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Project Title"}),o.jsx("input",{className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl font-black text-2xl text-slate-800 outline-none focus:border-indigo-500 transition-all",placeholder:"e.g. Mars Rover Expedition",value:_.title,onChange:I=>k({..._,title:I.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Station"}),o.jsx("select",{className:"w-full p-3 bg-white border-2 border-slate-200 rounded-xl font-bold text-slate-700 outline-none focus:border-indigo-500",value:_.station,onChange:I=>k({..._,station:I.target.value}),children:i.map(I=>o.jsx("option",{value:I.id,children:I.label},I.id))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Difficulty"}),o.jsx("div",{className:"flex gap-2",children:["beginner","intermediate","advanced"].map(I=>o.jsx("button",{onClick:()=>k({..._,difficulty:I}),className:`flex-1 py-3 rounded-xl font-bold uppercase text-xs border-2 transition-all ${_.difficulty===I?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-400 hover:border-indigo-200"}`,children:I},I))})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Mission Briefing"}),o.jsx("textarea",{className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl font-medium text-slate-600 outline-none focus:border-indigo-500 h-40 resize-none",placeholder:"Describe the mission objectives...",value:_.description,onChange:I=>k({..._,description:I.target.value})})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Process Workflow"}),o.jsxs("select",{className:"w-full p-3 bg-white border-2 border-slate-200 rounded-xl font-bold text-slate-700 outline-none focus:border-indigo-500",value:_.defaultWorkflowId||"",onChange:I=>k({..._,defaultWorkflowId:I.target.value}),children:[o.jsx("option",{value:"",children:"-- Let Student Choose --"}),l.map(I=>o.jsx("option",{value:I.id,children:I.name},I.id))]}),o.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"If selected, students will skip the workflow selection screen."})]})]})}),E==="resources"&&o.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-8 duration-300",children:[o.jsxs("div",{className:"bg-indigo-50 p-6 rounded-2xl border-2 border-indigo-100 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-indigo-900",children:"Resource Library"}),o.jsx("p",{className:"text-sm text-indigo-700",children:"Attach videos, links, and files to help students."})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-indigo-900",children:"Resource Library"}),o.jsx("p",{className:"text-sm text-indigo-700",children:"Attach videos, links, and files to help students."})]})]}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm space-y-3",children:[o.jsx("h4",{className:"text-xs font-black text-slate-400 uppercase tracking-wider",children:"Add New Resource"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{placeholder:"Resource Title (e.g. Tutorial Video)",className:"flex-1 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:border-indigo-500",id:"new-res-title"}),o.jsxs("select",{className:"p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm font-bold outline-none",id:"new-res-type",children:[o.jsx("option",{value:"link",children:"Link "}),o.jsx("option",{value:"video",children:"Video "}),o.jsx("option",{value:"file",children:"File "})]})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{placeholder:"URL (https://...)",className:"flex-1 p-2 bg-slate-50 border border-slate-200 rounded-lg text-sm outline-none focus:border-indigo-500 font-mono",id:"new-res-url"}),o.jsxs("button",{onClick:()=>{const I=document.getElementById("new-res-title"),L=document.getElementById("new-res-url"),D=document.getElementById("new-res-type");I.value&&L.value&&(k({..._,resources:[..._.resources||[],{id:Date.now().toString(),title:I.value,url:L.value,type:D.value}]}),I.value="",L.value="")},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold flex items-center gap-2 whitespace-nowrap",children:[o.jsx(Fn,{size:16})," Add"]})]}),o.jsxs("div",{className:"space-y-3",children:[(V=_.resources)==null?void 0:V.map((I,L)=>o.jsxs("div",{className:"flex items-center justify-between bg-white p-4 rounded-xl border border-slate-200 hover:border-indigo-300 transition-colors group",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-100 flex items-center justify-center text-slate-500",children:I.type==="video"?o.jsx(Uh,{size:20}):I.type==="file"?o.jsx(_3,{size:20}):o.jsx(bE,{size:20})}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800",children:I.title}),o.jsx("p",{className:"text-xs text-slate-400",children:I.url})]})]}),o.jsx("button",{onClick:()=>{const D=[..._.resources||[]];D.splice(L,1),k({..._,resources:D})},className:"text-slate-300 hover:text-red-500 transition-colors",children:o.jsx(Vs,{size:20})})]},L)),(!_.resources||_.resources.length===0)&&o.jsx("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 rounded-xl text-slate-400",children:"No resources attached."})]})]})]}),E==="targeting"&&o.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-8 duration-300",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-4",children:"Target Grades"}),o.jsx("div",{className:"flex flex-wrap gap-3",children:c.length>0?c.map(I=>{var D,A;const L=(A=(D=_.targetAudience)==null?void 0:D.grades)==null?void 0:A.includes(I.id);return o.jsxs("button",{onClick:()=>{var le;const he=((le=_.targetAudience)==null?void 0:le.grades)||[],ie=L?he.filter(G=>G!==I.id):[...he,I.id];k({..._,targetAudience:{..._.targetAudience,grades:ie}})},className:`px-5 py-3 rounded-xl font-bold flex items-center gap-2 border-2 transition-all ${L?"bg-indigo-600 text-white border-indigo-600 shadow-md transform scale-105":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:[L&&o.jsx(Ln,{size:16}),I.name]},I.id)}):o.jsx("p",{className:"text-slate-400 italic",children:"No grades found in Programs."})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-black text-slate-400 uppercase tracking-wider mb-2",children:"Target Groups (Optional)"}),o.jsx("p",{className:"text-xs text-slate-500 mb-3 italic",children:"Leave empty to target all groups in selected grades"}),o.jsx("div",{className:"flex flex-wrap gap-3",children:(()=>{var D,A,he;const I=((D=_.targetAudience)==null?void 0:D.grades)||[],L=[];return I.length>0&&d.length>0&&d.forEach(ie=>{ie.grades&&ie.grades.forEach(le=>{I.includes(le.id)&&le.groups&&Array.isArray(le.groups)&&le.groups.forEach(G=>{G.name&&!L.includes(G.name)&&L.push(G.name)})})}),L.length>0?o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",onClick:()=>{k({..._,targetAudience:{..._.targetAudience,groups:[]}})},className:`px-5 py-3 rounded-xl font-bold flex items-center gap-2 border-2 transition-all ${!((A=_.targetAudience)!=null&&A.groups)||_.targetAudience.groups.length===0?"bg-purple-600 text-white border-purple-600 shadow-md transform scale-105":"bg-white text-slate-500 border-slate-200 hover:border-purple-300"}`,children:[(!((he=_.targetAudience)!=null&&he.groups)||_.targetAudience.groups.length===0)&&o.jsx(Ln,{size:16}),"All Groups"]}),L.map(ie=>{var G,F;const le=(F=(G=_.targetAudience)==null?void 0:G.groups)==null?void 0:F.includes(ie);return o.jsxs("button",{type:"button",onClick:()=>{var z;const U=((z=_.targetAudience)==null?void 0:z.groups)||[],X=le?U.filter(Y=>Y!==ie):[...U,ie];k({..._,targetAudience:{..._.targetAudience,groups:X}})},className:`px-5 py-3 rounded-xl font-bold flex items-center gap-2 border-2 transition-all ${le?"bg-purple-600 text-white border-purple-600 shadow-md transform scale-105":"bg-white text-slate-500 border-slate-200 hover:border-purple-300"}`,children:[le&&o.jsx(Ln,{size:16}),ie]},ie)})]}):I.length>0?o.jsx("p",{className:"text-slate-400 italic",children:"No groups found for selected grades."}):o.jsx("p",{className:"text-slate-400 italic",children:"Please select a grade first to see available groups."})})()})]})]}),E==="publishing"&&o.jsx("div",{className:"space-y-8 animate-in slide-in-from-right-8 duration-300",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[{id:"draft",label:"Draft",desc:"Hidden from students",icon:NE,color:"slate"},{id:"featured",label:"Featured",desc:"Promoted in the library",icon:mg,color:"amber"},{id:"assigned",label:"Assigned",desc:"Active for targeted grades",icon:kf,color:"emerald"}].map(I=>o.jsxs("button",{onClick:()=>k({..._,status:I.id}),className:`relative p-8 rounded-2xl border-2 text-left transition-all ${_.status===I.id?`border-${I.color}-500 bg-${I.color}-50`:"border-slate-200 bg-white hover:border-slate-300"}`,children:[o.jsx("div",{className:`w-12 h-12 rounded-xl mb-4 flex items-center justify-center ${_.status===I.id?`bg-${I.color}-500 text-white`:"bg-slate-100 text-slate-400"}`,children:o.jsx(I.icon,{size:24})}),o.jsx("h3",{className:`text-xl font-black ${_.status===I.id?`text-${I.color}-900`:"text-slate-800"}`,children:I.label}),o.jsx("p",{className:`text-sm mt-1 font-medium ${_.status===I.id?`text-${I.color}-700`:"text-slate-500"}`,children:I.desc}),_.status===I.id&&o.jsx("div",{className:`absolute top-4 right-4 text-${I.color}-500`,children:o.jsx(Ln,{size:24})})]},I.id))})})]}),o.jsxs("div",{className:"p-6 border-t border-slate-200 bg-white flex justify-between shrink-0",children:[o.jsxs("button",{onClick:q,disabled:E==="details",className:"flex items-center gap-2 px-6 py-3 font-bold text-slate-500 hover:bg-slate-50 rounded-xl disabled:opacity-30 disabled:hover:bg-transparent transition-colors",children:[o.jsx(Ac,{size:20})," Previous"]}),o.jsxs("button",{onClick:O,disabled:E==="publishing",className:"flex items-center gap-2 px-6 py-3 font-bold text-slate-500 hover:bg-slate-50 rounded-xl disabled:opacity-30 disabled:hover:bg-transparent transition-colors",children:["Next ",o.jsx(ir,{size:20})]})]})]})},rM=({onViewSubmissions:n})=>{const{projectTemplates:e,studentProjects:t,actions:s}=xr(),[i,l]=C.useState(null),[c,d]=C.useState(!1),[f,m]=C.useState(""),g=()=>{l(null),d(!0)},y=k=>{l(k),d(!0)},v=async k=>{confirm(` DANGER ZONE 

Deleting this mission will PERMANENTLY DELETE ALL student submissions and history associated with it.

Are you sure you want to proceed?`)&&await s.deleteProjectTemplate(k)},_=e.filter(k=>{var E,T;return((E=k.title)==null?void 0:E.toLowerCase().includes(f.toLowerCase()))||((T=k.station)==null?void 0:T.toLowerCase().includes(f.toLowerCase()))});return c?o.jsx(CE,{templateId:i==null?void 0:i.id,initialViewProject:i,onClose:()=>d(!1)}):o.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-8 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex justify-between items-end",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-3xl font-black text-slate-800 tracking-tight",children:"Mission Control"}),o.jsx("p",{className:"text-slate-500 font-medium text-lg",children:"Design and deployment of learning missions."})]}),o.jsxs("button",{onClick:g,className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all hover:-translate-y-1",children:[o.jsx(Fn,{size:20})," New Mission"]})]}),o.jsxs("div",{className:"relative",children:[o.jsx(Qc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:20}),o.jsx("input",{className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-slate-100 rounded-2xl font-bold text-slate-600 outline-none focus:border-indigo-500 transition-all",placeholder:"Search missions by title or station...",value:f,onChange:k=>m(k.target.value)})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[_.map(k=>o.jsxs("div",{className:"group bg-white border border-slate-200 rounded-2xl p-6 hover:shadow-xl hover:border-indigo-400 transition-all flex flex-col h-full",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider ${k.station==="Coding"?"bg-blue-100 text-blue-700":k.station==="Robotics"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-700"}`,children:k.station}),o.jsxs("button",{onClick:E=>{E.stopPropagation(),n&&n(k.id)},className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-indigo-50 text-indigo-700 hover:bg-indigo-100 transition-colors border border-indigo-100",title:"View Student Submissions",children:[o.jsx(kf,{size:14,className:"fill-indigo-700/20"}),o.jsx("span",{className:"text-xs font-bold",children:(t==null?void 0:t.filter(E=>E.templateId===k.id).length)||0})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("button",{onClick:E=>{E.stopPropagation(),y(k)},className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit Mission",children:o.jsx(Ef,{size:18})}),o.jsx("button",{onClick:E=>{E.stopPropagation(),v(k.id)},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Mission",children:o.jsx(Vs,{size:18})})]})]}),o.jsx("h4",{className:"text-xl font-bold text-slate-800 mb-2 line-clamp-2",children:k.title||"Untitled Mission"}),o.jsx("p",{className:"text-sm text-slate-500 mb-6 line-clamp-3 flex-1",children:k.description||"No description provided."}),o.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100 mt-auto",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Station"}),o.jsx("span",{className:"text-sm font-bold text-slate-700",children:k.station||"General"})]}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Difficulty"}),o.jsx("span",{className:`text-sm font-bold capitalize ${k.difficulty==="advanced"?"text-purple-600":k.difficulty==="intermediate"?"text-indigo-600":"text-emerald-600"}`,children:k.difficulty||"Beginner"})]})]})]},k.id)),_.length===0&&o.jsxs("div",{className:"col-span-full py-20 text-center border-2 border-dashed border-slate-200 rounded-3xl",children:[o.jsx("p",{className:"text-slate-400 font-bold text-lg",children:"No missions found."}),o.jsx("button",{onClick:g,className:"mt-4 text-indigo-600 font-bold hover:underline",children:"Create your first mission"})]})]})]})},iM=({onReviewProject:n,onNavigate:e,filterTemplateId:t,onClearFilter:s})=>{const{studentProjects:i,students:l}=xr(),[c,d]=ds.useState("overview"),f=C.useMemo(()=>{const g=t?i.filter(E=>E.templateId===t):i,y=g.filter(E=>["planning","building","testing"].includes(E.status)),v=g.filter(E=>{var T;return E.status==="submitted"||((T=E.steps)==null?void 0:T.some(M=>M.status==="PENDING_REVIEW"))}),_=g.filter(E=>E.status==="published"),k=g.sort((E,T)=>{const M=O=>{if(!O)return 0;if(O.seconds)return O.seconds*1e3;if(O.toDate)return O.toDate().getTime();const q=new Date(O);return isNaN(q.getTime())?0:q.getTime()};return M(T.updatedAt)-M(E.updatedAt)}).slice(0,5);return{active:y,review:v,completed:_,recent:k}},[i,t]);ds.useEffect(()=>{t&&d("active")},[t]);const m=C.useMemo(()=>c==="active"?f.active:c==="review"?f.review:c==="published"?f.completed:[],[c,f]);return o.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-10 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[o.jsx("div",{children:t?o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:s,className:"p-2 bg-slate-100 hover:bg-slate-200 rounded-full transition-colors",children:o.jsx(ir,{className:"rotate-180 text-slate-500",size:20})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:"Mission Submissions"}),o.jsx("p",{className:"text-slate-500 font-medium text-lg mt-1",children:"Showing submissions for this template."})]})]}):o.jsxs("div",{children:[o.jsx("button",{onClick:()=>d("overview"),className:`text-3xl font-black tracking-tight transition-colors ${c==="overview"?"text-slate-800":"text-slate-400 hover:text-indigo-600"}`,children:"Studio Command"}),o.jsx("p",{className:"text-slate-500 font-medium text-lg mt-1",children:c==="overview"?"Live overview of student production.":`Showing ${c} missions.`})]})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>e("projects"),className:"px-5 py-3 bg-white border-2 border-indigo-100 hover:border-indigo-400 text-indigo-700 rounded-xl font-bold flex items-center gap-2 transition-all shadow-sm hover:shadow-indigo-100",children:[o.jsx(bu,{size:18})," Quick Mission"]}),o.jsxs("button",{onClick:()=>e("badges"),className:"px-5 py-3 bg-white border-2 border-amber-100 hover:border-amber-400 text-amber-700 rounded-xl font-bold flex items-center gap-2 transition-all shadow-sm hover:shadow-amber-100",children:[o.jsx(hs,{size:18})," New Batch"]}),o.jsxs("button",{onClick:()=>e("stations"),className:"px-5 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold flex items-center gap-2 shadow-lg shadow-indigo-500/20 transition-all hover:-translate-y-1",children:[o.jsx(kf,{size:18})," Manage Stations"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{onClick:()=>d("active"),className:`p-6 rounded-2xl border-2 shadow-xl flex items-center justify-between group cursor-pointer transition-all hover:-translate-y-1 ${c==="active"?"bg-indigo-50 border-indigo-500 ring-4 ring-indigo-100":"bg-white border-slate-100 hover:border-indigo-100 shadow-indigo-100/50"}`,children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-1",children:"Active Missions"}),o.jsx("h3",{className:"text-4xl font-black text-slate-800",children:f.active.length}),o.jsxs("p",{className:"text-xs font-bold text-indigo-500 mt-2 flex items-center gap-1",children:[c==="active"?"Viewing list":"View active"," ",o.jsx(ir,{size:12})]})]}),o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center transform group-hover:scale-110 transition-transform",children:o.jsx(L5,{size:32})})]}),o.jsxs("div",{onClick:()=>d("review"),className:`p-6 rounded-2xl border-2 shadow-xl flex items-center justify-between group cursor-pointer transition-all hover:-translate-y-1 ${c==="review"?"bg-amber-50 border-amber-500 ring-4 ring-amber-100":"bg-white border-slate-100 hover:border-amber-100 shadow-amber-100/50"}`,children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-1",children:"Needs Review"}),o.jsx("h3",{className:"text-4xl font-black text-slate-800",children:f.review.length}),o.jsxs("p",{className:"text-xs font-bold text-amber-500 mt-2 flex items-center gap-1",children:[c==="review"?"Viewing list":"View pending"," ",o.jsx(ir,{size:12})]})]}),o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-amber-50 text-amber-500 flex items-center justify-center transform group-hover:scale-110 transition-transform",children:o.jsx(yu,{size:32})})]}),o.jsxs("div",{onClick:()=>d("published"),className:`p-6 rounded-2xl border-2 shadow-xl flex items-center justify-between group cursor-pointer transition-all hover:-translate-y-1 ${c==="published"?"bg-emerald-50 border-emerald-500 ring-4 ring-emerald-100":"bg-white border-slate-100 hover:border-emerald-100 shadow-emerald-100/50"}`,children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-1",children:"Published"}),o.jsx("h3",{className:"text-4xl font-black text-slate-800",children:f.completed.length}),o.jsxs("p",{className:"text-xs font-bold text-emerald-500 mt-2 flex items-center gap-1",children:[c==="published"?"Viewing list":"View archive"," ",o.jsx(ir,{size:12})]})]}),o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center transform group-hover:scale-110 transition-transform",children:o.jsx(hs,{size:32})})]})]}),c==="overview"?o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white border-2 border-slate-100 rounded-2xl p-6 shadow-sm h-96 flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-500 animate-pulse"}),"Review Queue"]}),o.jsx("button",{onClick:()=>d("review"),className:"text-xs font-bold text-slate-400 hover:text-indigo-600",children:"View All"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-3 pr-2 custom-scrollbar",children:f.review.length>0?f.review.slice(0,10).map(g=>{var v;const y=((v=l==null?void 0:l.find(_=>_.id===g.studentId))==null?void 0:v.name)||g.studentName||"Unknown Student";return o.jsxs("div",{onClick:()=>n(g.id),className:"p-4 rounded-xl bg-amber-50 border border-amber-100 flex items-center justify-between group hover:bg-amber-100 transition-colors cursor-pointer",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-slate-800",children:g.title||"Untitled Mission"}),o.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o.jsx("span",{className:"text-xs font-bold text-amber-700 bg-white px-2 py-0.5 rounded shadow-sm border border-amber-100",children:y}),o.jsx("span",{className:"text-xs text-amber-600 font-medium",children:"Waiting for review"})]})]}),o.jsx("button",{className:"p-2 bg-white rounded-lg text-amber-500 opacity-0 group-hover:opacity-100 transition-opacity shadow-sm hover:scale-110",children:o.jsx(ir,{size:16})})]},g.id)}):o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-300",children:[o.jsx(oM,{}),o.jsx("p",{className:"font-bold mt-4",children:"All caught up!"})]})})]}),o.jsxs("div",{className:"bg-white border-2 border-slate-100 rounded-2xl p-6 shadow-sm h-96 flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"font-bold text-slate-800",children:"Live Feed"}),o.jsx(fs,{size:16,className:"text-slate-300"})]}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-6 pr-2",children:f.recent.map((g,y)=>{var _;const v=((_=l==null?void 0:l.find(k=>k.id===g.studentId))==null?void 0:_.name)||g.studentName||"Unknown Student";return o.jsxs("div",{className:"flex gap-4 group cursor-pointer hover:bg-slate-50 p-2 rounded-xl transition-colors",onClick:()=>n(g.id),children:[o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("div",{className:`w-3 h-3 rounded-full ${y===0?"bg-indigo-500 ring-4 ring-indigo-50":"bg-slate-200"}`}),y!==f.recent.length-1&&o.jsx("div",{className:"w-0.5 h-full bg-slate-100 my-1"})]}),o.jsxs("div",{className:"pb-2 w-full",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("p",{className:"text-sm text-slate-600",children:[o.jsx("span",{className:"font-bold text-slate-800",children:v})," updated ",o.jsx("span",{className:"font-bold text-indigo-600",children:g.title})]}),o.jsx(or,{size:12,className:"text-slate-300 opacity-0 group-hover:opacity-100 transition-opacity"})]}),o.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:(()=>{if(!g.updatedAt)return"Just now";if(g.updatedAt.seconds)return new Date(g.updatedAt.seconds*1e3).toLocaleTimeString();const k=new Date(g.updatedAt);return isNaN(k.getTime())?"Just now":k.toLocaleTimeString()})()})]})]},g.id)})})]})]}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 animate-in slide-in-from-bottom-4 duration-500",children:[m.map(g=>{var v;const y=((v=l==null?void 0:l.find(_=>_.id===g.studentId))==null?void 0:v.name)||g.studentName||"Student";return o.jsxs("div",{onClick:()=>n(g.id),className:"bg-white border border-slate-200 rounded-2xl p-6 hover:shadow-xl hover:border-indigo-400 transition-all cursor-pointer group flex flex-col",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-black uppercase tracking-wider ${g.status==="published"?"bg-emerald-100 text-emerald-700":g.status==="submitted"?"bg-amber-100 text-amber-700":"bg-indigo-100 text-indigo-700"}`,children:g.status}),o.jsx("span",{className:"text-xs font-bold text-slate-400",children:y})]}),o.jsx("h4",{className:"text-xl font-bold text-slate-800 mb-2",children:g.title||"Untitled Mission"}),o.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-4 flex-1",children:g.description||"No description."}),o.jsxs("div",{className:"flex items-center justify-between text-xs font-bold text-slate-400 border-t border-slate-100 pt-4 mt-auto",children:[o.jsxs("span",{children:["Updated ",(()=>{if(!g.updatedAt)return"N/A";if(g.updatedAt.seconds)return new Date(g.updatedAt.seconds*1e3).toLocaleDateString();const _=new Date(g.updatedAt);return isNaN(_.getTime())?"N/A":_.toLocaleDateString()})()]}),o.jsxs("span",{className:"group-hover:text-indigo-600 flex items-center gap-1 transition-colors",children:["Open ",o.jsx(ir,{size:14})]})]})]},g.id)}),m.length===0&&o.jsxs("div",{className:"col-span-full py-20 text-center border-2 border-dashed border-slate-200 rounded-3xl",children:[o.jsxs("p",{className:"text-slate-400 font-bold text-lg",children:["No ",c," missions found."]}),o.jsx("button",{onClick:()=>d("overview"),className:"mt-4 text-indigo-600 font-bold hover:underline",children:"Back to Overview"})]})]})]})},oM=()=>o.jsx("svg",{className:"w-16 h-16 text-slate-100",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),ym=({isOpen:n,onClose:e,title:t,children:s,size:i="md"})=>{if(!n)return null;const l={md:"max-w-md",lg:"max-w-2xl",xl:"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl"};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center bg-black/60 backdrop-blur-sm p-0 md:p-4 animate-in fade-in duration-200",children:o.jsxs("div",{className:`bg-white border-t md:border border-slate-200 w-full h-full md:h-auto ${l[i]} md:rounded-[2rem] shadow-2xl overflow-hidden flex flex-col max-h-full md:max-h-[90vh]`,children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200 bg-slate-50 shrink-0 pt-safe-top",children:[o.jsx("h3",{className:"font-bold text-[#2D2B6B] text-lg",children:t}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-[#2D2B6B] transition-colors p-2 bg-white hover:bg-slate-100 rounded-full border border-slate-200",children:o.jsx(lt,{className:"w-5 h-5"})})]}),o.jsx("div",{className:"p-6 overflow-y-auto custom-scrollbar pb-24 md:pb-6",children:s})]})})},aM=()=>{const{students:n}=xr(),[e,t]=C.useState([]),[s,i]=C.useState([]),[l,c]=C.useState("digital"),[d,f]=C.useState(!1),[m,g]=C.useState({title:"",url:"",category:"other",description:""}),[y,v]=C.useState(!1),[_,k]=C.useState({name:"",category:"robotics",status:"available",serialNumber:"",notes:""}),[E,T]=C.useState(!1),[M,O]=C.useState(null),[q,$]=C.useState(""),[Q,K]=C.useState("All"),[P,j]=C.useState("");C.useEffect(()=>{if(!J)return;const U=cn(je(J,"tool_links"),z=>{t(z.docs.map(Y=>({id:Y.id,...Y.data()})))}),X=cn(je(J,"assets"),z=>{i(z.docs.map(Y=>({id:Y.id,...Y.data()})))});return()=>{U(),X()}},[]);const V=async U=>{U.preventDefault(),J&&(await cs(je(J,"tool_links"),{...m,createdAt:lr()}),f(!1),g({title:"",url:"",category:"other",description:""}))},I=async U=>{U.preventDefault(),J&&(await cs(je(J,"assets"),{..._,createdAt:lr()}),v(!1),k({name:"",category:"robotics",status:"available",serialNumber:"",notes:""}))},L=async U=>{if(U.preventDefault(),!J||!M||!q)return;const X=n.find(z=>z.id===q);await bn(Re(J,"assets",M.id),{status:"in_use",assignedTo:q,assignedToName:(X==null?void 0:X.name)||"Unknown"}),T(!1),O(null),$("")},D=async U=>{J&&confirm(`Return ${U.name} to inventory?`)&&await bn(Re(J,"assets",U.id),{status:"available",assignedTo:null,assignedToName:null})},A=async U=>{!J||!confirm("Delete this tool link?")||await Ps(Re(J,"tool_links",U))},he=async U=>{!J||!confirm("Delete this asset from inventory?")||await Ps(Re(J,"assets",U))},ie=["All","robotics","coding","design","engineering","multimedia","other"],le=["All","robotics","computer","tools","other"],G=e.filter(U=>{const X=Q==="All"||U.category===Q,z=U.title.toLowerCase().includes(P.toLowerCase())||(U.description||"").toLowerCase().includes(P.toLowerCase());return X&&z}),F=s.filter(U=>{const X=Q==="All"||U.category===Q,z=U.name.toLowerCase().includes(P.toLowerCase())||(U.serialNumber||"").toLowerCase().includes(P.toLowerCase());return X&&z});return o.jsxs("div",{className:"space-y-8 pb-24 md:pb-8 h-full flex flex-col animate-in fade-in slide-in-from-right-4",children:[o.jsxs("div",{className:"bg-white p-8 rounded-[2.5rem] border border-slate-100 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 shadow-sm",children:[o.jsxs("div",{children:[o.jsxs("h2",{className:"text-2xl font-bold text-[#2D2B6B] flex items-center gap-3",children:[o.jsx(vE,{className:"text-orange-500",size:28})," Maker Toolbox"]}),o.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Manage digital resources and hardware inventory."})]}),o.jsxs("div",{className:"flex bg-slate-50 p-1.5 rounded-xl border border-slate-100",children:[o.jsxs("button",{onClick:()=>{c("digital"),K("All")},className:`flex items-center gap-2 px-6 py-3 rounded-lg text-sm font-bold transition-all ${l==="digital"?"bg-white text-[#2D2B6B] shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[o.jsx(or,{size:16})," Resources"]}),o.jsxs("button",{onClick:()=>{c("inventory"),K("All")},className:`flex items-center gap-2 px-6 py-3 rounded-lg text-sm font-bold transition-all ${l==="inventory"?"bg-white text-[#2D2B6B] shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[o.jsx(Ow,{size:16})," Hardware"]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center",children:[o.jsxs("div",{className:"relative flex-1 w-full",children:[o.jsx(Qc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"}),o.jsx("input",{type:"text",placeholder:l==="digital"?"Search resources...":"Search inventory (Name, Serial)...",value:P,onChange:U=>j(U.target.value),className:"w-full pl-12 pr-4 py-3 bg-white border border-slate-200 rounded-xl text-sm text-[#2D2B6B] focus:border-[#2D2B6B] focus:ring-1 focus:ring-[#2D2B6B] outline-none shadow-sm placeholder:text-slate-400"})]}),o.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 sm:pb-0 w-full sm:w-auto no-scrollbar",children:(l==="digital"?ie:le).map(U=>o.jsx("button",{onClick:()=>K(U),className:`px-4 py-2 rounded-full text-xs font-bold uppercase tracking-wider whitespace-nowrap border transition-all ${Q===U?"bg-[#2D2B6B] text-white border-[#2D2B6B] shadow-md shadow-indigo-900/20":"bg-white text-slate-500 border-slate-200 hover:border-[#2D2B6B] hover:text-[#2D2B6B]"}`,children:U},U))}),o.jsxs("button",{onClick:()=>l==="digital"?f(!0):v(!0),className:"flex items-center gap-2 bg-gradient-to-r from-pink-500 to-pink-600 hover:from-pink-400 hover:to-pink-500 text-white px-6 py-3 rounded-xl transition-colors shadow-lg shadow-pink-500/30 text-sm font-bold w-full sm:w-auto justify-center",children:[o.jsx(Fn,{size:18})," Add ",l==="digital"?"Link":"Item"]}),o.jsxs("button",{onClick:()=>{confirm(`SECURE DEVICE?

This will wipe all saved emails ('Remember Me') and sign you out.
Use this when leaving a public device.`)&&(localStorage.removeItem("sparkquest_remember_email"),localStorage.removeItem("sparkquest_session_start"),window.location.reload())},className:"flex items-center gap-2 bg-slate-800 hover:bg-slate-700 text-slate-300 hover:text-white px-4 py-3 rounded-xl transition-colors border border-slate-700 text-sm font-bold w-full sm:w-auto justify-center",title:"Clear saved data & Logout",children:[o.jsx(m3,{size:18})," ",o.jsx("span",{className:"hidden sm:inline",children:"Secure"})]})]}),l==="digital"&&o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 overflow-y-auto",children:[G.map(U=>o.jsxs("div",{className:"bg-white border border-slate-100 hover:border-[#2D2B6B]/30 hover:shadow-xl hover:-translate-y-1 p-6 rounded-[2rem] transition-all group relative flex flex-col shadow-sm",children:[o.jsx("button",{onClick:()=>A(U.id),className:"absolute top-4 right-4 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Vs,{size:16})}),o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center shrink-0 shadow-sm ${U.category==="robotics"?"bg-cyan-50 text-cyan-600 border-2 border-cyan-100":U.category==="coding"?"bg-pink-50 text-pink-600 border-2 border-pink-100":U.category==="design"?"bg-orange-50 text-orange-600 border-2 border-orange-100":U.category==="engineering"?"bg-yellow-50 text-yellow-600 border-2 border-yellow-100":"bg-slate-50 text-slate-500 border-2 border-slate-100"}`,children:o.jsx("span",{className:"text-lg font-black",children:U.title.charAt(0).toUpperCase()})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-[#2D2B6B] text-base line-clamp-1",children:U.title}),o.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wide px-2 py-0.5 rounded-full border ${U.category==="robotics"?"bg-cyan-50 text-cyan-600 border-cyan-200":U.category==="coding"?"bg-pink-50 text-pink-600 border-pink-200":U.category==="design"?"bg-orange-50 text-orange-600 border-orange-200":U.category==="engineering"?"bg-yellow-50 text-yellow-600 border-yellow-200":"bg-slate-50 text-slate-400 border-slate-100"}`,children:U.category})]})]}),o.jsx("p",{className:"text-sm text-slate-500 mb-6 flex-1 line-clamp-3 leading-relaxed",children:U.description||"No description provided."}),o.jsxs("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full py-3 bg-slate-50 hover:bg-[#2D2B6B] hover:text-white border border-slate-100 hover:border-[#2D2B6B] rounded-xl text-xs font-bold text-[#2D2B6B] transition-all group-hover:shadow-lg group-hover:shadow-indigo-900/10",children:["Open Resource ",o.jsx(or,{size:14})]})]},U.id)),G.length===0&&o.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-slate-400 bg-white rounded-[2.5rem] border border-slate-100 border-dashed",children:[o.jsx(Qc,{size:48,className:"mb-4 opacity-20"}),o.jsx("p",{className:"mb-6 font-medium",children:"No tools found matching your criteria."})]})]}),l==="inventory"&&o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 overflow-y-auto",children:[F.map(U=>{var z;const X=U.status==="available";return o.jsxs("div",{className:"bg-white border border-slate-100 rounded-[2rem] p-6 hover:shadow-xl hover:-translate-y-1 transition-all group relative shadow-sm",children:[o.jsx("button",{onClick:()=>he(U.id),className:"absolute top-4 right-4 text-slate-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Vs,{size:16})}),o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("div",{className:"p-3 bg-slate-50 border border-slate-100 rounded-2xl text-[#2D2B6B]",children:o.jsx(xE,{size:24})}),o.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] uppercase font-bold border ${X?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-amber-50 text-amber-600 border-amber-100"}`,children:U.status.replace("_"," ")})]}),o.jsx("h3",{className:"font-bold text-[#2D2B6B] text-lg mb-1",children:U.name}),o.jsxs("p",{className:"text-xs text-slate-400 mb-6 font-mono bg-slate-50 inline-block px-2 py-1 rounded border border-slate-100",children:["SN: ",U.serialNumber||"N/A"]}),U.status==="in_use"&&o.jsxs("div",{className:"mb-6 bg-slate-50 p-3 rounded-xl border border-slate-100 flex items-center gap-3",children:[o.jsx("div",{className:"w-8 h-8 bg-white border border-slate-200 rounded-full flex items-center justify-center text-xs font-bold text-[#2D2B6B] shadow-sm",children:(z=U.assignedToName)==null?void 0:z.charAt(0)}),o.jsxs("div",{children:[o.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold",children:"Assigned To"}),o.jsx("div",{className:"text-xs text-[#2D2B6B] font-bold truncate max-w-[120px]",children:U.assignedToName})]})]}),o.jsx("div",{className:"mt-auto pt-4 border-t border-slate-50",children:X?o.jsxs("button",{onClick:()=>{O(U),T(!0)},className:"w-full py-3 bg-[#2D2B6B] hover:bg-indigo-800 text-white rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-colors shadow-lg shadow-indigo-900/10",children:[o.jsx(kD,{size:16})," Check Out"]}):o.jsxs("button",{onClick:()=>D(U),className:"w-full py-3 bg-amber-50 hover:bg-amber-100 text-amber-700 border border-amber-200 rounded-xl text-xs font-bold flex items-center justify-center gap-2 transition-colors",children:[o.jsx(gg,{size:16})," Return Item"]})})]},U.id)}),F.length===0&&o.jsxs("div",{className:"col-span-full flex flex-col items-center justify-center py-20 text-slate-400 bg-white rounded-[2.5rem] border border-slate-100 border-dashed",children:[o.jsx(Ow,{size:48,className:"mb-4 opacity-20"}),o.jsx("p",{className:"mb-6 font-medium",children:"No inventory items found."})]})]}),o.jsx(ym,{isOpen:d,onClose:()=>f(!1),title:"Add Resource",children:o.jsxs("form",{onSubmit:V,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Tool Name"}),o.jsx("input",{required:!0,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none",value:m.title,onChange:U=>g({...m,title:U.target.value}),placeholder:"e.g. Arduino IDE"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"URL Link"}),o.jsx("input",{required:!0,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none",value:m.url,onChange:U=>g({...m,url:U.target.value}),placeholder:"https://..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Category"}),o.jsx("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none capitalize",value:m.category,onChange:U=>g({...m,category:U.target.value}),children:ie.filter(U=>U!=="All").map(U=>o.jsx("option",{value:U,children:U},U))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Description"}),o.jsx("textarea",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none h-24",value:m.description,onChange:U=>g({...m,description:U.target.value})})]}),o.jsx("button",{type:"submit",className:"w-full py-3 bg-[#2D2B6B] hover:bg-indigo-800 text-white rounded-xl font-bold shadow-lg shadow-indigo-900/20",children:"Save to Toolkit"})]})}),o.jsx(ym,{isOpen:y,onClose:()=>v(!1),title:"Add Hardware Asset",children:o.jsxs("form",{onSubmit:I,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Item Name"}),o.jsx("input",{required:!0,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none",value:_.name,onChange:U=>k({..._,name:U.target.value}),placeholder:"e.g. Lego Spike Prime #5"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Category"}),o.jsx("select",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none capitalize",value:_.category,onChange:U=>k({..._,category:U.target.value}),children:le.filter(U=>U!=="All").map(U=>o.jsx("option",{value:U,children:U},U))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Serial / ID"}),o.jsx("input",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none",value:_.serialNumber,onChange:U=>k({..._,serialNumber:U.target.value}),placeholder:"Optional"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Notes"}),o.jsx("textarea",{className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none h-24",value:_.notes,onChange:U=>k({..._,notes:U.target.value})})]}),o.jsx("button",{type:"submit",className:"w-full py-3 bg-[#2D2B6B] hover:bg-indigo-800 text-white rounded-xl font-bold shadow-lg shadow-indigo-900/20",children:"Add to Inventory"})]})}),o.jsx(ym,{isOpen:E,onClose:()=>T(!1),title:`Check Out: ${M==null?void 0:M.name}`,children:o.jsxs("form",{onSubmit:L,className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-slate-500",children:"Assign this item to a student. They are responsible for returning it."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-1",children:"Select Student"}),o.jsxs("select",{required:!0,className:"w-full p-3 bg-slate-50 border border-slate-200 rounded-xl text-[#2D2B6B] focus:border-[#2D2B6B] outline-none",value:q,onChange:U=>$(U.target.value),children:[o.jsx("option",{value:"",children:"-- Choose Student --"}),n.filter(U=>U.role==="student").sort((U,X)=>U.name.localeCompare(X.name)).map(U=>o.jsx("option",{value:U.id,children:U.name},U.id))]})]}),o.jsx("button",{type:"submit",disabled:!q,className:"w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-xl font-bold disabled:opacity-50 shadow-lg shadow-blue-900/20",children:"Confirm Assignment"})]})})]})},$w=n=>{var e;if(!n||!n.startsWith("data:"))return n;try{const[t,s]=n.split(","),i=((e=t.match(/:(.*?);/))==null?void 0:e[1])||"image/png",l=atob(s),c=new Uint8Array(l.length);for(let f=0;f<l.length;f++)c[f]=l.charCodeAt(f);const d=new Blob([c],{type:i});return URL.createObjectURL(d)}catch(t){return console.error("Failed to convert base64 to blob:",t),n}},lM=n=>n?n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`:"",IE=({projectId:n,onClose:e})=>{const{studentProjects:t,students:s}=xr(),i=t.find(E=>E.id===n),l=s.find(E=>E.id===(i==null?void 0:i.studentId)),[c,d]=C.useState("overview"),[f,m]=C.useState(""),[g,y]=C.useState(50),[v,_]=C.useState([]);if(C.useEffect(()=>()=>{v.forEach(E=>URL.revokeObjectURL(E))},[v]),!i)return null;const k=async E=>{if(!J)return;const T=J;try{await bn(Re(T,"student_projects",n),{status:E,feedback:f||null,updatedAt:lr()}),e()}catch(M){console.error("Error updating project:",M),alert("Failed to submit review.")}};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-md animate-in fade-in duration-200",children:o.jsxs("div",{className:"bg-white w-full max-w-5xl rounded-[2.5rem] shadow-2xl overflow-hidden flex flex-col max-h-[92vh] border-4 border-white ring-4 ring-indigo-500/20",children:[o.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-100 px-8 py-6 flex items-center justify-between shrink-0",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("span",{className:"px-3 py-1 bg-white text-indigo-600 rounded-lg text-xs font-black uppercase tracking-wider shadow-sm border border-indigo-100",children:"Reviewing Submission"}),o.jsxs("span",{className:"text-indigo-300 text-sm font-bold",children:["#",i.id.slice(0,8)]})]}),o.jsx("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:i.title}),o.jsxs("p",{className:"text-slate-500 font-medium flex items-center gap-2",children:["Maker: ",o.jsx("span",{className:"text-indigo-600 font-bold bg-indigo-50 px-2 rounded-md",children:(l==null?void 0:l.name)||i.studentName||"Student"})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"bg-white p-1.5 rounded-xl border border-indigo-100 flex text-sm font-bold shadow-sm",children:[o.jsx("button",{onClick:()=>d("overview"),className:`px-5 py-2 rounded-lg transition-all ${c==="overview"?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,children:"Overview"}),o.jsx("button",{onClick:()=>d("history"),className:`px-5 py-2 rounded-lg transition-all ${c==="history"?"bg-indigo-600 text-white shadow-md shadow-indigo-200":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,children:"History"})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-200 rounded-full text-slate-400 hover:text-slate-600 transition-colors",children:o.jsx(lt,{size:24})})]})]}),o.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col md:flex-row",children:[o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 border-r border-slate-100 bg-slate-50/50",children:[c==="overview"&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-6",children:"Submission Evidence"}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[o.jsx("h4",{className:"font-bold text-slate-800 mb-2",children:"Project Description"}),o.jsx("p",{className:"text-slate-600 leading-relaxed text-sm",children:i.description||"No description provided by the student."})]}),o.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[o.jsx("h4",{className:"font-bold text-slate-800 mb-4",children:"Attachments & Resources"}),o.jsxs("div",{className:"space-y-3",children:[i.presentationUrl&&o.jsxs("a",{href:i.presentationUrl,target:"_blank",rel:"noreferrer",className:"flex items-center gap-3 p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-400 hover:bg-indigo-50 transition-all group",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-indigo-100 text-indigo-600 flex items-center justify-center",children:o.jsx(or,{size:20})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold text-slate-700 group-hover:text-indigo-700",children:"Presentation / Link"}),o.jsx("p",{className:"text-xs text-slate-400 truncate max-w-xs",children:i.presentationUrl})]}),o.jsx(or,{size:16,className:"ml-auto text-slate-300 group-hover:text-indigo-400"})]}),i.steps.filter(E=>E.status==="PENDING_REVIEW"||E.evidence||E.note).map(E=>o.jsxs("div",{className:`p-4 rounded-xl border ${E.status==="PENDING_REVIEW"?"bg-amber-50 border-amber-200":"bg-slate-50 border-slate-200"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("span",{className:"text-xs font-bold text-slate-500 bg-white px-2 py-1 rounded border border-slate-200",children:["Step: ",E.title]}),E.status==="PENDING_REVIEW"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:async()=>{if(!J)return;const T=i.steps.map(M=>M.id===E.id?{...M,status:"done"}:M);await bn(Re(J,"student_projects",n),{steps:T})},className:"px-3 py-1 bg-emerald-500 text-white text-xs font-bold rounded-lg hover:bg-emerald-600 transition-colors shadow-sm flex items-center gap-1",children:[o.jsx(gE,{size:12})," Approve"]}),o.jsxs("button",{onClick:async()=>{if(!J)return;const T=window.prompt("Reason for rejection:");if(T===null)return;const M=i.steps.map(O=>O.id===E.id?{...O,status:"REJECTED",reviewNotes:T}:O);await bn(Re(J,"student_projects",n),{steps:M})},className:"px-3 py-1 bg-rose-100 text-rose-600 text-xs font-bold rounded-lg hover:bg-rose-200 transition-colors flex items-center gap-1",children:[o.jsx(l3,{size:12})," Reject"]})]})]}),E.evidence?E.evidence.match(/\.(jpeg|jpg|gif|png)$/i)||E.evidence.startsWith("data:image/")?o.jsxs("a",{href:$w(E.evidence),target:"_blank",rel:"noreferrer",className:"block mt-2 rounded-lg overflow-hidden border border-slate-200 group relative",children:[o.jsx("img",{src:$w(E.evidence),alt:`Evidence for ${E.title}`,className:"w-full h-32 object-cover",onLoad:T=>{const M=T.target.src;M.startsWith("blob:")&&_(O=>[...O,M])}}),o.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors flex items-center justify-center",children:o.jsx(or,{className:"w-6 h-6 text-white opacity-0 group-hover:opacity-100 transition-opacity"})})]}):o.jsxs("a",{href:lM(E.evidence),target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-sm font-bold text-indigo-600 hover:underline mt-2",children:[o.jsx(or,{size:14}),"View Evidence Link"]}):null,E.note&&o.jsxs("p",{className:"text-xs text-slate-500 mt-2 italic border-l-2 border-indigo-200 pl-3",children:['"',E.note,'"']})]},E.id)),!i.presentationUrl&&!i.steps.some(E=>E.evidence)&&o.jsx("p",{className:"text-slate-400 italic text-sm",children:"No external links or evidence attached."})]})]})]})]}),c==="history"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-6",children:"Commit Timeline"}),o.jsx("div",{className:"relative pl-4 border-l-2 border-slate-200 space-y-8",children:i.commits&&i.commits.length>0?i.commits.sort((E,T)=>new Date(T.timestamp).getTime()-new Date(E.timestamp).getTime()).map(E=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute -left-[21px] top-0 w-4 h-4 rounded-full bg-white border-2 border-indigo-500 shadow-sm"}),o.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[o.jsx("p",{className:"text-sm font-bold text-slate-800",children:E.message}),E.stepId&&o.jsxs("span",{className:"inline-block mt-1 px-2 py-0.5 bg-slate-100 text-slate-500 text-[10px] font-bold uppercase tracking-wider rounded",children:["Step ",E.stepId]}),E.link&&o.jsx("div",{className:"mt-3",children:E.link.match(/\.(jpeg|jpg|gif|png)$/i)?o.jsxs("a",{href:E.link,target:"_blank",rel:"noreferrer",className:"block relative group overflow-hidden rounded-lg border border-slate-200",children:[o.jsx("img",{src:E.link,alt:"Proof",className:"w-full h-32 object-cover transition-transform group-hover:scale-105"}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:o.jsx(or,{className:"text-white",size:20})})]}):o.jsxs("a",{href:E.link,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-xs font-bold text-indigo-600 hover:text-indigo-700 bg-indigo-50 px-3 py-2 rounded-lg border border-indigo-100 transition-colors",children:[o.jsx(or,{size:14})," View Attached Proof"]})}),o.jsxs("p",{className:"text-xs text-slate-400 mt-2 font-medium flex items-center gap-1",children:[o.jsx(fs,{size:12})," ",new Date(E.timestamp).toLocaleString()]})]})]},E.id)):o.jsx("div",{className:"text-center py-10",children:o.jsx("p",{className:"text-slate-400 text-sm font-bold",children:"No history recorded."})})})]})]}),o.jsxs("div",{className:"w-full md:w-96 bg-white shrink-0 flex flex-col p-8",children:[o.jsxs("div",{className:"flex-1 space-y-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-4",children:"Instructor Feedback"}),o.jsx("textarea",{className:"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-xl font-medium text-slate-600 outline-none focus:border-indigo-500 focus:bg-white transition-all h-32 resize-none",placeholder:"Write encouragement or required changes...",value:f,onChange:E=>m(E.target.value)})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-wider mb-4",children:"Awards & XP"}),o.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl border border-indigo-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"font-bold text-indigo-900",children:"Completion XP"}),o.jsxs("div",{className:"flex items-center gap-2 bg-white px-3 py-1 rounded-lg border border-indigo-100",children:[o.jsx(B0,{size:14,className:"text-amber-500"}),o.jsxs("span",{className:"font-black text-indigo-900",children:[g," XP"]})]})]}),o.jsx("input",{type:"range",min:"10",max:"500",step:"10",value:g,onChange:E=>y(Number(E.target.value)),className:"w-full h-2 bg-indigo-200 rounded-full appearance-none cursor-pointer accent-indigo-600"})]})]})]}),o.jsxs("div",{className:"pt-8 mt-8 border-t border-slate-100 space-y-3",children:[o.jsxs("button",{onClick:()=>k("published"),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold flex items-center justify-center gap-3 shadow-lg shadow-indigo-500/30 transition-all hover:-translate-y-1",children:[o.jsx(Ln,{size:20,className:"stroke-[3]"})," Approve & Publish"]}),o.jsxs("button",{onClick:()=>k("changes_requested"),className:"w-full py-4 bg-white border-2 border-amber-200 text-amber-600 hover:bg-amber-50 rounded-xl font-bold flex items-center justify-center gap-3 transition-all",children:[o.jsx(mE,{size:20,className:"stroke-[3]"})," Request Changes"]})]})]})]})]})})},cM=({onCreateMission:n})=>{const[e,t]=C.useState("PROGRAMS"),[s,i]=C.useState(null),[l,c]=C.useState(null),[d,f]=C.useState(null),[m,g]=C.useState(null),[y,v]=C.useState([]),[_,k]=C.useState([]),[E,T]=C.useState([]),[M,O]=C.useState([]),[q,$]=C.useState(new Map),[Q,K]=C.useState(!0);C.useEffect(()=>{(async()=>{try{if(!J)return;const A=await st(je(J,"programs")),he=[];A.docs.forEach(re=>{const ae=re.data();ae.status==="active"&&he.push({id:re.id,name:ae.name,type:ae.type||"Regular Program",grades:ae.grades||[]})}),k(he);const ie=await st(je(J,"project_templates")),le=[];ie.docs.forEach(re=>{var xe,Ce;const ae=re.data();(ae.status==="assigned"||ae.status==="featured")&&(le.push({id:re.id,...ae}),((Ce=(xe=ae.targetAudience)==null?void 0:xe.grades)==null?void 0:Ce.length)>0&&console.log(`[Template] ${ae.title} targets grades:`,ae.targetAudience.grades))});const G=[],F=new Set,U=[];he.forEach(re=>{re.grades.forEach(ae=>U.push(ae))}),le.forEach(re=>{var xe;const ae=(xe=re.targetAudience)==null?void 0:xe.grades;ae&&ae.length>0?ae.forEach(Ce=>{U.some(De=>De.id===Ce)&&(G.push({id:re.id,title:re.title,status:re.status||"assigned",grade:Ce,templateId:re.id,difficulty:re.difficulty,station:re.station,targetAudience:re.targetAudience}),F.add(`${re.title}  Grade ${Ce}`))}):(G.push({id:re.id,title:re.title,status:re.status||"assigned",grade:"Uncategorized",templateId:re.id,difficulty:re.difficulty,station:re.station,targetAudience:re.targetAudience}),F.add(`${re.title}  Uncategorized`))}),v(Array.from(F)),T(G),console.log("[GradeProjectFilter] Loaded:",{programs:he.length,templates:le.length,matchedMissions:G.length});const z=(await st(je(J,"student_projects"))).docs.map(re=>({id:re.id,...re.data()}));O(z);const Y=await st(je(J,"users")),Ne=new Map;Y.docs.forEach(re=>{Ne.set(re.id,{id:re.id,...re.data()})}),$(Ne)}catch(A){console.error("Error fetching grade data:",A)}finally{K(!1)}})()},[]);const P=l?E.filter(D=>D.grade===l):[],j=ds.useMemo(()=>{let D=P;m&&(D=P.filter(he=>{var G,F,U;const ie=(G=he.targetAudience)==null?void 0:G.groups;if(!ie||ie.length===0)return!0;const le=(U=(F=s==null?void 0:s.grades.find(X=>X.id===l))==null?void 0:F.groups)==null?void 0:U.find(X=>X.id===m);return le?ie.includes(le.name):!1}));const A={};return D.forEach(he=>{const ie=he.title.trim()||"Untitled";A[ie]||(A[ie]=[]),A[ie].push(he)}),Object.entries(A).map(([he,ie])=>({title:he,count:ie.length,completed:ie.filter(le=>le.status==="published").length,projects:ie})).sort((he,ie)=>ie.count-he.count)},[P,m,s,l]),V=C.useMemo(()=>{if(!d)return[];const D=E.find(he=>he.title===d);return D?M.filter(he=>he.templateId===D.templateId).map(he=>{const ie=q.get(he.userId);return{...he,studentName:(ie==null?void 0:ie.name)||"Unknown Student",avatarUrl:(ie==null?void 0:ie.avatarUrl)||null}}):[]},[d,M,q,E]),[I,L]=C.useState(null);if(Q)return o.jsx("div",{className:"flex h-96 items-center justify-center",children:o.jsx(z0,{className:"animate-spin text-blue-500",size:48})});if(e==="PROGRAMS")return o.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-[#2D2B6B]",children:"Select Program"}),o.jsx("p",{className:"text-slate-500 font-medium",children:"Choose a program to view its grades and missions"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(D=>{const A=E.filter(he=>D.grades.some(ie=>ie.id===he.grade));return o.jsxs("button",{onClick:()=>{i(D),t("GRADES")},className:"group relative overflow-hidden bg-white hover:bg-slate-50 border-2 border-slate-100 hover:border-indigo-300 rounded-[2rem] p-6 text-left transition-all hover:-translate-y-1 hover:shadow-xl",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-indigo-400 to-purple-500 opacity-5 group-hover:opacity-10 rounded-bl-full transition-opacity"}),o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsx("div",{className:"p-3 bg-indigo-50 rounded-xl",children:o.jsx(pc,{size:24,className:"text-indigo-600"})}),o.jsx("span",{className:"text-xs font-bold px-2 py-1 rounded-full bg-slate-100 text-slate-600",children:D.type})]}),o.jsx("h3",{className:"text-xl font-black text-slate-800 mb-2",children:D.name}),o.jsxs("p",{className:"text-sm text-slate-500 mb-4",children:[D.grades.length," Grade",D.grades.length!==1?"s":""]}),o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-xs uppercase tracking-wider bg-slate-100 w-fit px-3 py-1.5 rounded-lg",children:[o.jsx($d,{size:14})," ",A.length," Projects"]})]},D.id)})})]});if(e==="GRADES")return s?o.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t("PROGRAMS"),className:"p-3 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 transition-colors",children:o.jsx(Ac,{size:24})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm font-bold uppercase tracking-wider mb-1",children:[o.jsx(pc,{size:16})," ",s.name]}),o.jsx("h2",{className:"text-3xl font-black text-[#2D2B6B]",children:"Select Grade Level"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.grades.map(D=>{const A=E.filter(he=>he.grade===D.id).length;return o.jsxs("button",{onClick:()=>{c(D.id),t("MISSIONS")},className:"group relative overflow-hidden bg-white hover:bg-slate-50 border-2 border-slate-100 hover:border-slate-300 rounded-[2.5rem] p-8 text-left transition-all hover:-translate-y-2 hover:shadow-xl",children:[o.jsx("div",{className:"absolute top-0 right-0 p-32 bg-gradient-to-br from-indigo-400 to-purple-500 opacity-5 group-hover:opacity-10 rounded-bl-full transition-opacity"}),o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center text-white shadow-lg mb-6 group-hover:scale-110 transition-transform",children:o.jsx(pc,{size:32})}),o.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-3",children:D.name}),D.groups&&D.groups.length>0&&o.jsxs("div",{className:"mb-4 space-y-2",children:[o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Groups:"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:D.groups.map(he=>o.jsx("span",{className:"text-xs px-2 py-1 bg-indigo-50 text-indigo-600 rounded-lg border border-indigo-200 font-medium",title:`${he.day} at ${he.time}`,children:he.name},he.id))})]}),o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-xs uppercase tracking-wider bg-slate-100 w-fit px-3 py-1.5 rounded-lg",children:[o.jsx($d,{size:14})," ",A," Projects"]})]},D.id)}),o.jsxs("button",{onClick:()=>{c("Uncategorized"),t("MISSIONS")},className:"group relative overflow-hidden bg-slate-100 hover:bg-slate-200 border-2 border-slate-200 hover:border-slate-300 rounded-[2.5rem] p-8 text-left transition-all hover:-translate-y-2 hover:shadow-xl",children:[o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-slate-400 flex items-center justify-center text-white shadow-lg mb-6 group-hover:scale-110 transition-transform",children:o.jsx(yE,{size:32})}),o.jsx("h3",{className:"text-2xl font-black text-slate-800 mb-2",children:"Uncategorized"}),o.jsx("p",{className:"text-slate-500 font-medium text-sm mb-6",children:"Unmatched Projects"}),o.jsxs("div",{className:"flex items-center gap-2 text-slate-500 font-bold text-xs uppercase tracking-wider bg-white w-fit px-3 py-1.5 rounded-lg",children:[o.jsx($d,{size:14})," ",E.filter(D=>D.grade==="Uncategorized").length," Projects"]})]})]}),o.jsxs("div",{className:"mt-12 p-4 bg-slate-100 rounded-xl border border-slate-300 text-xs text-slate-500 font-mono",children:[o.jsx("p",{className:"font-bold mb-2",children:"DEBUG: Matching Logic Results:"}),o.jsx("div",{className:"flex flex-col gap-2 max-h-40 overflow-y-auto",children:y.map((D,A)=>o.jsx("span",{className:"bg-white px-2 py-1 rounded border border-slate-200 shadow-sm",children:D},A))}),o.jsxs("p",{className:"font-bold mt-4 mb-2",children:["Available Grades in ",s.name,":"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:s.grades.map(D=>o.jsxs("span",{className:"bg-indigo-50 text-indigo-700 px-2 py-1 rounded border border-indigo-200 shadow-sm",children:[D.name," (ID: ",D.id,")"]},D.id))})]})]}):(t("PROGRAMS"),null);if(e==="MISSIONS"){const D=s==null?void 0:s.grades.find(A=>A.id===l);return o.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t("GRADES"),className:"p-3 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 transition-colors",children:o.jsx(Ac,{size:24})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm font-bold uppercase tracking-wider mb-1",children:[o.jsx(pc,{size:16})," ",(D==null?void 0:D.name)||l]}),o.jsx("h2",{className:"text-3xl font-black text-[#2D2B6B]",children:"Select Mission"})]})]}),n&&o.jsxs("button",{onClick:()=>n(l||void 0,s==null?void 0:s.id),className:"flex items-center gap-2 px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold shadow-lg shadow-indigo-500/20 transition-all hover:-translate-y-1",children:[o.jsx(Fn,{size:20}),"Create Mission"]})]}),(D==null?void 0:D.groups)&&D.groups.length>0&&o.jsxs("div",{className:"bg-white p-4 rounded-2xl border-2 border-slate-100",children:[o.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3",children:"Filter by Group:"}),o.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.jsx("button",{onClick:()=>g(null),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${m===null?"bg-indigo-600 text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:"All Groups"}),D.groups.map(A=>o.jsxs("button",{onClick:()=>g(A.id),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all flex items-center gap-2 ${m===A.id?"bg-purple-600 text-white shadow-md":"bg-purple-50 text-purple-600 hover:bg-purple-100 border border-purple-200"}`,title:`${A.day} at ${A.time}`,children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${m===A.id?"bg-purple-500 text-white":"bg-purple-200 text-purple-700"}`,children:A.day.substring(0,3)}),A.name]},A.id))]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[j.map(A=>o.jsxs("button",{onClick:()=>{f(A.title),t("STUDENTS")},className:"bg-white p-6 rounded-[2rem] border-2 border-slate-100 hover:border-indigo-200 shadow-sm hover:shadow-xl transition-all text-left group",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("div",{className:"p-4 bg-indigo-50 text-indigo-600 rounded-2xl group-hover:scale-110 transition-transform",children:o.jsx(pc,{size:24,className:"opacity-60"})}),o.jsxs("span",{className:"bg-slate-100 text-slate-600 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[o.jsx(Pc,{size:12})," ",A.count]})]}),o.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2 line-clamp-2 group-hover:text-indigo-600 transition-colors",children:A.title}),o.jsx("div",{className:"w-full bg-slate-100 h-2 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${A.completed/A.count*100}%`}})}),o.jsxs("div",{className:"flex justify-between mt-2 text-xs font-medium text-slate-400",children:[o.jsx("span",{children:"Progress"}),o.jsxs("span",{children:[A.completed,"/",A.count," Done"]})]})]},A.title)),j.length===0&&o.jsx("div",{className:"col-span-full py-12 text-center text-slate-400",children:o.jsx("p",{className:"text-lg",children:"No missions found for this grade."})})]})]})}return o.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-4 duration-500",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>t("MISSIONS"),className:"p-3 rounded-full bg-slate-100 hover:bg-slate-200 text-slate-600 transition-colors",children:o.jsx(Ac,{size:24})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 text-slate-400 text-sm font-bold uppercase tracking-wider mb-1",children:[o.jsx("span",{onClick:()=>t("GRADES"),className:"cursor-pointer hover:underline",children:l}),o.jsx(e3,{size:14}),o.jsx("span",{children:"Mission"})]}),o.jsx("h2",{className:"text-3xl font-black text-[#2D2B6B]",children:d})]})]}),V.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-slate-50 rounded-3xl border-2 border-dashed border-slate-200",children:[o.jsx("div",{className:"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center text-slate-400 mb-4",children:o.jsx($d,{size:40})}),o.jsx("h3",{className:"text-xl font-bold text-slate-600",children:"No Submissions Yet"}),o.jsx("p",{className:"text-slate-400 text-center max-w-sm mt-2",children:"Students haven't started this mission yet. Check back later once they begin working!"})]}):o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:V.map(D=>o.jsxs("div",{onClick:()=>L(D.id),className:"group bg-white rounded-2xl border border-slate-200 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all cursor-pointer relative",children:[o.jsxs("div",{className:"h-24 bg-slate-100 relative overflow-hidden",children:[D.avatarUrl?o.jsx("img",{src:D.avatarUrl,className:"w-full h-full object-cover opacity-50 group-hover:opacity-100 transition-opacity"}):o.jsx("div",{className:"w-full h-full bg-slate-200 flex items-center justify-center text-slate-400",children:o.jsx(Pc,{size:32})}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),o.jsx("div",{className:"absolute bottom-2 left-3 text-white font-bold text-sm truncate w-11/12",children:D.studentName})]}),o.jsxs("div",{className:"p-4",children:[o.jsx("h4",{className:"font-bold text-slate-800 mb-1 line-clamp-1",children:D.title}),o.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 mb-3",children:[o.jsx(Pc,{size:12})," ",D.studentName]}),o.jsx("div",{className:"flex justify-between items-center",children:o.jsx("span",{className:`px-2 py-1 text-[10px] font-bold uppercase tracking-wider rounded border ${D.status==="published"?"bg-emerald-50 text-emerald-600 border-emerald-200":D.status==="building"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-500 border-slate-200"}`,children:D.status})}),D.debugInfo&&o.jsx("div",{className:"mt-2 text-[10px] text-slate-400 font-mono bg-slate-50 p-1 rounded break-all border border-slate-100",children:D.debugInfo})]})]},D.id))}),I&&o.jsx(IE,{projectId:I,onClose:()=>L(null)})]})},q0=C.createContext({});function G0(n){const e=C.useRef(null);return e.current===null&&(e.current=n()),e.current}const W0=typeof window<"u",AE=W0?C.useLayoutEffect:C.useEffect,Sf=C.createContext(null);function H0(n,e){n.indexOf(e)===-1&&n.push(e)}function K0(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Yr=(n,e,t)=>t>e?e:t<n?n:t;let Q0=()=>{};const Xr={},PE=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function RE(n){return typeof n=="object"&&n!==null}const DE=n=>/^0[^.\s]+$/u.test(n);function Y0(n){let e;return()=>(e===void 0&&(e=n()),e)}const ps=n=>n,uM=(n,e)=>t=>e(n(t)),wu=(...n)=>n.reduce(uM),Xc=(n,e,t)=>{const s=e-n;return s===0?1:(t-n)/s};class X0{constructor(){this.subscriptions=[]}add(e){return H0(this.subscriptions,e),()=>K0(this.subscriptions,e)}notify(e,t,s){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,t,s);else for(let l=0;l<i;l++){const c=this.subscriptions[l];c&&c(e,t,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const fr=n=>n*1e3,us=n=>n/1e3;function ME(n,e){return e?n*(1e3/e):0}const VE=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,dM=1e-7,hM=12;function fM(n,e,t,s,i){let l,c,d=0;do c=e+(t-e)/2,l=VE(c,s,i)-n,l>0?t=c:e=c;while(Math.abs(l)>dM&&++d<hM);return c}function _u(n,e,t,s){if(n===e&&t===s)return ps;const i=l=>fM(l,0,1,n,t);return l=>l===0||l===1?l:VE(i(l),e,s)}const LE=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,OE=n=>e=>1-n(1-e),FE=_u(.33,1.53,.69,.99),J0=OE(FE),UE=LE(J0),zE=n=>(n*=2)<1?.5*J0(n):.5*(2-Math.pow(2,-10*(n-1))),Z0=n=>1-Math.sin(Math.acos(n)),BE=OE(Z0),$E=LE(Z0),pM=_u(.42,0,1,1),mM=_u(0,0,.58,1),qE=_u(.42,0,.58,1),gM=n=>Array.isArray(n)&&typeof n[0]!="number",GE=n=>Array.isArray(n)&&typeof n[0]=="number",xM={linear:ps,easeIn:pM,easeInOut:qE,easeOut:mM,circIn:Z0,circInOut:$E,circOut:BE,backIn:J0,backInOut:UE,backOut:FE,anticipate:zE},yM=n=>typeof n=="string",qw=n=>{if(GE(n)){Q0(n.length===4);const[e,t,s,i]=n;return _u(e,t,s,i)}else if(yM(n))return xM[n];return n},qd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function vM(n,e){let t=new Set,s=new Set,i=!1,l=!1;const c=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function f(g){c.has(g)&&(m.schedule(g),n()),g(d)}const m={schedule:(g,y=!1,v=!1)=>{const k=v&&i?t:s;return y&&c.add(g),k.has(g)||k.add(g),g},cancel:g=>{s.delete(g),c.delete(g)},process:g=>{if(d=g,i){l=!0;return}i=!0,[t,s]=[s,t],t.forEach(f),t.clear(),i=!1,l&&(l=!1,m.process(g))}};return m}const bM=40;function WE(n,e){let t=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},l=()=>t=!0,c=qd.reduce((q,$)=>(q[$]=vM(l),q),{}),{setup:d,read:f,resolveKeyframes:m,preUpdate:g,update:y,preRender:v,render:_,postRender:k}=c,E=()=>{const q=Xr.useManualTiming?i.timestamp:performance.now();t=!1,Xr.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(q-i.timestamp,bM),1)),i.timestamp=q,i.isProcessing=!0,d.process(i),f.process(i),m.process(i),g.process(i),y.process(i),v.process(i),_.process(i),k.process(i),i.isProcessing=!1,t&&e&&(s=!1,n(E))},T=()=>{t=!0,s=!0,i.isProcessing||n(E)};return{schedule:qd.reduce((q,$)=>{const Q=c[$];return q[$]=(K,P=!1,j=!1)=>(t||T(),Q.schedule(K,P,j)),q},{}),cancel:q=>{for(let $=0;$<qd.length;$++)c[qd[$]].cancel(q)},state:i,steps:c}}const{schedule:gt,cancel:Hi,state:an,steps:vm}=WE(typeof requestAnimationFrame<"u"?requestAnimationFrame:ps,!0);let mh;function wM(){mh=void 0}const On={now:()=>(mh===void 0&&On.set(an.isProcessing||Xr.useManualTiming?an.timestamp:performance.now()),mh),set:n=>{mh=n,queueMicrotask(wM)}},HE=n=>e=>typeof e=="string"&&e.startsWith(n),KE=HE("--"),_M=HE("var(--"),ex=n=>_M(n)?NM.test(n.split("/*")[0].trim()):!1,NM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,wl={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Jc={...wl,transform:n=>Yr(0,1,n)},Gd={...wl,default:1},Rc=n=>Math.round(n*1e5)/1e5,tx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function EM(n){return n==null}const kM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nx=(n,e)=>t=>!!(typeof t=="string"&&kM.test(t)&&t.startsWith(n)||e&&!EM(t)&&Object.prototype.hasOwnProperty.call(t,e)),QE=(n,e,t)=>s=>{if(typeof s!="string")return s;const[i,l,c,d]=s.match(tx);return{[n]:parseFloat(i),[e]:parseFloat(l),[t]:parseFloat(c),alpha:d!==void 0?parseFloat(d):1}},SM=n=>Yr(0,255,n),bm={...wl,transform:n=>Math.round(SM(n))},Vo={test:nx("rgb","red"),parse:QE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:s=1})=>"rgba("+bm.transform(n)+", "+bm.transform(e)+", "+bm.transform(t)+", "+Rc(Jc.transform(s))+")"};function TM(n){let e="",t="",s="",i="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),s=n.substring(5,7),i=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),s=n.substring(3,4),i=n.substring(4,5),e+=e,t+=t,s+=s,i+=i),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}}const xg={test:nx("#"),parse:TM,transform:Vo.transform},Nu=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Si=Nu("deg"),pr=Nu("%"),Le=Nu("px"),jM=Nu("vh"),CM=Nu("vw"),Gw={...pr,parse:n=>pr.parse(n)/100,transform:n=>pr.transform(n*100)},za={test:nx("hsl","hue"),parse:QE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:s=1})=>"hsla("+Math.round(n)+", "+pr.transform(Rc(e))+", "+pr.transform(Rc(t))+", "+Rc(Jc.transform(s))+")"},Ft={test:n=>Vo.test(n)||xg.test(n)||za.test(n),parse:n=>Vo.test(n)?Vo.parse(n):za.test(n)?za.parse(n):xg.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Vo.transform(n):za.transform(n),getAnimatableNone:n=>{const e=Ft.parse(n);return e.alpha=0,Ft.transform(e)}},IM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function AM(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(tx))==null?void 0:e.length)||0)+(((t=n.match(IM))==null?void 0:t.length)||0)>0}const YE="number",XE="color",PM="var",RM="var(",Ww="${}",DM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Zc(n){const e=n.toString(),t=[],s={color:[],number:[],var:[]},i=[];let l=0;const d=e.replace(DM,f=>(Ft.test(f)?(s.color.push(l),i.push(XE),t.push(Ft.parse(f))):f.startsWith(RM)?(s.var.push(l),i.push(PM),t.push(f)):(s.number.push(l),i.push(YE),t.push(parseFloat(f))),++l,Ww)).split(Ww);return{values:t,split:d,indexes:s,types:i}}function JE(n){return Zc(n).values}function ZE(n){const{split:e,types:t}=Zc(n),s=e.length;return i=>{let l="";for(let c=0;c<s;c++)if(l+=e[c],i[c]!==void 0){const d=t[c];d===YE?l+=Rc(i[c]):d===XE?l+=Ft.transform(i[c]):l+=i[c]}return l}}const MM=n=>typeof n=="number"?0:Ft.test(n)?Ft.getAnimatableNone(n):n;function VM(n){const e=JE(n);return ZE(n)(e.map(MM))}const Ki={test:AM,parse:JE,createTransformer:ZE,getAnimatableNone:VM};function wm(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function LM({hue:n,saturation:e,lightness:t,alpha:s}){n/=360,e/=100,t/=100;let i=0,l=0,c=0;if(!e)i=l=c=t;else{const d=t<.5?t*(1+e):t+e-t*e,f=2*t-d;i=wm(f,d,n+1/3),l=wm(f,d,n),c=wm(f,d,n-1/3)}return{red:Math.round(i*255),green:Math.round(l*255),blue:Math.round(c*255),alpha:s}}function zh(n,e){return t=>t>0?e:n}const Nt=(n,e,t)=>n+(e-n)*t,_m=(n,e,t)=>{const s=n*n,i=t*(e*e-s)+s;return i<0?0:Math.sqrt(i)},OM=[xg,Vo,za],FM=n=>OM.find(e=>e.test(n));function Hw(n){const e=FM(n);if(!e)return!1;let t=e.parse(n);return e===za&&(t=LM(t)),t}const Kw=(n,e)=>{const t=Hw(n),s=Hw(e);if(!t||!s)return zh(n,e);const i={...t};return l=>(i.red=_m(t.red,s.red,l),i.green=_m(t.green,s.green,l),i.blue=_m(t.blue,s.blue,l),i.alpha=Nt(t.alpha,s.alpha,l),Vo.transform(i))},yg=new Set(["none","hidden"]);function UM(n,e){return yg.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function zM(n,e){return t=>Nt(n,e,t)}function sx(n){return typeof n=="number"?zM:typeof n=="string"?ex(n)?zh:Ft.test(n)?Kw:qM:Array.isArray(n)?ek:typeof n=="object"?Ft.test(n)?Kw:BM:zh}function ek(n,e){const t=[...n],s=t.length,i=n.map((l,c)=>sx(l)(l,e[c]));return l=>{for(let c=0;c<s;c++)t[c]=i[c](l);return t}}function BM(n,e){const t={...n,...e},s={};for(const i in t)n[i]!==void 0&&e[i]!==void 0&&(s[i]=sx(n[i])(n[i],e[i]));return i=>{for(const l in s)t[l]=s[l](i);return t}}function $M(n,e){const t=[],s={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const l=e.types[i],c=n.indexes[l][s[l]],d=n.values[c]??0;t[i]=d,s[l]++}return t}const qM=(n,e)=>{const t=Ki.createTransformer(e),s=Zc(n),i=Zc(e);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?yg.has(n)&&!i.values.length||yg.has(e)&&!s.values.length?UM(n,e):wu(ek($M(s,i),i.values),t):zh(n,e)};function tk(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?Nt(n,e,t):sx(n)(n,e)}const GM=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>gt.update(e,t),stop:()=>Hi(e),now:()=>an.isProcessing?an.timestamp:On.now()}},nk=(n,e,t=10)=>{let s="";const i=Math.max(Math.round(e/t),2);for(let l=0;l<i;l++)s+=Math.round(n(l/(i-1))*1e4)/1e4+", ";return`linear(${s.substring(0,s.length-2)})`},Bh=2e4;function rx(n){let e=0;const t=50;let s=n.next(e);for(;!s.done&&e<Bh;)e+=t,s=n.next(e);return e>=Bh?1/0:e}function WM(n,e=100,t){const s=t({...n,keyframes:[0,e]}),i=Math.min(rx(s),Bh);return{type:"keyframes",ease:l=>s.next(i*l).value/e,duration:us(i)}}const HM=5;function sk(n,e,t){const s=Math.max(e-HM,0);return ME(t-n(s),e-s)}const It={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nm=.001;function KM({duration:n=It.duration,bounce:e=It.bounce,velocity:t=It.velocity,mass:s=It.mass}){let i,l,c=1-e;c=Yr(It.minDamping,It.maxDamping,c),n=Yr(It.minDuration,It.maxDuration,us(n)),c<1?(i=m=>{const g=m*c,y=g*n,v=g-t,_=vg(m,c),k=Math.exp(-y);return Nm-v/_*k},l=m=>{const y=m*c*n,v=y*t+t,_=Math.pow(c,2)*Math.pow(m,2)*n,k=Math.exp(-y),E=vg(Math.pow(m,2),c);return(-i(m)+Nm>0?-1:1)*((v-_)*k)/E}):(i=m=>{const g=Math.exp(-m*n),y=(m-t)*n+1;return-Nm+g*y},l=m=>{const g=Math.exp(-m*n),y=(t-m)*(n*n);return g*y});const d=5/n,f=YM(i,l,d);if(n=fr(n),isNaN(f))return{stiffness:It.stiffness,damping:It.damping,duration:n};{const m=Math.pow(f,2)*s;return{stiffness:m,damping:c*2*Math.sqrt(s*m),duration:n}}}const QM=12;function YM(n,e,t){let s=t;for(let i=1;i<QM;i++)s=s-n(s)/e(s);return s}function vg(n,e){return n*Math.sqrt(1-e*e)}const XM=["duration","bounce"],JM=["stiffness","damping","mass"];function Qw(n,e){return e.some(t=>n[t]!==void 0)}function ZM(n){let e={velocity:It.velocity,stiffness:It.stiffness,damping:It.damping,mass:It.mass,isResolvedFromDuration:!1,...n};if(!Qw(n,JM)&&Qw(n,XM))if(n.visualDuration){const t=n.visualDuration,s=2*Math.PI/(t*1.2),i=s*s,l=2*Yr(.05,1,1-(n.bounce||0))*Math.sqrt(i);e={...e,mass:It.mass,stiffness:i,damping:l}}else{const t=KM(n);e={...e,...t,mass:It.mass},e.isResolvedFromDuration=!0}return e}function $h(n=It.visualDuration,e=It.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:s,restDelta:i}=t;const l=t.keyframes[0],c=t.keyframes[t.keyframes.length-1],d={done:!1,value:l},{stiffness:f,damping:m,mass:g,duration:y,velocity:v,isResolvedFromDuration:_}=ZM({...t,velocity:-us(t.velocity||0)}),k=v||0,E=m/(2*Math.sqrt(f*g)),T=c-l,M=us(Math.sqrt(f/g)),O=Math.abs(T)<5;s||(s=O?It.restSpeed.granular:It.restSpeed.default),i||(i=O?It.restDelta.granular:It.restDelta.default);let q;if(E<1){const Q=vg(M,E);q=K=>{const P=Math.exp(-E*M*K);return c-P*((k+E*M*T)/Q*Math.sin(Q*K)+T*Math.cos(Q*K))}}else if(E===1)q=Q=>c-Math.exp(-M*Q)*(T+(k+M*T)*Q);else{const Q=M*Math.sqrt(E*E-1);q=K=>{const P=Math.exp(-E*M*K),j=Math.min(Q*K,300);return c-P*((k+E*M*T)*Math.sinh(j)+Q*T*Math.cosh(j))/Q}}const $={calculatedDuration:_&&y||null,next:Q=>{const K=q(Q);if(_)d.done=Q>=y;else{let P=Q===0?k:0;E<1&&(P=Q===0?fr(k):sk(q,Q,K));const j=Math.abs(P)<=s,V=Math.abs(c-K)<=i;d.done=j&&V}return d.value=d.done?c:K,d},toString:()=>{const Q=Math.min(rx($),Bh),K=nk(P=>$.next(Q*P).value,Q,30);return Q+"ms "+K},toTransition:()=>{}};return $}$h.applyToOptions=n=>{const e=WM(n,100,$h);return n.ease=e.ease,n.duration=fr(e.duration),n.type="keyframes",n};function bg({keyframes:n,velocity:e=0,power:t=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:l=500,modifyTarget:c,min:d,max:f,restDelta:m=.5,restSpeed:g}){const y=n[0],v={done:!1,value:y},_=j=>d!==void 0&&j<d||f!==void 0&&j>f,k=j=>d===void 0?f:f===void 0||Math.abs(d-j)<Math.abs(f-j)?d:f;let E=t*e;const T=y+E,M=c===void 0?T:c(T);M!==T&&(E=M-y);const O=j=>-E*Math.exp(-j/s),q=j=>M+O(j),$=j=>{const V=O(j),I=q(j);v.done=Math.abs(V)<=m,v.value=v.done?M:I};let Q,K;const P=j=>{_(v.value)&&(Q=j,K=$h({keyframes:[v.value,k(v.value)],velocity:sk(q,j,v.value),damping:i,stiffness:l,restDelta:m,restSpeed:g}))};return P(0),{calculatedDuration:null,next:j=>{let V=!1;return!K&&Q===void 0&&(V=!0,$(j),P(j)),Q!==void 0&&j>=Q?K.next(j-Q):(!V&&$(j),v)}}}function e6(n,e,t){const s=[],i=t||Xr.mix||tk,l=n.length-1;for(let c=0;c<l;c++){let d=i(n[c],n[c+1]);if(e){const f=Array.isArray(e)?e[c]||ps:e;d=wu(f,d)}s.push(d)}return s}function t6(n,e,{clamp:t=!0,ease:s,mixer:i}={}){const l=n.length;if(Q0(l===e.length),l===1)return()=>e[0];if(l===2&&e[0]===e[1])return()=>e[1];const c=n[0]===n[1];n[0]>n[l-1]&&(n=[...n].reverse(),e=[...e].reverse());const d=e6(e,s,i),f=d.length,m=g=>{if(c&&g<n[0])return e[0];let y=0;if(f>1)for(;y<n.length-2&&!(g<n[y+1]);y++);const v=Xc(n[y],n[y+1],g);return d[y](v)};return t?g=>m(Yr(n[0],n[l-1],g)):m}function n6(n,e){const t=n[n.length-1];for(let s=1;s<=e;s++){const i=Xc(0,e,s);n.push(Nt(t,1,i))}}function s6(n){const e=[0];return n6(e,n.length-1),e}function r6(n,e){return n.map(t=>t*e)}function i6(n,e){return n.map(()=>e||qE).splice(0,n.length-1)}function Dc({duration:n=300,keyframes:e,times:t,ease:s="easeInOut"}){const i=gM(s)?s.map(qw):qw(s),l={done:!1,value:e[0]},c=r6(t&&t.length===e.length?t:s6(e),n),d=t6(c,e,{ease:Array.isArray(i)?i:i6(e,i)});return{calculatedDuration:n,next:f=>(l.value=d(f),l.done=f>=n,l)}}const o6=n=>n!==null;function ix(n,{repeat:e,repeatType:t="loop"},s,i=1){const l=n.filter(o6),d=i<0||e&&t!=="loop"&&e%2===1?0:l.length-1;return!d||s===void 0?l[d]:s}const a6={decay:bg,inertia:bg,tween:Dc,keyframes:Dc,spring:$h};function rk(n){typeof n.type=="string"&&(n.type=a6[n.type])}class ox{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const l6=n=>n/100;class ax extends ox{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var s,i;const{motionValue:t}=this.options;t&&t.updatedAt!==On.now()&&this.tick(On.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(s=this.options).onStop)==null||i.call(s))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;rk(e);const{type:t=Dc,repeat:s=0,repeatDelay:i=0,repeatType:l,velocity:c=0}=e;let{keyframes:d}=e;const f=t||Dc;f!==Dc&&typeof d[0]!="number"&&(this.mixKeyframes=wu(l6,tk(d[0],d[1])),d=[0,100]);const m=f({...e,keyframes:d});l==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...d].reverse(),velocity:-c})),m.calculatedDuration===null&&(m.calculatedDuration=rx(m));const{calculatedDuration:g}=m;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(s+1)-i,this.generator=m}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:s,totalDuration:i,mixKeyframes:l,mirroredGenerator:c,resolvedDuration:d,calculatedDuration:f}=this;if(this.startTime===null)return s.next(0);const{delay:m=0,keyframes:g,repeat:y,repeatType:v,repeatDelay:_,type:k,onUpdate:E,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const M=this.currentTime-m*(this.playbackSpeed>=0?1:-1),O=this.playbackSpeed>=0?M<0:M>i;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let q=this.currentTime,$=s;if(y){const j=Math.min(this.currentTime,i)/d;let V=Math.floor(j),I=j%1;!I&&j>=1&&(I=1),I===1&&V--,V=Math.min(V,y+1),!!(V%2)&&(v==="reverse"?(I=1-I,_&&(I-=_/d)):v==="mirror"&&($=c)),q=Yr(0,1,I)*d}const Q=O?{done:!1,value:g[0]}:$.next(q);l&&(Q.value=l(Q.value));let{done:K}=Q;!O&&f!==null&&(K=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return P&&k!==bg&&(Q.value=ix(g,this.options,T,this.speed)),E&&E(Q.value),P&&this.finish(),Q}then(e,t){return this.finished.then(e,t)}get duration(){return us(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+us(e)}get time(){return us(this.currentTime)}set time(e){var t;e=fr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(t=this.driver)==null||t.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(On.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=us(this.currentTime))}play(){var i,l;if(this.isStopped)return;const{driver:e=GM,startTime:t}=this.options;this.driver||(this.driver=e(c=>this.tick(c))),(l=(i=this.options).onPlay)==null||l.call(i);const s=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=s):this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime||(this.startTime=t??s),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(On.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,t;this.notifyFinished(),this.teardown(),this.state="finished",(t=(e=this.options).onComplete)==null||t.call(e)}cancel(){var e,t;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(t=(e=this.options).onCancel)==null||t.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var t;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(t=this.driver)==null||t.stop(),e.observe(this)}}function c6(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const Lo=n=>n*180/Math.PI,wg=n=>{const e=Lo(Math.atan2(n[1],n[0]));return _g(e)},u6={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:wg,rotateZ:wg,skewX:n=>Lo(Math.atan(n[1])),skewY:n=>Lo(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},_g=n=>(n=n%360,n<0&&(n+=360),n),Yw=wg,Xw=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),Jw=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),d6={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Xw,scaleY:Jw,scale:n=>(Xw(n)+Jw(n))/2,rotateX:n=>_g(Lo(Math.atan2(n[6],n[5]))),rotateY:n=>_g(Lo(Math.atan2(-n[2],n[0]))),rotateZ:Yw,rotate:Yw,skewX:n=>Lo(Math.atan(n[4])),skewY:n=>Lo(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Ng(n){return n.includes("scale")?1:0}function Eg(n,e){if(!n||n==="none")return Ng(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(t)s=d6,i=t;else{const d=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=u6,i=d}if(!i)return Ng(e);const l=s[e],c=i[1].split(",").map(f6);return typeof l=="function"?l(c):c[l]}const h6=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Eg(t,e)};function f6(n){return parseFloat(n.trim())}const _l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nl=new Set(_l),Zw=n=>n===wl||n===Le,p6=new Set(["x","y","z"]),m6=_l.filter(n=>!p6.has(n));function g6(n){const e=[];return m6.forEach(t=>{const s=n.getValue(t);s!==void 0&&(e.push([t,s.get()]),s.set(t.startsWith("scale")?1:0))}),e}const Oo={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Eg(e,"x"),y:(n,{transform:e})=>Eg(e,"y")};Oo.translateX=Oo.x;Oo.translateY=Oo.y;const Fo=new Set;let kg=!1,Sg=!1,Tg=!1;function ik(){if(Sg){const n=Array.from(Fo).filter(s=>s.needsMeasurement),e=new Set(n.map(s=>s.element)),t=new Map;e.forEach(s=>{const i=g6(s);i.length&&(t.set(s,i),s.render())}),n.forEach(s=>s.measureInitialState()),e.forEach(s=>{s.render();const i=t.get(s);i&&i.forEach(([l,c])=>{var d;(d=s.getValue(l))==null||d.set(c)})}),n.forEach(s=>s.measureEndState()),n.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}Sg=!1,kg=!1,Fo.forEach(n=>n.complete(Tg)),Fo.clear()}function ok(){Fo.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Sg=!0)})}function x6(){Tg=!0,ok(),ik(),Tg=!1}class lx{constructor(e,t,s,i,l,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=s,this.motionValue=i,this.element=l,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Fo.add(this),kg||(kg=!0,gt.read(ok),gt.resolveKeyframes(ik))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:s,motionValue:i}=this;if(e[0]===null){const l=i==null?void 0:i.get(),c=e[e.length-1];if(l!==void 0)e[0]=l;else if(s&&t){const d=s.readValue(t,c);d!=null&&(e[0]=d)}e[0]===void 0&&(e[0]=c),i&&l===void 0&&i.set(e[0])}c6(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Fo.delete(this)}cancel(){this.state==="scheduled"&&(Fo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const y6=n=>n.startsWith("--");function v6(n,e,t){y6(e)?n.style.setProperty(e,t):n.style[e]=t}const b6=Y0(()=>window.ScrollTimeline!==void 0),w6={};function _6(n,e){const t=Y0(n);return()=>w6[e]??t()}const ak=_6(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_c=([n,e,t,s])=>`cubic-bezier(${n}, ${e}, ${t}, ${s})`,e1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:_c([0,.65,.55,1]),circOut:_c([.55,0,1,.45]),backIn:_c([.31,.01,.66,-.59]),backOut:_c([.33,1.53,.69,.99])};function lk(n,e){if(n)return typeof n=="function"?ak()?nk(n,e):"ease-out":GE(n)?_c(n):Array.isArray(n)?n.map(t=>lk(t,e)||e1.easeOut):e1[n]}function N6(n,e,t,{delay:s=0,duration:i=300,repeat:l=0,repeatType:c="loop",ease:d="easeOut",times:f}={},m=void 0){const g={[e]:t};f&&(g.offset=f);const y=lk(d,i);Array.isArray(y)&&(g.easing=y);const v={delay:s,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:l+1,direction:c==="reverse"?"alternate":"normal"};return m&&(v.pseudoElement=m),n.animate(g,v)}function ck(n){return typeof n=="function"&&"applyToOptions"in n}function E6({type:n,...e}){return ck(n)&&ak()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class k6 extends ox{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:s,keyframes:i,pseudoElement:l,allowFlatten:c=!1,finalKeyframe:d,onComplete:f}=e;this.isPseudoElement=!!l,this.allowFlatten=c,this.options=e,Q0(typeof e.type!="string");const m=E6(e);this.animation=N6(t,s,i,m,l),m.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const g=ix(i,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(g):v6(t,s,g),this.animation.cancel()}f==null||f(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,t;(t=(e=this.animation).finish)==null||t.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,t;this.isPseudoElement||(t=(e=this.animation).commitStyles)==null||t.call(e)}get duration(){var t,s;const e=((s=(t=this.animation.effect)==null?void 0:t.getComputedTiming)==null?void 0:s.call(t).duration)||0;return us(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+us(e)}get time(){return us(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=fr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){var s;return this.allowFlatten&&((s=this.animation.effect)==null||s.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&b6()?(this.animation.timeline=e,ps):t(this)}}const uk={anticipate:zE,backInOut:UE,circInOut:$E};function S6(n){return n in uk}function T6(n){typeof n.ease=="string"&&S6(n.ease)&&(n.ease=uk[n.ease])}const t1=10;class j6 extends k6{constructor(e){T6(e),rk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:s,onComplete:i,element:l,...c}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const d=new ax({...c,autoplay:!1}),f=fr(this.finishedTime??this.time);t.setWithVelocity(d.sample(f-t1).value,d.sample(f).value,t1),d.stop()}}const n1=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(Ki.test(n)||n==="0")&&!n.startsWith("url("));function C6(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function I6(n,e,t,s){const i=n[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const l=n[n.length-1],c=n1(i,e),d=n1(l,e);return!c||!d?!1:C6(n)||(t==="spring"||ck(t))&&s}function jg(n){n.duration=0,n.type="keyframes"}const A6=new Set(["opacity","clipPath","filter","transform"]),P6=Y0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function R6(n){var g;const{motionValue:e,name:t,repeatDelay:s,repeatType:i,damping:l,type:c}=n;if(!(((g=e==null?void 0:e.owner)==null?void 0:g.current)instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:m}=e.owner.getProps();return P6()&&t&&A6.has(t)&&(t!=="transform"||!m)&&!f&&!s&&i!=="mirror"&&l!==0&&c!=="inertia"}const D6=40;class M6 extends ox{constructor({autoplay:e=!0,delay:t=0,type:s="keyframes",repeat:i=0,repeatDelay:l=0,repeatType:c="loop",keyframes:d,name:f,motionValue:m,element:g,...y}){var k;super(),this.stop=()=>{var E,T;this._animation&&(this._animation.stop(),(E=this.stopTimeline)==null||E.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=On.now();const v={autoplay:e,delay:t,type:s,repeat:i,repeatDelay:l,repeatType:c,name:f,motionValue:m,element:g,...y},_=(g==null?void 0:g.KeyframeResolver)||lx;this.keyframeResolver=new _(d,(E,T,M)=>this.onKeyframesResolved(E,T,v,!M),f,m,g),(k=this.keyframeResolver)==null||k.scheduleResolve()}onKeyframesResolved(e,t,s,i){this.keyframeResolver=void 0;const{name:l,type:c,velocity:d,delay:f,isHandoff:m,onUpdate:g}=s;this.resolvedAt=On.now(),I6(e,l,c,d)||((Xr.instantAnimations||!f)&&(g==null||g(ix(e,s,t))),e[0]=e[e.length-1],jg(s),s.repeat=0);const v={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>D6?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...s,keyframes:e},_=!m&&R6(v)?new j6({...v,element:v.motionValue.owner.current}):new ax(v);_.finished.then(()=>this.notifyFinished()).catch(ps),this.pendingTimeline&&(this.stopTimeline=_.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=_}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),x6()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const V6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function L6(n){const e=V6.exec(n);if(!e)return[,];const[,t,s,i]=e;return[`--${t??s}`,i]}function dk(n,e,t=1){const[s,i]=L6(n);if(!s)return;const l=window.getComputedStyle(e).getPropertyValue(s);if(l){const c=l.trim();return PE(c)?parseFloat(c):c}return ex(i)?dk(i,e,t+1):i}function cx(n,e){return(n==null?void 0:n[e])??(n==null?void 0:n.default)??n}const hk=new Set(["width","height","top","left","right","bottom",..._l]),O6={test:n=>n==="auto",parse:n=>n},fk=n=>e=>e.test(n),pk=[wl,Le,pr,Si,CM,jM,O6],s1=n=>pk.find(fk(n));function F6(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||DE(n):!0}const U6=new Set(["brightness","contrast","saturate","opacity"]);function z6(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[s]=t.match(tx)||[];if(!s)return n;const i=t.replace(s,"");let l=U6.has(e)?1:0;return s!==t&&(l*=100),e+"("+l+i+")"}const B6=/\b([a-z-]*)\(.*?\)/gu,Cg={...Ki,getAnimatableNone:n=>{const e=n.match(B6);return e?e.map(z6).join(" "):n}},r1={...wl,transform:Math.round},$6={rotate:Si,rotateX:Si,rotateY:Si,rotateZ:Si,scale:Gd,scaleX:Gd,scaleY:Gd,scaleZ:Gd,skew:Si,skewX:Si,skewY:Si,distance:Le,translateX:Le,translateY:Le,translateZ:Le,x:Le,y:Le,z:Le,perspective:Le,transformPerspective:Le,opacity:Jc,originX:Gw,originY:Gw,originZ:Le},ux={borderWidth:Le,borderTopWidth:Le,borderRightWidth:Le,borderBottomWidth:Le,borderLeftWidth:Le,borderRadius:Le,radius:Le,borderTopLeftRadius:Le,borderTopRightRadius:Le,borderBottomRightRadius:Le,borderBottomLeftRadius:Le,width:Le,maxWidth:Le,height:Le,maxHeight:Le,top:Le,right:Le,bottom:Le,left:Le,padding:Le,paddingTop:Le,paddingRight:Le,paddingBottom:Le,paddingLeft:Le,margin:Le,marginTop:Le,marginRight:Le,marginBottom:Le,marginLeft:Le,backgroundPositionX:Le,backgroundPositionY:Le,...$6,zIndex:r1,fillOpacity:Jc,strokeOpacity:Jc,numOctaves:r1},q6={...ux,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:Cg,WebkitFilter:Cg},mk=n=>q6[n];function gk(n,e){let t=mk(n);return t!==Cg&&(t=Ki),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const G6=new Set(["auto","none","0"]);function W6(n,e,t){let s=0,i;for(;s<n.length&&!i;){const l=n[s];typeof l=="string"&&!G6.has(l)&&Zc(l).values.length&&(i=n[s]),s++}if(i&&t)for(const l of e)n[l]=gk(t,i)}class H6 extends lx{constructor(e,t,s,i,l){super(e,t,s,i,l,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:s}=this;if(!t||!t.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let m=e[f];if(typeof m=="string"&&(m=m.trim(),ex(m))){const g=dk(m,t.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!hk.has(s)||e.length!==2)return;const[i,l]=e,c=s1(i),d=s1(l);if(c!==d)if(Zw(c)&&Zw(d))for(let f=0;f<e.length;f++){const m=e[f];typeof m=="string"&&(e[f]=parseFloat(m))}else Oo[s]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,s=[];for(let i=0;i<e.length;i++)(e[i]===null||F6(e[i]))&&s.push(i);s.length&&W6(e,s,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:s}=this;if(!e||!e.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Oo[s](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];i!==void 0&&e.getValue(s,i).jump(i,!1)}measureEndState(){var d;const{element:e,name:t,unresolvedKeyframes:s}=this;if(!e||!e.current)return;const i=e.getValue(t);i&&i.jump(this.measuredOrigin,!1);const l=s.length-1,c=s[l];s[l]=Oo[t](e.measureViewportBox(),window.getComputedStyle(e.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(d=this.removedTransforms)!=null&&d.length&&this.removedTransforms.forEach(([f,m])=>{e.getValue(f).set(m)}),this.resolveNoneKeyframes()}}function K6(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let s=document;const i=(t==null?void 0:t[n])??s.querySelectorAll(n);return i?Array.from(i):[]}return Array.from(n)}const xk=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function yk(n){return RE(n)&&"offsetHeight"in n}const i1=30,Q6=n=>!isNaN(parseFloat(n));class Y6{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=s=>{var l;const i=On.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&((l=this.events.change)==null||l.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=On.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Q6(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new X0);const s=this.events[e].add(t);return e==="change"?()=>{s(),gt.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,s){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-s}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=On.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>i1)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,i1);return ME(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,t;(e=this.dependents)==null||e.clear(),(t=this.events.destroy)==null||t.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ll(n,e){return new Y6(n,e)}const{schedule:dx}=WE(queueMicrotask,!1),Ss={x:!1,y:!1};function vk(){return Ss.x||Ss.y}function X6(n){return n==="x"||n==="y"?Ss[n]?null:(Ss[n]=!0,()=>{Ss[n]=!1}):Ss.x||Ss.y?null:(Ss.x=Ss.y=!0,()=>{Ss.x=Ss.y=!1})}function bk(n,e){const t=K6(n),s=new AbortController,i={passive:!0,...e,signal:s.signal};return[t,i,()=>s.abort()]}function o1(n){return!(n.pointerType==="touch"||vk())}function J6(n,e,t={}){const[s,i,l]=bk(n,t),c=d=>{if(!o1(d))return;const{target:f}=d,m=e(f,d);if(typeof m!="function"||!f)return;const g=y=>{o1(y)&&(m(y),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,i)};return s.forEach(d=>{d.addEventListener("pointerenter",c,i)}),l}const wk=(n,e)=>e?n===e?!0:wk(n,e.parentElement):!1,hx=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,Z6=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function eV(n){return Z6.has(n.tagName)||n.tabIndex!==-1}const gh=new WeakSet;function a1(n){return e=>{e.key==="Enter"&&n(e)}}function Em(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const tV=(n,e)=>{const t=n.currentTarget;if(!t)return;const s=a1(()=>{if(gh.has(t))return;Em(t,"down");const i=a1(()=>{Em(t,"up")}),l=()=>Em(t,"cancel");t.addEventListener("keyup",i,e),t.addEventListener("blur",l,e)});t.addEventListener("keydown",s,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",s),e)};function l1(n){return hx(n)&&!vk()}function nV(n,e,t={}){const[s,i,l]=bk(n,t),c=d=>{const f=d.currentTarget;if(!l1(d))return;gh.add(f);const m=e(f,d),g=(_,k)=>{window.removeEventListener("pointerup",y),window.removeEventListener("pointercancel",v),gh.has(f)&&gh.delete(f),l1(_)&&typeof m=="function"&&m(_,{success:k})},y=_=>{g(_,f===window||f===document||t.useGlobalTarget||wk(f,_.target))},v=_=>{g(_,!1)};window.addEventListener("pointerup",y,i),window.addEventListener("pointercancel",v,i)};return s.forEach(d=>{(t.useGlobalTarget?window:d).addEventListener("pointerdown",c,i),yk(d)&&(d.addEventListener("focus",m=>tV(m,i)),!eV(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),l}function _k(n){return RE(n)&&"ownerSVGElement"in n}function sV(n){return _k(n)&&n.tagName==="svg"}const wn=n=>!!(n&&n.getVelocity),rV=[...pk,Ft,Ki],iV=n=>rV.find(fk(n)),fx=C.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function c1(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function oV(...n){return e=>{let t=!1;const s=n.map(i=>{const l=c1(i,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let i=0;i<s.length;i++){const l=s[i];typeof l=="function"?l():c1(n[i],null)}}}}function aV(...n){return C.useCallback(oV(...n),n)}class lV extends C.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const s=t.offsetParent,i=yk(s)&&s.offsetWidth||0,l=this.props.sizeRef.current;l.height=t.offsetHeight||0,l.width=t.offsetWidth||0,l.top=t.offsetTop,l.left=t.offsetLeft,l.right=i-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function cV({children:n,isPresent:e,anchorX:t,root:s}){const i=C.useId(),l=C.useRef(null),c=C.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=C.useContext(fx),f=aV(l,n==null?void 0:n.ref);return C.useInsertionEffect(()=>{const{width:m,height:g,top:y,left:v,right:_}=c.current;if(e||!l.current||!m||!g)return;const k=t==="left"?`left: ${v}`:`right: ${_}`;l.current.dataset.motionPopId=i;const E=document.createElement("style");d&&(E.nonce=d);const T=s??document.head;return T.appendChild(E),E.sheet&&E.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${g}px !important;
            ${k}px !important;
            top: ${y}px !important;
          }
        `),()=>{T.contains(E)&&T.removeChild(E)}},[e]),o.jsx(lV,{isPresent:e,childRef:l,sizeRef:c,children:C.cloneElement(n,{ref:f})})}const uV=({children:n,initial:e,isPresent:t,onExitComplete:s,custom:i,presenceAffectsLayout:l,mode:c,anchorX:d,root:f})=>{const m=G0(dV),g=C.useId();let y=!0,v=C.useMemo(()=>(y=!1,{id:g,initial:e,isPresent:t,custom:i,onExitComplete:_=>{m.set(_,!0);for(const k of m.values())if(!k)return;s&&s()},register:_=>(m.set(_,!1),()=>m.delete(_))}),[t,m,s]);return l&&y&&(v={...v}),C.useMemo(()=>{m.forEach((_,k)=>m.set(k,!1))},[t]),C.useEffect(()=>{!t&&!m.size&&s&&s()},[t]),c==="popLayout"&&(n=o.jsx(cV,{isPresent:t,anchorX:d,root:f,children:n})),o.jsx(Sf.Provider,{value:v,children:n})};function dV(){return new Map}function Nk(n=!0){const e=C.useContext(Sf);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:s,register:i}=e,l=C.useId();C.useEffect(()=>{if(n)return i(l)},[n]);const c=C.useCallback(()=>n&&s&&s(l),[l,s,n]);return!t&&s?[!1,c]:[!0]}const Wd=n=>n.key||"";function u1(n){const e=[];return C.Children.forEach(n,t=>{C.isValidElement(t)&&e.push(t)}),e}const Ek=({children:n,custom:e,initial:t=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:l="sync",propagate:c=!1,anchorX:d="left",root:f})=>{const[m,g]=Nk(c),y=C.useMemo(()=>u1(n),[n]),v=c&&!m?[]:y.map(Wd),_=C.useRef(!0),k=C.useRef(y),E=G0(()=>new Map),[T,M]=C.useState(y),[O,q]=C.useState(y);AE(()=>{_.current=!1,k.current=y;for(let K=0;K<O.length;K++){const P=Wd(O[K]);v.includes(P)?E.delete(P):E.get(P)!==!0&&E.set(P,!1)}},[O,v.length,v.join("-")]);const $=[];if(y!==T){let K=[...y];for(let P=0;P<O.length;P++){const j=O[P],V=Wd(j);v.includes(V)||(K.splice(P,0,j),$.push(j))}return l==="wait"&&$.length&&(K=$),q(u1(K)),M(y),null}const{forceRender:Q}=C.useContext(q0);return o.jsx(o.Fragment,{children:O.map(K=>{const P=Wd(K),j=c&&!m?!1:y===O||v.includes(P),V=()=>{if(E.has(P))E.set(P,!0);else return;let I=!0;E.forEach(L=>{L||(I=!1)}),I&&(Q==null||Q(),q(k.current),c&&(g==null||g()),s&&s())};return o.jsx(uV,{isPresent:j,initial:!_.current||t?void 0:!1,custom:e,presenceAffectsLayout:i,mode:l,root:f,onExitComplete:j?void 0:V,anchorX:d,children:K},P)})})},kk=C.createContext({strict:!1}),d1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},cl={};for(const n in d1)cl[n]={isEnabled:e=>d1[n].some(t=>!!e[t])};function hV(n){for(const e in n)cl[e]={...cl[e],...n[e]}}const fV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function qh(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||fV.has(n)}let Sk=n=>!qh(n);function pV(n){typeof n=="function"&&(Sk=e=>e.startsWith("on")?!qh(e):n(e))}try{pV(require("@emotion/is-prop-valid").default)}catch{}function mV(n,e,t){const s={};for(const i in n)i==="values"&&typeof n.values=="object"||(Sk(i)||t===!0&&qh(i)||!e&&!qh(i)||n.draggable&&i.startsWith("onDrag"))&&(s[i]=n[i]);return s}const Tf=C.createContext({});function jf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function eu(n){return typeof n=="string"||Array.isArray(n)}const px=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],mx=["initial",...px];function Cf(n){return jf(n.animate)||mx.some(e=>eu(n[e]))}function Tk(n){return!!(Cf(n)||n.variants)}function gV(n,e){if(Cf(n)){const{initial:t,animate:s}=n;return{initial:t===!1||eu(t)?t:void 0,animate:eu(s)?s:void 0}}return n.inherit!==!1?e:{}}function xV(n){const{initial:e,animate:t}=gV(n,C.useContext(Tf));return C.useMemo(()=>({initial:e,animate:t}),[h1(e),h1(t)])}function h1(n){return Array.isArray(n)?n.join(" "):n}function f1(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const mc={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Le.test(n))n=parseFloat(n);else return n;const t=f1(n,e.target.x),s=f1(n,e.target.y);return`${t}% ${s}%`}},yV={correct:(n,{treeScale:e,projectionDelta:t})=>{const s=n,i=Ki.parse(n);if(i.length>5)return s;const l=Ki.createTransformer(n),c=typeof i[0]!="number"?1:0,d=t.x.scale*e.x,f=t.y.scale*e.y;i[0+c]/=d,i[1+c]/=f;const m=Nt(d,f,.5);return typeof i[2+c]=="number"&&(i[2+c]/=m),typeof i[3+c]=="number"&&(i[3+c]/=m),l(i)}},Ig={borderRadius:{...mc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:mc,borderTopRightRadius:mc,borderBottomLeftRadius:mc,borderBottomRightRadius:mc,boxShadow:yV};function jk(n,{layout:e,layoutId:t}){return Nl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Ig[n]||n==="opacity")}const vV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},bV=_l.length;function wV(n,e,t){let s="",i=!0;for(let l=0;l<bV;l++){const c=_l[l],d=n[c];if(d===void 0)continue;let f=!0;if(typeof d=="number"?f=d===(c.startsWith("scale")?1:0):f=parseFloat(d)===0,!f||t){const m=xk(d,ux[c]);if(!f){i=!1;const g=vV[c]||c;s+=`${g}(${m}) `}t&&(e[c]=m)}}return s=s.trim(),t?s=t(e,i?"":s):i&&(s="none"),s}function gx(n,e,t){const{style:s,vars:i,transformOrigin:l}=n;let c=!1,d=!1;for(const f in e){const m=e[f];if(Nl.has(f)){c=!0;continue}else if(KE(f)){i[f]=m;continue}else{const g=xk(m,ux[f]);f.startsWith("origin")?(d=!0,l[f]=g):s[f]=g}}if(e.transform||(c||t?s.transform=wV(e,n.transform,t):s.transform&&(s.transform="none")),d){const{originX:f="50%",originY:m="50%",originZ:g=0}=l;s.transformOrigin=`${f} ${m} ${g}`}}const xx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Ck(n,e,t){for(const s in e)!wn(e[s])&&!jk(s,t)&&(n[s]=e[s])}function _V({transformTemplate:n},e){return C.useMemo(()=>{const t=xx();return gx(t,e,n),Object.assign({},t.vars,t.style)},[e])}function NV(n,e){const t=n.style||{},s={};return Ck(s,t,n),Object.assign(s,_V(n,e)),s}function EV(n,e){const t={},s=NV(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=s,t}const kV={offset:"stroke-dashoffset",array:"stroke-dasharray"},SV={offset:"strokeDashoffset",array:"strokeDasharray"};function TV(n,e,t=1,s=0,i=!0){n.pathLength=1;const l=i?kV:SV;n[l.offset]=Le.transform(-s);const c=Le.transform(e),d=Le.transform(t);n[l.array]=`${c} ${d}`}function Ik(n,{attrX:e,attrY:t,attrScale:s,pathLength:i,pathSpacing:l=1,pathOffset:c=0,...d},f,m,g){if(gx(n,d,m),f){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:v}=n;y.transform&&(v.transform=y.transform,delete y.transform),(v.transform||y.transformOrigin)&&(v.transformOrigin=y.transformOrigin??"50% 50%",delete y.transformOrigin),v.transform&&(v.transformBox=(g==null?void 0:g.transformBox)??"fill-box",delete y.transformBox),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),s!==void 0&&(y.scale=s),i!==void 0&&TV(y,i,l,c,!1)}const Ak=()=>({...xx(),attrs:{}}),Pk=n=>typeof n=="string"&&n.toLowerCase()==="svg";function jV(n,e,t,s){const i=C.useMemo(()=>{const l=Ak();return Ik(l,e,Pk(s),n.transformTemplate,n.style),{...l.attrs,style:{...l.style}}},[e]);if(n.style){const l={};Ck(l,n.style,n),i.style={...l,...i.style}}return i}const CV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yx(n){return typeof n!="string"||n.includes("-")?!1:!!(CV.indexOf(n)>-1||/[A-Z]/u.test(n))}function IV(n,e,t,{latestValues:s},i,l=!1){const d=(yx(n)?jV:EV)(e,s,i,n),f=mV(e,typeof n=="string",l),m=n!==C.Fragment?{...f,...d,ref:t}:{},{children:g}=e,y=C.useMemo(()=>wn(g)?g.get():g,[g]);return C.createElement(n,{...m,children:y})}function p1(n){const e=[{},{}];return n==null||n.values.forEach((t,s)=>{e[0][s]=t.get(),e[1][s]=t.getVelocity()}),e}function vx(n,e,t,s){if(typeof e=="function"){const[i,l]=p1(s);e=e(t!==void 0?t:n.custom,i,l)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[i,l]=p1(s);e=e(t!==void 0?t:n.custom,i,l)}return e}function xh(n){return wn(n)?n.get():n}function AV({scrapeMotionValuesFromProps:n,createRenderState:e},t,s,i){return{latestValues:PV(t,s,i,n),renderState:e()}}function PV(n,e,t,s){const i={},l=s(n,{});for(const v in l)i[v]=xh(l[v]);let{initial:c,animate:d}=n;const f=Cf(n),m=Tk(n);e&&m&&!f&&n.inherit!==!1&&(c===void 0&&(c=e.initial),d===void 0&&(d=e.animate));let g=t?t.initial===!1:!1;g=g||c===!1;const y=g?d:c;if(y&&typeof y!="boolean"&&!jf(y)){const v=Array.isArray(y)?y:[y];for(let _=0;_<v.length;_++){const k=vx(n,v[_]);if(k){const{transitionEnd:E,transition:T,...M}=k;for(const O in M){let q=M[O];if(Array.isArray(q)){const $=g?q.length-1:0;q=q[$]}q!==null&&(i[O]=q)}for(const O in E)i[O]=E[O]}}}return i}const Rk=n=>(e,t)=>{const s=C.useContext(Tf),i=C.useContext(Sf),l=()=>AV(n,e,s,i);return t?l():G0(l)};function bx(n,e,t){var l;const{style:s}=n,i={};for(const c in s)(wn(s[c])||e.style&&wn(e.style[c])||jk(c,n)||((l=t==null?void 0:t.getValue(c))==null?void 0:l.liveStyle)!==void 0)&&(i[c]=s[c]);return i}const RV=Rk({scrapeMotionValuesFromProps:bx,createRenderState:xx});function Dk(n,e,t){const s=bx(n,e,t);for(const i in n)if(wn(n[i])||wn(e[i])){const l=_l.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;s[l]=n[i]}return s}const DV=Rk({scrapeMotionValuesFromProps:Dk,createRenderState:Ak}),MV=Symbol.for("motionComponentSymbol");function Ba(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function VV(n,e,t){return C.useCallback(s=>{s&&n.onMount&&n.onMount(s),e&&(s?e.mount(s):e.unmount()),t&&(typeof t=="function"?t(s):Ba(t)&&(t.current=s))},[e])}const wx=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),LV="framerAppearId",Mk="data-"+wx(LV),Vk=C.createContext({});function OV(n,e,t,s,i){var E,T;const{visualElement:l}=C.useContext(Tf),c=C.useContext(kk),d=C.useContext(Sf),f=C.useContext(fx).reducedMotion,m=C.useRef(null);s=s||c.renderer,!m.current&&s&&(m.current=s(n,{visualState:e,parent:l,props:t,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:f}));const g=m.current,y=C.useContext(Vk);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&FV(m.current,t,i,y);const v=C.useRef(!1);C.useInsertionEffect(()=>{g&&v.current&&g.update(t,d)});const _=t[Mk],k=C.useRef(!!_&&!((E=window.MotionHandoffIsComplete)!=null&&E.call(window,_))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,_)));return AE(()=>{g&&(v.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),g.scheduleRenderMicrotask(),k.current&&g.animationState&&g.animationState.animateChanges())}),C.useEffect(()=>{g&&(!k.current&&g.animationState&&g.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var M;(M=window.MotionHandoffMarkAsComplete)==null||M.call(window,_)}),k.current=!1),g.enteringChildren=void 0)}),g}function FV(n,e,t,s){const{layoutId:i,layout:l,drag:c,dragConstraints:d,layoutScroll:f,layoutRoot:m,layoutCrossfade:g}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:Lk(n.parent)),n.projection.setOptions({layoutId:i,layout:l,alwaysMeasureLayout:!!c||d&&Ba(d),visualElement:n,animationType:typeof l=="string"?l:"both",initialPromotionConfig:s,crossfade:g,layoutScroll:f,layoutRoot:m})}function Lk(n){if(n)return n.options.allowProjection!==!1?n.projection:Lk(n.parent)}function km(n,{forwardMotionProps:e=!1}={},t,s){t&&hV(t);const i=yx(n)?DV:RV;function l(d,f){let m;const g={...C.useContext(fx),...d,layoutId:UV(d)},{isStatic:y}=g,v=xV(d),_=i(d,y);if(!y&&W0){zV();const k=BV(g);m=k.MeasureLayout,v.visualElement=OV(n,_,g,s,k.ProjectionNode)}return o.jsxs(Tf.Provider,{value:v,children:[m&&v.visualElement?o.jsx(m,{visualElement:v.visualElement,...g}):null,IV(n,d,VV(_,v.visualElement,f),_,y,e)]})}l.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const c=C.forwardRef(l);return c[MV]=n,c}function UV({layoutId:n}){const e=C.useContext(q0).id;return e&&n!==void 0?e+"-"+n:n}function zV(n,e){C.useContext(kk).strict}function BV(n){const{drag:e,layout:t}=cl;if(!e&&!t)return{};const s={...e,...t};return{MeasureLayout:e!=null&&e.isEnabled(n)||t!=null&&t.isEnabled(n)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function $V(n,e){if(typeof Proxy>"u")return km;const t=new Map,s=(l,c)=>km(l,c,n,e),i=(l,c)=>s(l,c);return new Proxy(i,{get:(l,c)=>c==="create"?s:(t.has(c)||t.set(c,km(c,void 0,n,e)),t.get(c))})}function Ok({top:n,left:e,right:t,bottom:s}){return{x:{min:e,max:t},y:{min:n,max:s}}}function qV({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function GV(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),s=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:s.y,right:s.x}}function Sm(n){return n===void 0||n===1}function Ag({scale:n,scaleX:e,scaleY:t}){return!Sm(n)||!Sm(e)||!Sm(t)}function Po(n){return Ag(n)||Fk(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function Fk(n){return m1(n.x)||m1(n.y)}function m1(n){return n&&n!=="0%"}function Gh(n,e,t){const s=n-t,i=e*s;return t+i}function g1(n,e,t,s,i){return i!==void 0&&(n=Gh(n,i,s)),Gh(n,t,s)+e}function Pg(n,e=0,t=1,s,i){n.min=g1(n.min,e,t,s,i),n.max=g1(n.max,e,t,s,i)}function Uk(n,{x:e,y:t}){Pg(n.x,e.translate,e.scale,e.originPoint),Pg(n.y,t.translate,t.scale,t.originPoint)}const x1=.999999999999,y1=1.0000000000001;function WV(n,e,t,s=!1){const i=t.length;if(!i)return;e.x=e.y=1;let l,c;for(let d=0;d<i;d++){l=t[d],c=l.projectionDelta;const{visualElement:f}=l.options;f&&f.props.style&&f.props.style.display==="contents"||(s&&l.options.layoutScroll&&l.scroll&&l!==l.root&&qa(n,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,Uk(n,c)),s&&Po(l.latestValues)&&qa(n,l.latestValues))}e.x<y1&&e.x>x1&&(e.x=1),e.y<y1&&e.y>x1&&(e.y=1)}function $a(n,e){n.min=n.min+e,n.max=n.max+e}function v1(n,e,t,s,i=.5){const l=Nt(n.min,n.max,i);Pg(n,e,t,l,s)}function qa(n,e){v1(n.x,e.x,e.scaleX,e.scale,e.originX),v1(n.y,e.y,e.scaleY,e.scale,e.originY)}function zk(n,e){return Ok(GV(n.getBoundingClientRect(),e))}function HV(n,e,t){const s=zk(n,t),{scroll:i}=e;return i&&($a(s.x,i.offset.x),$a(s.y,i.offset.y)),s}const b1=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ga=()=>({x:b1(),y:b1()}),w1=()=>({min:0,max:0}),qt=()=>({x:w1(),y:w1()}),Rg={current:null},Bk={current:!1};function KV(){if(Bk.current=!0,!!W0)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Rg.current=n.matches;n.addEventListener("change",e),e()}else Rg.current=!1}const QV=new WeakMap;function YV(n,e,t){for(const s in e){const i=e[s],l=t[s];if(wn(i))n.addValue(s,i);else if(wn(l))n.addValue(s,ll(i,{owner:n}));else if(l!==i)if(n.hasValue(s)){const c=n.getValue(s);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=n.getStaticValue(s);n.addValue(s,ll(c!==void 0?c:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const _1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class XV{scrapeMotionValuesFromProps(e,t,s){return{}}constructor({parent:e,props:t,presenceContext:s,reducedMotionConfig:i,blockInitialAnimation:l,visualState:c},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=On.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,gt.render(this.render,!1,!0))};const{latestValues:f,renderState:m}=c;this.latestValues=f,this.baseTarget={...f},this.initialValues=t.initial?{...f}:{},this.renderState=m,this.parent=e,this.props=t,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=d,this.blockInitialAnimation=!!l,this.isControllingVariants=Cf(t),this.isVariantNode=Tk(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...y}=this.scrapeMotionValuesFromProps(t,{},this);for(const v in y){const _=y[v];f[v]!==void 0&&wn(_)&&_.set(f[v])}}mount(e){var t;this.current=e,QV.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,i)=>this.bindToMotionValue(i,s)),Bk.current||KV(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rg.current,(t=this.parent)==null||t.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Hi(this.notifyUpdate),Hi(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const s=this.features[t];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const s=Nl.has(e);s&&this.onBindTransform&&this.onBindTransform();const i=t.on("change",c=>{this.latestValues[e]=c,this.props.onUpdate&&gt.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{i(),l&&l(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in cl){const t=cl[e];if(!t)continue;const{isEnabled:s,Feature:i}=t;if(!this.features[e]&&i&&s(this.props)&&(this.features[e]=new i(this)),this.features[e]){const l=this.features[e];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let s=0;s<_1.length;s++){const i=_1[s];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const l="on"+i,c=e[l];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=YV(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const s=this.values.get(e);t!==s&&(s&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&t!==void 0&&(s=ll(t===null?void 0:t,{owner:this}),this.addValue(e,s)),s}readValue(e,t){let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(PE(s)||DE(s))?s=parseFloat(s):!iV(s)&&Ki.test(t)&&(s=gk(e,t)),this.setBaseTarget(e,wn(s)?s.get():s)),wn(s)?s.get():s}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var l;const{initial:t}=this.props;let s;if(typeof t=="string"||typeof t=="object"){const c=vx(this.props,t,(l=this.presenceContext)==null?void 0:l.custom);c&&(s=c[e])}if(t&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!wn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new X0),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){dx.render(this.render)}}class $k extends XV{constructor(){super(...arguments),this.KeyframeResolver=H6}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:s}){delete t[e],delete s[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;wn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function qk(n,{style:e,vars:t},s,i){const l=n.style;let c;for(c in e)l[c]=e[c];i==null||i.applyProjectionStyles(l,s);for(c in t)l.setProperty(c,t[c])}function JV(n){return window.getComputedStyle(n)}class ZV extends $k{constructor(){super(...arguments),this.type="html",this.renderInstance=qk}readValueFromInstance(e,t){var s;if(Nl.has(t))return(s=this.projection)!=null&&s.isProjecting?Ng(t):h6(e,t);{const i=JV(e),l=(KE(t)?i.getPropertyValue(t):i[t])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(e,{transformPagePoint:t}){return zk(e,t)}build(e,t,s){gx(e,t,s.transformTemplate)}scrapeMotionValuesFromProps(e,t,s){return bx(e,t,s)}}const Gk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eL(n,e,t,s){qk(n,e,void 0,s);for(const i in e.attrs)n.setAttribute(Gk.has(i)?i:wx(i),e.attrs[i])}class tL extends $k{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qt}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Nl.has(t)){const s=mk(t);return s&&s.default||0}return t=Gk.has(t)?t:wx(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,s){return Dk(e,t,s)}build(e,t,s){Ik(e,t,this.isSVGTag,s.transformTemplate,s.style)}renderInstance(e,t,s,i){eL(e,t,s,i)}mount(e){this.isSVGTag=Pk(e.tagName),super.mount(e)}}const nL=(n,e)=>yx(n)?new tL(e):new ZV(e,{allowProjection:n!==C.Fragment});function Xa(n,e,t){const s=n.getProps();return vx(s,e,t!==void 0?t:s.custom,n)}const Dg=n=>Array.isArray(n);function sL(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,ll(t))}function rL(n){return Dg(n)?n[n.length-1]||0:n}function iL(n,e){const t=Xa(n,e);let{transitionEnd:s={},transition:i={},...l}=t||{};l={...l,...s};for(const c in l){const d=rL(l[c]);sL(n,c,d)}}function oL(n){return!!(wn(n)&&n.add)}function Mg(n,e){const t=n.getValue("willChange");if(oL(t))return t.add(e);if(!t&&Xr.WillChange){const s=new Xr.WillChange("auto");n.addValue("willChange",s),s.add(e)}}function Wk(n){return n.props[Mk]}const aL=n=>n!==null;function lL(n,{repeat:e,repeatType:t="loop"},s){const i=n.filter(aL),l=e&&t!=="loop"&&e%2===1?0:i.length-1;return i[l]}const cL={type:"spring",stiffness:500,damping:25,restSpeed:10},uL=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),dL={type:"keyframes",duration:.8},hL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fL=(n,{keyframes:e})=>e.length>2?dL:Nl.has(n)?n.startsWith("scale")?uL(e[1]):cL:hL;function pL({when:n,delay:e,delayChildren:t,staggerChildren:s,staggerDirection:i,repeat:l,repeatType:c,repeatDelay:d,from:f,elapsed:m,...g}){return!!Object.keys(g).length}const _x=(n,e,t,s={},i,l)=>c=>{const d=cx(s,n)||{},f=d.delay||s.delay||0;let{elapsed:m=0}=s;m=m-fr(f);const g={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...d,delay:-m,onUpdate:v=>{e.set(v),d.onUpdate&&d.onUpdate(v)},onComplete:()=>{c(),d.onComplete&&d.onComplete()},name:n,motionValue:e,element:l?void 0:i};pL(d)||Object.assign(g,fL(n,g)),g.duration&&(g.duration=fr(g.duration)),g.repeatDelay&&(g.repeatDelay=fr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let y=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(jg(g),g.delay===0&&(y=!0)),(Xr.instantAnimations||Xr.skipAnimations)&&(y=!0,jg(g),g.delay=0),g.allowFlatten=!d.type&&!d.ease,y&&!l&&e.get()!==void 0){const v=lL(g.keyframes,d);if(v!==void 0){gt.update(()=>{g.onUpdate(v),g.onComplete()});return}}return d.isSync?new ax(g):new M6(g)};function mL({protectedKeys:n,needsAnimating:e},t){const s=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,s}function Hk(n,e,{delay:t=0,transitionOverride:s,type:i}={}){let{transition:l=n.getDefaultTransition(),transitionEnd:c,...d}=e;s&&(l=s);const f=[],m=i&&n.animationState&&n.animationState.getState()[i];for(const g in d){const y=n.getValue(g,n.latestValues[g]??null),v=d[g];if(v===void 0||m&&mL(m,g))continue;const _={delay:t,...cx(l||{},g)},k=y.get();if(k!==void 0&&!y.isAnimating&&!Array.isArray(v)&&v===k&&!_.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const M=Wk(n);if(M){const O=window.MotionHandoffAnimation(M,g,gt);O!==null&&(_.startTime=O,E=!0)}}Mg(n,g),y.start(_x(g,y,v,n.shouldReduceMotion&&hk.has(g)?{type:!1}:_,n,E));const T=y.animation;T&&f.push(T)}return c&&Promise.all(f).then(()=>{gt.update(()=>{c&&iL(n,c)})}),f}function Kk(n,e,t,s=0,i=1){const l=Array.from(n).sort((m,g)=>m.sortNodePosition(g)).indexOf(e),c=n.size,d=(c-1)*s;return typeof t=="function"?t(l,c):i===1?l*s:d-l*s}function Vg(n,e,t={}){var f;const s=Xa(n,e,t.type==="exit"?(f=n.presenceContext)==null?void 0:f.custom:void 0);let{transition:i=n.getDefaultTransition()||{}}=s||{};t.transitionOverride&&(i=t.transitionOverride);const l=s?()=>Promise.all(Hk(n,s,t)):()=>Promise.resolve(),c=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:y,staggerDirection:v}=i;return gL(n,e,m,g,y,v,t)}:()=>Promise.resolve(),{when:d}=i;if(d){const[m,g]=d==="beforeChildren"?[l,c]:[c,l];return m().then(()=>g())}else return Promise.all([l(),c(t.delay)])}function gL(n,e,t=0,s=0,i=0,l=1,c){const d=[];for(const f of n.variantChildren)f.notify("AnimationStart",e),d.push(Vg(f,e,{...c,delay:t+(typeof s=="function"?0:s)+Kk(n.variantChildren,f,s,i,l)}).then(()=>f.notify("AnimationComplete",e)));return Promise.all(d)}function xL(n,e,t={}){n.notify("AnimationStart",e);let s;if(Array.isArray(e)){const i=e.map(l=>Vg(n,l,t));s=Promise.all(i)}else if(typeof e=="string")s=Vg(n,e,t);else{const i=typeof e=="function"?Xa(n,e,t.custom):e;s=Promise.all(Hk(n,i,t))}return s.then(()=>{n.notify("AnimationComplete",e)})}function Qk(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let s=0;s<t;s++)if(e[s]!==n[s])return!1;return!0}const yL=mx.length;function Yk(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?Yk(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<yL;t++){const s=mx[t],i=n.props[s];(eu(i)||i===!1)&&(e[s]=i)}return e}const vL=[...px].reverse(),bL=px.length;function wL(n){return e=>Promise.all(e.map(({animation:t,options:s})=>xL(n,t,s)))}function _L(n){let e=wL(n),t=N1(),s=!0;const i=f=>(m,g)=>{var v;const y=Xa(n,g,f==="exit"?(v=n.presenceContext)==null?void 0:v.custom:void 0);if(y){const{transition:_,transitionEnd:k,...E}=y;m={...m,...E,...k}}return m};function l(f){e=f(n)}function c(f){const{props:m}=n,g=Yk(n.parent)||{},y=[],v=new Set;let _={},k=1/0;for(let T=0;T<bL;T++){const M=vL[T],O=t[M],q=m[M]!==void 0?m[M]:g[M],$=eu(q),Q=M===f?O.isActive:null;Q===!1&&(k=T);let K=q===g[M]&&q!==m[M]&&$;if(K&&s&&n.manuallyAnimateOnMount&&(K=!1),O.protectedKeys={..._},!O.isActive&&Q===null||!q&&!O.prevProp||jf(q)||typeof q=="boolean")continue;const P=NL(O.prevProp,q);let j=P||M===f&&O.isActive&&!K&&$||T>k&&$,V=!1;const I=Array.isArray(q)?q:[q];let L=I.reduce(i(M),{});Q===!1&&(L={});const{prevResolvedValues:D={}}=O,A={...D,...L},he=G=>{j=!0,v.has(G)&&(V=!0,v.delete(G)),O.needsAnimating[G]=!0;const F=n.getValue(G);F&&(F.liveStyle=!1)};for(const G in A){const F=L[G],U=D[G];if(_.hasOwnProperty(G))continue;let X=!1;Dg(F)&&Dg(U)?X=!Qk(F,U):X=F!==U,X?F!=null?he(G):v.add(G):F!==void 0&&v.has(G)?he(G):O.protectedKeys[G]=!0}O.prevProp=q,O.prevResolvedValues=L,O.isActive&&(_={..._,...L}),s&&n.blockInitialAnimation&&(j=!1);const ie=K&&P;j&&(!ie||V)&&y.push(...I.map(G=>{const F={type:M};if(typeof G=="string"&&s&&!ie&&n.manuallyAnimateOnMount&&n.parent){const{parent:U}=n,X=Xa(U,G);if(U.enteringChildren&&X){const{delayChildren:z}=X.transition||{};F.delay=Kk(U.enteringChildren,n,z)}}return{animation:G,options:F}}))}if(v.size){const T={};if(typeof m.initial!="boolean"){const M=Xa(n,Array.isArray(m.initial)?m.initial[0]:m.initial);M&&M.transition&&(T.transition=M.transition)}v.forEach(M=>{const O=n.getBaseTarget(M),q=n.getValue(M);q&&(q.liveStyle=!0),T[M]=O??null}),y.push({animation:T})}let E=!!y.length;return s&&(m.initial===!1||m.initial===m.animate)&&!n.manuallyAnimateOnMount&&(E=!1),s=!1,E?e(y):Promise.resolve()}function d(f,m){var y;if(t[f].isActive===m)return Promise.resolve();(y=n.variantChildren)==null||y.forEach(v=>{var _;return(_=v.animationState)==null?void 0:_.setActive(f,m)}),t[f].isActive=m;const g=c(f);for(const v in t)t[v].protectedKeys={};return g}return{animateChanges:c,setActive:d,setAnimateFunction:l,getState:()=>t,reset:()=>{t=N1()}}}function NL(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Qk(e,n):!1}function Io(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function N1(){return{animate:Io(!0),whileInView:Io(),whileHover:Io(),whileTap:Io(),whileDrag:Io(),whileFocus:Io(),exit:Io()}}class eo{constructor(e){this.isMounted=!1,this.node=e}update(){}}class EL extends eo{constructor(e){super(e),e.animationState||(e.animationState=_L(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();jf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let kL=0;class SL extends eo{constructor(){super(...arguments),this.id=kL++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const TL={animation:{Feature:EL},exit:{Feature:SL}};function tu(n,e,t,s={passive:!0}){return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t)}function Eu(n){return{point:{x:n.pageX,y:n.pageY}}}const jL=n=>e=>hx(e)&&n(e,Eu(e));function Mc(n,e,t,s){return tu(n,e,jL(t),s)}const Xk=1e-4,CL=1-Xk,IL=1+Xk,Jk=.01,AL=0-Jk,PL=0+Jk;function Sn(n){return n.max-n.min}function RL(n,e,t){return Math.abs(n-e)<=t}function E1(n,e,t,s=.5){n.origin=s,n.originPoint=Nt(e.min,e.max,n.origin),n.scale=Sn(t)/Sn(e),n.translate=Nt(t.min,t.max,n.origin)-n.originPoint,(n.scale>=CL&&n.scale<=IL||isNaN(n.scale))&&(n.scale=1),(n.translate>=AL&&n.translate<=PL||isNaN(n.translate))&&(n.translate=0)}function Vc(n,e,t,s){E1(n.x,e.x,t.x,s?s.originX:void 0),E1(n.y,e.y,t.y,s?s.originY:void 0)}function k1(n,e,t){n.min=t.min+e.min,n.max=n.min+Sn(e)}function DL(n,e,t){k1(n.x,e.x,t.x),k1(n.y,e.y,t.y)}function S1(n,e,t){n.min=e.min-t.min,n.max=n.min+Sn(e)}function Wh(n,e,t){S1(n.x,e.x,t.x),S1(n.y,e.y,t.y)}function as(n){return[n("x"),n("y")]}const Zk=({current:n})=>n?n.ownerDocument.defaultView:null,T1=(n,e)=>Math.abs(n-e);function ML(n,e){const t=T1(n.x,e.x),s=T1(n.y,e.y);return Math.sqrt(t**2+s**2)}class eS{constructor(e,t,{transformPagePoint:s,contextWindow:i=window,dragSnapToOrigin:l=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=jm(this.lastMoveEventInfo,this.history),_=this.startEvent!==null,k=ML(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!_&&!k)return;const{point:E}=v,{timestamp:T}=an;this.history.push({...E,timestamp:T});const{onStart:M,onMove:O}=this.handlers;_||(M&&M(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),O&&O(this.lastMoveEvent,v)},this.handlePointerMove=(v,_)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=Tm(_,this.transformPagePoint),gt.update(this.updatePoint,!0)},this.handlePointerUp=(v,_)=>{this.end();const{onEnd:k,onSessionEnd:E,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const M=jm(v.type==="pointercancel"?this.lastMoveEventInfo:Tm(_,this.transformPagePoint),this.history);this.startEvent&&k&&k(v,M),E&&E(v,M)},!hx(e))return;this.dragSnapToOrigin=l,this.handlers=t,this.transformPagePoint=s,this.distanceThreshold=c,this.contextWindow=i||window;const d=Eu(e),f=Tm(d,this.transformPagePoint),{point:m}=f,{timestamp:g}=an;this.history=[{...m,timestamp:g}];const{onSessionStart:y}=t;y&&y(e,jm(f,this.history)),this.removeListeners=wu(Mc(this.contextWindow,"pointermove",this.handlePointerMove),Mc(this.contextWindow,"pointerup",this.handlePointerUp),Mc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Hi(this.updatePoint)}}function Tm(n,e){return e?{point:e(n.point)}:n}function j1(n,e){return{x:n.x-e.x,y:n.y-e.y}}function jm({point:n},e){return{point:n,delta:j1(n,tS(e)),offset:j1(n,VL(e)),velocity:LL(e,.1)}}function VL(n){return n[0]}function tS(n){return n[n.length-1]}function LL(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,s=null;const i=tS(n);for(;t>=0&&(s=n[t],!(i.timestamp-s.timestamp>fr(e)));)t--;if(!s)return{x:0,y:0};const l=us(i.timestamp-s.timestamp);if(l===0)return{x:0,y:0};const c={x:(i.x-s.x)/l,y:(i.y-s.y)/l};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function OL(n,{min:e,max:t},s){return e!==void 0&&n<e?n=s?Nt(e,n,s.min):Math.max(n,e):t!==void 0&&n>t&&(n=s?Nt(t,n,s.max):Math.min(n,t)),n}function C1(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function FL(n,{top:e,left:t,bottom:s,right:i}){return{x:C1(n.x,t,i),y:C1(n.y,e,s)}}function I1(n,e){let t=e.min-n.min,s=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,s]=[s,t]),{min:t,max:s}}function UL(n,e){return{x:I1(n.x,e.x),y:I1(n.y,e.y)}}function zL(n,e){let t=.5;const s=Sn(n),i=Sn(e);return i>s?t=Xc(e.min,e.max-s,n.min):s>i&&(t=Xc(n.min,n.max-i,e.min)),Yr(0,1,t)}function BL(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Lg=.35;function $L(n=Lg){return n===!1?n=0:n===!0&&(n=Lg),{x:A1(n,"left","right"),y:A1(n,"top","bottom")}}function A1(n,e,t){return{min:P1(n,e),max:P1(n,t)}}function P1(n,e){return typeof n=="number"?n:n[e]||0}const qL=new WeakMap;class GL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:s}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const l=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Eu(y).point)},c=(y,v)=>{const{drag:_,dragPropagation:k,onDragStart:E}=this.getProps();if(_&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=X6(_),!this.openDragLock))return;this.latestPointerEvent=y,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),as(M=>{let O=this.getAxisMotionValue(M).get()||0;if(pr.test(O)){const{projection:q}=this.visualElement;if(q&&q.layout){const $=q.layout.layoutBox[M];$&&(O=Sn($)*(parseFloat(O)/100))}}this.originPoint[M]=O}),E&&gt.postRender(()=>E(y,v)),Mg(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},d=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v;const{dragPropagation:_,dragDirectionLock:k,onDirectionLock:E,onDrag:T}=this.getProps();if(!_&&!this.openDragLock)return;const{offset:M}=v;if(k&&this.currentDirection===null){this.currentDirection=WL(M),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",v.point,M),this.updateAxis("y",v.point,M),this.visualElement.render(),T&&T(y,v)},f=(y,v)=>{this.latestPointerEvent=y,this.latestPanInfo=v,this.stop(y,v),this.latestPointerEvent=null,this.latestPanInfo=null},m=()=>as(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)==null?void 0:v.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new eS(e,{onSessionStart:l,onStart:c,onMove:d,onSessionEnd:f,resumeAnimation:m},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,distanceThreshold:s,contextWindow:Zk(this.visualElement)})}stop(e,t){const s=e||this.latestPointerEvent,i=t||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!i||!s)return;const{velocity:c}=i;this.startAnimation(c);const{onDragEnd:d}=this.getProps();d&&gt.postRender(()=>d(s,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,s){const{drag:i}=this.getProps();if(!s||!Hd(e,i,this.currentDirection))return;const l=this.getAxisMotionValue(e);let c=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(c=OL(c,this.constraints[e],this.elastic[e])),l.set(c)}resolveConstraints(){var l;const{dragConstraints:e,dragElastic:t}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,i=this.constraints;e&&Ba(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&s?this.constraints=FL(s.layoutBox,e):this.constraints=!1,this.elastic=$L(t),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&as(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=BL(s.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ba(e))return!1;const s=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const l=HV(s,i.root,this.visualElement.getTransformPagePoint());let c=UL(i.layout.layoutBox,l);if(t){const d=t(qV(c));this.hasMutatedConstraints=!!d,d&&(c=Ok(d))}return c}startAnimation(e){const{drag:t,dragMomentum:s,dragElastic:i,dragTransition:l,dragSnapToOrigin:c,onDragTransitionEnd:d}=this.getProps(),f=this.constraints||{},m=as(g=>{if(!Hd(g,t,this.currentDirection))return;let y=f&&f[g]||{};c&&(y={min:0,max:0});const v=i?200:1e6,_=i?40:1e7,k={type:"inertia",velocity:s?e[g]:0,bounceStiffness:v,bounceDamping:_,timeConstant:750,restDelta:1,restSpeed:10,...l,...y};return this.startAxisValueAnimation(g,k)});return Promise.all(m).then(d)}startAxisValueAnimation(e,t){const s=this.getAxisMotionValue(e);return Mg(this.visualElement,e),s.start(_x(e,s,0,t,this.visualElement,!1))}stopAnimation(){as(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){as(e=>{var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)==null?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,s=this.visualElement.getProps(),i=s[t];return i||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){as(t=>{const{drag:s}=this.getProps();if(!Hd(t,s,this.currentDirection))return;const{projection:i}=this.visualElement,l=this.getAxisMotionValue(t);if(i&&i.layout){const{min:c,max:d}=i.layout.layoutBox[t];l.set(e[t]-Nt(c,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:s}=this.visualElement;if(!Ba(t)||!s||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};as(c=>{const d=this.getAxisMotionValue(c);if(d&&this.constraints!==!1){const f=d.get();i[c]=zL({min:f,max:f},this.constraints[c])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),as(c=>{if(!Hd(c,e,null))return;const d=this.getAxisMotionValue(c),{min:f,max:m}=this.constraints[c];d.set(Nt(f,m,i[c]))})}addListeners(){if(!this.visualElement.current)return;qL.set(this.visualElement,this);const e=this.visualElement.current,t=Mc(e,"pointerdown",f=>{const{drag:m,dragListener:g=!0}=this.getProps();m&&g&&this.start(f)}),s=()=>{const{dragConstraints:f}=this.getProps();Ba(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,l=i.addEventListener("measure",s);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),gt.read(s);const c=tu(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",(({delta:f,hasLayoutChanged:m})=>{this.isDragging&&m&&(as(g=>{const y=this.getAxisMotionValue(g);y&&(this.originPoint[g]+=f[g].translate,y.set(y.get()+f[g].translate))}),this.visualElement.render())}));return()=>{c(),t(),l(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:s=!1,dragPropagation:i=!1,dragConstraints:l=!1,dragElastic:c=Lg,dragMomentum:d=!0}=e;return{...e,drag:t,dragDirectionLock:s,dragPropagation:i,dragConstraints:l,dragElastic:c,dragMomentum:d}}}function Hd(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function WL(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class HL extends eo{constructor(e){super(e),this.removeGroupControls=ps,this.removeListeners=ps,this.controls=new GL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ps}unmount(){this.removeGroupControls(),this.removeListeners()}}const R1=n=>(e,t)=>{n&&gt.postRender(()=>n(e,t))};class KL extends eo{constructor(){super(...arguments),this.removePointerDownListener=ps}onPointerDown(e){this.session=new eS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Zk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:s,onPanEnd:i}=this.node.getProps();return{onSessionStart:R1(e),onStart:R1(t),onMove:s,onEnd:(l,c)=>{delete this.session,i&&gt.postRender(()=>i(l,c))}}}mount(){this.removePointerDownListener=Mc(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Cm=!1;class QL extends C.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s,layoutId:i}=this.props,{projection:l}=e;l&&(t.group&&t.group.add(l),s&&s.register&&i&&s.register(l),Cm&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),yh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:s,drag:i,isPresent:l}=this.props,{projection:c}=s;return c&&(c.isPresent=l,Cm=!0,i||e.layoutDependency!==t||t===void 0||e.isPresent!==l?c.willUpdate():this.safeToRemove(),e.isPresent!==l&&(l?c.promote():c.relegate()||gt.postRender(()=>{const d=c.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),dx.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:s}=this.props,{projection:i}=e;Cm=!0,i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),s&&s.deregister&&s.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nS(n){const[e,t]=Nk(),s=C.useContext(q0);return o.jsx(QL,{...n,layoutGroup:s,switchLayoutGroup:C.useContext(Vk),isPresent:e,safeToRemove:t})}function YL(n,e,t){const s=wn(n)?n:ll(n);return s.start(_x("",s,e,t)),s.animation}const XL=(n,e)=>n.depth-e.depth;class JL{constructor(){this.children=[],this.isDirty=!1}add(e){H0(this.children,e),this.isDirty=!0}remove(e){K0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(XL),this.isDirty=!1,this.children.forEach(e)}}function ZL(n,e){const t=On.now(),s=({timestamp:i})=>{const l=i-t;l>=e&&(Hi(s),n(l-e))};return gt.setup(s,!0),()=>Hi(s)}const sS=["TopLeft","TopRight","BottomLeft","BottomRight"],eO=sS.length,D1=n=>typeof n=="string"?parseFloat(n):n,M1=n=>typeof n=="number"||Le.test(n);function tO(n,e,t,s,i,l){i?(n.opacity=Nt(0,t.opacity??1,nO(s)),n.opacityExit=Nt(e.opacity??1,0,sO(s))):l&&(n.opacity=Nt(e.opacity??1,t.opacity??1,s));for(let c=0;c<eO;c++){const d=`border${sS[c]}Radius`;let f=V1(e,d),m=V1(t,d);if(f===void 0&&m===void 0)continue;f||(f=0),m||(m=0),f===0||m===0||M1(f)===M1(m)?(n[d]=Math.max(Nt(D1(f),D1(m),s),0),(pr.test(m)||pr.test(f))&&(n[d]+="%")):n[d]=m}(e.rotate||t.rotate)&&(n.rotate=Nt(e.rotate||0,t.rotate||0,s))}function V1(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const nO=rS(0,.5,BE),sO=rS(.5,.95,ps);function rS(n,e,t){return s=>s<n?0:s>e?1:t(Xc(n,e,s))}function L1(n,e){n.min=e.min,n.max=e.max}function ks(n,e){L1(n.x,e.x),L1(n.y,e.y)}function O1(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function F1(n,e,t,s,i){return n-=e,n=Gh(n,1/t,s),i!==void 0&&(n=Gh(n,1/i,s)),n}function rO(n,e=0,t=1,s=.5,i,l=n,c=n){if(pr.test(e)&&(e=parseFloat(e),e=Nt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let d=Nt(l.min,l.max,s);n===l&&(d-=e),n.min=F1(n.min,e,t,d,i),n.max=F1(n.max,e,t,d,i)}function U1(n,e,[t,s,i],l,c){rO(n,e[t],e[s],e[i],e.scale,l,c)}const iO=["x","scaleX","originX"],oO=["y","scaleY","originY"];function z1(n,e,t,s){U1(n.x,e,iO,t?t.x:void 0,s?s.x:void 0),U1(n.y,e,oO,t?t.y:void 0,s?s.y:void 0)}function B1(n){return n.translate===0&&n.scale===1}function iS(n){return B1(n.x)&&B1(n.y)}function $1(n,e){return n.min===e.min&&n.max===e.max}function aO(n,e){return $1(n.x,e.x)&&$1(n.y,e.y)}function q1(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function oS(n,e){return q1(n.x,e.x)&&q1(n.y,e.y)}function G1(n){return Sn(n.x)/Sn(n.y)}function W1(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class lO{constructor(){this.members=[]}add(e){H0(this.members,e),e.scheduleRender()}remove(e){if(K0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(i=>e===i);if(t===0)return!1;let s;for(let i=t;i>=0;i--){const l=this.members[i];if(l.isPresent!==!1){s=l;break}}return s?(this.promote(s),!0):!1}promote(e,t){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,t&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:s}=e;t.onExitComplete&&t.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function cO(n,e,t){let s="";const i=n.x.translate/e.x,l=n.y.translate/e.y,c=(t==null?void 0:t.z)||0;if((i||l||c)&&(s=`translate3d(${i}px, ${l}px, ${c}px) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:m,rotate:g,rotateX:y,rotateY:v,skewX:_,skewY:k}=t;m&&(s=`perspective(${m}px) ${s}`),g&&(s+=`rotate(${g}deg) `),y&&(s+=`rotateX(${y}deg) `),v&&(s+=`rotateY(${v}deg) `),_&&(s+=`skewX(${_}deg) `),k&&(s+=`skewY(${k}deg) `)}const d=n.x.scale*e.x,f=n.y.scale*e.y;return(d!==1||f!==1)&&(s+=`scale(${d}, ${f})`),s||"none"}const Im=["","X","Y","Z"],uO=1e3;let dO=0;function Am(n,e,t,s){const{latestValues:i}=e;i[n]&&(t[n]=i[n],e.setStaticValue(n,0),s&&(s[n]=0))}function aS(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Wk(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:i,layoutId:l}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",gt,!(i||l))}const{parent:s}=n;s&&!s.hasCheckedOptimisedAppear&&aS(s)}function lS({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(c={},d=e==null?void 0:e()){this.id=dO++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(pO),this.nodes.forEach(yO),this.nodes.forEach(vO),this.nodes.forEach(mO)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new JL)}addEventListener(c,d){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new X0),this.eventHandlers.get(c).add(d)}notifyListeners(c,...d){const f=this.eventHandlers.get(c);f&&f.notify(...d)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=_k(c)&&!sV(c),this.instance=c;const{layoutId:d,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||d)&&(this.isLayoutDirty=!0),n){let g,y=0;const v=()=>this.root.updateBlockedByResize=!1;gt.read(()=>{y=window.innerWidth}),n(c,()=>{const _=window.innerWidth;_!==y&&(y=_,this.root.updateBlockedByResize=!0,g&&g(),g=ZL(v,250),yh.hasAnimatedSinceResize&&(yh.hasAnimatedSinceResize=!1,this.nodes.forEach(Q1)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&m&&(d||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:y,hasRelativeLayoutChanged:v,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||m.getDefaultTransition()||EO,{onLayoutAnimationStart:E,onLayoutAnimationComplete:T}=m.getProps(),M=!this.targetLayout||!oS(this.targetLayout,_),O=!y&&v;if(this.options.layoutRoot||this.resumeFrom||O||y&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const q={...cx(k,"layout"),onPlay:E,onComplete:T};(m.shouldReduceMotion||this.options.layoutRoot)&&(q.delay=0,q.type=!1),this.startAnimation(q),this.setAnimationOrigin(g,O)}else y||Q1(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Hi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bO),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aS(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const y=this.path[g];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:d,layout:f}=this.options;if(d===void 0&&!f)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(H1);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(K1);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(xO),this.nodes.forEach(hO),this.nodes.forEach(fO)):this.nodes.forEach(K1),this.clearAllSnapshots();const d=On.now();an.delta=Yr(0,1e3/60,d-an.timestamp),an.timestamp=d,an.isProcessing=!0,vm.update.process(an),vm.preRender.process(an),vm.render.process(an),an.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,dx.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(gO),this.sharedNodes.forEach(wO)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Sn(this.snapshot.measuredBox.x)&&!Sn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(d=!1),d&&this.instance){const f=s(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!iS(this.projectionDelta),f=this.getTransformTemplate(),m=f?f(this.latestValues,""):void 0,g=m!==this.prevTransformTemplateValue;c&&this.instance&&(d||Po(this.latestValues)||g)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const d=this.measurePageBox();let f=this.removeElementScroll(d);return c&&(f=this.removeTransform(f)),kO(f),{animationId:this.root.animationId,measuredBox:d,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var m;const{visualElement:c}=this.options;if(!c)return qt();const d=c.measureViewportBox();if(!(((m=this.scroll)==null?void 0:m.wasRoot)||this.path.some(SO))){const{scroll:g}=this.root;g&&($a(d.x,g.offset.x),$a(d.y,g.offset.y))}return d}removeElementScroll(c){var f;const d=qt();if(ks(d,c),(f=this.scroll)!=null&&f.wasRoot)return d;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:y,options:v}=g;g!==this.root&&y&&v.layoutScroll&&(y.wasRoot&&ks(d,c),$a(d.x,y.offset.x),$a(d.y,y.offset.y))}return d}applyTransform(c,d=!1){const f=qt();ks(f,c);for(let m=0;m<this.path.length;m++){const g=this.path[m];!d&&g.options.layoutScroll&&g.scroll&&g!==g.root&&qa(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Po(g.latestValues)&&qa(f,g.latestValues)}return Po(this.latestValues)&&qa(f,this.latestValues),f}removeTransform(c){const d=qt();ks(d,c);for(let f=0;f<this.path.length;f++){const m=this.path[f];if(!m.instance||!Po(m.latestValues))continue;Ag(m.latestValues)&&m.updateSnapshot();const g=qt(),y=m.measurePageBox();ks(g,y),z1(d,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,g)}return Po(this.latestValues)&&z1(d,this.latestValues),d}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==an.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var _;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==d;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:y}=this.options;if(!this.layout||!(g||y))return;this.resolvedRelativeTargetAt=an.timestamp;const v=this.getClosestProjectingParent();v&&this.linkedParentVersion!==v.layoutVersion&&!v.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(v&&v.layout?this.createRelativeTarget(v,this.layout.layoutBox,v.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qt(),this.targetWithTransforms=qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DL(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ks(this.target,this.layout.layoutBox),Uk(this.target,this.targetDelta)):ks(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?this.createRelativeTarget(v,this.target,v.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Ag(this.parent.latestValues)||Fk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(c,d,f){this.relativeParent=c,this.linkedParentVersion=c.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qt(),this.relativeTargetOrigin=qt(),Wh(this.relativeTargetOrigin,d,f),ks(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var k;const c=this.getLead(),d=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||(k=this.parent)!=null&&k.isProjectionDirty)&&(f=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===an.timestamp&&(f=!1),f)return;const{layout:m,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||g))return;ks(this.layoutCorrected,this.layout.layoutBox);const y=this.treeScale.x,v=this.treeScale.y;WV(this.layoutCorrected,this.treeScale,this.path,d),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=qt());const{target:_}=c;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(O1(this.prevProjectionDelta.x,this.projectionDelta.x),O1(this.prevProjectionDelta.y,this.projectionDelta.y)),Vc(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==y||this.treeScale.y!==v||!W1(this.projectionDelta.x,this.prevProjectionDelta.x)||!W1(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var d;if((d=this.options.visualElement)==null||d.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ga(),this.projectionDelta=Ga(),this.projectionDeltaWithTransform=Ga()}setAnimationOrigin(c,d=!1){const f=this.snapshot,m=f?f.latestValues:{},g={...this.latestValues},y=Ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const v=qt(),_=f?f.source:void 0,k=this.layout?this.layout.source:void 0,E=_!==k,T=this.getStack(),M=!T||T.members.length<=1,O=!!(E&&!M&&this.options.crossfade===!0&&!this.path.some(NO));this.animationProgress=0;let q;this.mixTargetDelta=$=>{const Q=$/1e3;Y1(y.x,c.x,Q),Y1(y.y,c.y,Q),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Wh(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_O(this.relativeTarget,this.relativeTargetOrigin,v,Q),q&&aO(this.relativeTarget,q)&&(this.isProjectionDirty=!1),q||(q=qt()),ks(q,this.relativeTarget)),E&&(this.animationValues=g,tO(g,m,this.latestValues,Q,O,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var d,f,m;this.notifyListeners("animationStart"),(d=this.currentAnimation)==null||d.stop(),(m=(f=this.resumingFrom)==null?void 0:f.currentAnimation)==null||m.stop(),this.pendingAnimation&&(Hi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gt.update(()=>{yh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ll(0)),this.currentAnimation=YL(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:g=>{this.mixTargetDelta(g),c.onUpdate&&c.onUpdate(g)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uO),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:d,target:f,layout:m,latestValues:g}=c;if(!(!d||!f||!m)){if(this!==c&&this.layout&&m&&cS(this.options.animationType,this.layout.layoutBox,m.layoutBox)){f=this.target||qt();const y=Sn(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+y;const v=Sn(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+v}ks(d,f),qa(d,g),Vc(this.projectionDeltaWithTransform,this.layoutCorrected,d,g)}}registerSharedNode(c,d){this.sharedNodes.has(c)||this.sharedNodes.set(c,new lO),this.sharedNodes.get(c).add(d);const m=d.options.initialPromotionConfig;d.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(d):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var d;const{layoutId:c}=this.options;return c?((d=this.getStack())==null?void 0:d.lead)||this:this}getPrevLead(){var d;const{layoutId:c}=this.options;return c?(d=this.getStack())==null?void 0:d.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:d,preserveFollowOpacity:f}={}){const m=this.getStack();m&&m.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let d=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(d=!0),!d)return;const m={};f.z&&Am("z",c,m,this.animationValues);for(let g=0;g<Im.length;g++)Am(`rotate${Im[g]}`,c,m,this.animationValues),Am(`skew${Im[g]}`,c,m,this.animationValues);c.render();for(const g in m)c.setStaticValue(g,m[g]),this.animationValues&&(this.animationValues[g]=m[g]);c.scheduleRender()}applyProjectionStyles(c,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const f=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=xh(d==null?void 0:d.pointerEvents)||"",c.transform=f?f(this.latestValues,""):"none";return}const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=xh(d==null?void 0:d.pointerEvents)||""),this.hasProjected&&!Po(this.latestValues)&&(c.transform=f?f({},""):"none",this.hasProjected=!1);return}c.visibility="";const g=m.animationValues||m.latestValues;this.applyTransformsToTarget();let y=cO(this.projectionDeltaWithTransform,this.treeScale,g);f&&(y=f(g,y)),c.transform=y;const{x:v,y:_}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${_.origin*100}% 0`,m.animationValues?c.opacity=m===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:c.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const k in Ig){if(g[k]===void 0)continue;const{correct:E,applyTo:T,isCSSVariable:M}=Ig[k],O=y==="none"?g[k]:E(g[k],m);if(T){const q=T.length;for(let $=0;$<q;$++)c[T[$]]=O}else M?this.options.visualElement.renderState.vars[k]=O:c[k]=O}this.options.layoutId&&(c.pointerEvents=m===this?xh(d==null?void 0:d.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var d;return(d=c.currentAnimation)==null?void 0:d.stop()}),this.root.nodes.forEach(H1),this.root.sharedNodes.clear()}}}function hO(n){n.updateLayout()}function fO(n){var t;const e=((t=n.resumeFrom)==null?void 0:t.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:i}=n.layout,{animationType:l}=n.options,c=e.source!==n.layout.source;l==="size"?as(y=>{const v=c?e.measuredBox[y]:e.layoutBox[y],_=Sn(v);v.min=s[y].min,v.max=v.min+_}):cS(l,e.layoutBox,s)&&as(y=>{const v=c?e.measuredBox[y]:e.layoutBox[y],_=Sn(s[y]);v.max=v.min+_,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+_)});const d=Ga();Vc(d,s,e.layoutBox);const f=Ga();c?Vc(f,n.applyTransform(i,!0),e.measuredBox):Vc(f,s,e.layoutBox);const m=!iS(d);let g=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:v,layout:_}=y;if(v&&_){const k=qt();Wh(k,e.layoutBox,v.layoutBox);const E=qt();Wh(E,s,_.layoutBox),oS(k,E)||(g=!0),y.options.layoutRoot&&(n.relativeTarget=E,n.relativeTargetOrigin=k,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:f,layoutDelta:d,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function pO(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function mO(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function gO(n){n.clearSnapshot()}function H1(n){n.clearMeasurements()}function K1(n){n.isLayoutDirty=!1}function xO(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Q1(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function yO(n){n.resolveTargetDelta()}function vO(n){n.calcProjection()}function bO(n){n.resetSkewAndRotation()}function wO(n){n.removeLeadSnapshot()}function Y1(n,e,t){n.translate=Nt(e.translate,0,t),n.scale=Nt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function X1(n,e,t,s){n.min=Nt(e.min,t.min,s),n.max=Nt(e.max,t.max,s)}function _O(n,e,t,s){X1(n.x,e.x,t.x,s),X1(n.y,e.y,t.y,s)}function NO(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const EO={duration:.45,ease:[.4,0,.1,1]},J1=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Z1=J1("applewebkit/")&&!J1("chrome/")?Math.round:ps;function e_(n){n.min=Z1(n.min),n.max=Z1(n.max)}function kO(n){e_(n.x),e_(n.y)}function cS(n,e,t){return n==="position"||n==="preserve-aspect"&&!RL(G1(e),G1(t),.2)}function SO(n){var e;return n!==n.root&&((e=n.scroll)==null?void 0:e.wasRoot)}const TO=lS({attachResizeListener:(n,e)=>tu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pm={current:void 0},uS=lS({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Pm.current){const n=new TO({});n.mount(window),n.setOptions({layoutScroll:!0}),Pm.current=n}return Pm.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),jO={pan:{Feature:KL},drag:{Feature:HL,ProjectionNode:uS,MeasureLayout:nS}};function t_(n,e,t){const{props:s}=n;n.animationState&&s.whileHover&&n.animationState.setActive("whileHover",t==="Start");const i="onHover"+t,l=s[i];l&&gt.postRender(()=>l(e,Eu(e)))}class CO extends eo{mount(){const{current:e}=this.node;e&&(this.unmount=J6(e,(t,s)=>(t_(this.node,s,"Start"),i=>t_(this.node,i,"End"))))}unmount(){}}class IO extends eo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=wu(tu(this.node.current,"focus",()=>this.onFocus()),tu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function n_(n,e,t){const{props:s}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&s.whileTap&&n.animationState.setActive("whileTap",t==="Start");const i="onTap"+(t==="End"?"":t),l=s[i];l&&gt.postRender(()=>l(e,Eu(e)))}class AO extends eo{mount(){const{current:e}=this.node;e&&(this.unmount=nV(e,(t,s)=>(n_(this.node,s,"Start"),(i,{success:l})=>n_(this.node,i,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Og=new WeakMap,Rm=new WeakMap,PO=n=>{const e=Og.get(n.target);e&&e(n)},RO=n=>{n.forEach(PO)};function DO({root:n,...e}){const t=n||document;Rm.has(t)||Rm.set(t,{});const s=Rm.get(t),i=JSON.stringify(e);return s[i]||(s[i]=new IntersectionObserver(RO,{root:n,...e})),s[i]}function MO(n,e,t){const s=DO(e);return Og.set(n,t),s.observe(n),()=>{Og.delete(n),s.unobserve(n)}}const VO={some:0,all:1};class LO extends eo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:s,amount:i="some",once:l}=e,c={root:t?t.current:void 0,rootMargin:s,threshold:typeof i=="number"?i:VO[i]},d=f=>{const{isIntersecting:m}=f;if(this.isInView===m||(this.isInView=m,l&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:g,onViewportLeave:y}=this.node.getProps(),v=m?g:y;v&&v(f)};return MO(this.node.current,c,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(OO(e,t))&&this.startObserver()}unmount(){}}function OO({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const FO={inView:{Feature:LO},tap:{Feature:AO},focus:{Feature:IO},hover:{Feature:CO}},UO={layout:{ProjectionNode:uS,MeasureLayout:nS}},zO={...TL,...FO,...jO,...UO},ar=$V(zO,nL),vh=[{id:"robots",label:"Engineering Bots",baseUrl:"https://api.dicebear.com/7.x/bottts/svg",seeds:["Sparky","Gear","Servo","Volt","Pixel","Chip","Nano","Byte","Mega","Giga","Tera","Peta"]},{id:"explorers",label:"Space Explorers",baseUrl:"https://api.dicebear.com/7.x/adventurer/svg",seeds:["Astra","Cosmo","Nova","Orion","Luna","Mars","Jupiter","Star","Comet","Rocket","Galaxy","Nebula"]},{id:"creatures",label:"Creative Creatures",baseUrl:"https://api.dicebear.com/7.x/fun-emoji/svg",seeds:["Happy","Smart","Cool","Wink","Laugh","Idea","Think","Wow","Love","Star","Fire","Zap"]}],BO=(n,e)=>{const t=vh.find(s=>s.id===n);return t?`${t.baseUrl}?seed=${e}`:`https://api.dicebear.com/7.x/identicon/svg?seed=${e}`},$O=({currentAvatarUrl:n,onSelect:e})=>{var d;const[t,s]=C.useState(vh[0].id),[i,l]=C.useState(n||""),c=f=>{l(f),e(f)};return o.jsxs("div",{className:"bg-slate-900 rounded-3xl p-6 border border-slate-800",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-6 text-center",children:"Choose Your Hero Look "}),o.jsx("div",{className:"flex justify-center gap-2 mb-8 flex-wrap",children:vh.map(f=>o.jsx("button",{onClick:()=>s(f.id),className:`px-4 py-2 rounded-full text-sm font-bold transition-all ${t===f.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50 scale-105":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:f.label},f.id))}),o.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-6 gap-4 max-h-[400px] overflow-y-auto custom-scrollbar p-2",children:(d=vh.find(f=>f.id===t))==null?void 0:d.seeds.map(f=>{const m=BO(t,f),g=i===m;return o.jsxs(ar.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>c(m),className:`aspect-square rounded-2xl p-2 relative transition-all ${g?"bg-indigo-600 ring-4 ring-indigo-400/30 shadow-xl":"bg-slate-800 hover:bg-slate-700 border-2 border-slate-700 hover:border-slate-500"}`,children:[o.jsx("img",{src:m,alt:f,className:"w-full h-full object-contain drop-shadow-md",loading:"lazy"}),g&&o.jsx("div",{className:"absolute -top-2 -right-2 bg-emerald-500 text-white rounded-full p-1 shadow-lg border border-slate-900",children:o.jsx(Ln,{size:12,strokeWidth:4})})]},f)})}),o.jsx("div",{className:"mt-6 text-center text-slate-500 text-xs",children:"Select an avatar that represents your creative power!"})]})},dS=({isOpen:n,onClose:e,highlightService:t})=>{const{user:s,userProfile:i}=ms(),[l,c]=C.useState([]),[d,f]=C.useState(!1),[m,g]=C.useState(!1),[y,v]=C.useState({service:t||"Tinkercad",label:"My Account"}),[_,k]=C.useState({});C.useEffect(()=>{i!=null&&i.credentials?E(i.credentials):s&&T()},[i,s,n,t]);const E=$=>{if(!t){c($);return}const Q=[...$].sort((K,P)=>{const j=K.service.toLowerCase()===t.toLowerCase(),V=P.service.toLowerCase()===t.toLowerCase();return j===V?0:j?-1:1});c(Q)},T=async()=>{if(!s||!J)return;const $=Re(J,"users",s.uid),Q=await As($);if(Q.exists()){const K=Q.data();E(K.credentials||[])}},M=async()=>{if(!s||!J||!y.username)return;f(!0);const $={id:Date.now().toString(),service:y.service||"Custom",label:y.label||"Account",username:y.username,password:y.password||"",url:y.url||""};try{const Q=Re(J,"users",s.uid);await bn(Q,{credentials:JN($)}),c(K=>[...K,$]),g(!1),v({service:"Tinkercad",label:"My Account"})}catch(Q){console.error("Error saving credential",Q),alert("Failed to save key. Are you online?")}finally{f(!1)}},O=async $=>{if(!(!s||!J)&&confirm("Delete this key?"))try{const Q=Re(J,"users",s.uid);await bn(Q,{credentials:ZN($)}),c(K=>K.filter(P=>P.id!==$.id))}catch(Q){console.error("Error deleting",Q)}},q=$=>{navigator.clipboard.writeText($)};return n?o.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"w-full max-w-5xl h-[600px] bg-slate-900/95 backdrop-blur-xl border border-cyan-500/30 shadow-[0_0_50px_rgba(8,145,178,0.3)] rounded-3xl flex overflow-hidden relative",children:[o.jsx("button",{onClick:e,className:"absolute top-4 right-4 z-50 p-2 bg-slate-800/50 hover:bg-red-500/20 text-slate-400 hover:text-red-400 rounded-full transition-all",children:o.jsx(lt,{className:"w-6 h-6"})}),o.jsxs("div",{className:"w-[65%] flex flex-col border-r border-slate-700/50 bg-slate-900/50",children:[o.jsxs("div",{className:"p-8 border-b border-slate-700/50 flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-cyan-950/50 rounded-2xl border border-cyan-500/20 shadow-inner",children:o.jsx(Kc,{className:"w-8 h-8 text-cyan-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black tracking-wide text-white uppercase italic",children:"Holokeys"}),o.jsxs("div",{className:"flex items-center gap-2 text-cyan-500 font-bold text-xs tracking-[0.3em] uppercase",children:[o.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-500 animate-pulse"}),"Secure Wallet"]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-8",children:l.length===0?o.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 border-2 border-dashed border-slate-800 rounded-3xl bg-slate-900/50",children:[o.jsx(Kc,{className:"w-16 h-16 mb-4 opacity-10"}),o.jsx("p",{className:"text-lg font-bold text-slate-400",children:"Your wallet is empty"}),o.jsx("p",{className:"text-sm opacity-60",children:"Add your first key on the right "})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map($=>o.jsxs("div",{className:"group relative bg-slate-800/80 hover:bg-slate-800 rounded-2xl p-5 border border-slate-700 hover:border-cyan-500/50 transition-all hover:shadow-[0_4px_20px_-5px_rgba(8,145,178,0.3)] hover:-translate-y-1",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-slate-900 flex items-center justify-center text-lg shadow-inner",children:$.service==="Tinkercad"?"":$.service==="Canva"?"":$.service==="Scratch"?"":$.service==="Google"?"":""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white leading-tight",children:$.service}),o.jsx("div",{className:"text-[10px] uppercase tracking-wider text-slate-500 font-bold",children:$.label})]})]}),o.jsx("button",{onClick:()=>O($),className:"text-slate-600 hover:text-red-400 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Vs,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 rounded-lg p-2 border border-slate-700/50",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase w-8",children:"ID"}),o.jsx("code",{className:"flex-1 text-xs text-cyan-300 font-mono truncate cursor-pointer hover:text-white transition-colors",onClick:()=>q($.username),title:"Click to copy",children:$.username}),o.jsx(hg,{className:"w-3 h-3 text-slate-500"})]}),$.password&&o.jsxs("div",{className:"flex items-center gap-2 bg-slate-900 rounded-lg p-2 border border-slate-700/50",children:[o.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase w-8",children:"Key"}),o.jsx("code",{className:"flex-1 text-xs text-yellow-300 font-mono truncate cursor-pointer hover:text-white transition-colors",onClick:()=>q($.password),title:"Click to copy",children:_[$.id]?$.password:""}),o.jsx("button",{onClick:Q=>{Q.stopPropagation(),k(K=>({...K,[$.id]:!K[$.id]}))},className:"text-slate-500 hover:text-white",children:_[$.id]?o.jsx(U0,{className:"w-3 h-3"}):o.jsx(yu,{className:"w-3 h-3"})})]})]})]},$.id))})})]}),o.jsxs("div",{className:"w-[35%] bg-slate-800/30 p-8 flex flex-col justify-center border-l border-slate-700/50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",style:{backgroundImage:"radial-gradient(circle at 50% 50%, #06b6d4 1px, transparent 1px)",backgroundSize:"20px 20px"}}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[o.jsx("span",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-cyan-600 text-white text-sm shadow-lg shadow-cyan-500/30",children:o.jsx(Fn,{className:"w-5 h-5"})}),"Add New Key"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-1",children:"Service"}),o.jsxs("select",{className:"w-full bg-slate-900 border border-slate-600 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 rounded-xl p-3 text-white font-medium outline-none transition-all",value:y.service,onChange:$=>v({...y,service:$.target.value}),children:[o.jsx("option",{value:"Tinkercad",children:" Tinkercad"}),o.jsx("option",{value:"Canva",children:" Canva"}),o.jsx("option",{value:"Google",children:" Google"}),o.jsx("option",{value:"Scratch",children:" Scratch"}),o.jsx("option",{value:"Onshape",children:" Onshape"}),o.jsx("option",{value:"Other",children:" Other"})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-1",children:"Username / Class Code"}),o.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-600 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 rounded-xl p-3 text-white outline-none transition-all placeholder:text-slate-600 font-mono text-sm",placeholder:"Explorer123",value:y.username||"",onChange:$=>v({...y,username:$.target.value})})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider ml-1",children:"Password"}),o.jsx("input",{type:"text",className:"w-full bg-slate-900 border border-slate-600 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-500/20 rounded-xl p-3 text-yellow-300 outline-none transition-all placeholder:text-slate-600 font-mono text-sm",placeholder:"Secret123!",value:y.password||"",onChange:$=>v({...y,password:$.target.value})})]}),o.jsx("button",{onClick:M,disabled:d,className:"w-full mt-4 bg-gradient-to-r from-cyan-600 to-blue-600 hover:from-cyan-500 hover:to-blue-500 text-white py-4 rounded-xl text-md font-bold flex justify-center items-center gap-2 shadow-xl shadow-cyan-900/30 transform hover:-translate-y-0.5 active:translate-y-0 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Saving securely...":o.jsxs(o.Fragment,{children:[o.jsx(vu,{className:"w-5 h-5"})," Save to Wallet"]})})]})]})]})]})}):null},qO=({isOpen:n,onClose:e})=>{const{user:t}=ms(),[s,i]=C.useState([]),[l,c]=C.useState([]),[d,f]=C.useState(!0),[m,g]=C.useState(0),[y,v]=C.useState(1);C.useEffect(()=>{n&&t&&_()},[n,t]);const _=async()=>{if(!(!J||!t)){f(!0);try{const E=Gt(je(J,"student_projects"),wt("studentId","==",t.uid),wt("status","in",["submitted","published"])),M=(await st(E)).docs.map(q=>({id:q.id,...q.data()}));i(M);const O=M.length*100;g(O),v(Math.floor(O/500)+1),c([])}catch(E){console.error("Error loading portfolio:",E)}finally{f(!1)}}},k=()=>{alert("PDF Export feature coming soon!")};return n?o.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"w-full max-w-6xl h-[90vh] bg-slate-900/95 backdrop-blur-xl border border-emerald-500/30 shadow-[0_0_50px_rgba(16,185,129,0.3)] rounded-3xl overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-slate-700/50 bg-gradient-to-r from-emerald-950/50 to-slate-900 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-emerald-950/50 rounded-2xl border border-emerald-500/20",children:o.jsx(hs,{className:"w-8 h-8 text-emerald-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-white",children:"My Portfolio"}),o.jsx("p",{className:"text-sm text-slate-400",children:"Showcase of completed projects"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-emerald-600/20 border border-emerald-500/30 hover:bg-emerald-600 hover:text-white rounded-xl text-emerald-400 font-bold transition-all",children:[o.jsx(x3,{size:18}),o.jsx("span",{className:"hidden md:inline",children:"Export PDF"})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",children:o.jsx(lt,{size:24})})]})]}),o.jsx("div",{className:"p-6 border-b border-slate-700/50 bg-slate-950/50",children:o.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[o.jsx("div",{className:"text-3xl font-black text-emerald-400",children:s.length}),o.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mt-1",children:"Projects"})]}),o.jsxs("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[o.jsx("div",{className:"text-3xl font-black text-amber-400",children:m}),o.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mt-1",children:"Total XP"})]}),o.jsxs("div",{className:"text-center p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[o.jsxs("div",{className:"text-3xl font-black text-indigo-400",children:["Level ",y]}),o.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wider mt-1",children:"Current Level"})]})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("div",{className:"w-12 h-12 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"})}):s.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[o.jsx(hs,{className:"w-24 h-24 text-slate-700 mb-4"}),o.jsx("h3",{className:"text-2xl font-bold text-slate-400 mb-2",children:"No Completed Projects Yet"}),o.jsx("p",{className:"text-slate-500",children:"Complete and submit projects to build your portfolio!"})]}):o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-black text-white mb-4 flex items-center gap-2",children:[o.jsx(Yc,{className:"w-5 h-5 text-amber-400"}),"Skills Gained"]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:Array.from(new Set(s.flatMap(E=>E.skills||[]))).map(E=>o.jsx("span",{className:"px-3 py-1 bg-emerald-500/10 text-emerald-400 text-sm font-bold rounded-full border border-emerald-500/20",children:E},E))})]}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-black text-white mb-4",children:"Completed Projects"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(E=>{var T,M,O;return o.jsxs("div",{className:"group bg-slate-800/50 rounded-2xl border border-slate-700 hover:border-emerald-500/50 transition-all overflow-hidden hover:shadow-[0_0_30px_-5px_rgba(16,185,129,0.3)]",children:[o.jsx("div",{className:"aspect-video bg-gradient-to-br from-emerald-900/20 to-slate-900 flex items-center justify-center border-b border-slate-700",children:E.coverImage?o.jsx("img",{src:E.coverImage,alt:E.title,className:"w-full h-full object-cover"}):o.jsx("div",{className:"text-6xl",children:E.station==="robotics"?"":E.station==="coding"?"":""})}),o.jsxs("div",{className:"p-4",children:[o.jsx("h3",{className:"font-bold text-white mb-2 line-clamp-1",children:E.title}),o.jsx("p",{className:"text-xs text-slate-400 line-clamp-2 mb-3",children:E.description}),o.jsxs("div",{className:"flex items-center justify-between text-xs mb-3",children:[o.jsxs("span",{className:"text-slate-500",children:[((T=E.steps)==null?void 0:T.filter(q=>q.status==="done").length)||0,"/",((M=E.steps)==null?void 0:M.length)||0," steps"]}),o.jsxs("span",{className:"text-emerald-400 font-bold",children:[((O=E.commits)==null?void 0:O.length)||0," commits"]})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"px-3 py-1 bg-emerald-500/10 text-emerald-400 text-xs font-bold rounded-full border border-emerald-500/20",children:E.status}),o.jsx(Yc,{className:"w-4 h-4 text-amber-400 fill-amber-400"})]})]})]},E.id)})})]})]})})]})}):null},GO=({isOpen:n,onClose:e})=>{const{user:t}=ms(),[s,i]=C.useState([]),[l,c]=C.useState(!0);C.useEffect(()=>{n&&t&&d()},[n,t]);const d=async()=>{if(!(!J||!t)){c(!0);try{const f=Gt(je(J,"gallery_items"),gu("createdAt","desc"),_f(50)),y=(await st(f)).docs.map(v=>({id:v.id,...v.data()})).filter(v=>v.type==="image").filter(v=>!v.studentId||v.studentId===t.uid||v.studentId==="all");i(y)}catch(f){console.error("Error loading gallery:",f)}finally{c(!1)}}};return n?o.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"w-full max-w-7xl h-[90vh] bg-slate-900/95 backdrop-blur-xl border border-pink-500/30 shadow-[0_0_50px_rgba(236,72,153,0.3)] rounded-3xl overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"p-6 border-b border-slate-700/50 bg-gradient-to-r from-pink-950/50 to-slate-900 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-3 bg-pink-950/50 rounded-2xl border border-pink-500/20",children:o.jsx(fg,{className:"w-8 h-8 text-pink-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-white",children:"Memory Gallery"}),o.jsx("p",{className:"text-sm text-slate-400",children:"Your daily life at MakerLab"})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",children:o.jsx(lt,{size:24})})]}),o.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:l?o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsx("div",{className:"w-12 h-12 border-4 border-pink-500 border-t-transparent rounded-full animate-spin"})}):s.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[o.jsx(fg,{className:"w-24 h-24 text-slate-700 mb-4"}),o.jsx("h3",{className:"text-2xl font-bold text-slate-400 mb-2",children:"No Photos Yet"}),o.jsx("p",{className:"text-slate-500",children:"Your instructors will share photos of your MakerLab adventures here!"})]}):o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(f=>o.jsxs("div",{className:"group aspect-square bg-slate-800/50 rounded-xl border border-slate-700 hover:border-pink-500/50 transition-all overflow-hidden cursor-pointer hover:shadow-[0_0_30px_-5px_rgba(236,72,153,0.3)] relative",children:[o.jsx("img",{src:f.url,alt:f.caption||"Memory",className:"w-full h-full object-cover"}),f.caption&&o.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center p-4",children:o.jsx("p",{className:"text-white font-bold text-center text-sm",children:f.caption})})]},f.id))})})]})}):null},WO=({isOpen:n,onClose:e})=>{const{user:t}=ms(),[s,i]=C.useState(""),[l,c]=C.useState("Main Entrance"),[d,f]=C.useState(!0),[m,g]=C.useState(null);C.useEffect(()=>{n&&t&&y()},[n,t]),C.useEffect(()=>{if(!t||!J)return;const v=Gt(je(J,"pickup_queue"),wt("studentId","==",t.uid)),_=cn(v,k=>{if(k.empty)g(null);else{const E=k.docs[0].data();g(E)}});return()=>_()},[t]);const y=async()=>{var v;if(!(!J||!t)){f(!0);try{const _=Gt(je(J,"enrollments"),wt("studentId","==",t.uid)),k=await st(_);if(k.empty)i("3:00 PM"),c("Main Entrance");else{const E=k.docs.map(M=>M.data()),T=E.find(M=>M.status==="active")||E[0];T&&(i(T.pickupTime||((v=T.schedule)==null?void 0:v.pickupTime)||"3:00 PM"),c(T.pickupLocation||"Main Entrance"))}}catch(_){console.error("Error loading pickup info:",_),i("3:00 PM"),c("Main Entrance")}finally{f(!1)}}};return n?o.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:`w-full max-w-2xl backdrop-blur-xl border shadow-[0_0_50px_rgba(0,0,0,0.3)] rounded-3xl overflow-hidden transition-all duration-500 ${(m==null?void 0:m.status)==="released"?"bg-emerald-950/90 border-emerald-500 shadow-emerald-500/20":(m==null?void 0:m.status)==="arrived"?"bg-indigo-950/90 border-indigo-500 shadow-indigo-500/20":"bg-slate-900/95 border-amber-500/30 shadow-amber-500/20"}`,children:[o.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`p-3 rounded-2xl border ${m?"bg-white/10 border-white/20":"bg-amber-950/50 border-amber-500/20"}`,children:o.jsx(F0,{className:`w-8 h-8 ${m?"text-white":"text-amber-400"}`})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-3xl font-black text-white",children:(m==null?void 0:m.status)==="released"?"GO HOME! ":(m==null?void 0:m.status)==="arrived"?"PARENT IS HERE! ":"Pickup Schedule"}),o.jsx("p",{className:"text-sm text-slate-400",children:m?"Real-time update from Gatekeeper":"Your daily pickup information"})]})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white/50 hover:text-white",children:o.jsx(lt,{size:24})})]}),o.jsx("div",{className:"p-8",children:d?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"w-12 h-12 border-4 border-amber-500 border-t-transparent rounded-full animate-spin"})}):o.jsxs("div",{className:"space-y-6",children:[m&&o.jsxs("div",{className:`p-8 rounded-2xl text-center border-4 border-white/20 animate-bounce ${m.status==="released"?"bg-emerald-600":"bg-indigo-600"}`,children:[o.jsx("div",{className:"text-2xl font-bold text-white/80 uppercase tracking-widest mb-2",children:"Status Update"}),o.jsx("div",{className:"text-5xl font-black text-white",children:m.status==="released"?"PICKUP APPROVED":"DRIVER ARRIVED"}),o.jsx("div",{className:"mt-4 text-xl font-medium text-white/90",children:m.pickerName?`${m.pickerName} is waiting for you!`:"Your ride is here!"})]}),o.jsxs("div",{className:"flex items-center gap-4 p-6 bg-slate-800/50 rounded-2xl border border-slate-700",children:[o.jsx("div",{className:"p-4 bg-amber-950/50 rounded-xl border border-amber-500/20",children:o.jsx(fs,{className:"w-8 h-8 text-amber-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm text-slate-400 uppercase tracking-wider mb-1",children:"Scheduled Time"}),o.jsx("p",{className:"text-3xl font-black text-white",children:s})]})]}),o.jsxs("div",{className:"flex items-center gap-4 p-6 bg-slate-800/50 rounded-2xl border border-slate-700",children:[o.jsx("div",{className:"p-4 bg-cyan-950/50 rounded-xl border border-cyan-500/20",children:o.jsx(W3,{className:"w-8 h-8 text-cyan-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-sm text-slate-400 uppercase tracking-wider mb-1",children:"Pickup Location"}),o.jsx("p",{className:"text-2xl font-bold text-white",children:l})]})]}),o.jsxs("div",{className:"p-6 bg-slate-800/50 rounded-2xl border border-slate-700 text-center",children:[o.jsx("h3",{className:"text-sm text-slate-400 uppercase tracking-wider mb-4",children:"Pickup QR Code"}),o.jsx("div",{className:"inline-block p-6 bg-white rounded-xl",children:o.jsx(pD,{className:"w-32 h-32 text-slate-900"})}),o.jsx("p",{className:"text-xs text-slate-500 mt-4",children:"Show this code to your parent/guardian"})]}),o.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl",children:[o.jsx("h3",{className:"font-bold text-blue-400 mb-2",children:"Pickup Instructions"}),o.jsxs("ul",{className:"text-sm text-blue-300/80 space-y-1",children:[o.jsx("li",{children:" Wait at the designated pickup location"}),o.jsx("li",{children:" Show the QR code to your parent/guardian"}),o.jsx("li",{children:" Check in with staff before leaving"})]})]})]})})]})}):null},HO=void 0,KO=new p5(HO),hS=async(n,e)=>{try{const t=KO.getGenerativeModel({model:"gemini-pro"}),s=`
        Create a multiple-choice quiz with 3 questions based on this video information.
        
        Video Title: ${n}
        Video Description: ${e}

        Format the output STRICTLY as a JSON array of objects. 
        Each object must have:
        - "q": string (The question)
        - "options": array of 4 strings (Possible answers)
        - "correct": number (Index of the correct answer, 0-3)

        Do not include markdown formatting like \`\`\`json. Just the raw JSON.
        `,d=(await(await t.generateContent(s)).response).text().replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(d)}catch(t){return console.error("Error generating quiz:",t),[]}},QO=()=>{var le;const[n,e]=C.useState([]),[t,s]=C.useState(!0),[i,l]=C.useState(!1),[c,d]=C.useState(null),[f,m]=C.useState({title:"",category:"General",thumbnail:"",videoUrl:"",xpReward:10,questions:[]});C.useEffect(()=>{g()},[]);const g=async()=>{try{if(!J)return;const F=(await st(je(J,"arcade_content"))).docs.map(U=>({id:U.id,...U.data()}));e(F)}catch(G){console.error("Error fetching content:",G)}finally{s(!1)}},y=async()=>{var G;if(!f.title||!f.videoUrl){alert("Title and Video URL are required");return}try{if(!J)return;const F=je(J,"arcade_content"),U=((G=f.questions)==null?void 0:G.filter(z=>z.q&&z.options.length>=2))||[],X={title:f.title,category:f.category||"General",thumbnail:f.thumbnail||`https://img.youtube.com/vi/${k(f.videoUrl)}/maxresdefault.jpg`,videoUrl:E(f.videoUrl||""),xpReward:Number(f.xpReward)||10,questions:U};f.id?await bn(Re(J,"arcade_content",f.id),X):await cs(F,X),l(!1),m({}),g()}catch(F){console.error("Error saving content:",F),alert("Failed to save")}},v=async G=>{if(confirm("Are you sure you want to delete this content?"))try{if(!J)return;await Ps(Re(J,"arcade_content",G)),g()}catch(F){console.error("Error deleting content:",F)}},_=async G=>{if(confirm(`Generate a quiz for "${G.title}" using AI? This will overwrite existing questions.`)){d(G.id);try{const F=await hS(G.title,"Educational video about "+G.category);if(F&&F.length>0){if(!J)return;await bn(Re(J,"arcade_content",G.id),{questions:F}),e(U=>U.map(X=>X.id===G.id?{...X,questions:F}:X)),alert(`Success! Generated ${F.length} questions.`)}else alert("AI could not generate questions. Please ensure the title is descriptive.")}catch(F){console.error("Generation failed:",F),alert("Failed to generate quiz.")}finally{d(null)}}},k=G=>{const F=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,U=G.match(F);return U&&U[2].length===11?U[2]:null},E=G=>{const F=k(G);return F?`https://www.youtube.com/embed/${F}`:G},T=()=>{m(G=>({...G,questions:[...G.questions||[],{q:"",options:["","",""],correct:0}]}))},M=(G,F,U)=>{const X=[...f.questions||[]];F==="q"&&(X[G].q=U),F==="correct"&&(X[G].correct=U),m(z=>({...z,questions:X}))},O=(G,F,U)=>{const X=[...f.questions||[]];X[G].options[F]=U,m(z=>({...z,questions:X}))},[q,$]=C.useState(!1),[Q,K]=C.useState(""),[P,j]=C.useState(""),[V,I]=C.useState(10),[L,D]=C.useState(!1),[A,he]=C.useState("");C.useEffect(()=>{(async()=>{if(J)try{const F=await As(Re(J,"settings","youtube"));F.exists()&&K(F.data().apiKey||"")}catch(F){console.error("Error loading YouTube API key:",F)}})()},[]);const ie=async()=>{if(!P||!Q){alert("Please provide both Playlist URL and API Key");return}try{J&&(await Qr(Re(J,"settings","youtube"),{apiKey:Q,updatedAt:new Date().toISOString()}),console.log(" YouTube API Key saved to Firestore"))}catch(G){console.error("Error saving API key:",G)}D(!0),he("Initializing...");try{const{fetchYouTubePlaylist:G,extractPlaylistId:F,parseDuration:U}=await Ur(async()=>{const{fetchYouTubePlaylist:ae,extractPlaylistId:xe,parseDuration:Ce}=await import("./youtube-B7ZrRyuI.js");return{fetchYouTubePlaylist:ae,extractPlaylistId:xe,parseDuration:Ce}},[],import.meta.url),X=F(P);if(!X)throw new Error("Invalid Playlist URL");he("Fetching Playlist Data...");const{playlistTitle:z,videos:Y}=await G(X,Q);if(he(`Found ${Y.length} videos. Importing...`),!J)throw new Error("Database not initialized");const Ne=je(J,"arcade_content");let re=0;for(const ae of Y){const xe=U(ae.duration),Ce=Math.ceil(xe*V)||10,De={title:ae.title,category:z||"General",thumbnail:ae.thumbnail,videoUrl:`https://www.youtube.com/embed/${ae.id}`,xpReward:Ce,questions:[],importedFromPlaylist:X,createdAt:new Date().toISOString()};await cs(Ne,De),re++,he(`Imported ${re}/${Y.length}: ${ae.title}`)}he("Done!"),$(!1),j(""),g(),alert(`Successfully imported ${re} videos from "${z}"!`)}catch(G){console.error("Import Failed:",G),alert(`Import Failed: ${G.message}`)}finally{D(!1),he("")}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Video Library"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>$(!0),className:"flex items-center gap-2 px-4 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-white font-bold transition-colors border border-slate-600",children:[o.jsx(Uh,{size:18})," Import Playlist"]}),o.jsxs("button",{onClick:()=>{m({}),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 rounded-lg text-white font-bold hover:bg-indigo-500 transition-colors",children:[o.jsx(Fn,{size:18})," Add New"]})]})]}),q&&o.jsx("div",{className:"fixed inset-0 z-[10010] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-slate-900 border border-slate-700 p-6 rounded-2xl w-full max-w-md shadow-2xl space-y-4",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-lg font-bold text-white",children:"Import YouTube Playlist"}),o.jsx("button",{onClick:()=>$(!1),disabled:L,className:"text-slate-400 hover:text-white",children:o.jsx(lt,{})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs uppercase text-slate-500 font-bold mb-1",children:"YouTube Data API Key"}),o.jsx("input",{type:"password",value:Q,onChange:G=>K(G.target.value),className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-white text-sm",placeholder:"AIzaSy..."}),o.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Required to fetch playlist details."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs uppercase text-slate-500 font-bold mb-1",children:"Playlist URL"}),o.jsx("input",{value:P,onChange:G=>j(G.target.value),className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-white text-sm",placeholder:"https://www.youtube.com/playlist?list=..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs uppercase text-slate-500 font-bold mb-1",children:"Auto-XP (Per Minute)"}),o.jsx("input",{type:"number",value:V,onChange:G=>I(parseInt(G.target.value)),className:"w-full bg-slate-800 border border-slate-600 rounded p-2 text-white text-sm"}),o.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"Example: 10 mins x 10 = 100 XP Reward."})]}),L&&o.jsx("div",{className:"p-3 bg-indigo-900/20 border border-indigo-500/30 rounded text-indigo-300 text-xs font-mono",children:A})]}),o.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[o.jsx("button",{onClick:()=>$(!1),disabled:L,className:"px-4 py-2 text-slate-400 hover:text-white text-sm",children:"Cancel"}),o.jsx("button",{onClick:ie,disabled:L||!P||!Q,className:"px-6 py-2 bg-red-600 hover:bg-red-500 text-white font-bold rounded-lg text-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:L?"Importing...":"Start Import"})]})]})}),i?o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 animate-in slide-in-from-right",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h4",{className:"text-lg font-bold text-white",children:f.id?"Edit Content":"New Content"}),o.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-white",children:o.jsx(lt,{})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase mb-1",children:"Title"}),o.jsx("input",{value:f.title||"",onChange:G=>m({...f,title:G.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none",placeholder:"e.g. Intro to Python"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase mb-1",children:"Category"}),o.jsx("input",{value:f.category||"",onChange:G=>m({...f,category:G.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none",placeholder:"e.g. Coding"})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase mb-1",children:"YouTube URL"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{value:f.videoUrl||"",onChange:G=>m({...f,videoUrl:G.target.value}),className:"flex-1 bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none",placeholder:"https://www.youtube.com/watch?v=..."}),o.jsx("div",{className:"w-24",children:o.jsx("input",{type:"number",value:f.xpReward||10,onChange:G=>m({...f,xpReward:parseInt(G.target.value)}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-indigo-500 outline-none text-center",placeholder:"XP"})})]})]})]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase",children:"Quiz Questions"}),o.jsxs("button",{onClick:T,className:"text-xs text-indigo-400 hover:text-indigo-300 flex items-center gap-1 font-bold",children:[o.jsx(Fn,{size:14})," Add Question"]})]}),(le=f.questions)==null?void 0:le.map((G,F)=>o.jsxs("div",{className:"p-4 bg-slate-900/50 rounded-xl border border-slate-700/50",children:[o.jsx("input",{value:G.q,onChange:U=>M(F,"q",U.target.value),className:"w-full bg-transparent border-b border-slate-700 mb-3 px-2 py-1 text-white font-medium focus:border-indigo-500 outline-none",placeholder:`Question ${F+1}`}),o.jsx("div",{className:"space-y-2",children:G.options.map((U,X)=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"radio",name:`correct-${F}`,checked:G.correct===X,onChange:()=>M(F,"correct",X),className:"accent-indigo-500"}),o.jsx("input",{value:U,onChange:z=>O(F,X,z.target.value),className:"flex-1 bg-slate-900 border border-slate-700 rounded px-2 py-1 text-sm text-slate-300 focus:border-indigo-500 outline-none",placeholder:`Option ${X+1}`})]},X))})]},F))]}),o.jsxs("button",{onClick:y,className:"w-full py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[o.jsx(vu,{size:18})," Save Content"]})]}):o.jsx("div",{className:"grid grid-cols-1 gap-4 max-h-[500px] overflow-y-auto pr-2",children:t?o.jsx("div",{className:"text-center text-slate-500",children:"Loading library..."}):n.length===0?o.jsxs("div",{className:"text-center p-8 border-2 border-dashed border-slate-700 rounded-xl",children:[o.jsx(Uh,{className:"w-12 h-12 text-slate-600 mx-auto mb-2"}),o.jsx("p",{className:"text-slate-500",children:"No content found. Add your first video."})]}):n.map(G=>{var F;return o.jsxs("div",{className:"flex gap-4 p-4 bg-slate-800 rounded-xl border border-slate-700 group hover:border-indigo-500/50 transition-colors",children:[o.jsx("img",{src:G.thumbnail,alt:G.title,className:"w-32 h-20 object-cover rounded-lg bg-black/50"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white",children:G.title}),o.jsx("span",{className:"text-xs text-indigo-400 font-bold uppercase",children:G.category}),o.jsxs("span",{className:"text-xs text-slate-500 ml-2",children:[" ",G.xpReward," XP"]})]}),o.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>_(G),disabled:c===G.id,className:"p-2 bg-purple-600/10 hover:bg-purple-600 text-purple-400 hover:text-white rounded-lg transition-colors border border-purple-600/30",title:"Auto-Generate Quiz",children:c===G.id?o.jsx(z0,{size:16,className:"animate-spin"}):o.jsx(B0,{size:16})}),o.jsx("button",{onClick:()=>{m(G),l(!0)},className:"p-2 bg-slate-700 hover:bg-white text-white hover:text-black rounded-lg transition-colors",children:"Edit"}),o.jsx("button",{onClick:()=>v(G.id),className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-lg transition-colors",children:o.jsx(Vs,{size:16})})]})]}),o.jsxs("div",{className:"mt-2 text-xs text-slate-500 flex items-center gap-1",children:[o.jsx(o3,{size:12})," ",((F=G.questions)==null?void 0:F.length)||0," Questions"]})]})]},G.id)})})]})},YO=()=>{const[n,e]=C.useState([]),[t,s]=C.useState(!0),[i,l]=C.useState(!1),[c,d]=C.useState({title:"",url:"",thumbnail:"",costPerMinute:1,description:""});C.useEffect(()=>{f()},[]);const f=async()=>{try{if(!J)return;const v=(await st(je(J,"arcade_games"))).docs.map(_=>({id:_.id,..._.data()}));e(v)}catch(y){console.error("Error fetching games:",y)}finally{s(!1)}},m=async()=>{if(!c.title||!c.url){alert("Title and Game URL are required");return}try{if(!J)return;const y=je(J,"arcade_games"),v={title:c.title,url:c.url,thumbnail:c.thumbnail||"https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=500&q=80",costPerMinute:Number(c.costPerMinute)||1,description:c.description||"Fun game to play."};c.id?await bn(Re(J,"arcade_games",c.id),v):await cs(y,v),l(!1),d({}),f()}catch(y){console.error("Error saving game:",y),alert("Failed to save")}},g=async y=>{if(confirm("Are you sure you want to delete this game?"))try{if(!J)return;await Ps(Re(J,"arcade_games",y)),f()}catch(v){console.error("Error deleting game:",v)}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h3",{className:"text-xl font-bold text-white",children:"Arcade Games"}),o.jsxs("button",{onClick:()=>{d({}),l(!0)},className:"flex items-center gap-2 px-4 py-2 bg-purple-600 rounded-lg text-white font-bold hover:bg-purple-500 transition-colors",children:[o.jsx(Fn,{size:18})," Add Game"]})]}),i?o.jsxs("div",{className:"bg-slate-800 p-6 rounded-2xl border border-slate-700 animate-in slide-in-from-right",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h4",{className:"text-lg font-bold text-white",children:c.id?"Edit Game":"New Game"}),o.jsx("button",{onClick:()=>l(!1),className:"text-slate-400 hover:text-white",children:o.jsx(lt,{})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase mb-1",children:"Title"}),o.jsx("input",{value:c.title||"",onChange:y=>d({...c,title:y.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 outline-none",placeholder:"e.g. Roblox"})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase mb-1",children:"Game URL (https://...)"}),o.jsx("input",{value:c.url||"",onChange:y=>d({...c,url:y.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 outline-none",placeholder:"https://www.roblox.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase mb-1",children:"Cost Per Minute (Credits)"}),o.jsx("input",{type:"number",value:c.costPerMinute||1,onChange:y=>d({...c,costPerMinute:parseInt(y.target.value)}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 outline-none"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase mb-1",children:"Thumbnail URL"}),o.jsx("input",{value:c.thumbnail||"",onChange:y=>d({...c,thumbnail:y.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 outline-none",placeholder:"https://..."})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"block text-slate-400 text-xs uppercase mb-1",children:"Description"}),o.jsx("textarea",{value:c.description||"",onChange:y=>d({...c,description:y.target.value}),className:"w-full bg-slate-900 border border-slate-700 rounded-lg p-3 text-white focus:border-purple-500 outline-none h-24",placeholder:"Short description..."})]})]}),o.jsxs("button",{onClick:m,className:"w-full py-3 bg-purple-600 hover:bg-purple-500 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-colors",children:[o.jsx(vu,{size:18})," Save Game"]})]}):o.jsx("div",{className:"grid grid-cols-1 gap-4 max-h-[500px] overflow-y-auto pr-2",children:t?o.jsx("div",{className:"text-center text-slate-500",children:"Loading games..."}):n.length===0?o.jsxs("div",{className:"text-center p-8 border-2 border-dashed border-slate-700 rounded-xl",children:[o.jsx(al,{className:"w-12 h-12 text-slate-600 mx-auto mb-2"}),o.jsx("p",{className:"text-slate-500",children:"No games found. Add your first game."})]}):n.map(y=>o.jsxs("div",{className:"flex gap-4 p-4 bg-slate-800 rounded-xl border border-slate-700 group hover:border-purple-500/50 transition-colors",children:[o.jsx("img",{src:y.thumbnail,alt:y.title,className:"w-20 h-20 object-cover rounded-lg bg-black/50"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-white",children:y.title}),o.jsxs("span",{className:"text-xs text-yellow-400 font-bold uppercase",children:[y.costPerMinute," Credits/min"]})]}),o.jsxs("div",{className:"flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:()=>{d(y),l(!0)},className:"p-2 bg-slate-700 hover:bg-white text-white hover:text-black rounded-lg transition-colors",children:"Edit"}),o.jsx("button",{onClick:()=>g(y.id),className:"p-2 bg-red-500/10 hover:bg-red-500 text-red-500 hover:text-white rounded-lg transition-colors",children:o.jsx(Vs,{size:16})})]})]}),o.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:y.description}),o.jsx("p",{className:"text-xs text-slate-600 font-mono mt-1 truncate max-w-[300px]",children:y.url})]})]},y.id))})]})},XO=({isOpen:n,onClose:e})=>{const[t,s]=C.useState("SYSTEM"),[i,l]=C.useState({kioskMode:!1,fullscreen:!1,showFrame:!0,autoStart:!1}),[c,d]=C.useState(!0),[f,m]=C.useState(!1),[g,y]=C.useState(!1);C.useEffect(()=>{n&&v()},[n]);const v=async()=>{var E;try{if(J){const T=await As(Re(J,"appSettings","kioskConfig"));T.exists()?(l(T.data()),console.log("Loaded config from Firestore:",T.data())):console.log("No cloud config found, using defaults")}if((E=window.sparkquest)!=null&&E.getConfig){const T=await window.sparkquest.getConfig();l(M=>({...T,...M}))}}catch(T){console.error("Error loading config:",T)}finally{d(!1)}},_=async()=>{var E;m(!0);try{if(J&&(await Qr(Re(J,"appSettings","kioskConfig"),i),console.log("Saved config to Firestore:",i)),(E=window.sparkquest)!=null&&E.updateConfig){const T=await window.sparkquest.updateConfig(i);T.success&&y(T.requiresRestart||!1)}alert(" Settings saved! All student computers will use these settings on next launch.")}catch(T){console.error("Error saving config:",T),alert("Failed to save settings")}finally{m(!1)}},k=()=>{confirm("Restart SparkQuest to apply changes?")&&window.location.reload()};return n?o.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-in fade-in duration-200",children:o.jsxs("div",{className:"w-full max-w-4xl max-h-[90vh] flex flex-col bg-slate-900/95 backdrop-blur-xl border border-indigo-500/30 shadow-[0_0_50px_rgba(99,102,241,0.3)] rounded-3xl overflow-hidden",children:[o.jsxs("div",{className:"flex bg-gradient-to-r from-indigo-950/50 to-slate-900 border-b border-slate-700/50",children:[o.jsx("div",{className:"p-6 border-r border-slate-700/50 min-w-[200px]",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"p-3 bg-indigo-950/50 rounded-2xl border border-indigo-500/20",children:o.jsx(kE,{className:"w-6 h-6 text-indigo-400"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-black text-white",children:"Admin"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Control Panel"})]})]})}),o.jsxs("div",{className:"flex-1 flex items-center px-4 gap-2",children:[o.jsxs("button",{onClick:()=>s("SYSTEM"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold transition-all relative top-[1px] ${t==="SYSTEM"?"text-white border-b-2 border-indigo-500 bg-white/5":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[o.jsx(zw,{size:18})," System"]}),o.jsxs("button",{onClick:()=>s("LIBRARY"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold transition-all relative top-[1px] ${t==="LIBRARY"?"text-white border-b-2 border-indigo-500 bg-white/5":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[o.jsx(Uh,{size:18})," Video Library"]}),o.jsxs("button",{onClick:()=>s("ARCADE"),className:`flex items-center gap-2 px-6 py-3 rounded-t-xl font-bold transition-all relative top-[1px] ${t==="ARCADE"?"text-white border-b-2 border-indigo-500 bg-white/5":"text-slate-400 hover:text-white hover:bg-white/5"}`,children:[o.jsx(al,{size:18})," Arcade Games"]})]}),o.jsx("button",{onClick:e,className:"px-6 hover:bg-white/5 text-slate-400 hover:text-white transition-colors",children:""})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-slate-900/50",children:[t==="SYSTEM"&&o.jsx("div",{className:"space-y-6 max-w-2xl mx-auto",children:c?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto"}),o.jsx("p",{className:"text-slate-400 mt-4",children:"Loading settings..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(zw,{className:"w-5 h-5 text-indigo-400"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white",children:"Kiosk Mode"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Lock app to fullscreen, disable exit"})]})]}),o.jsx("button",{onClick:()=>l({...i,kioskMode:!i.kioskMode}),className:`relative w-14 h-8 rounded-full transition-colors ${i.kioskMode?"bg-indigo-600":"bg-slate-600"}`,children:o.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-transform ${i.kioskMode?"translate-x-7":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(wE,{className:"w-5 h-5 text-cyan-400"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white",children:"Fullscreen"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Start in fullscreen mode"})]})]}),o.jsx("button",{onClick:()=>l({...i,fullscreen:!i.fullscreen}),className:`relative w-14 h-8 rounded-full transition-colors ${i.fullscreen?"bg-cyan-600":"bg-slate-600"}`,children:o.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-transform ${i.fullscreen?"translate-x-7":"translate-x-1"}`})})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(k3,{className:"w-5 h-5 text-emerald-400"}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-white",children:"Show Window Frame"}),o.jsx("p",{className:"text-xs text-slate-400",children:"Display title bar and controls"})]})]}),o.jsx("button",{onClick:()=>l({...i,showFrame:!i.showFrame}),className:`relative w-14 h-8 rounded-full transition-colors ${i.showFrame?"bg-emerald-600":"bg-slate-600"}`,children:o.jsx("div",{className:`absolute top-1 w-6 h-6 bg-white rounded-full transition-transform ${i.showFrame?"translate-x-7":"translate-x-1"}`})})]}),g&&o.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(EE,{className:"w-5 h-5 text-amber-400"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-amber-400",children:"Restart Required"}),o.jsx("p",{className:"text-xs text-amber-300/80",children:"Changes will take effect after restart"})]}),o.jsx("button",{onClick:k,className:"px-4 py-2 bg-amber-600 hover:bg-amber-500 text-white rounded-lg font-bold text-sm transition-colors",children:"Restart Now"})]})}),o.jsx("div",{className:"pt-6 border-t border-slate-700/50 mt-4",children:o.jsx("button",{onClick:_,disabled:f,className:"w-full py-4 bg-indigo-600 hover:bg-indigo-500 text-white rounded-xl font-bold text-lg shadow-lg shadow-indigo-900/50 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Saving...":"Save System Settings"})})]})}),t==="LIBRARY"&&o.jsx(QO,{}),t==="ARCADE"&&o.jsx(YO,{})]})]})}):null};var Dm={exports:{}},Mm,s_;function JO(){if(s_)return Mm;s_=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Mm=n,Mm}var Vm,r_;function ZO(){if(r_)return Vm;r_=1;var n=JO();function e(){}function t(){}return t.resetWarningCache=e,Vm=function(){function s(c,d,f,m,g,y){if(y!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}s.isRequired=s;function i(){return s}var l={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:i,element:s,elementType:s,instanceOf:i,node:s,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},Vm}var i_;function e9(){return i_||(i_=1,Dm.exports=ZO()()),Dm.exports}var t9=e9();const on=nu(t9);var Lm,o_;function n9(){return o_||(o_=1,Lm=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var s,i,l;if(Array.isArray(e)){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!n(e[i],t[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),s=l.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[i]))return!1;for(i=s;i--!==0;){var c=l[i];if(!n(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}),Lm}var s9=n9();const r9=nu(s9);var Kd={exports:{}},Om,a_;function i9(){if(a_)return Om;a_=1;var n;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/return n=function(){var e={},t={};return e.on=function(s,i){var l={name:s,handler:i};return t[s]=t[s]||[],t[s].unshift(l),l},e.off=function(s){var i=t[s.name].indexOf(s);i!==-1&&t[s.name].splice(i,1)},e.trigger=function(s,i){var l=t[s],c;if(l)for(c=l.length;c--;)l[c].handler(i)},e},Om=n,Om}var Qd={exports:{}},Fm,l_;function o9(){if(l_)return Fm;l_=1,Fm=function(i,l,c){var d=document.head||document.getElementsByTagName("head")[0],f=document.createElement("script");typeof l=="function"&&(c=l,l={}),l=l||{},c=c||function(){},f.type=l.type||"text/javascript",f.charset=l.charset||"utf8",f.async="async"in l?!!l.async:!0,f.src=i,l.attrs&&n(f,l.attrs),l.text&&(f.text=""+l.text);var m="onload"in f?e:t;m(f,c),f.onload||e(f,c),d.appendChild(f)};function n(s,i){for(var l in i)s.setAttribute(l,i[l])}function e(s,i){s.onload=function(){this.onerror=this.onload=null,i(null,s)},s.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+this.src),s)}}function t(s,i){s.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,i(null,s))}}return Fm}var c_;function a9(){return c_||(c_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=o9(),s=i(t);function i(l){return l&&l.__esModule?l:{default:l}}e.default=function(l){var c=new Promise(function(d){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){d(window.YT);return}else{var f=window.location.protocol==="http:"?"http:":"https:";(0,s.default)(f+"//www.youtube.com/iframe_api",function(g){g&&l.trigger("error",g)})}var m=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){m&&m(),d(window.YT)}});return c},n.exports=e.default})(Qd,Qd.exports)),Qd.exports}var Yd={exports:{}},Xd={exports:{}},Jd={exports:{}},Um,u_;function l9(){if(u_)return Um;u_=1;var n=1e3,e=n*60,t=e*60,s=t*24,i=s*365.25;Um=function(m,g){g=g||{};var y=typeof m;if(y==="string"&&m.length>0)return l(m);if(y==="number"&&isNaN(m)===!1)return g.long?d(m):c(m);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(m))};function l(m){if(m=String(m),!(m.length>100)){var g=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(m);if(g){var y=parseFloat(g[1]),v=(g[2]||"ms").toLowerCase();switch(v){case"years":case"year":case"yrs":case"yr":case"y":return y*i;case"days":case"day":case"d":return y*s;case"hours":case"hour":case"hrs":case"hr":case"h":return y*t;case"minutes":case"minute":case"mins":case"min":case"m":return y*e;case"seconds":case"second":case"secs":case"sec":case"s":return y*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return y;default:return}}}}function c(m){return m>=s?Math.round(m/s)+"d":m>=t?Math.round(m/t)+"h":m>=e?Math.round(m/e)+"m":m>=n?Math.round(m/n)+"s":m+"ms"}function d(m){return f(m,s,"day")||f(m,t,"hour")||f(m,e,"minute")||f(m,n,"second")||m+" ms"}function f(m,g,y){if(!(m<g))return m<g*1.5?Math.floor(m/g)+" "+y:Math.ceil(m/g)+" "+y+"s"}return Um}var d_;function c9(){return d_||(d_=1,(function(n,e){e=n.exports=i.debug=i.default=i,e.coerce=f,e.disable=c,e.enable=l,e.enabled=d,e.humanize=l9(),e.names=[],e.skips=[],e.formatters={};var t;function s(m){var g=0,y;for(y in m)g=(g<<5)-g+m.charCodeAt(y),g|=0;return e.colors[Math.abs(g)%e.colors.length]}function i(m){function g(){if(g.enabled){var y=g,v=+new Date,_=v-(t||v);y.diff=_,y.prev=t,y.curr=v,t=v;for(var k=new Array(arguments.length),E=0;E<k.length;E++)k[E]=arguments[E];k[0]=e.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");var T=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,function(O,q){if(O==="%%")return O;T++;var $=e.formatters[q];if(typeof $=="function"){var Q=k[T];O=$.call(y,Q),k.splice(T,1),T--}return O}),e.formatArgs.call(y,k);var M=g.log||e.log||console.log.bind(console);M.apply(y,k)}}return g.namespace=m,g.enabled=e.enabled(m),g.useColors=e.useColors(),g.color=s(m),typeof e.init=="function"&&e.init(g),g}function l(m){e.save(m),e.names=[],e.skips=[];for(var g=(typeof m=="string"?m:"").split(/[\s,]+/),y=g.length,v=0;v<y;v++)g[v]&&(m=g[v].replace(/\*/g,".*?"),m[0]==="-"?e.skips.push(new RegExp("^"+m.substr(1)+"$")):e.names.push(new RegExp("^"+m+"$")))}function c(){e.enable("")}function d(m){var g,y;for(g=0,y=e.skips.length;g<y;g++)if(e.skips[g].test(m))return!1;for(g=0,y=e.names.length;g<y;g++)if(e.names[g].test(m))return!0;return!1}function f(m){return m instanceof Error?m.stack||m.message:m}})(Jd,Jd.exports)),Jd.exports}var h_;function u9(){return h_||(h_=1,(function(n,e){var t={};e=n.exports=c9(),e.log=l,e.formatArgs=i,e.save=c,e.load=d,e.useColors=s,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:f(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function s(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(m){try{return JSON.stringify(m)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}};function i(m){var g=this.useColors;if(m[0]=(g?"%c":"")+this.namespace+(g?" %c":" ")+m[0]+(g?"%c ":" ")+"+"+e.humanize(this.diff),!!g){var y="color: "+this.color;m.splice(1,0,y,"color: inherit");var v=0,_=0;m[0].replace(/%[a-zA-Z%]/g,function(k){k!=="%%"&&(v++,k==="%c"&&(_=v))}),m.splice(_,0,y)}}function l(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function c(m){try{m==null?e.storage.removeItem("debug"):e.storage.debug=m}catch{}}function d(){var m;try{m=e.storage.debug}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=t.DEBUG),m}e.enable(d());function f(){try{return window.localStorage}catch{}}})(Xd,Xd.exports)),Xd.exports}var Zd={exports:{}},f_;function d9(){return f_||(f_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],n.exports=e.default})(Zd,Zd.exports)),Zd.exports}var eh={exports:{}},p_;function h9(){return p_||(p_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],n.exports=e.default})(eh,eh.exports)),eh.exports}var th={exports:{}},nh={exports:{}},m_;function f9(){return m_||(m_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},n.exports=e.default})(nh,nh.exports)),nh.exports}var g_;function p9(){return g_||(g_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=f9(),s=i(t);function i(l){return l&&l.__esModule?l:{default:l}}e.default={pauseVideo:{acceptableStates:[s.default.ENDED,s.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[s.default.ENDED,s.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[s.default.ENDED,s.default.PLAYING,s.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},n.exports=e.default})(th,th.exports)),th.exports}var x_;function m9(){return x_||(x_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=u9(),s=g(t),i=d9(),l=g(i),c=h9(),d=g(c),f=p9(),m=g(f);function g(_){return _&&_.__esModule?_:{default:_}}var y=(0,s.default)("youtube-player"),v={};v.proxyEvents=function(_){var k={},E=function(P){var j="on"+P.slice(0,1).toUpperCase()+P.slice(1);k[j]=function(V){y('event "%s"',j,V),_.trigger(P,V)}},T=!0,M=!1,O=void 0;try{for(var q=d.default[Symbol.iterator](),$;!(T=($=q.next()).done);T=!0){var Q=$.value;E(Q)}}catch(K){M=!0,O=K}finally{try{!T&&q.return&&q.return()}finally{if(M)throw O}}return k},v.promisifyPlayer=function(_){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,E={},T=function(j){k&&m.default[j]?E[j]=function(){for(var V=arguments.length,I=Array(V),L=0;L<V;L++)I[L]=arguments[L];return _.then(function(D){var A=m.default[j],he=D.getPlayerState(),ie=D[j].apply(D,I);return A.stateChangeRequired||Array.isArray(A.acceptableStates)&&A.acceptableStates.indexOf(he)===-1?new Promise(function(le){var G=function F(){var U=D.getPlayerState(),X=void 0;typeof A.timeout=="number"&&(X=setTimeout(function(){D.removeEventListener("onStateChange",F),le()},A.timeout)),Array.isArray(A.acceptableStates)&&A.acceptableStates.indexOf(U)!==-1&&(D.removeEventListener("onStateChange",F),clearTimeout(X),le())};D.addEventListener("onStateChange",G)}).then(function(){return ie}):ie})}:E[j]=function(){for(var V=arguments.length,I=Array(V),L=0;L<V;L++)I[L]=arguments[L];return _.then(function(D){return D[j].apply(D,I)})}},M=!0,O=!1,q=void 0;try{for(var $=l.default[Symbol.iterator](),Q;!(M=(Q=$.next()).done);M=!0){var K=Q.value;T(K)}}catch(P){O=!0,q=P}finally{try{!M&&$.return&&$.return()}finally{if(O)throw q}}return E},e.default=v,n.exports=e.default})(Yd,Yd.exports)),Yd.exports}var y_;function g9(){return y_||(y_=1,(function(n,e){Object.defineProperty(e,"__esModule",{value:!0});var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},s=i9(),i=m(s),l=a9(),c=m(l),d=m9(),f=m(d);function m(y){return y&&y.__esModule?y:{default:y}}var g=void 0;e.default=function(y){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,k=(0,i.default)();if(g||(g=(0,c.default)(k)),v.events)throw new Error("Event handlers cannot be overwritten.");if(typeof y=="string"&&!document.getElementById(y))throw new Error('Element "'+y+'" does not exist.');v.events=f.default.proxyEvents(k);var E=new Promise(function(M){if((typeof y>"u"?"undefined":t(y))==="object"&&y.playVideo instanceof Function){var O=y;M(O)}else g.then(function(q){var $=new q.Player(y,v);return k.on("ready",function(){M($)}),null})}),T=f.default.promisifyPlayer(E,_);return T.on=k.on,T.off=k.off,T},n.exports=e.default})(Kd,Kd.exports)),Kd.exports}var x9=g9();const y9=nu(x9);var v9=Object.defineProperty,b9=Object.defineProperties,w9=Object.getOwnPropertyDescriptors,v_=Object.getOwnPropertySymbols,_9=Object.prototype.hasOwnProperty,N9=Object.prototype.propertyIsEnumerable,b_=(n,e,t)=>e in n?v9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Fg=(n,e)=>{for(var t in e||(e={}))_9.call(e,t)&&b_(n,t,e[t]);if(v_)for(var t of v_(e))N9.call(e,t)&&b_(n,t,e[t]);return n},Ug=(n,e)=>b9(n,w9(e)),E9=(n,e,t)=>new Promise((s,i)=>{var l=f=>{try{d(t.next(f))}catch(m){i(m)}},c=f=>{try{d(t.throw(f))}catch(m){i(m)}},d=f=>f.done?s(f.value):Promise.resolve(f.value).then(l,c);d((t=t.apply(n,e)).next())});function k9(n,e){var t,s;if(n.videoId!==e.videoId)return!0;const i=((t=n.opts)==null?void 0:t.playerVars)||{},l=((s=e.opts)==null?void 0:s.playerVars)||{};return i.start!==l.start||i.end!==l.end}function w_(n={}){return Ug(Fg({},n),{height:0,width:0,playerVars:Ug(Fg({},n.playerVars),{autoplay:0,start:0,end:0})})}function S9(n,e){return n.videoId!==e.videoId||!r9(w_(n.opts),w_(e.opts))}function T9(n,e){var t,s,i,l;return n.id!==e.id||n.className!==e.className||((t=n.opts)==null?void 0:t.width)!==((s=e.opts)==null?void 0:s.width)||((i=n.opts)==null?void 0:i.height)!==((l=e.opts)==null?void 0:l.height)||n.iframeClassName!==e.iframeClassName||n.title!==e.title}var j9={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},C9={videoId:on.string,id:on.string,className:on.string,iframeClassName:on.string,style:on.object,title:on.string,loading:on.oneOf(["lazy","eager"]),opts:on.objectOf(on.any),onReady:on.func,onError:on.func,onPlay:on.func,onPause:on.func,onEnd:on.func,onStateChange:on.func,onPlaybackRateChange:on.func,onPlaybackQualityChange:on.func},bh=class extends ds.Component{constructor(n){super(n),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var t,s;return(s=(t=this.props).onReady)==null?void 0:s.call(t,e)},this.onPlayerError=e=>{var t,s;return(s=(t=this.props).onError)==null?void 0:s.call(t,e)},this.onPlayerStateChange=e=>{var t,s,i,l,c,d,f,m;switch((s=(t=this.props).onStateChange)==null||s.call(t,e),e.data){case bh.PlayerState.ENDED:(l=(i=this.props).onEnd)==null||l.call(i,e);break;case bh.PlayerState.PLAYING:(d=(c=this.props).onPlay)==null||d.call(c,e);break;case bh.PlayerState.PAUSED:(m=(f=this.props).onPause)==null||m.call(f,e);break}},this.onPlayerPlaybackRateChange=e=>{var t,s;return(s=(t=this.props).onPlaybackRateChange)==null?void 0:s.call(t,e)},this.onPlayerPlaybackQualityChange=e=>{var t,s;return(s=(t=this.props).onPlaybackQualityChange)==null?void 0:s.call(t,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const e=Ug(Fg({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=y9(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(t=>{this.props.title&&t.setAttribute("title",this.props.title),this.props.loading&&t.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;(e=this.internalPlayer)==null||e.getIframe().then(t=>{this.props.id?t.setAttribute("id",this.props.id):t.removeAttribute("id"),this.props.iframeClassName?t.setAttribute("class",this.props.iframeClassName):t.removeAttribute("class"),this.props.opts&&this.props.opts.width?t.setAttribute("width",this.props.opts.width.toString()):t.removeAttribute("width"),this.props.opts&&this.props.opts.height?t.setAttribute("height",this.props.opts.height.toString()):t.removeAttribute("height"),this.props.title?t.setAttribute("title",this.props.title):t.setAttribute("title","YouTube video player"),this.props.loading?t.setAttribute("loading",this.props.loading):t.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,t,s,i;if(typeof this.props.videoId>"u"||this.props.videoId===null){(e=this.internalPlayer)==null||e.stopVideo();return}let l=!1;const c={videoId:this.props.videoId};if((t=this.props.opts)!=null&&t.playerVars&&(l=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(c.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(c.endSeconds=this.props.opts.playerVars.end)),l){(s=this.internalPlayer)==null||s.loadVideoById(c);return}(i=this.internalPlayer)==null||i.cueVideoById(c)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(n){return E9(this,null,function*(){T9(n,this.props)&&this.updatePlayer(),S9(n,this.props)&&(yield this.resetPlayer()),k9(n,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return ds.createElement("div",{className:this.props.className,style:this.props.style},ds.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},If=bh;If.propTypes=C9;If.defaultProps=j9;If.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var I9=If;const A9=({video:n,onClose:e,onComplete:t,isCompleted:s=!1})=>{const[i,l]=C.useState("VIDEO"),[c,d]=C.useState(n.questions||[]),[f,m]=C.useState(!1),[g,y]=C.useState(null),[v,_]=C.useState(0),[k,E]=C.useState(0),[T,M]=C.useState(s),[O,q]=C.useState(!0),[$,Q]=C.useState(100),[K,P]=C.useState(!1),[j,V]=C.useState(0),[I,L]=C.useState(0),[D,A]=C.useState(!1),[he,ie]=C.useState(null),[le,G]=C.useState(!1),F=async()=>{if(!(c.length>0)){m(!0);try{if(!J)return;const re=Re(J,"arcade_quizzes",n.id),ae=await As(re);if(ae.exists()&&ae.data().questions)d(ae.data().questions);else{console.log("Generating quiz for:",n.title);const xe=await hS(n.title,n.description||"Educational video");xe&&xe.length>0?(d(xe),await Qr(re,{videoId:n.id,questions:xe,generatedAt:new Date})):console.warn("Quiz generation returned empty questions")}}catch(re){console.error("Quiz load error",re)}finally{m(!1)}}};C.useEffect(()=>{F()},[n.id]),C.useEffect(()=>{if(!g)return;const re=setInterval(async()=>{const ae=await g.getCurrentTime();E(ae),!T&&v>0&&ae/v>.9&&M(!0)},1e3);return()=>clearInterval(re)},[g,v,T]);const U=re=>{if(le)return;ie(re),G(!0),re===c[j].correct&&L(xe=>xe+1),setTimeout(()=>{j<c.length-1?(V(xe=>xe+1),ie(null),G(!1)):A(!0)},1500)},z=(re=>{if(!re)return!1;if(re.length===11)return re;const ae=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/,xe=re.match(ae);return xe&&xe[7].length===11?xe[7]:!1})(n.videoUrl),Y=c.length>0&&I===c.length,Ne=v>0?k/v*100:0;return o.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-200 h-full flex flex-col",children:[o.jsxs("button",{onClick:e,className:"mb-4 text-slate-400 hover:text-white flex items-center gap-2 transition-colors w-fit",children:[o.jsx(lt,{size:20})," Cancel Learning"]}),o.jsx("div",{className:"bg-slate-800 rounded-3xl overflow-hidden border border-slate-700 shadow-2xl relative flex-1 flex flex-col",children:o.jsx(Ek,{mode:"wait",children:i==="VIDEO"?o.jsxs(ar.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,x:-50},className:"flex flex-col h-full",children:[o.jsxs("div",{className:"flex-1 bg-black relative group flex items-center justify-center overflow-hidden",children:[z?o.jsx("div",{className:"w-full h-full relative pointer-events-none",children:o.jsx(I9,{videoId:z,className:"w-full h-full absolute inset-0",iframeClassName:"w-full h-full absolute inset-0",opts:{height:"100%",width:"100%",playerVars:{autoplay:1,controls:0,disablekb:1,fs:0,modestbranding:1,rel:0,iv_load_policy:3,enablejsapi:1,origin:window.location.origin}},onReady:re=>{y(re.target),_(re.target.getDuration()),re.target.playVideo()},onStateChange:re=>{q(re.data===1)},onError:re=>console.error("YouTube Player Error:",re)})}):o.jsx("div",{className:"text-white",children:"Invalid Video URL"}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/90 via-black/50 to-transparent transition-opacity duration-300 opacity-0 group-hover:opacity-100",children:[o.jsxs("div",{className:"group/progress relative h-1.5 bg-white/20 rounded-full mb-4 cursor-pointer",children:[o.jsx("div",{className:"absolute top-0 left-0 h-full bg-indigo-500 rounded-full",style:{width:`${k/v*100}%`}}),o.jsx("input",{type:"range",min:0,max:v,value:k,onChange:re=>{const ae=parseFloat(re.target.value);E(ae),g==null||g.seekTo(ae,!0)},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>{O?g==null||g.pauseVideo():g==null||g.playVideo()},className:"text-white hover:text-indigo-400 transition-colors",children:O?o.jsx(lD,{size:24,fill:"currentColor"}):o.jsx(Ya,{size:24,fill:"currentColor"})}),o.jsx("button",{onClick:()=>{const re=!K;P(re),re?g==null||g.mute():g==null||g.unMute()},className:"text-white hover:text-indigo-400 transition-colors",children:K?o.jsx(QD,{size:20}):o.jsx(HD,{size:20})}),o.jsxs("span",{className:"text-xs font-medium text-slate-300",children:[Math.floor(k/60),":",Math.floor(k%60).toString().padStart(2,"0")," /",Math.floor(v/60),":",Math.floor(v%60).toString().padStart(2,"0")]})]}),o.jsx("div",{className:"flex items-center gap-4",children:o.jsx("button",{onClick:()=>g==null?void 0:g.seekTo(0,!0),className:"text-white hover:text-indigo-400 transition-colors",title:"Replay",children:o.jsx(gg,{size:20})})})]})]})]}),o.jsx("div",{className:"p-8 bg-slate-800 border-t border-slate-700",children:o.jsxs("div",{className:"flex items-center justify-between gap-8",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-2xl font-black text-white line-clamp-1",children:n.title}),o.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[o.jsx("div",{className:"h-2 w-48 bg-slate-700 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full transition-all duration-1000 ${T?"bg-green-500":"bg-indigo-500"}`,style:{width:`${Math.min(Ne,100)}%`}})}),o.jsx("span",{className:"text-sm font-medium text-slate-400",children:T?"Video Completed":"Keep Watching..."})]})]}),o.jsx("button",{disabled:!T||f,onClick:()=>{c.length===0&&!f?F():l("QUIZ")},className:`px-8 py-4 rounded-2xl font-black flex items-center gap-3 transition-all shadow-lg ${T?"bg-gradient-to-r from-blue-600 to-indigo-600 hover:scale-105 text-white cursor-pointer shadow-blue-500/20":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:f?o.jsxs(o.Fragment,{children:["Generating Quiz ",o.jsx(z0,{className:"animate-spin",size:20})]}):c.length===0?o.jsxs(o.Fragment,{children:["Retry Generating Quiz ",o.jsx(gg,{size:20})]}):s?o.jsxs(o.Fragment,{children:["Practice Quiz ",o.jsx(ir,{size:20})]}):o.jsxs(o.Fragment,{children:["Take Quiz ",o.jsx(ir,{size:20})]})})]})})]},"video-step"):o.jsx(ar.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},className:"flex-1 flex flex-col h-full bg-slate-800",children:!D&&c.length>0?o.jsxs("div",{className:"flex-1 flex flex-col p-12 max-w-4xl mx-auto w-full",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("div",{className:"flex justify-between text-slate-400 text-xs font-bold uppercase mb-3 tracking-widest",children:[o.jsxs("span",{children:["Question ",j+1," / ",c.length]}),o.jsx("span",{children:"Progress"})]}),o.jsx("div",{className:"h-2 bg-slate-700/50 rounded-full overflow-hidden",children:o.jsx(ar.div,{className:"h-full bg-gradient-to-r from-blue-500 to-cyan-400",initial:{width:0},animate:{width:`${j/c.length*100}%`}})})]}),o.jsx("h3",{className:"text-3xl font-bold text-white mb-8 leading-snug",children:c[j].q}),o.jsx("div",{className:"grid gap-4",children:c[j].options.map((re,ae)=>{const xe=he===ae,Ce=ae===c[j].correct;let De="bg-slate-700/50 border-slate-600 text-slate-300 hover:bg-white/5";return le&&(xe?De=Ce?"bg-green-500/20 border-green-500 text-green-400":"bg-red-500/20 border-red-500 text-red-400":Ce&&(De="bg-green-500/10 border-green-500/50 text-green-400/50")),o.jsxs(ar.button,{onClick:()=>U(ae),disabled:le,className:`w-full p-6 text-left border rounded-2xl transition-all font-bold text-lg flex justify-between items-center group ${De}`,whileHover:le?{}:{scale:1.01,x:5},whileTap:le?{}:{scale:.99},children:[o.jsx("span",{children:re}),le&&xe&&(Ce?o.jsx(Ln,{className:"text-green-500"}):o.jsx(lt,{className:"text-red-500"}))]},ae)})})]}):o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center bg-gradient-to-b from-slate-800 to-slate-900",children:[o.jsx(ar.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",bounce:.5},className:`w-32 h-32 rounded-full flex items-center justify-center mb-6 shadow-2xl ${Y?"bg-gradient-to-br from-green-400 to-emerald-600":"bg-gradient-to-br from-red-400 to-rose-600"}`,children:Y?o.jsx($0,{size:64,className:"text-white drop-shadow-lg"}):o.jsx(lt,{size:64,className:"text-white drop-shadow-lg"})}),o.jsx("h3",{className:"text-4xl font-black text-white mb-2",children:Y?"Training Complete!":"Mission Failed"}),o.jsxs("p",{className:"text-slate-400 mb-8 text-lg",children:["You got ",I," out of ",c.length," correct."]}),Y?s?o.jsx("div",{className:"px-8 py-4 bg-slate-700/50 rounded-xl text-slate-400 font-bold border border-slate-600",children:"Good practice! You already earned XP for this."}):o.jsxs(ar.button,{onClick:()=>t(n.xpReward),className:"px-12 py-5 bg-gradient-to-r from-yellow-400 to-amber-500 hover:from-yellow-300 hover:to-amber-400 text-black rounded-2xl font-black text-xl shadow-[0_0_40px_rgba(251,191,36,0.4)] flex items-center gap-3 mx-auto",whileHover:{scale:1.05},whileTap:{scale:.95},animate:{y:[0,-5,0]},children:[o.jsx(Yc,{className:"fill-black"}),"CLAIM ",n.xpReward," CREDITS"]}):o.jsx("div",{className:"flex gap-4",children:o.jsx("button",{onClick:()=>{L(0),V(0),A(!1),l("VIDEO")},className:"px-8 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-xl font-bold transition-colors",children:"Review Video & Try Again"})})]})},"quiz-step")})})]})},P9=({game:n,userCredits:e,onClose:t,onPlay:s})=>{const[i,l]=C.useState(5),c=i*n.costPerMinute,d=e>=c;return o.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in zoom-in-95",children:o.jsxs("div",{className:"w-full max-w-md bg-slate-900 border border-purple-500 rounded-3xl overflow-hidden shadow-[0_0_50px_rgba(168,85,247,0.3)]",children:[o.jsxs("div",{className:"relative h-48",children:[o.jsx("img",{src:n.thumbnail,alt:n.title,className:"w-full h-full object-cover"}),o.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 bg-black/50 hover:bg-black/80 rounded-full text-white backdrop-blur transition-colors",children:o.jsx(lt,{size:20})}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-slate-900 to-transparent",children:o.jsx("h2",{className:"text-3xl font-black text-white",children:n.title})})]}),o.jsxs("div",{className:"p-8",children:[o.jsxs("div",{className:"mb-8",children:[o.jsx("label",{className:"block text-slate-400 text-xs font-bold uppercase tracking-wider mb-4",children:"Select Duration"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:[5,10,15].map(f=>{const m=f*n.costPerMinute,g=e>=m;return o.jsxs("button",{disabled:!g,onClick:()=>l(f),className:`p-3 rounded-xl border-2 flex flex-col items-center gap-1 transition-all ${i===f?"border-purple-500 bg-purple-500/20 text-white":g?"border-slate-700 bg-slate-800 text-slate-400 hover:border-purple-500/50":"border-slate-800 bg-slate-900/50 text-slate-700 opacity-50 cursor-not-allowed"}`,children:[o.jsxs("span",{className:"text-lg font-black",children:[f,"m"]}),o.jsxs("span",{className:"text-xs font-bold",children:[m," Credits"]})]},f)})})]}),o.jsxs("div",{className:"bg-slate-800 p-4 rounded-xl border border-slate-700 mb-8 flex justify-between items-center",children:[o.jsx("span",{className:"text-slate-400 font-medium",children:"Total Cost"}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:`text-2xl font-black ${d?"text-yellow-400":"text-red-500"}`,children:[c," ",o.jsx("span",{className:"text-sm text-slate-500",children:"Credits"})]}),!d&&o.jsxs("div",{className:"text-xs text-red-400 flex items-center gap-1 justify-end mt-1",children:[o.jsx(FD,{size:10})," Need ",c-e," more"]})]})]}),o.jsx("button",{onClick:()=>s(n,i),disabled:!d,className:`w-full py-4 rounded-xl font-black text-lg uppercase tracking-wider flex items-center justify-center gap-2 transition-all shadow-lg ${d?"bg-purple-600 hover:bg-purple-500 text-white shadow-purple-900/40 hover:scale-[1.02]":"bg-slate-800 text-slate-500 cursor-not-allowed"}`,children:d?o.jsxs(o.Fragment,{children:[o.jsx(Ya,{size:20,fill:"currentColor"})," Start Session"]}):"Insufficient Credits"})]})]})})},R9=({platform:n,isOpen:e,onClose:t})=>{const[s,i]=ds.useState(!1);return!e||!n?null:o.jsxs("div",{className:"fixed inset-0 z-[200] bg-black/95 backdrop-blur-sm flex items-center justify-center p-4 animate-in fade-in duration-200",children:[o.jsxs("div",{className:"absolute top-0 left-0 right-0 h-16 bg-gradient-to-b from-black/80 to-transparent z-10 flex items-center justify-between px-6",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[n.logo&&o.jsx("img",{src:n.logo,alt:n.name,className:"h-8 w-8 rounded-lg"}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-white font-bold text-lg",children:n.name}),n.description&&o.jsx("p",{className:"text-slate-400 text-xs",children:n.description})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("button",{onClick:()=>i(!s),className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:s?"Exit Fullscreen":"Fullscreen",children:s?o.jsx(tD,{size:20}):o.jsx(wE,{size:20})}),o.jsx("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-white/10 rounded-lg transition-colors text-white",title:"Open in New Tab",children:o.jsx(or,{size:20})}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-red-500/20 rounded-lg transition-colors text-white hover:text-red-400",children:o.jsx(lt,{size:24})})]})]}),o.jsx("div",{className:`relative bg-white rounded-2xl overflow-hidden shadow-2xl transition-all duration-300 ${s?"w-full h-full":"w-[95%] h-[90%] max-w-7xl"}`,children:window.electronAPI?o.jsx("webview",{src:n.url,className:"w-full h-full",allowpopups:!0}):o.jsx("iframe",{src:n.url,className:"w-full h-full border-0",title:n.name,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",sandbox:"allow-same-origin allow-scripts allow-popups allow-forms"})}),o.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:o.jsx("div",{className:"w-16 h-16 border-4 border-indigo-500/30 border-t-indigo-500 rounded-full animate-spin"})})]})},D9=({isOpen:n,onClose:e})=>{const[t,s]=C.useState(!1),[i,l]=C.useState({name:"",url:"",description:"",category:"Learning",logo:"",color:"#6366f1",featured:!1});if(!n)return null;const c=async d=>{d.preventDefault(),s(!0);try{if(!J)throw new Error("Database not initialized");await cs(je(J,"arcade_platforms"),{...i,status:"active",createdAt:lr()}),l({name:"",url:"",description:"",category:"Learning",logo:"",color:"#6366f1",featured:!1}),e(),alert("Platform added successfully!")}catch(f){console.error("Error adding platform:",f),alert("Failed to add platform. Please try again.")}finally{s(!1)}};return o.jsx("div",{className:"fixed inset-0 z-[1100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:o.jsxs("div",{className:"w-full max-w-lg bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl overflow-hidden",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10 bg-slate-950",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Add New Platform"}),o.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:o.jsx(lt,{size:24})})]}),o.jsxs("form",{onSubmit:c,className:"p-6 space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Platform Name"}),o.jsx("input",{required:!0,type:"text",value:i.name,onChange:d=>l({...i,name:d.target.value}),placeholder:"e.g. Khan Academy",className:"w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-2 text-white focus:border-indigo-500 outline-none"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[o.jsx(bE,{size:14})," URL"]}),o.jsx("input",{required:!0,type:"url",value:i.url,onChange:d=>l({...i,url:d.target.value}),placeholder:"https://...",className:"w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-2 text-white focus:border-indigo-500 outline-none"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[o.jsx(ID,{size:14})," Category"]}),o.jsxs("select",{value:i.category,onChange:d=>l({...i,category:d.target.value}),className:"w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-2 text-white focus:border-indigo-500 outline-none",children:[o.jsx("option",{children:"Learning"}),o.jsx("option",{children:"Coding"}),o.jsx("option",{children:"Science"}),o.jsx("option",{children:"Math"}),o.jsx("option",{children:"Creativity"}),o.jsx("option",{children:"Other"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Description"}),o.jsx("textarea",{required:!0,value:i.description,onChange:d=>l({...i,description:d.target.value}),placeholder:"Short description...",rows:3,className:"w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-2 text-white focus:border-indigo-500 outline-none resize-none"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[o.jsx(BD,{size:14})," Logo URL"]}),o.jsx("input",{type:"url",value:i.logo,onChange:d=>l({...i,logo:d.target.value}),placeholder:"https://... (Optional)",className:"w-full bg-slate-950 border border-slate-800 rounded-lg px-4 py-2 text-white focus:border-indigo-500 outline-none"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"text-sm font-medium text-slate-300 flex items-center gap-2",children:[o.jsx(_E,{size:14})," Color"]}),o.jsx("input",{type:"color",value:i.color,onChange:d=>l({...i,color:d.target.value}),className:"w-full h-[42px] bg-slate-950 border border-slate-800 rounded-lg p-1 cursor-pointer"})]})]}),o.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[o.jsx("input",{type:"checkbox",id:"featured",checked:i.featured,onChange:d=>l({...i,featured:d.target.checked}),className:"w-4 h-4 rounded border-slate-700 bg-slate-900 text-indigo-600 focus:ring-indigo-500 max-w-[1.2rem]"}),o.jsx("label",{htmlFor:"featured",className:"text-sm text-slate-300 select-none",children:"Mark as Featured Platform"})]}),o.jsxs("div",{className:"pt-4 flex justify-end gap-3",children:[o.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-slate-400 hover:text-white font-medium transition-colors",children:"Cancel"}),o.jsx("button",{type:"submit",disabled:t,className:"px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-bold flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Saving...":o.jsxs(o.Fragment,{children:[o.jsx(vu,{size:18}),"Add Platform"]})})]})]})]})})},M9=({isOpen:n,onClose:e})=>{const{user:t,userProfile:s,updateCredits:i}=ms(),{startSession:l}=L0(),[c,d]=C.useState("EARN"),[f,m]=C.useState(""),g=(s==null?void 0:s.arcadeCredits)||0,[y,v]=C.useState([]),[_,k]=C.useState([]),[E,T]=C.useState([]),[M,O]=C.useState([]),[q,$]=C.useState(!0),[Q,K]=C.useState(null),[P,j]=C.useState(null),[V,I]=C.useState(null),[L,D]=C.useState(!1),A=Array.from(new Set(y.map(F=>F.category||"General")));C.useEffect(()=>{if(!n)return;if($(!0),!J){$(!1);return}const F=cn(je(J,"arcade_content"),z=>{v(z.docs.map(Y=>({id:Y.id,...Y.data()})))}),U=cn(je(J,"arcade_games"),z=>{k(z.docs.map(Y=>({id:Y.id,...Y.data()}))),$(!1)});return(async()=>{if(t!=null&&t.uid){if(!J)return;const z=je(J,`users/${t.uid}/arcade_progress`),Y=await st(z);O(Y.docs.map(Ne=>Ne.id))}})(),()=>{F(),U()}},[n,t==null?void 0:t.uid]),C.useEffect(()=>{if(!n||!J)return;const F=cn(je(J,"arcade_platforms"),U=>{T(U.docs.map(X=>({id:X.id,...X.data()})).filter(X=>X.status==="active"))});return()=>F()},[n]);const he=async F=>{if(!(!Q||!(t!=null&&t.uid))&&J){O(U=>[...U,Q.id]);try{await Qr(Re(J,`users/${t.uid}/arcade_progress`,Q.id),{completedAt:lr(),xpEarned:F,contentId:Q.id}),await i(F),K(null),alert(` You earned ${F} Credits!`)}catch(U){console.error("Error saving progress",U)}}},ie=async(F,U)=>{const X=F.costPerMinute*U;if(g<X){alert("Not enough credits!");return}await i(-X),e(),l(F.url,U,F.title)},le=y.filter(F=>F.title.toLowerCase().includes(f.toLowerCase())||F.category.toLowerCase().includes(f.toLowerCase())),G=y.length>0?y[0]:null;return n?o.jsx("div",{className:"fixed inset-0 z-[1000] flex items-center justify-center p-4 bg-slate-900/95 backdrop-blur-md animate-in fade-in",children:o.jsxs("div",{className:"w-full max-w-7xl h-[90vh] bg-slate-950 border border-slate-800 rounded-[32px] overflow-hidden flex flex-col shadow-2xl",children:[o.jsxs("div",{className:"h-20 bg-slate-950/50 flex items-center justify-between px-8 border-b border-white/5 z-10 backdrop-blur-sm sticky top-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"p-2.5 bg-indigo-600 rounded-xl shadow-lg shadow-indigo-500/20",children:o.jsx(al,{className:"text-white",size:24})}),o.jsx("h2",{className:"text-2xl font-black text-white tracking-tight",children:"ARCADE"})]}),o.jsxs("div",{className:"flex-1 max-w-md mx-8 relative group",children:[o.jsx(Qc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 group-hover:text-indigo-400 transition-colors",size:20}),o.jsx("input",{value:f,onChange:F=>m(F.target.value),placeholder:"Search games, videos, topics...",className:"w-full bg-slate-900/50 border border-slate-800 rounded-full py-3 pl-12 pr-6 text-white placeholder-slate-500 focus:bg-slate-900 focus:border-indigo-500/50 outline-none transition-all"})]}),o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("div",{className:"flex items-center gap-3 bg-slate-900/50 rounded-full pl-2 pr-5 py-1.5 border border-yellow-500/20",children:[o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-yellow-400 to-amber-600 flex items-center justify-center shadow-lg",children:o.jsx($0,{size:16,className:"text-white fill-white/20"})}),o.jsxs("div",{className:"flex flex-col leading-none",children:[o.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-wider",children:"Credits"}),o.jsx("span",{className:"text-lg font-black text-white",children:g})]})]}),o.jsx("button",{onClick:e,className:"p-3 bg-slate-900 hover:bg-slate-800 rounded-full text-slate-400 hover:text-white transition-all",children:o.jsx(lt,{size:24})})]})]}),o.jsxs("div",{className:"flex bg-slate-950 border-b border-white/5 z-10 sticky top-20",children:[o.jsxs("button",{onClick:()=>d("EARN"),className:`flex-1 py-4 font-bold text-sm uppercase tracking-widest flex justify-center gap-3 transition-colors ${c==="EARN"?"text-indigo-400 bg-indigo-500/5 border-b-2 border-indigo-500":"text-slate-500 hover:text-white hover:bg-slate-900"}`,children:[o.jsx(Ya,{size:18})," Watch & Earn"]}),o.jsxs("button",{onClick:()=>d("PLAY"),className:`flex-1 py-4 font-bold text-sm uppercase tracking-widest flex justify-center gap-3 transition-colors ${c==="PLAY"?"text-purple-400 bg-purple-500/5 border-b-2 border-purple-500":"text-slate-500 hover:text-white hover:bg-slate-900"}`,children:[o.jsx(al,{size:18})," Play Games"]}),o.jsxs("button",{onClick:()=>d("LEARN"),className:`flex-1 py-4 font-bold text-sm uppercase tracking-widest flex justify-center gap-3 transition-colors ${c==="LEARN"?"text-emerald-400 bg-emerald-500/5 border-b-2 border-emerald-500":"text-slate-500 hover:text-white hover:bg-slate-900"}`,children:[o.jsx(q5,{size:18})," Learn More"]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto bg-[#0a0a0a] relative scrollbar-thin scrollbar-thumb-slate-800 scrollbar-track-transparent",children:[Q&&o.jsx("div",{className:"absolute inset-0 z-50 bg-black/90 backdrop-blur-xl p-8 flex items-center justify-center",children:o.jsx("div",{className:"w-full max-w-5xl h-[85vh]",children:o.jsx(A9,{video:Q,onClose:()=>K(null),onComplete:he,isCompleted:M.includes(Q.id)})})}),P&&o.jsx(P9,{game:P,userCredits:g,onClose:()=>j(null),onPlay:ie}),o.jsx(R9,{platform:V,isOpen:!!V,onClose:()=>I(null)}),o.jsx(D9,{isOpen:L,onClose:()=>D(!1)}),c==="EARN"?o.jsxs("div",{className:"pb-20",children:[!f&&G&&o.jsxs("div",{className:"relative h-[400px] w-full group overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-[#0a0a0a]/50 to-transparent z-10"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#0a0a0a] via-[#0a0a0a]/80 to-transparent z-10"}),o.jsx("img",{src:`https://img.youtube.com/vi/${G.videoUrl.split("/").pop()}/maxresdefault.jpg`,className:"w-full h-full object-cover opacity-60 group-hover:scale-105 transition-transform duration-[20s]"}),o.jsxs("div",{className:"absolute bottom-0 left-0 p-12 z-20 max-w-2xl",children:[o.jsx("span",{className:"px-3 py-1 bg-indigo-600 text-white text-xs font-bold uppercase tracking-wider rounded-lg mb-4 inline-block shadow-lg shadow-indigo-500/30",children:"Featured"}),o.jsx("h1",{className:"text-5xl font-black text-white mb-4 leading-tight",children:G.title}),o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsxs("div",{className:"flex items-center gap-2 text-green-400 font-bold bg-green-950/30 border border-green-500/20 px-3 py-1.5 rounded-lg",children:[o.jsx(Yc,{size:16,className:"fill-green-400"})," +",G.xpReward," XP"]}),o.jsxs("span",{className:"text-slate-400 text-sm font-medium",children:[" ",G.category]})]}),o.jsxs("button",{onClick:()=>K(G),className:"px-8 py-4 bg-white text-black rounded-xl font-bold flex items-center gap-3 hover:scale-105 transition-transform shadow-[0_0_40px_rgba(255,255,255,0.2)]",children:[o.jsx(Ya,{className:"fill-black"})," Watch Now"]})]})]}),o.jsx("div",{className:"px-12 space-y-12 mt-8",children:A.map(F=>{const U=le.filter(X=>X.category===F);return U.length===0?null:o.jsxs("div",{children:[o.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-3",children:[o.jsx(MD,{className:"text-indigo-500",size:20}),F,o.jsx("span",{className:"text-slate-600 text-sm font-medium bg-slate-900 px-2 py-0.5 rounded-full border border-slate-800",children:U.length})]}),o.jsx("div",{className:"flex gap-6 overflow-x-auto pb-8 snap-x no-scrollbar mask-linear",children:U.map(X=>{const z=M.includes(X.id);return o.jsxs("div",{onClick:()=>K(X),className:`flex-none w-[300px] group cursor-pointer snap-start relative rounded-2xl overflow-hidden border transition-all hover:scale-105 hover:z-20 hover:shadow-2xl hover:shadow-indigo-500/20 ${z?"border-green-500/30 opacity-70 hover:opacity-100":"border-slate-800 hover:border-indigo-500"}`,children:[o.jsxs("div",{className:"aspect-video relative",children:[o.jsx("img",{src:X.thumbnail,className:"w-full h-full object-cover"}),o.jsx("div",{className:`absolute inset-0 transition-opacity flex items-center justify-center ${z?"bg-black/60 opacity-100":"bg-black/20 opacity-0 group-hover:opacity-100"}`,children:z?o.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:o.jsx(Ln,{className:"text-white",size:24})}):o.jsx("div",{className:"w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-lg",children:o.jsx(Ya,{className:"text-black fill-black ml-1",size:24})})}),!z&&o.jsxs("div",{className:"absolute top-3 right-3 bg-indigo-600 text-white text-[10px] font-bold px-2 py-1 rounded-md shadow-lg",children:["+",X.xpReward," XP"]})]}),o.jsxs("div",{className:"p-4 bg-slate-900 h-[100px]",children:[o.jsx("h4",{className:"font-bold text-white text-sm line-clamp-2 mb-2 group-hover:text-indigo-400 transition-colors",children:X.title}),o.jsx("div",{className:"flex items-center gap-2",children:z?o.jsxs("span",{className:"text-xs font-bold text-green-400 flex items-center gap-1",children:[o.jsx(Ln,{size:12})," Completed"]}):o.jsx("span",{className:"text-xs text-slate-500",children:"Not watched"})})]})]},X.id)})})]},F)})}),f&&le.length===0&&o.jsxs("div",{className:"text-center py-20",children:[o.jsx("div",{className:"text-6xl mb-4",children:""}),o.jsx("h3",{className:"text-xl font-bold text-white",children:"No results found"}),o.jsx("p",{className:"text-slate-500",children:"Try searching for something else."})]})]}):c==="PLAY"?o.jsx("div",{className:"p-12 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:_.map(F=>o.jsxs("div",{className:"group relative bg-slate-900 rounded-3xl overflow-hidden border border-slate-800 hover:border-purple-500 transition-all hover:scale-[1.02] shadow-xl hover:shadow-purple-500/20",children:[o.jsxs("div",{className:"aspect-[4/3] relative",children:[o.jsx("img",{src:F.thumbnail,alt:F.title,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent opacity-90"}),o.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[o.jsx("h3",{className:"text-xl font-black text-white mb-1",children:F.title}),o.jsxs("div",{className:"flex items-center gap-2 text-purple-400 text-xs font-bold bg-purple-500/10 w-fit px-2 py-1 rounded border border-purple-500/20",children:[o.jsx(fs,{size:12})," ",F.costPerMinute," Credits/min"]})]})]}),o.jsxs("div",{className:"p-5",children:[o.jsx("p",{className:"text-slate-400 text-sm mb-5 line-clamp-2",children:F.description}),o.jsx("button",{onClick:()=>j(F),className:"w-full py-3 bg-white text-black hover:bg-purple-500 hover:text-white rounded-xl font-bold transition-all shadow-lg",children:"Play Now"})]})]},F.id))}):o.jsxs("div",{className:"pb-20",children:[E.find(F=>F.featured)&&o.jsxs("div",{className:"relative h-[350px] w-full group overflow-hidden mb-12",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-[#0a0a0a]/50 to-transparent z-10"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#0a0a0a] via-[#0a0a0a]/80 to-transparent z-10"}),E.find(F=>F.featured).logo&&o.jsx("img",{src:E.find(F=>F.featured).logo,className:"absolute right-12 top-1/2 -translate-y-1/2 h-32 w-32 opacity-20 blur-sm"}),o.jsxs("div",{className:"absolute bottom-0 left-0 p-12 z-20 max-w-2xl",children:[o.jsx("span",{className:"px-3 py-1 bg-emerald-600 text-white text-xs font-bold uppercase tracking-wider rounded-lg mb-4 inline-block shadow-lg shadow-emerald-500/30",children:"Featured Platform"}),o.jsx("h1",{className:"text-5xl font-black text-white mb-4 leading-tight",children:E.find(F=>F.featured).name}),o.jsx("p",{className:"text-slate-300 text-lg mb-6",children:E.find(F=>F.featured).description}),o.jsxs("button",{onClick:()=>I(E.find(F=>F.featured)),className:"px-8 py-4 bg-emerald-500 hover:bg-emerald-600 text-white rounded-xl font-bold flex items-center gap-3 transition-all shadow-[0_0_40px_rgba(16,185,129,0.3)]",children:[o.jsx(mg,{})," Launch Platform"]})]})]}),o.jsxs("div",{className:"px-12",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h2",{className:"text-2xl font-black text-white",children:"All Learning Platforms"}),((s==null?void 0:s.role)==="admin"||(s==null?void 0:s.role)==="instructor")&&o.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 bg-slate-800 hover:bg-slate-700 text-white rounded-xl font-bold flex items-center gap-2 transition-colors border border-slate-700 hover:border-slate-600",children:[o.jsx(Fn,{size:18}),"Add Platform"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:E.map(F=>o.jsxs("button",{onClick:()=>I(F),className:"group bg-slate-900 rounded-2xl p-6 border border-slate-800 hover:border-emerald-500 transition-all hover:scale-[1.02] shadow-xl hover:shadow-emerald-500/20 text-left",children:[F.logo&&o.jsx("img",{src:F.logo,alt:F.name,className:"h-16 w-16 rounded-xl mb-4 object-contain bg-white p-2"}),o.jsx("h3",{className:"text-xl font-black text-white mb-2",children:F.name}),o.jsx("p",{className:"text-slate-400 text-sm mb-4 line-clamp-2",children:F.description}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2 py-1 bg-emerald-500/10 text-emerald-400 text-xs font-bold rounded border border-emerald-500/20",children:F.category||"Learning"}),o.jsx(mg,{size:14,className:"text-emerald-400 ml-auto group-hover:translate-x-1 transition-transform"})]})]},F.id))})]})]})]})]})}):null},V9=({isOpen:n,onClose:e})=>{const{coins:t,activeTheme:s,unlockedThemes:i,buyTheme:l,equipTheme:c,activeAvatar:d,unlockedAvatars:f,buyAvatar:m,equipAvatar:g,activeEffect:y,unlockedEffects:v,buyEffect:_,equipEffect:k}=Nf(),[E,T]=C.useState("themes");return n?o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-xl",onClick:e}),o.jsxs("div",{className:"relative w-full max-w-5xl h-[80vh] bg-slate-900 rounded-[2.5rem] border border-slate-700 shadow-2xl overflow-hidden flex flex-col animate-in zoom-in-95 duration-300",children:[o.jsxs("div",{className:"px-10 py-8 border-b border-slate-800 flex justify-between items-center bg-slate-900/50 backdrop-blur-md sticky top-0 z-10",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center shadow-lg transform rotate-3",children:o.jsx(SE,{className:"w-8 h-8 text-white"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-4xl font-black text-white uppercase tracking-tighter",children:"Spark Store"}),o.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-sm",children:"Customize Your HUD"})]})]}),o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("div",{className:"bg-slate-800 px-6 py-3 rounded-full border border-yellow-500/30 flex items-center gap-3 shadow-inner",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"text-xl font-black text-yellow-400 tracking-wider",children:t})]}),o.jsx("button",{onClick:e,className:"p-3 hover:bg-slate-800 rounded-full transition-colors text-slate-400 hover:text-white",children:o.jsx(lt,{size:32})})]})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[o.jsx("div",{className:"mb-12",children:o.jsx("div",{className:"h-64 rounded-3xl bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 p-1",children:o.jsxs("div",{className:"w-full h-full bg-slate-900 rounded-[1.3rem] relative overflow-hidden flex items-center",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1550751827-4bd374c3f58b?w=800&q=80')] bg-cover opacity-20 hover:scale-105 transition-transform duration-700"}),o.jsxs("div",{className:"relative z-10 px-12 max-w-xl",children:[o.jsx("span",{className:"inline-block px-4 py-1 rounded-full bg-red-500 text-white text-xs font-black uppercase mb-4",children:"Featured Item"}),o.jsx("h3",{className:"text-5xl font-black text-white mb-4 uppercase leading-none",children:"Cyberpunk Protocol"}),o.jsx("p",{className:"text-slate-300 text-lg mb-8 font-medium",children:"Jack into the matrix with the ultimate neon overhaul."}),o.jsx("button",{onClick:()=>{const M="cyberpunk";i.includes(M)?c(M):l(M)},className:"px-8 py-4 bg-white text-black font-black uppercase rounded-xl hover:scale-105 transition-transform shadow-xl",children:i.includes("cyberpunk")?s==="cyberpunk"?"Equipped":"Equip Now":"Unlock (500 )"})]})]})})}),o.jsxs("div",{className:"flex gap-4 mb-8 overflow-x-auto pb-2",children:[o.jsxs("button",{onClick:()=>T("themes"),className:`px-6 py-3 rounded-xl font-bold uppercase tracking-wider flex items-center gap-2 transition-all ${E==="themes"?"bg-white text-slate-900 shadow-lg scale-105":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[o.jsx(_E,{size:20})," Themes"]}),o.jsxs("button",{onClick:()=>T("avatars"),className:`px-6 py-3 rounded-xl font-bold uppercase tracking-wider flex items-center gap-2 transition-all ${E==="avatars"?"bg-white text-slate-900 shadow-lg scale-105":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[o.jsx(Pc,{size:20})," Avatars"]}),o.jsxs("button",{onClick:()=>T("effects"),className:`px-6 py-3 rounded-xl font-bold uppercase tracking-wider flex items-center gap-2 transition-all ${E==="effects"?"bg-white text-slate-900 shadow-lg scale-105":"bg-slate-800 text-slate-400 hover:bg-slate-700"}`,children:[o.jsx(B0,{size:20})," Effects"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[E==="themes"&&Wi.map(M=>{const O=i.includes(M.id),q=s===M.id,$=t>=M.price;return o.jsxs("div",{className:`group relative bg-slate-800 rounded-3xl overflow-hidden border-2 transition-all duration-300
                                    ${q?"border-green-500 shadow-[0_0_30px_rgba(34,197,94,0.3)] ring-2 ring-green-500/20":O?"border-slate-700 hover:border-blue-400":"border-slate-700 opacity-80 hover:opacity-100 hover:border-slate-500"}
                                `,children:[o.jsxs("div",{className:`h-32 ${M.bgGradient} relative flex items-center justify-center overflow-hidden`,children:[o.jsx("div",{className:"absolute inset-0 bg-black/20"}),o.jsx("div",{className:`px-6 py-2 rounded-xl bg-slate-900/80 backdrop-blur-md text-white font-black text-lg shadow-lg transform group-hover:scale-110 transition-transform ${M.font||""}`,children:"Preview UI"}),q&&o.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-black uppercase shadow-lg flex items-center gap-1",children:[o.jsx(Ln,{size:12,strokeWidth:4})," Active"]})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"text-xl font-black text-white",children:M.name}),!O&&o.jsxs("div",{className:"flex items-center gap-1 text-yellow-400 font-bold bg-slate-900 px-3 py-1 rounded-lg",children:[o.jsx("span",{children:M.price})," "]})]}),o.jsx("p",{className:"text-slate-400 text-sm font-medium h-10 leading-snug",children:M.description}),o.jsx("div",{className:"mt-6",children:O?o.jsx("button",{onClick:()=>c(M.id),disabled:q,className:`w-full py-3 rounded-xl font-black uppercase tracking-wider transition-all
                                                        ${q?"bg-slate-700 text-slate-500 cursor-default":"bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-500/20 active:scale-95"}
                                                    `,children:q?"Current Theme":"Equip"}):o.jsxs("button",{onClick:()=>l(M.id),disabled:!$,className:`w-full py-3 rounded-xl font-black uppercase tracking-wider transition-all flex items-center justify-center gap-2
                                                        ${$?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg shadow-orange-500/20 hover:scale-[1.02] active:scale-95":"bg-slate-700 text-slate-500 cursor-not-allowed"}
                                                    `,children:[$?"Purchase":"Not enough coins"," ",!$&&o.jsx(ph,{size:14})]})})]})]},M.id)}),E==="avatars"&&uE.map(M=>{const O=f.includes(M.id),q=d===M.id,$=t>=M.price;return o.jsxs("div",{className:`group relative bg-slate-800 rounded-3xl overflow-hidden border-2 transition-all duration-300
                                    ${q?"border-green-500 shadow-[0_0_30px_rgba(34,197,94,0.3)] ring-2 ring-green-500/20":O?"border-slate-700 hover:border-blue-400":"border-slate-700 opacity-80 hover:opacity-100 hover:border-slate-500"}`,children:[o.jsxs("div",{className:"h-48 bg-slate-900 relative flex items-center justify-center overflow-hidden p-6",children:[o.jsx("img",{src:M.preview,className:"w-32 h-32 rounded-full border-4 border-slate-700 shadow-xl group-hover:scale-110 transition-transform bg-slate-800"}),q&&o.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-black uppercase shadow-lg flex items-center gap-1",children:[o.jsx(Ln,{size:12,strokeWidth:4})," Active"]})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"text-xl font-black text-white",children:M.name}),!O&&o.jsxs("div",{className:"text-yellow-400 font-bold bg-slate-900 px-3 py-1 rounded-lg",children:[M.price," "]})]}),o.jsx("div",{className:"mt-4",children:O?o.jsx("button",{onClick:()=>g(M.id),disabled:q,className:`w-full py-3 rounded-xl font-black uppercase tracking-wider transition-all ${q?"bg-slate-700 text-slate-500 cursor-default":"bg-indigo-600 hover:bg-indigo-500 text-white active:scale-95"}`,children:q?"Equipped":"Equip"}):o.jsxs("button",{onClick:()=>m(M.id),disabled:!$,className:`w-full py-3 rounded-xl font-black uppercase tracking-wider transition-all flex items-center justify-center gap-2 ${$?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg active:scale-95":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:[$?"Purchase":"Locked"," ",!$&&o.jsx(ph,{size:14})]})})]})]},M.id)}),E==="effects"&&dE.map(M=>{const O=v.includes(M.id),q=y===M.id,$=t>=M.price;return o.jsxs("div",{className:`group relative bg-slate-800 rounded-3xl overflow-hidden border-2 transition-all duration-300
                                    ${q?"border-green-500 shadow-[0_0_30px_rgba(34,197,94,0.3)] ring-2 ring-green-500/20":O?"border-slate-700 hover:border-pink-400":"border-slate-700 opacity-80 hover:opacity-100 hover:border-slate-500"}`,children:[o.jsxs("div",{className:"h-48 bg-slate-900 relative flex items-center justify-center overflow-hidden",children:[o.jsx("div",{className:"text-8xl animate-bounce",children:M.preview}),q&&o.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-black uppercase shadow-lg flex items-center gap-1",children:[o.jsx(Ln,{size:12,strokeWidth:4})," Active"]})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("h4",{className:"text-xl font-black text-white",children:M.name}),!O&&o.jsxs("div",{className:"text-yellow-400 font-bold bg-slate-900 px-3 py-1 rounded-lg",children:[M.price," "]})]}),o.jsx("div",{className:"mt-4",children:O?o.jsx("button",{onClick:()=>k(M.id),disabled:q,className:`w-full py-3 rounded-xl font-black uppercase tracking-wider transition-all ${q?"bg-slate-700 text-slate-500 cursor-default":"bg-indigo-600 hover:bg-indigo-500 text-white active:scale-95"}`,children:q?"Active":"Enable"}):o.jsxs("button",{onClick:()=>_(M.id),disabled:!$,className:`w-full py-3 rounded-xl font-black uppercase tracking-wider transition-all flex items-center justify-center gap-2 ${$?"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-lg active:scale-95":"bg-slate-700 text-slate-500 cursor-not-allowed"}`,children:[$?"Purchase":"Locked"," ",!$&&o.jsx(ph,{size:14})]})})]})]},M.id)})]})]})]})]}):null},L9=({isOpen:n,onClose:e})=>{const{sessionHistory:t,todayFocusMinutes:s,weekFocusMinutes:i,activeSession:l,elapsedSeconds:c}=O0();if(!n)return null;t.length,t.reduce((v,_)=>v+(_.duration||0),0);const d=t.reduce((v,_)=>v+_.stats.missionsWorked,0),f=t.reduce((v,_)=>v+_.stats.arcadeGames,0);t.reduce((v,_)=>v+_.stats.xpEarned,0),t.reduce((v,_)=>v+_.stats.stepsCompleted,0);const m=[];for(let v=6;v>=0;v--){const _=new Date;_.setDate(_.getDate()-v),m.push(_.toISOString().split("T")[0])}const g=m.map(v=>t.filter(k=>k.date===v).reduce((k,E)=>k+(E.duration||0),0)),y=Math.max(...g,60);return o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/95 backdrop-blur-md animate-in fade-in",children:o.jsxs("div",{className:"w-full max-w-6xl h-[90vh] bg-slate-950 border border-slate-800 rounded-[32px] overflow-hidden flex flex-col shadow-2xl",children:[o.jsxs("div",{className:"h-20 bg-gradient-to-r from-indigo-600 to-purple-600 flex items-center justify-between px-8 border-b border-white/10",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(jE,{className:"w-8 h-8 text-white"}),o.jsx("h2",{className:"text-3xl font-black text-white",children:"My Productivity"})]}),o.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-full transition-colors text-white",children:o.jsx(lt,{size:28})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-8",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-900/50 to-blue-800/50 border border-blue-500/30 rounded-2xl p-6",children:[o.jsx(fs,{className:"w-8 h-8 text-blue-400 mb-3"}),o.jsx("div",{className:"text-3xl font-black text-white",children:s}),o.jsx("div",{className:"text-blue-300 text-sm font-bold uppercase",children:"Minutes Today"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-900/50 to-purple-800/50 border border-purple-500/30 rounded-2xl p-6",children:[o.jsx(Fw,{className:"w-8 h-8 text-purple-400 mb-3"}),o.jsx("div",{className:"text-3xl font-black text-white",children:i}),o.jsx("div",{className:"text-purple-300 text-sm font-bold uppercase",children:"This Week"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-900/50 to-emerald-800/50 border border-emerald-500/30 rounded-2xl p-6",children:[o.jsx(TE,{className:"w-8 h-8 text-emerald-400 mb-3"}),o.jsx("div",{className:"text-3xl font-black text-white",children:d}),o.jsx("div",{className:"text-emerald-300 text-sm font-bold uppercase",children:"Missions Worked"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-amber-900/50 to-amber-800/50 border border-amber-500/30 rounded-2xl p-6",children:[o.jsx(al,{className:"w-8 h-8 text-amber-400 mb-3"}),o.jsx("div",{className:"text-3xl font-black text-white",children:f}),o.jsx("div",{className:"text-amber-300 text-sm font-bold uppercase",children:"Arcade Games"})]})]}),o.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-3xl p-8",children:[o.jsxs("h3",{className:"text-2xl font-black text-white mb-6 flex items-center gap-3",children:[o.jsx(Fw,{className:"w-6 h-6 text-indigo-400"}),"Last 7 Days"]}),o.jsx("div",{className:"flex items-end justify-between gap-3 h-48",children:g.map((v,_)=>{const k=v/y*100,T=new Date(m[_]).toLocaleDateString("en-US",{weekday:"short"});return o.jsxs("div",{className:"flex-1 flex flex-col items-center gap-2",children:[o.jsx("div",{className:"w-full bg-slate-800 rounded-lg overflow-hidden flex-1 flex items-end",children:o.jsx("div",{className:"w-full bg-gradient-to-t from-indigo-500 to-purple-500 rounded-t-lg transition-all duration-500",style:{height:`${k}%`}})}),o.jsx("div",{className:"text-slate-400 text-xs font-bold",children:T}),o.jsxs("div",{className:"text-white text-sm font-black",children:[v,"m"]})]},_)})})]}),o.jsxs("div",{className:"bg-slate-900/50 border border-slate-800 rounded-3xl p-8",children:[o.jsx("h3",{className:"text-2xl font-black text-white mb-6",children:"Recent Sessions"}),o.jsxs("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[t.slice(0,10).map((v,_)=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-xl border border-slate-700 hover:border-indigo-500/30 transition-colors",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center",children:o.jsx(fs,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-white font-bold",children:v.date}),o.jsxs("div",{className:"text-slate-400 text-sm",children:[v.stats.missionsWorked," missions  ",v.stats.arcadeGames," games"]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-2xl font-black text-indigo-400",children:[v.duration,"m"]}),o.jsx("div",{className:"text-slate-500 text-xs",children:"Focus Time"})]})]},_)),t.length===0&&o.jsxs("div",{className:"text-center py-12 text-slate-500",children:[o.jsx(hs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),o.jsx("p",{className:"font-bold",children:"No sessions yet"}),o.jsx("p",{className:"text-sm",children:"Start a focus session to track your productivity!"})]})]})]})]})]})})},fS=n=>o.jsx(O9,{...n}),O9=({studentId:n,onSelectProject:e,onLogout:t,userRole:s})=>{const{activeTheme:i,coins:l}=Nf(),c=Wi.find(ve=>ve.id===i)||Wi[0];let d=null;try{const ve=ms();d=ve==null?void 0:ve.userProfile}catch{console.log("Auth context missing")}const[f,m]=C.useState([]),[g,y]=C.useState(!0),[v,_]=C.useState(""),[k,E]=C.useState([]),[T,M]=C.useState(!1),[O,q]=C.useState(""),[$,Q]=C.useState(!1),[K,P]=C.useState(!1),[j,V]=C.useState(!1),[I,L]=C.useState(!1),[D,A]=C.useState(!1),[he,ie]=C.useState(!1),[le,G]=C.useState(!1),[F,U]=C.useState(!1),[X,z]=C.useState(null),[Y,Ne]=C.useState([]),re=s||(d==null?void 0:d.role),ae=re==="admin"||re==="instructor",[xe,Ce]=C.useState(!1);C.useEffect(()=>{console.log(" Settings Debug:",{userRole:re,isAdminOrInstructor:ae,isDesktopMode:!!window.sparkquest,settingsVisible:ae&&!!window.sparkquest}),console.log(" Preview Mode Debug:",{isAdminOrInstructor:ae,availableGradesCount:Y.length,availableGrades:Y,shouldShowBanner:ae&&Y.length>0})},[re,ae,Y]),C.useEffect(()=>{(async()=>{if(!(!J||!n))try{let et=Re(J,"students",n),ft=await As(et);if(!ft.exists()){const xt=Gt(je(J,"students"),wt("loginInfo.uid","==",n)),pt=await st(xt);if(!pt.empty)ft=pt.docs[0];else{const en=Gt(je(J,"students"),wt("parentLoginInfo.uid","==",n)),Ht=await st(en);Ht.empty||(ft=Ht.docs[0])}}if(ft.exists()){const xt=ft.data();q(xt.avatarUrl||""),_(xt.name||xt.firstName||"Maker")}}catch(et){console.error("Error fetching student profile:",et)}})()},[n]);const De=async ve=>{if(!(!J||!n))try{let et=n;if(!(await As(Re(J,"students",n))).exists()){const xt=Gt(je(J,"students"),wt("loginInfo.uid","==",n)),pt=await st(xt);if(!pt.empty)et=pt.docs[0].id;else{const en=Gt(je(J,"students"),wt("parentLoginInfo.uid","==",n)),Ht=await st(en);if(!Ht.empty)et=Ht.docs[0].id;else throw new Error("Student profile not found")}}await(await Ur(async()=>{const{updateDoc:xt}=await Promise.resolve().then(()=>Mo);return{updateDoc:xt}},void 0,import.meta.url)).updateDoc(Re(J,"students",et),{avatarUrl:ve}),q(ve),M(!1)}catch(et){console.error("Error saving avatar:",et),alert("Could not save avatar. Profile not found.")}};C.useEffect(()=>{(async()=>{if(J)try{const et=Gt(je(J,"student_projects"),wt("studentId","==",n)),ft=await st(et),xt=[];ft.docs.forEach(ke=>{const $e={id:ke.id,...ke.data()};$e.studentId===n&&xt.push($e)});const pt=new Map;xt.forEach(ke=>{var Je;const $e=(ke.title||"Untitled").trim();pt.has($e)||pt.set($e,[]),(Je=pt.get($e))==null||Je.push(ke)});const en=[];for(const[ke,$e]of pt.entries())if($e.length>1){$e.sort((At,yt)=>{var vr,gs,br,Jn;const Xn=(((vr=At.steps)==null?void 0:vr.filter(Tt=>Tt.status==="done").length)||0)*10+(((gs=At.commits)==null?void 0:gs.length)||0)*5,ei=(((br=yt.steps)==null?void 0:br.filter(Tt=>Tt.status==="done").length)||0)*10+(((Jn=yt.commits)==null?void 0:Jn.length)||0)*5;if(ei!==Xn)return ei-Xn;const jn=Tt=>Tt?Tt.seconds?Tt.seconds*1e3:Tt.toDate?Tt.toDate().getTime():Tt instanceof Date?Tt.getTime():new Date(Tt).getTime():0;return jn(At.createdAt)-jn(yt.createdAt)});const Je=$e[0];en.push(Je),$e.slice(1).forEach(async At=>{try{J&&await Ps(Re(J,"student_projects",At.id))}catch(yt){console.error(yt)}})}else en.push($e[0]);if(m(en),!J)return;console.log(` [Enrollment] Fetching enrollments for studentId: "${n}"`);const Ht=Gt(je(J,"enrollments"),wt("studentId","==",n),wt("status","==","active")),Ls=await st(Ht);console.log(` [Enrollment] Found ${Ls.docs.length} enrollments`);const Os=Ls.docs.map(ke=>{const $e=ke.data();return console.log(" [Enrollment] Enrollment doc:",{id:ke.id,gradeId:$e.gradeId,groupId:$e.groupId,status:$e.status}),$e.gradeId}).filter(Boolean);console.log(" [Enrollment] Extracted gradeIds:",Os);const St=await st(je(J,"programs")),ct=[];St.docs.forEach(ke=>{const $e=ke.data();$e.grades&&Array.isArray($e.grades)&&$e.grades.forEach(Je=>{Je.id&&Je.name&&ct.push({id:Je.id,name:Je.name,programName:$e.name||"Unknown Program"})})}),Ne(ct),console.log(` [Preview] Loaded ${ct.length} grades for preview mode`);const un=X?[X]:Os;console.log(" [Active Grades] Using gradeIds:",un,X?"(PREVIEW MODE)":"(Real Enrollment)"),Os.length===0&&(console.log(' [DEBUG] No enrollments found - checking ALL enrollments for "ajlane" or "kenza"...'),(await st(je(J,"enrollments"))).docs.forEach($e=>{const Je=$e.data(),At=(Je.studentName||"").toLowerCase();(At.includes("ajlane")||At.includes("kenza"))&&console.log(" [DEBUG] Found enrollment:",{id:$e.id,studentId:Je.studentId,currentStudentId:n,match:Je.studentId===n?" MATCH":" MISMATCH",name:Je.studentName,grade:Je.gradeName,status:Je.status})}));const to=await st(je(J,"stations")),no=ke=>{var At;if(!((At=ke.activeForGradeIds)==null?void 0:At.some(yt=>Os.includes(yt))))return"hidden";const Je=Date.now();return ke.startDate&&ke.startDate.toMillis()>Je?"future":ke.endDate&&ke.endDate.toMillis()<Je?"expired":"active"},Xo=to.docs.map(ke=>({id:ke.id,...ke.data()})).map(ke=>({...ke,status:no(ke)})).filter(ke=>ke.status!=="hidden"),so=(await st(je(J,"project_templates"))).docs.map(ke=>({id:ke.id,...ke.data()})).filter(ke=>{var $e,Je;if(console.log(` [Filter] Checking mission: "${ke.title}"`,{status:ke.status,targetGrades:($e=ke.targetAudience)==null?void 0:$e.grades,studentGrades:un,station:ke.station}),ke.status==="draft")return console.log(` [Filter] Rejected "${ke.title}" - draft status`),!1;if(ke.status!=="assigned"&&ke.status!=="featured")return console.log(` [Filter] Rejected "${ke.title}" - status: ${ke.status}`),!1;if((Je=ke.targetAudience)!=null&&Je.grades&&ke.targetAudience.grades.length>0){if(!ke.targetAudience.grades.some(yt=>un.includes(yt)))return console.log(` [Grade Filter] Blocking "${ke.title}" - not assigned to student's grades [${un.join(", ")}]`),!1;console.log(` [Grade Filter] Allowed "${ke.title}" - student in target grades`)}else console.log(` [Grade Filter] Allowed "${ke.title}" - no grade restrictions (open to all)`);if(ke.station){const At=ke.station.toLowerCase();if(At==="general")return!0;const yt=Xo.find(Xn=>Xn.label.toLowerCase().includes(At)||At.includes(Xn.label.toLowerCase()));return yt?(yt.status==="future"&&(ke.isLocked=!0,ke.unlockDate=yt.startDate),console.log(` [Station Filter] Allowed "${ke.title}" - station "${ke.station}" is ${yt.status}`),!0):(console.log(` [Station Filter] Rejected "${ke.title}" - station "${ke.station}" not available`),!1)}return!0}),Zr=new Set(en.map(ke=>ke.templateId).filter(Boolean)),Fs=so.filter(ke=>!Zr.has(ke.id));E(Fs)}catch(et){console.error(" [ProjectSelector] Error fetching projects:",et)}finally{y(!1)}})()},[n]);const He=async ve=>{if(J&&!ve.isLocked&&confirm(`Ready to start mission: ${ve.title}?`)){y(!0);try{let et=[];if(ve.defaultWorkflowId)try{const pt=await As(Re(J,"process_templates",ve.defaultWorkflowId));if(pt.exists()){const en=pt.data();en.phases&&Array.isArray(en.phases)&&(et=en.phases.map(Ht=>({id:Ht.id||Date.now().toString()+Math.random(),title:Ht.name,status:"todo",description:Ht.description||"",isLocked:!1})))}}catch(pt){console.error("Error fetching default workflow:",pt)}const ft={studentId:n,templateId:ve.id,title:ve.title,description:ve.description||"",station:ve.station||"General",difficulty:ve.difficulty||"beginner",status:"planning",steps:et,createdAt:new Date,updatedAt:new Date},xt=await(await Ur(async()=>{const{addDoc:pt}=await Promise.resolve().then(()=>Mo);return{addDoc:pt}},void 0,import.meta.url)).addDoc(je(J,"student_projects"),ft);e(xt.id)}catch(et){console.error("Error starting mission:",et),alert("Failed to start mission."),y(!1)}}};return g?o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gradient-to-br from-slate-950 via-blue-950 to-slate-900",children:o.jsx("div",{className:"text-white text-xl font-bold",children:"Loading your missions..."})}):o.jsxs("div",{className:`min-h-screen w-full overflow-y-auto relative selection:bg-blue-500 selection:text-white pb-20 transition-colors duration-700 ${c.bgGradient} ${c.font||""}`,children:[o.jsx("div",{className:"absolute inset-0 z-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#0a0a0a] to-black"}),o.jsx("div",{className:"absolute inset-0 z-0 opacity-20 pointer-events-none",children:o.jsxs("svg",{width:"100%",height:"100%",children:[o.jsx("pattern",{id:"selector-grid",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:o.jsx("path",{d:"M 60 0 L 0 0 0 60",fill:"none",stroke:"#60a5fa",strokeWidth:"0.5"})}),o.jsx("rect",{width:"100%",height:"100%",fill:"url(#selector-grid)"})]})}),o.jsx("div",{className:"absolute top-0 left-1/4 w-[500px] h-[500px] bg-blue-600/10 rounded-full blur-[120px] pointer-events-none animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 right-1/4 w-[600px] h-[600px] bg-indigo-600/10 rounded-full blur-[140px] pointer-events-none"}),o.jsxs("div",{className:"relative z-10 container mx-auto px-6 py-12 max-w-7xl",children:[ae&&Y.length>0&&o.jsx("div",{className:"mb-6 p-4 bg-yellow-500/10 border-2 border-yellow-500/30 rounded-2xl backdrop-blur-sm",children:o.jsxs("div",{className:"flex items-center justify-between gap-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-yellow-500/20 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-sm font-black text-yellow-400 uppercase tracking-wider",children:"Preview Mode"}),o.jsx("p",{className:"text-xs text-yellow-300/70",children:"See what students from each grade see"})]})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("select",{value:X||"",onChange:ve=>z(ve.target.value||null),className:"px-4 py-2 bg-slate-900/50 border-2 border-yellow-500/30 rounded-xl text-white font-bold text-sm focus:outline-none focus:border-yellow-400 cursor-pointer",children:[o.jsx("option",{value:"",children:" Live Mode (Real Data)"}),Y.map(ve=>o.jsxs("option",{value:ve.id,children:[" Preview: ",ve.name," (",ve.programName,")"]},ve.id))]}),X&&o.jsx("button",{onClick:()=>z(null),className:"px-4 py-2 bg-red-500/20 hover:bg-red-500/30 border-2 border-red-500/50 rounded-xl text-red-300 font-bold text-sm transition-colors",children:"Exit Preview"})]})]})}),o.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-12 gap-8",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("button",{onClick:()=>M(!0),className:"w-24 h-24 rounded-3xl bg-slate-800 border-4 border-indigo-500/50 hover:border-indigo-400 hover:scale-105 transition-all shadow-[0_0_30px_rgba(99,102,241,0.3)] overflow-hidden relative group",children:[O?o.jsx("img",{src:O,alt:"Hero",className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl",children:""}),o.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:o.jsx("span",{className:"text-xs font-bold text-white uppercase",children:"Edit"})})]}),o.jsxs("div",{children:[o.jsxs("h1",{className:"text-5xl font-black text-white tracking-tight drop-shadow-2xl uppercase",children:[o.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-400",children:[v||"MY","'S"]})," STUDIO"]}),o.jsxs("p",{className:"text-blue-400 font-bold tracking-widest text-sm uppercase mt-1",children:["Ready for the next mission, ",v||"Maker","?"]})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("button",{onClick:()=>G(!0),className:"px-4 py-2 bg-gradient-to-r from-yellow-500/20 to-orange-500/20 text-yellow-400 border border-yellow-500/30 rounded-2xl font-black flex items-center gap-2 hover:scale-105 transition-transform",children:[o.jsx(SE,{size:20}),o.jsxs("span",{children:[l," "]})]}),ae&&o.jsx("button",{onClick:()=>A(!0),className:"p-4 bg-slate-800/50 rounded-2xl border border-slate-700 hover:bg-slate-800 transition-colors",children:o.jsx(kE,{size:20,className:"text-slate-400"})}),t&&o.jsx("button",{onClick:()=>Ce(!0),className:"p-4 bg-red-500/10 rounded-2xl border border-red-500/20 hover:bg-red-500/20 text-red-500 font-bold transition-all",children:o.jsx(pg,{size:20})})]})]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-16",children:[o.jsxs("button",{onClick:()=>ie(!0),className:"group relative h-48 bg-gradient-to-br from-purple-900/50 to-indigo-900/50 rounded-3xl border border-purple-500/30 overflow-hidden hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(168,85,247,0.4)] transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?w=500&q=80')] bg-cover bg-center opacity-30 group-hover:opacity-50 transition-opacity mix-blend-overlay"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),o.jsxs("div",{className:"absolute bottom-6 left-6 text-left",children:[o.jsx(al,{className:"w-8 h-8 text-purple-400 mb-2 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-2xl font-black text-white p-0 m-0 leading-none",children:"ARCADE"}),o.jsx("p",{className:"text-purple-300 text-xs font-bold uppercase tracking-wider mt-1",children:"Play & Learn"})]})]}),o.jsxs("button",{onClick:()=>Q(!0),className:"group relative h-48 bg-gradient-to-br from-emerald-900/50 to-teal-900/50 rounded-3xl border border-emerald-500/30 overflow-hidden hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(16,185,129,0.4)] transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1513364776144-60967b0f800f?w=500&q=80')] bg-cover bg-center opacity-30 group-hover:opacity-50 transition-opacity mix-blend-overlay"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),o.jsxs("div",{className:"absolute bottom-6 left-6 text-left",children:[o.jsx(hs,{className:"w-8 h-8 text-emerald-400 mb-2 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-2xl font-black text-white p-0 m-0 leading-none",children:"PORTFOLIO"}),o.jsx("p",{className:"text-emerald-300 text-xs font-bold uppercase tracking-wider mt-1",children:"Achievements"})]})]}),o.jsxs("button",{onClick:()=>P(!0),className:"group relative h-48 bg-gradient-to-br from-pink-900/50 to-rose-900/50 rounded-3xl border border-pink-500/30 overflow-hidden hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(244,114,182,0.4)] transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1542202229-7d93c33f5d07?w=500&q=80')] bg-cover bg-center opacity-30 group-hover:opacity-50 transition-opacity mix-blend-overlay"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),o.jsxs("div",{className:"absolute bottom-6 left-6 text-left",children:[o.jsx(fg,{className:"w-8 h-8 text-pink-400 mb-2 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-2xl font-black text-white p-0 m-0 leading-none",children:"GALLERY"}),o.jsx("p",{className:"text-pink-300 text-xs font-bold uppercase tracking-wider mt-1",children:"Your Creations"})]})]}),o.jsxs("button",{onClick:()=>V(!0),className:"group relative h-48 bg-gradient-to-br from-amber-900/50 to-orange-900/50 rounded-3xl border border-amber-500/30 overflow-hidden hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(245,158,11,0.4)] transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=500&q=80')] bg-cover bg-center opacity-30 group-hover:opacity-50 transition-opacity mix-blend-overlay"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),o.jsxs("div",{className:"absolute bottom-6 left-6 text-left",children:[o.jsx(F0,{className:"w-8 h-8 text-amber-400 mb-2 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-2xl font-black text-white p-0 m-0 leading-none",children:"PICKUP"}),o.jsx("p",{className:"text-amber-300 text-xs font-bold uppercase tracking-wider mt-1",children:"Schedule Ride"})]})]}),o.jsxs("button",{onClick:()=>L(!0),className:"group relative h-48 bg-gradient-to-br from-cyan-900/50 to-blue-900/50 rounded-3xl border border-cyan-500/30 overflow-hidden hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(6,182,212,0.4)] transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?w=500&q=80')] bg-cover bg-center opacity-30 group-hover:opacity-50 transition-opacity mix-blend-overlay"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),o.jsxs("div",{className:"absolute bottom-6 left-6 text-left",children:[o.jsx(Kc,{className:"w-8 h-8 text-cyan-400 mb-2 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-2xl font-black text-white p-0 m-0 leading-none",children:"INVENTORY"}),o.jsx("p",{className:"text-cyan-300 text-xs font-bold uppercase tracking-wider mt-1",children:"Items & Keys"})]})]}),o.jsxs("button",{onClick:()=>U(!0),className:"group relative h-48 bg-gradient-to-br from-violet-900/50 to-fuchsia-900/50 rounded-3xl border border-violet-500/30 overflow-hidden hover:scale-[1.02] hover:shadow-[0_0_30px_rgba(167,139,250,0.4)] transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=500&q=80')] bg-cover bg-center opacity-30 group-hover:opacity-50 transition-opacity mix-blend-overlay"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"}),o.jsxs("div",{className:"absolute bottom-6 left-6 text-left",children:[o.jsx(jE,{className:"w-8 h-8 text-violet-400 mb-2 group-hover:scale-110 transition-transform"}),o.jsx("h3",{className:"text-2xl font-black text-white p-0 m-0 leading-none",children:"MY PROGRESS"}),o.jsx("p",{className:"text-violet-300 text-xs font-bold uppercase tracking-wider mt-1",children:"Productivity"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[o.jsx("div",{className:"h-[2px] flex-1 bg-gradient-to-r from-transparent via-slate-600 to-transparent opacity-50"}),o.jsx("span",{className:"text-slate-500 font-black tracking-[0.3em] uppercase text-sm",children:"Active Missions"}),o.jsx("div",{className:"h-[2px] flex-1 bg-gradient-to-r from-transparent via-slate-600 to-transparent opacity-50"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[k.map((ve,et)=>{const ft=f.length===0&&et===0;return o.jsxs("button",{onClick:()=>He(ve),disabled:ve.isLocked,className:`group relative min-h-[320px] flex flex-col items-center justify-center p-8 rounded-[2.5rem] border-2 transition-all duration-500
                                ${ve.isLocked?"bg-slate-900 border-slate-700 opacity-70 cursor-not-allowed":ft?"bg-gradient-to-b from-indigo-900/40 to-slate-900/80 border-indigo-500 shadow-[0_0_40px_-10px_rgba(99,102,241,0.5)] scale-[1.02]":"bg-slate-800/30 backdrop-blur-sm border-dashed border-indigo-500/30 hover:border-indigo-500 hover:bg-indigo-600/10 hover:scale-[1.02] cursor-pointer"}`,children:[ve.isLocked&&o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/60 z-20 backdrop-blur-[2px] rounded-[2.3rem]",children:[o.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center border-2 border-slate-600 text-slate-400 mb-4",children:o.jsx(Kc,{size:24})}),o.jsx("h3",{className:"text-lg font-black text-white uppercase tracking-wider",children:"Locked"}),ve.unlockDate&&o.jsxs("p",{className:"text-slate-400 text-xs font-bold mt-1",children:["Opens on ",new Date(ve.unlockDate.seconds*1e3).toLocaleDateString()]})]}),!ve.isLocked&&ft&&o.jsx("div",{className:"absolute -top-4 w-full flex justify-center z-20",children:o.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-500 text-white text-xs font-black uppercase tracking-widest px-4 py-1.5 rounded-full shadow-lg flex items-center gap-2 animate-bounce",children:[o.jsx(bu,{size:14,className:"fill-white"})," Start Here"]})}),!ve.isLocked&&!ft&&o.jsx("div",{className:"absolute top-6 right-6",children:o.jsx("span",{className:"px-3 py-1 bg-indigo-500/20 text-indigo-300 border border-indigo-500/30 text-[10px] font-bold uppercase tracking-wider rounded-full",children:"New"})}),o.jsxs("div",{className:`w-24 h-24 rounded-full flex items-center justify-center mb-6 border-4 text-5xl transition-all duration-500 relative
                                ${ve.isLocked?"bg-slate-800 border-slate-700 text-slate-600":"bg-gradient-to-br from-indigo-500/20 to-purple-500/20 border-indigo-500/50 text-white group-hover:scale-110 group-hover:rotate-6 group-hover:shadow-[0_0_30px_rgba(99,102,241,0.5)]"}`,children:[o.jsx("div",{className:"absolute inset-0 rounded-full bg-indigo-500/20 blur-xl opacity-0 group-hover:opacity-100 transition-opacity"}),""]}),o.jsx("h3",{className:`text-2xl font-black text-center transition-colors mb-2 ${ve.isLocked?"text-slate-600":"text-white group-hover:text-indigo-300"}`,children:ve.title}),o.jsx("p",{className:"text-slate-400 text-sm font-medium mt-0 text-center max-w-[240px] line-clamp-2 leading-relaxed",children:ve.description}),!ve.isLocked&&o.jsxs("div",{className:`mt-8 px-8 py-3 rounded-2xl font-black text-sm uppercase tracking-wider transition-all transform flex items-center gap-2
                                    ${ft?"bg-indigo-500 hover:bg-indigo-400 text-white shadow-xl hover:shadow-indigo-500/50 scale-100":"bg-white/10 hover:bg-white/20 text-white translate-y-4 opacity-0 group-hover:opacity-100 group-hover:translate-y-0"}`,children:["Start Mission ",o.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]})]},ve.id)}),f.map((ve,et)=>{const ft=et===0;return o.jsxs("button",{onClick:()=>e(ve.id),className:`group relative flex flex-col text-left bg-gradient-to-b from-slate-800/90 to-slate-900/90 backdrop-blur-xl border rounded-[2.5rem] p-8 transition-all duration-300 overflow-hidden
                                ${ft?"border-blue-500 shadow-[0_0_50px_-10px_rgba(59,130,246,0.3)] scale-[1.02] ring-4 ring-blue-500/20":"border-white/10 hover:border-blue-500/50 hover:shadow-xl hover:-translate-y-2"}`,style:{animationDelay:`${et*100}ms`},children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/0 via-blue-500/0 to-blue-500/0 group-hover:to-blue-500/10 transition-all duration-500"}),o.jsxs("div",{className:"flex items-center justify-between mb-8 relative z-10 w-full",children:[o.jsxs("span",{className:`px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-wider border flex items-center gap-2 ${ve.status==="planning"?"bg-yellow-500/10 text-yellow-400 border-yellow-500/20":ve.status==="building"?"bg-blue-500/10 text-blue-400 border-blue-500/20":ve.status==="submitted"?"bg-purple-500/10 text-purple-400 border-purple-500/20":ve.status==="published"?"bg-green-500/10 text-green-400 border-green-500/20":"bg-gray-500/10 text-gray-400 border-gray-500/20"}`,children:[o.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-current animate-pulse"}),ve.status||"PLANNING"]}),ft&&o.jsx("span",{className:"text-[10px] font-bold text-blue-400 uppercase tracking-widest animate-pulse",children:"Continue"})]}),o.jsxs("div",{className:"flex items-center gap-6 mb-6 z-10",children:[o.jsx("div",{className:"text-5xl filter drop-shadow-xl transform group-hover:scale-110 group-hover:rotate-12 transition-transform duration-500",children:cE(ve.title)}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-white leading-tight group-hover:text-blue-300 transition-colors",children:ve.title}),o.jsxs("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mt-1",children:[ve.station," Station"]})]})]}),o.jsx("div",{className:"w-full h-2 bg-slate-700 rounded-full overflow-hidden mb-4",children:o.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-500 w-1/3 group-hover:w-1/2 transition-all duration-1000"})}),o.jsxs("div",{className:"flex justify-between text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:[o.jsx("span",{children:"Progress"}),o.jsx("span",{children:"In Progress"})]}),o.jsx("div",{className:"absolute bottom-6 right-6 opacity-0 group-hover:opacity-100 transform translate-x-4 group-hover:translate-x-0 transition-all duration-300",children:o.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center text-white shadow-lg",children:o.jsx("span",{className:"text-xl",children:""})})})]},ve.id)})]}),o.jsx("div",{className:"text-center mt-24 opacity-30 pointer-events-none",children:o.jsx("p",{className:"text-white font-serif italic text-lg",children:'"The best way to predict the future is to create it."'})})]}),T&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm",onClick:()=>M(!1)}),o.jsxs("div",{className:"relative w-full max-w-2xl animate-in zoom-in-95 duration-200",children:[o.jsx("button",{onClick:()=>M(!1),className:"absolute -top-12 right-0 text-white hover:text-red-400 transition-colors",children:o.jsx(lt,{size:32})}),o.jsx($O,{currentAvatarUrl:O,onSelect:De})]})]}),o.jsx(qO,{isOpen:$,onClose:()=>Q(!1)}),o.jsx(GO,{isOpen:K,onClose:()=>P(!1)}),o.jsx(WO,{isOpen:j,onClose:()=>V(!1)}),o.jsx(dS,{isOpen:I,onClose:()=>L(!1)}),o.jsx(M9,{isOpen:he,onClose:()=>ie(!1)}),o.jsx(V9,{isOpen:le,onClose:()=>G(!1)}),ae&&o.jsx(XO,{isOpen:D,onClose:()=>A(!1)}),xe&&o.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:o.jsxs("div",{className:"bg-slate-900 border-4 border-slate-700 rounded-[2.5rem] p-8 max-w-md w-full text-center space-y-6 shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-red-500 via-orange-500 to-red-500"}),o.jsx("div",{className:"w-20 h-20 bg-slate-800 rounded-full flex items-center justify-center mx-auto border-4 border-slate-700",children:o.jsx(pg,{size:40,className:"text-slate-400"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-black text-white uppercase tracking-wider mb-2",children:"Finish Session?"}),o.jsx("p",{className:"text-slate-400 font-medium",children:"Are you sure you want to sign out?"})]}),o.jsxs("div",{className:"flex gap-4 pt-4",children:[o.jsx("button",{onClick:()=>Ce(!1),className:"flex-1 py-4 bg-slate-800 text-slate-300 font-bold rounded-2xl border border-slate-700 hover:bg-slate-700 transition-colors",children:"Cancel"}),o.jsx("button",{onClick:()=>{Ce(!1),t&&t()},className:"flex-1 py-4 bg-red-600 text-white font-black uppercase rounded-2xl hover:bg-red-500 shadow-lg shadow-red-900/20 transition-all active:scale-95",children:"Yes, I'm Done"})]})]})}),o.jsx(L9,{isOpen:F,onClose:()=>U(!1)})]})},F9=({onReviewProject:n})=>{const{studentProjects:e,students:t,availableGrades:s,enrollments:i}=xr(),[l,c]=C.useState(null),[d,f]=C.useState(""),[m,g]=C.useState(null),y=E=>E?E.seconds?new Date(E.seconds*1e3):typeof E=="string"||E instanceof Date?new Date(E):new Date:new Date,v=C.useMemo(()=>{const E=new Map;return e.forEach(T=>{if(!T.studentId)return;const M=E.get(T.studentId),O=y(T.updatedAt);let q=T.studentName||"",$;const Q=t.find(P=>P.id===T.studentId);Q&&(!q||q==="Student")&&(q=Q.name);const K=i.find(P=>P.studentId===T.studentId&&P.status==="active");K&&($=K.gradeId),(!q||q==="Student")&&(q="Unknown Maker"),M?(M.projectCount++,T.status==="published"&&M.completedCount++,O>M.lastActive&&(M.lastActive=O),!M.gradeId&&$&&(M.gradeId=$)):E.set(T.studentId,{id:T.studentId,name:q,projectCount:1,completedCount:T.status==="published"?1:0,lastActive:O,gradeId:$})}),t.forEach(T=>{if(T.role==="student"&&!E.has(T.id)){const M=i.find(O=>O.studentId===T.id&&O.status==="active");E.set(T.id,{id:T.id,name:T.name,projectCount:0,completedCount:0,lastActive:y(T.createdAt||new Date),gradeId:(M==null?void 0:M.gradeId)||T.grade||T.gradeId})}}),Array.from(E.values()).sort((T,M)=>M.lastActive.getTime()-T.lastActive.getTime())},[e,t,i]),_=v.filter(E=>{const T=E.name.toLowerCase().includes(d.toLowerCase()),M=m?E.gradeId===m:!0;return T&&M}),k=C.useMemo(()=>l?v.find(E=>E.id===l):null,[l,v]);if(l&&k){const E=e.filter(T=>T.studentId===l);return o.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-10 animate-in fade-in duration-300",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsx("button",{onClick:()=>c(null),className:"p-3 bg-white hover:bg-slate-50 border-2 border-slate-100 rounded-2xl text-slate-400 hover:text-indigo-600 transition-all hover:scale-105 shadow-sm",children:o.jsx(Ac,{size:24})}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("h2",{className:"text-4xl font-black text-slate-800 tracking-tight",children:k.name}),o.jsxs("span",{className:"px-3 py-1 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-full text-xs font-black uppercase tracking-wider shadow-lg shadow-indigo-500/30",children:["Level ",Math.floor(k.projectCount/2)+1," Maker"]})]}),o.jsx("p",{className:"text-slate-500 font-medium text-lg mt-1",children:"Viewing full mission portfolio."})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"relative overflow-hidden bg-white p-8 rounded-3xl border-2 border-indigo-50 shadow-xl shadow-indigo-100/50 group hover:-translate-y-1 transition-all",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-50 rounded-bl-full -mr-10 -mt-10 transition-transform group-hover:scale-110"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-100 text-indigo-600 flex items-center justify-center mb-4 text-2xl shadow-inner",children:o.jsx(Uw,{size:28})}),o.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Total Missions"}),o.jsx("p",{className:"text-4xl font-black text-slate-800",children:k.projectCount})]})]}),o.jsxs("div",{className:"relative overflow-hidden bg-white p-8 rounded-3xl border-2 border-emerald-50 shadow-xl shadow-emerald-100/50 group hover:-translate-y-1 transition-all",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-50 rounded-bl-full -mr-10 -mt-10 transition-transform group-hover:scale-110"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-emerald-100 text-emerald-600 flex items-center justify-center mb-4 text-2xl shadow-inner",children:o.jsx(hs,{size:28})}),o.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Published"}),o.jsx("p",{className:"text-4xl font-black text-slate-800",children:k.completedCount})]})]}),o.jsxs("div",{className:"relative overflow-hidden bg-white p-8 rounded-3xl border-2 border-amber-50 shadow-xl shadow-amber-100/50 group hover:-translate-y-1 transition-all",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-amber-50 rounded-bl-full -mr-10 -mt-10 transition-transform group-hover:scale-110"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-amber-100 text-amber-600 flex items-center justify-center mb-4 text-2xl shadow-inner",children:o.jsx(fs,{size:28})}),o.jsx("p",{className:"text-sm font-bold text-slate-400 uppercase tracking-wider mb-1",children:"Last Active"}),o.jsx("p",{className:"text-2xl font-black text-slate-800 mt-2",children:k.lastActive.toLocaleDateString()})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(T=>o.jsxs("div",{onClick:()=>n(T.id),className:"group bg-white rounded-3xl p-6 border-2 border-slate-100 cursor-pointer hover:border-indigo-400 hover:shadow-2xl hover:shadow-indigo-100 hover:-translate-y-2 transition-all duration-300",children:[o.jsxs("div",{className:"flex justify-between items-start mb-4",children:[o.jsx("span",{className:`px-4 py-1.5 rounded-xl text-xs font-black uppercase tracking-wider shadow-sm ${T.status==="published"?"bg-emerald-100 text-emerald-700":T.status==="submitted"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:T.status}),o.jsx("span",{className:"text-xs font-bold text-slate-400 bg-slate-50 px-2 py-1 rounded-lg border border-slate-100",children:T.station})]}),o.jsx("h4",{className:"font-extrabold text-slate-800 text-xl mb-3 line-clamp-1 group-hover:text-indigo-600 transition-colors",children:T.title}),o.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mb-6 leading-relaxed bg-slate-50/50 p-3 rounded-xl border border-slate-50",children:T.description||"No description provided."}),o.jsxs("div",{className:"pt-4 border-t-2 border-slate-50 flex items-center justify-between",children:[o.jsxs("span",{className:"text-xs font-bold text-slate-400 flex items-center gap-1",children:[o.jsx(fs,{size:12})," ",T.updatedAt?y(T.updatedAt).toLocaleDateString():"New"]}),o.jsx("span",{className:"text-xs font-black text-indigo-500 opacity-0 group-hover:opacity-100 transition-all translate-x-2 group-hover:translate-x-0",children:"Review Project "})]})]},T.id))})]})}return o.jsxs("div",{className:"p-8 max-w-7xl mx-auto space-y-10 animate-in fade-in duration-500",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 tracking-tight mb-2",children:"Makers Portfolio"}),o.jsx("p",{className:"text-slate-500 font-medium text-lg",children:"Celebrating student creativity and progress."})]}),o.jsxs("div",{className:"flex gap-4 w-full md:w-auto",children:[o.jsxs("div",{className:"relative",children:[o.jsxs("select",{className:"appearance-none pl-4 pr-10 py-4 bg-white/80 backdrop-blur-sm border-2 border-slate-100 rounded-2xl font-bold text-slate-600 outline-none focus:border-indigo-500 focus:bg-white transition-all shadow-sm cursor-pointer",value:m||"",onChange:E=>g(E.target.value||null),children:[o.jsx("option",{value:"",children:"All Grades"}),s.map(E=>o.jsx("option",{value:E.id,children:E.name},E.id))]}),o.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:o.jsx(Uw,{size:16})})]}),o.jsxs("div",{className:"relative w-full md:w-80 group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-200 to-purple-200 rounded-2xl blur opacity-20 group-hover:opacity-40 transition-opacity"}),o.jsx(Qc,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-indigo-500 transition-colors",size:20}),o.jsx("input",{className:"relative w-full pl-12 pr-4 py-4 bg-white/80 backdrop-blur-sm border-2 border-slate-100 rounded-2xl font-bold text-slate-600 outline-none focus:border-indigo-500 focus:bg-white transition-all shadow-sm",placeholder:"Find a maker...",value:d,onChange:E=>f(E.target.value)})]})]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:_.map((E,T)=>o.jsxs("div",{onClick:()=>c(E.id),className:"group relative bg-white rounded-3xl p-6 cursor-pointer hover:-translate-y-2 transition-all duration-300",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsx("div",{className:"absolute inset-0 border-2 border-slate-100 rounded-3xl group-hover:border-indigo-200 transition-colors duration-300"}),o.jsxs("div",{className:"relative flex flex-col items-center text-center",children:[o.jsxs("div",{className:"w-24 h-24 mb-4 relative",children:[o.jsx("div",{className:`absolute inset-0 rounded-full bg-gradient-to-br ${T%3===0?"from-indigo-400 to-cyan-400":T%3===1?"from-fuchsia-400 to-pink-400":"from-amber-400 to-orange-400"} opacity-20 group-hover:opacity-30 blur-md transition-opacity`}),o.jsx("div",{className:`w-full h-full rounded-full bg-gradient-to-br ${T%3===0?"from-indigo-100 to-cyan-50":T%3===1?"from-fuchsia-100 to-pink-50":"from-amber-100 to-orange-50"} flex items-center justify-center text-3xl font-black text-slate-700 group-hover:scale-110 transition-transform duration-300 border-4 border-white shadow-sm`,children:E.name.charAt(0)}),o.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 bg-emerald-400 border-4 border-white rounded-full shadow-sm",title:"Active"})]}),o.jsx("h4",{className:"font-extrabold text-xl text-slate-800 mb-1 group-hover:text-indigo-600 transition-colors",children:E.name}),o.jsxs("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-wider mb-6",children:["Level ",Math.floor(E.projectCount/2)+1," Maker"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full",children:[o.jsxs("div",{className:"bg-white/60 p-3 rounded-2xl border border-slate-100 group-hover:border-indigo-100 group-hover:bg-white/80 transition-all",children:[o.jsx("p",{className:"text-2xl font-black text-slate-700",children:E.projectCount}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Missions"})]}),o.jsxs("div",{className:"bg-white/60 p-3 rounded-2xl border border-slate-100 group-hover:border-indigo-100 group-hover:bg-white/80 transition-all",children:[o.jsx("p",{className:"text-2xl font-black text-emerald-600",children:E.completedCount}),o.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:"Published"})]})]}),o.jsxs("div",{className:"mt-6 w-full pt-4 border-t border-slate-100/50 flex items-center justify-between text-xs font-medium text-slate-400 group-hover:text-indigo-400 transition-colors",children:[o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(fs,{size:12})," ",new Date(E.lastActive).toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),o.jsx("span",{children:"View Portfolio "})]})]})]},E.id))})]})},Lr=({icon:n,label:e,active:t,onClick:s})=>o.jsxs("button",{onClick:s,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-bold transition-all ${t?"bg-indigo-600 text-white shadow-md shadow-indigo-900/30":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[o.jsx(n,{size:18}),e]}),U9=()=>{var T;const{userProfile:n,signOut:e}=ms(),[t,s]=C.useState("dashboard"),[i,l]=C.useState(null),[c,d]=C.useState(null),[f,m]=C.useState(!1),[g,y]=C.useState(!1),[v,_]=C.useState(null);if(i)return o.jsx(IE,{projectId:i,onClose:()=>l(null)});if(g)return o.jsx(CE,{templateId:v==null?void 0:v.id,initialViewProject:v,onClose:()=>y(!1)});const k=M=>{d(M),s("dashboard")},E=(M,O)=>{_(M?{targetAudience:{grades:[M],groups:[]},programId:O}:null),y(!0)};return o.jsxs("div",{className:"flex h-screen bg-slate-50 font-sans",children:[f&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>m(!1)}),o.jsxs("aside",{className:`
        fixed inset-y-0 left-0 z-50 w-72 bg-slate-900 text-white flex flex-col shrink-0 shadow-2xl transition-transform duration-300 ease-in-out
        ${f?"translate-x-0":"-translate-x-full md:translate-x-0"}
        md:relative
      `,children:[o.jsxs("div",{className:"p-6 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-black bg-gradient-to-r from-indigo-400 to-cyan-400 bg-clip-text text-transparent",children:"SparkFactory"}),o.jsx("p",{className:"text-xs text-slate-500 font-medium mt-1 uppercase tracking-widest",children:"Instructor Command"})]}),o.jsx("button",{onClick:()=>m(!1),className:"md:hidden text-slate-400 hover:text-white",children:o.jsx(lt,{size:24})})]}),o.jsxs("nav",{className:"flex-1 px-3 space-y-1 overflow-y-auto custom-scrollbar",children:[o.jsx(Lr,{icon:NE,label:"Dashboard",active:t==="dashboard",onClick:()=>{s("dashboard"),d(null),m(!1)}}),o.jsx("div",{className:"pt-4 pb-1",children:o.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:"Missions"})}),o.jsx(Lr,{icon:H5,label:"All Missions",active:t==="projects",onClick:()=>{s("projects"),m(!1)}}),o.jsx(Lr,{icon:yE,label:"By Grade",active:t==="grades",onClick:()=>{s("grades"),m(!1)}}),o.jsx(Lr,{icon:C3,label:"Workflows",active:t==="workflows",onClick:()=>{s("workflows"),m(!1)}}),o.jsx("div",{className:"pt-4 pb-1",children:o.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:"Studio Command"})}),o.jsx(Lr,{icon:V3,label:"Stations",active:t==="stations",onClick:()=>{s("stations"),m(!1)}}),o.jsx(Lr,{icon:hs,label:"Badges",active:t==="badges",onClick:()=>{s("badges"),m(!1)}}),o.jsx(Lr,{icon:vE,label:"Toolbox",active:t==="toolbox",onClick:()=>{s("toolbox"),m(!1)}}),o.jsx("div",{className:"pt-4 pb-1",children:o.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:"Community"})}),o.jsx(Lr,{icon:kf,label:"Students",active:t==="makers",onClick:()=>{s("makers"),m(!1)}}),o.jsx("div",{className:"pt-4 pb-1",children:o.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:"Preview"})}),o.jsx(Lr,{icon:yu,label:"Student View",active:t==="preview",onClick:()=>{s("preview"),m(!1)}}),o.jsx("div",{className:"pt-4 pb-1",children:o.jsx("p",{className:"px-3 text-[10px] font-bold text-slate-500 uppercase tracking-wider",children:"System"})}),o.jsxs("button",{onClick:()=>{window.wipeAllData?window.wipeAllData():alert("Cleanup script not loaded. Please refresh.")},className:"w-full flex items-center gap-3 px-3 py-2 rounded-xl text-sm font-bold transition-all text-rose-400 hover:text-white hover:bg-rose-900/30",children:[o.jsx(Vs,{size:18}),"Reset Data"]})]}),o.jsx("div",{className:"p-4 border-t border-slate-800",children:o.jsxs("button",{onClick:async()=>{confirm("Sign out of Factory Command?")&&(await e(),window.location.reload())},className:"flex items-center gap-3 w-full p-3 rounded-xl hover:bg-slate-800 transition-colors text-slate-400 hover:text-white group",children:[o.jsx(pg,{size:20,className:"group-hover:text-red-400 transition-colors"}),o.jsx("span",{className:"font-bold",children:"Log Out"})]})})]}),o.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[o.jsxs("header",{className:"h-20 bg-white border-b border-indigo-50 flex items-center justify-between px-8 text-black shrink-0",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>m(!0),className:"md:hidden p-2 text-slate-500 hover:bg-slate-100 rounded-lg",children:o.jsx(Z3,{size:24})}),o.jsx("div",{className:"hidden md:block",children:o.jsx("h2",{className:"text-xl font-bold text-slate-800 capitalize",children:t.replace("-"," ")})})]}),o.jsxs("div",{className:"flex items-center gap-6",children:[o.jsxs("button",{className:"relative p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:[o.jsx(B5,{size:20}),o.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-white"})]}),o.jsx("div",{className:"h-8 w-[1px] bg-slate-200"}),o.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[o.jsxs("div",{className:"text-right hidden md:block",children:[o.jsx("p",{className:"text-sm font-bold text-slate-800",children:(n==null?void 0:n.name)||"Instructor"}),o.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Command Access"})]}),o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-indigo-600 to-cyan-500 flex items-center justify-center text-white font-bold shadow-lg shadow-indigo-500/20",children:((T=n==null?void 0:n.name)==null?void 0:T[0])||"I"})]})]})]}),o.jsxs("main",{className:"flex-1 overflow-y-auto w-full bg-slate-50 p-6 md:p-10",children:[t==="dashboard"&&o.jsx(iM,{onReviewProject:M=>l(M),onNavigate:M=>s(M),filterTemplateId:c,onClearFilter:()=>d(null)}),t==="projects"&&o.jsx(rM,{onViewSubmissions:k}),t==="grades"&&o.jsx(cM,{onCreateMission:E}),t==="workflows"&&o.jsx(tM,{}),t==="stations"&&o.jsx(sM,{}),t==="badges"&&o.jsx(nM,{}),t==="toolbox"&&o.jsx(aM,{}),t==="makers"&&o.jsx(F9,{onReviewProject:M=>l(M)}),t==="preview"&&o.jsx("div",{className:"h-full",children:o.jsx(fS,{studentId:(n==null?void 0:n.uid)||"",userRole:"instructor",onSelectProject:M=>console.log("Preview select:",M)})})]})]})]})};var Ro=(n=>(n.LOCKED="LOCKED",n.ACTIVE="ACTIVE",n.COMPLETED="COMPLETED",n))(Ro||{});const z9=()=>{const[n,e]=C.useState(()=>localStorage.getItem("sparkquest_remember_email")||""),[t,s]=C.useState(""),[i,l]=C.useState(""),[c,d]=C.useState(!1),[f,m]=C.useState(!1),g=async y=>{y.preventDefault(),l(""),d(!0);try{if(!Ts)throw new Error("Auth service undefined");await fI(Ts,n,t)}catch(v){console.error(v),l("Invalid email or password. Please try again.")}finally{d(!1)}};return o.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-slate-950 p-4 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0",children:[o.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-600/20 rounded-full blur-3xl animate-pulse"}),o.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-600/20 rounded-full blur-3xl animate-pulse delay-1000"})]}),o.jsxs("div",{className:"w-full max-w-md bg-slate-900/80 backdrop-blur-xl border border-slate-800 rounded-3xl p-8 shadow-2xl relative z-10 animate-in fade-in zoom-in duration-500",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mx-auto flex items-center justify-center mb-4 shadow-lg shadow-blue-500/20",children:o.jsx(Pc,{className:"text-white w-8 h-8"})}),o.jsx("h1",{className:"text-3xl font-black text-white mb-2 tracking-tight",children:"SparkQuest"}),o.jsx("p",{className:"text-slate-400",children:"Student Portal Login"})]}),i&&o.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl flex items-center gap-3 text-red-400 text-sm animate-in slide-in-from-top-2",children:[o.jsx(mE,{size:16}),i]}),o.jsxs("form",{onSubmit:g,className:"space-y-5",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider ml-1",children:"Email Address"}),o.jsxs("div",{className:"relative group z-10",children:[o.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-xl blur transition-opacity opacity-0 group-focus-within:opacity-100"}),o.jsx("input",{type:"email",value:n,onChange:y=>e(y.target.value),className:"relative w-full bg-slate-950 border border-slate-800 text-white px-4 py-3.5 rounded-xl outline-none focus:border-blue-500 transition-all placeholder:text-slate-600 z-20",placeholder:"student@makerlab.edu",required:!0,autoComplete:"email"})]})]}),o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider ml-1",children:"Password"}),o.jsxs("div",{className:"relative group z-10",children:[o.jsx("div",{className:"absolute inset-0 bg-blue-500/20 rounded-xl blur transition-opacity opacity-0 group-focus-within:opacity-100"}),o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 z-10",children:o.jsx(ph,{size:16})}),o.jsx("input",{type:f?"text":"password",value:t,onChange:y=>s(y.target.value),className:"relative w-full bg-slate-950 border border-slate-800 text-white pl-10 pr-12 py-3.5 rounded-xl outline-none focus:border-blue-500 transition-all placeholder:text-slate-600 z-20",placeholder:"",required:!0,autoComplete:"current-password"}),o.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-500 hover:text-white z-30 transition-colors",children:f?o.jsx(U0,{size:16}):o.jsx(yu,{size:16})})]})]})}),o.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-blue-600/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed mt-4",children:c?o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsxs(o.Fragment,{children:["Enter Studio ",o.jsx(ir,{size:18})]})})]})]})]})};async function B9(){if(!J){console.error(" Firestore not initialized");return}if(confirm(" DANGER: This will delete ALL student projects and templates. Are you sure?"))try{console.log(" Starting Full System Wipe...");const n=await st(je(J,"student_projects"));console.log(` Found ${n.size} student projects`);for(const t of n.docs)await Ps(Re(J,"student_projects",t.id));console.log(" Deleted all student projects");const e=await st(je(J,"project_templates"));console.log(` Found ${e.size} project templates`);for(const t of e.docs)await Ps(Re(J,"project_templates",t.id));console.log(" Deleted all project templates"),console.log(" System Cleaned Successfully")}catch(n){console.error(" Wipe failed:",n)}}window.wipeAllData=B9;console.log(" Cleanup script loaded.");console.log("   Run wipeAllData() in console to delete ALL projects & templates.");const $9=()=>{const{isActive:n,sessionUrl:e,sessionTool:t,timeLeft:s,endSession:i,formatTime:l}=L0(),{userProfile:c}=ms(),d=C.useRef(null),[f,m]=ds.useState(!1),[g,y]=C.useState(null),[v,_]=C.useState(!1);C.useEffect(()=>{if(!n||!e||!(c!=null&&c.credentials)){y(null);return}if(t){const q=c.credentials.find($=>$.service.toLowerCase()===t.toLowerCase());if(q){y(q);return}}const M=e.toLowerCase(),O=c.credentials.find(q=>{const $=q.service.toLowerCase();return M.includes($)||$==="tinkercad"&&M.includes("tinkercad")||$==="canva"&&M.includes("canva")||$==="scratch"&&M.includes("scratch")||$==="google"&&M.includes("google")||$==="onshape"&&M.includes("onshape")});y(O||null)},[e,n,c]);const k=M=>{navigator.clipboard.writeText(M)};if(!n||!e)return null;const E=M=>{if(!d.current)return;const O=d.current.getZoomLevel();M==="in"&&d.current.setZoomLevel(O+.5),M==="out"&&d.current.setZoomLevel(O-.5),M==="reset"&&d.current.setZoomLevel(0)},T=async()=>{if(d.current)try{const O=(await d.current.capturePage()).toDataURL();sessionStorage.setItem("temp_evidence",O),alert(" Screenshot Captured! You can upload it as evidence after ending the session.")}catch(M){console.error("Screenshot failed",M),alert("Failed to capture screenshot.")}};return o.jsxs("div",{className:"fixed inset-0 z-[9999] bg-slate-900 flex flex-col",children:[o.jsxs("div",{className:"h-[60px] bg-slate-900 border-b border-slate-700 flex items-center justify-between px-6 shrink-0 shadow-xl",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("span",{className:"font-bold text-lg bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent hidden sm:inline",children:"SparkQuest Session"}),o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-slate-800 rounded-full border border-slate-700",children:[o.jsx(fs,{className:"w-4 h-4 text-blue-400"}),o.jsx("span",{className:"font-mono text-lg font-bold tracking-widest text-blue-100",children:l(s)})]}),g&&o.jsxs("div",{className:"hidden lg:flex items-center gap-2 px-3 py-1 bg-cyan-950/40 border border-cyan-500/30 rounded-lg animate-in fade-in slide-in-from-top-2 ml-4",children:[o.jsxs("div",{className:"flex items-center gap-1.5 text-cyan-400 border-r border-cyan-500/20 pr-2 mr-1",children:[o.jsx(Kc,{className:"w-3.5 h-3.5"}),o.jsxs("span",{className:"text-xs font-bold uppercase tracking-wider",children:[g.service,":"]})]}),o.jsxs("div",{className:"flex items-center gap-1 bg-slate-900/50 rounded px-2 py-0.5",children:[o.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:"User"}),o.jsx("code",{className:"text-xs text-white font-mono",children:g.username}),o.jsx("button",{onClick:()=>k(g.username),className:"text-slate-400 hover:text-white ml-1",children:o.jsx(hg,{className:"w-3 h-3"})})]}),g.password&&o.jsxs("div",{className:"flex items-center gap-1 bg-slate-900/50 rounded px-2 py-0.5",children:[o.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase",children:"Pass"}),o.jsx("code",{className:"text-xs text-yellow-300 font-mono w-16 truncate",children:v?g.password:""}),o.jsx("button",{onClick:()=>_(!v),className:"text-slate-400 hover:text-white ml-1",children:v?o.jsx(U0,{className:"w-3 h-3"}):o.jsx(yu,{className:"w-3 h-3"})}),o.jsx("button",{onClick:()=>k(g.password),className:"text-slate-400 hover:text-white ml-1",children:o.jsx(hg,{className:"w-3 h-3"})})]})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-1 bg-slate-800 rounded-lg p-1 border border-slate-700",children:[o.jsx("button",{onClick:()=>E("out"),className:"p-1.5 hover:bg-slate-700 rounded text-slate-300 hover:text-white",title:"Zoom Out",children:o.jsx(sD,{size:16})}),o.jsx("button",{onClick:()=>E("reset"),className:"p-1.5 hover:bg-slate-700 rounded text-slate-300 hover:text-white",title:"Reset Zoom",children:o.jsx(Q3,{size:16})}),o.jsx("button",{onClick:()=>E("in"),className:"p-1.5 hover:bg-slate-700 rounded text-slate-300 hover:text-white",title:"Zoom In",children:o.jsx(Fn,{size:16})})]}),o.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors font-bold shadow-lg shadow-indigo-500/20 text-sm",children:[o.jsx(Y5,{className:"w-4 h-4"}),o.jsx("span",{className:"hidden md:inline",children:"Proof"})]}),o.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-bold text-sm",children:[o.jsx(lt,{className:"w-4 h-4"}),"End"]})]})]}),o.jsx(dS,{isOpen:f,onClose:()=>m(!1),highlightService:(g==null?void 0:g.service)||t||void 0}),o.jsx("div",{className:"flex-1 bg-white relative z-0",children:o.jsx("webview",{ref:d,src:e,className:"w-full h-full",allowpopups:!0})})]})},q9=()=>{const[n,e]=C.useState("none"),[t,s]=C.useState(10),[i,l]=C.useState(""),c=["Focus is the key ","You are a Maker, not a player ","Don't just play, CREATE! ","Your project is waiting for you ","Stay focused, make magic happen ","Tu es un Maker, pas un joueur ","Le futur se construit maintenant ","Concentration = Cration ","Reviens vite, ton projet t'attend ! ","Ne joue pas, INVENTE ! ","Builders change the world ","Reste focus, c'est ton moment "],d=()=>{try{const m=window.AudioContext||window.webkitAudioContext;if(m){const g=new m,y=g.createOscillator(),v=g.createGain();y.connect(v),v.connect(g.destination),y.type="sine",y.frequency.setValueAtTime(800,g.currentTime),v.gain.setValueAtTime(.1,g.currentTime),y.start(),y.stop(g.currentTime+.1)}}catch(m){console.error("Audio beep failed:",m)}};C.useEffect(()=>{let m,g,y;const _=()=>{clearTimeout(y),y=setTimeout(()=>{console.log(" Idle Timeout - Logging out to protect session"),window.location.reload()},3e5)},k=["mousedown","mousemove","keydown","scroll","touchstart"];k.forEach(O=>document.addEventListener(O,_)),_();const E=()=>{document.hidden?(console.log("App hidden - starting 30s timer"),m=setTimeout(()=>{T()},3e4)):(console.log("App visible - clearing timers"),clearTimeout(m),_())},T=()=>{var $;console.log(" 30s Background Limit Reached!");const O=c[Math.floor(Math.random()*c.length)];l(O),e("warning"),d(),($=window.sparkquest)!=null&&$.forceFocus&&window.sparkquest.forceFocus();let q=10;s(q),g=setInterval(()=>{q--,s(q),d(),q<=0&&(clearInterval(g),M())},1e3)},M=()=>{var O;console.log(" SHUTTING DOWN LAPTOP"),(O=window.sparkquest)!=null&&O.shutdown?window.sparkquest.shutdown():(alert(" SYSTEM WOULD SHUTDOWN NOW (Dev Mode)"),e("none"))};return document.addEventListener("visibilitychange",E),()=>{clearTimeout(m),clearTimeout(y),clearInterval(g),document.removeEventListener("visibilitychange",E),k.forEach(O=>document.removeEventListener(O,_))}},[n]);const f=()=>{e("none"),s(10)};return n==="none"?null:o.jsx("div",{className:"fixed inset-0 z-[99999] flex items-center justify-center bg-slate-900/95 backdrop-blur-xl animate-in fade-in duration-300",children:o.jsxs("div",{className:"flex flex-col items-center text-center space-y-8 p-8 max-w-4xl animate-bounce-slow",children:[o.jsx("div",{className:"w-32 h-32 bg-indigo-600 rounded-full flex items-center justify-center shadow-[0_0_80px_rgba(79,70,229,0.5)] animate-pulse",children:o.jsx(EE,{className:"w-16 h-16 text-white"})}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("h1",{className:"text-5xl md:text-7xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 uppercase tracking-tighter drop-shadow-2xl px-4 leading-tight",children:['"',i,'"']}),o.jsx("p",{className:"text-2xl text-slate-300 font-medium",children:"Focus on your creation."})]}),o.jsxs("div",{className:"bg-black/50 border border-slate-700 rounded-3xl p-8 w-full max-w-lg mt-8",children:[o.jsx("p",{className:"text-red-400 font-bold uppercase tracking-widest text-sm mb-4",children:"Automatic Shutdown In"}),o.jsx("div",{className:"text-9xl font-black text-white tabular-nums leading-none tracking-tighter",children:t})]}),o.jsx("button",{onClick:f,className:"px-12 py-6 bg-white text-slate-900 hover:bg-indigo-50 rounded-2xl font-black text-2xl hover:scale-105 active:scale-95 transition-all shadow-2xl hover:shadow-[0_0_40px_rgba(255,255,255,0.3)]",children:"I'M BACK TO WORK! "})]})})},G9=()=>{const{user:n}=ms(),[e,t]=C.useState(null);return C.useEffect(()=>{if(!n||!J)return;const s=Gt(je(J,"pickup_queue"),wt("studentId","==",n.uid),wt("status","in",["on_the_way","arrived","released"]),gu("createdAt","desc"),_f(1)),i=cn(s,l=>{if(l.empty)t(null);else{const c=l.docs[0];t({id:c.id,...c.data()})}});return()=>i()},[n]),e?o.jsx("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-md px-4 animate-in slide-in-from-top-4 fade-in duration-500",children:o.jsxs("div",{className:`
                p-4 rounded-2xl shadow-2xl border-4 backdrop-blur-xl flex items-center gap-4
                ${e.status==="on_the_way"?"bg-indigo-900/90 border-indigo-500 shadow-indigo-500/50":""}
                ${e.status==="arrived"?"bg-emerald-900/90 border-emerald-500 shadow-emerald-500/50 animate-pulse":""}
                ${e.status==="released"?"bg-purple-900/90 border-purple-500 shadow-purple-500/50":""}
            `,children:[o.jsxs("div",{className:`p-3 rounded-full shrink-0 ${e.status==="on_the_way"?"bg-indigo-500 text-white":e.status==="arrived"?"bg-emerald-500 text-white":"bg-purple-500 text-white"}`,children:[e.status==="on_the_way"&&o.jsx(F0,{size:32}),e.status==="arrived"&&o.jsx(fs,{size:32}),e.status==="released"&&o.jsx(r3,{size:32})]}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h3",{className:"font-black text-white text-lg leading-tight uppercase tracking-wider",children:[e.status==="on_the_way"&&"Parent is coming!",e.status==="arrived"&&"Parent is Here!",e.status==="released"&&"Good to Go!"]}),o.jsxs("p",{className:"text-white/80 font-bold text-sm",children:[e.status==="on_the_way"&&`${e.pickerName||"Parent"} is on the way.`,e.status==="arrived"&&"Please pack up and get ready.",e.status==="released"&&"See you next time! "]})]})]})}):null},W9=()=>{const{activeSession:n,elapsedSeconds:e,startSession:t,endSession:s}=O0(),i=l=>{const c=Math.floor(l/3600),d=Math.floor(l%3600/60),f=l%60;return c>0?`${c}:${d.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`:`${d}:${f.toString().padStart(2,"0")}`};return n?o.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-4",children:[o.jsxs("div",{className:"flex items-center gap-2 px-5 py-3 bg-slate-900/90 border border-green-500/30 rounded-xl backdrop-blur-sm",children:[o.jsx(fs,{className:"w-5 h-5 text-green-400 animate-pulse"}),o.jsx("span",{className:"text-white font-mono text-xl font-bold tabular-nums",children:i(e)})]}),o.jsxs("button",{onClick:s,className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-red-500 to-rose-500 hover:from-red-600 hover:to-rose-600 text-white font-black rounded-2xl shadow-2xl shadow-red-500/30 hover:scale-105 transition-all group",children:[o.jsx(TD,{className:"w-6 h-6 group-hover:scale-110 transition-transform",fill:"white"}),o.jsx("span",{className:"text-lg",children:"End Session"})]})]}):o.jsxs("button",{onClick:t,className:"fixed bottom-6 right-6 z-50 flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-black rounded-2xl shadow-2xl shadow-green-500/30 hover:scale-105 transition-all group",children:[o.jsx(Ya,{className:"w-6 h-6 group-hover:scale-110 transition-transform",fill:"white"}),o.jsx("span",{className:"text-lg",children:"Start Focus Session"})]})},H9=({onComplete:n})=>{const[e,t]=C.useState([]),[s,i]=C.useState(0),l=[{text:"Initializing Core Systems...",icon:xE},{text:"Verifying Security Protocols...",icon:wD},{text:"Connecting to Maker Network...",icon:XD},{text:"Calibrating Fabrication Modules...",icon:bu},{text:"Access Granted.",icon:gE}];return C.useEffect(()=>{let c=0;const d=setInterval(()=>{if(c>=l.length){clearInterval(d),setTimeout(n,1e3);return}const f=l[c];t(m=>[...m,f.text]),i((c+1)/l.length*100),c++},800);return()=>clearInterval(d)},[]),o.jsxs("div",{className:"h-screen w-full bg-black text-green-500 font-mono flex flex-col items-center justify-center p-8 relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:o.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[linear-gradient(rgba(0,255,0,0.1)_1px,transparent_1px),linear-gradient(90deg,rgba(0,255,0,0.1)_1px,transparent_1px)] bg-[size:20px_20px]"})}),o.jsxs("div",{className:"max-w-2xl w-full z-10 space-y-8",children:[o.jsxs(ar.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center gap-4 text-3xl font-bold border-b border-green-900 pb-4",children:[o.jsx(RD,{size:32}),o.jsx("span",{children:"SPARKQUEST_OS v2.0"})]}),o.jsx("div",{className:"space-y-2 h-64 overflow-hidden border border-green-900/50 p-4 rounded-lg bg-black/50 backdrop-blur",children:o.jsx(Ek,{children:e.map((c,d)=>o.jsxs(ar.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-3 text-lg",children:[o.jsx("span",{className:"text-green-800",children:">"}),c]},d))})}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-sm uppercase tracking-widest opacity-60",children:[o.jsx("span",{children:"System Load"}),o.jsxs("span",{children:[Math.round(s),"%"]})]}),o.jsx("div",{className:"h-2 bg-green-900/30 rounded-full overflow-hidden",children:o.jsx(ar.div,{className:"h-full bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.8)]",initial:{width:"0%"},animate:{width:`${s}%`},transition:{duration:.5}})})]})]})]})};Ro.ACTIVE,Ro.LOCKED,Ro.LOCKED,Ro.LOCKED,Ro.LOCKED,Ro.LOCKED;const K9=()=>{const{user:n,userProfile:e,signInWithToken:t,signOut:s,loading:i}=ms(),{fetchMission:l,assignment:c,project:d,loading:f,error:m,isConnected:g}=V4();C.useEffect(()=>{console.log("App Version: Fixed hooks")},[]);const[y,v]=C.useState("HOME"),[_,k]=C.useState(null),[E,T]=C.useState(()=>localStorage.getItem("sparkquest_boot_complete")==="true"),[M]=C.useState(()=>new URLSearchParams(window.location.search).get("projectId"));C.useEffect(()=>{const j=new URLSearchParams(window.location.search).get("token");j&&(console.log("Token detected, attempting sign in..."),t(j).then(()=>{console.log("Sign in promise resolved. Waiting for auth state change...")}).catch(V=>{console.error("Auth Token Error",V)}))},[]),C.useEffect(()=>{if(n&&new URLSearchParams(window.location.search).get("token")){console.log("User authenticated, cleaning up URL token.");const j=new URL(window.location.href);j.searchParams.delete("token"),window.history.replaceState({},document.title,j.toString())}},[n]),C.useEffect(()=>{if(!(!n||i)){if(console.log(" Routing Check. User:",n.email,"Role:",e==null?void 0:e.role,"Current View:",y),c&&d){v("WIZARD");return}if((e==null?void 0:e.role)==="instructor"||(e==null?void 0:e.role)==="admin"){console.log(" Routing to FACTORY (Instructor/Admin)"),v("FACTORY");return}console.log(" Routing to HOME (Unified View)"),v("HOME")}},[n,e,c,d,i]),C.useEffect(()=>{if(n&&(_||M)){if((e==null?void 0:e.role)==="instructor"||(e==null?void 0:e.role)==="admin")return;const P=_||M;console.log(" [SparkQuest] Loading Mission:",P),l(n.uid,P||void 0)}},[_,M,n,e]);const O=async()=>{await s(),window.location.reload()},[q,$]=C.useState(()=>localStorage.getItem("erp_url")||void 0||"http://localhost:5173"),[Q,K]=C.useState(!1);return E?i||f&&y==="WIZARD"?o.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-slate-900 text-white gap-4",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),o.jsx("div",{className:"font-bold text-blue-400 tracking-widest uppercase text-sm animate-pulse",children:"Initializing System..."})]}):n?y==="FACTORY"?o.jsx(U9,{}):y==="HOME"&&!d?o.jsx(fS,{studentId:n.uid,onSelectProject:P=>{k(P)},onLogout:O}):m?o.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-slate-900 text-white p-8 text-center space-y-6",children:[o.jsx("h1",{className:"text-4xl font-black text-red-500",children:"Mission Error"}),o.jsx("p",{className:"text-lg text-slate-300",children:m}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-bold transition-colors",children:"Reboot System"})]}):o.jsx("div",{className:"h-screen w-full flex flex-col bg-slate-900 overflow-hidden relative",children:o.jsx(I5,{assignment:c,initialProject:d,isConnected:g,onExit:()=>{k(null),v("HOME"),window.location.href=window.location.pathname}})}):new URLSearchParams(window.location.search).get("token")?o.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-slate-950 text-white p-8 text-center space-y-6",children:[o.jsx("div",{className:"w-16 h-16 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin"}),o.jsx("h1",{className:"text-2xl font-bold text-emerald-400",children:"Verifying Identity..."}),o.jsx("p",{className:"text-slate-400",children:"Please wait while we log you in."})]}):o.jsx(z9,{}):o.jsx(H9,{onComplete:()=>{localStorage.setItem("sparkquest_boot_complete","true"),T(!0)}})};class Q9 extends ds.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Uncaught error:",e,t)}render(){var e;return this.state.hasError?o.jsxs("div",{className:"h-screen w-full flex flex-col items-center justify-center bg-slate-900 text-white p-8 text-center space-y-6",children:[o.jsx("h1",{className:"text-4xl font-black text-red-500",children:"System Failure"}),o.jsx("p",{className:"text-lg text-slate-300 max-w-2xl bg-slate-800 p-4 rounded-xl font-mono text-sm text-left overflow-auto max-h-64",children:(e=this.state.error)==null?void 0:e.toString()}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-3 bg-red-600 hover:bg-red-700 rounded-xl font-bold transition-colors",children:"Reboot System"}),o.jsx("button",{onClick:()=>{localStorage.clear(),sessionStorage.clear(),window.location.reload()},className:"px-8 py-3 bg-slate-700 hover:bg-slate-600 rounded-xl font-bold transition-colors text-sm",children:"Emergency Reset (Logout)"})]}):this.props.children}}const Y9=()=>o.jsx(Q9,{children:o.jsx(M4,{children:o.jsx(N5,{children:o.jsx(E5,{children:o.jsxs(b5,{children:[o.jsx($9,{}),o.jsx(q9,{}),o.jsx(G9,{}),o.jsx(W9,{}),o.jsx(K9,{})]})})})})}),pS=document.getElementById("root");if(!pS)throw new Error("Could not find root element to mount to");const X9=IT.createRoot(pS);X9.render(o.jsx(ds.StrictMode,{children:o.jsx(Y9,{})}));
